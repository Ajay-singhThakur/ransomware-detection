"use strict";(self.webpackChunkipfs_webui=self.webpackChunkipfs_webui||[]).push([[937],{1913:(e,t,n)=>{n.d(t,{B:()=>m,U:()=>u});var a=n(37566),s=n(65043),r=n(12820),l=n(27463),o=n(70579);function c(e,t){switch(t.type){case"FETCH_START":return(0,a.A)((0,a.A)({},e),{},{isLoading:!0,hasError:!1});case"FETCH_SUCCESS":return(0,a.A)((0,a.A)({},e),{},{identity:t.payload.identity,isLoading:!1,hasError:!1,lastSuccess:t.payload.timestamp});case"FETCH_ERROR":return(0,a.A)((0,a.A)({},e),{},{isLoading:!1,hasError:!0});default:return e}}const i={identity:void 0,isLoading:!1,hasError:!1,lastSuccess:void 0},d=(0,s.createContext)(void 0);d.displayName="IdentityContext";function m(){const e=(0,s.useContext)(d);if(void 0===e)throw new Error("useIdentity must be used within an IdentityProvider");return e}const u=e=>{var t;let{children:n}=e;const[a,m]=(0,s.useReducer)(c,i),u=(0,l.O0)("selectIsNodeInfoOpen")||!1,p=(0,l.O0)("selectIpfsConnected")||!1,h=(0,l.O0)("selectIpfs"),f=(0,s.useRef)(a.identity);(0,s.useEffect)((()=>{a.identity&&(f.current=a.identity)}),[a.identity]);const b=null!==(t=a.identity)&&void 0!==t?t:f.current,v=null==b&&a.isLoading,y=null!=b&&a.isLoading,g=(0,s.useCallback)((async()=>{if(p&&h)try{m({type:"FETCH_START"});const e=await h.id();m({type:"FETCH_SUCCESS",payload:{identity:e,timestamp:Date.now()}})}catch(e){console.error("Failed to fetch identity:",e),m({type:"FETCH_ERROR"})}}),[h,p]);(0,s.useEffect)((()=>{p&&!a.isLoading&&(a.identity&&a.lastSuccess||g())}),[p,g,a.isLoading,a.identity,a.lastSuccess]),(0,s.useEffect)((()=>{if(!u||!p||!a.lastSuccess)return()=>{};const e=Date.now()-a.lastSuccess;if(e<5e3){const t=setTimeout(g,5e3-e);return()=>clearTimeout(t)}return g(),()=>{}}),[u,p,a.lastSuccess,g]);const w=(0,s.useMemo)((()=>null==(null===b||void 0===b?void 0:b.agentVersion)?null:(0,r.$)(b.agentVersion)),[b]),E=(0,s.useMemo)((()=>({identity:b,isLoading:v,isRefreshing:y,hasError:a.hasError,lastSuccess:a.lastSuccess,refetch:g,agentVersionObject:w})),[b,v,y,a.hasError,a.lastSuccess,g,w]);return(0,l.OG)("identity",E),(0,o.jsx)(d.Provider,{value:E,children:n})}},6454:(e,t,n)=>{n.d(t,{A:()=>d});var a=n(65043),s=n(16470),r=n(27463),l=n(30446),o=n(39909),c=n(70579);const i=e=>null==e?"":"string"===typeof e?e:JSON.stringify(e),d=e=>{let{checkValidAPIAddress:t=o.v0}=e;const{t:n}=(0,s.Bd)("app"),d=(0,r.O0)("selectIpfsApiAddress"),m=(0,r.O0)("selectIpfsInitFailed"),u=(0,r.O0)("doUpdateIpfsApiAddress"),[p,h]=(0,a.useState)(i(d)),f=!t(p),[b,v]=(0,a.useState)(f||m),[y,g]=(0,a.useState)(f);(0,a.useEffect)((()=>{v(m)}),[y,m]),(0,a.useEffect)((()=>{const e=t(p);g(e),v(!e)}),[p,t]);const[w,E]=(0,a.useState)(!1),N=(0,a.useCallback)((async e=>{if(e.preventDefault(),null!=u&&!w){E(!0);try{await u(p)}finally{E(!1)}}}),[u,p,w]),x=(0,a.useCallback)((e=>{"Enter"!==e.key||w||N(e)}),[N,w]);return(0,c.jsxs)("form",{onSubmit:N,children:[(0,c.jsx)("input",{id:"api-address","aria-label":n("terms.apiAddress"),placeholder:n("apiAddressForm.placeholder"),type:"text",className:"w-100 lh-copy monospace f5 pl1 pv1 mb2 charcoal input-reset ba b--black-20 br1 ".concat(b?"focus-outline-red b--red-muted":"focus-outline-green b--green-muted"),onChange:e=>h(e.target.value),onKeyDown:x,value:p}),(0,c.jsx)("div",{className:"tr",children:(0,c.jsx)(l.A,{minWidth:100,className:"mt2 mt0-l ml2-l tc",disabled:!y||p===d||w,children:n("actions.submit")})})]})}},12820:(e,t,n)=>{n.d(t,{$:()=>r});const a={kubo:{url:"https://github.com/ipfs/kubo"}},s=e=>{const t=a[e];return t?t.url:null};function r(e){const t=e.split("/").filter((e=>!!e)),n=t[0],a=s(n);return{name:n,version:t[1],suffix:t.slice(2).join("/"),url:a}}},22917:(e,t,n)=>{n.d(t,{A:()=>c});var a=n(65043),s=n(13026),r=n(39412);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l.apply(null,arguments)}function o(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c=e=>{class t extends a.Component{constructor(){super(...arguments),o(this,"handleJoyrideCallback",(e=>{const{doDisableTours:t}=this.props,{action:n,status:a}=e;"close"!==n&&a!==r.XQ.FINISHED||t()}))}render(){return a.createElement(e,l({handleJoyrideCallback:this.handleJoyrideCallback},this.props))}}return(0,s.N)("doDisableTours",t)}},28253:(e,t,n)=>{n.d(t,{A:()=>r});var a=n(37566),s=(n(65043),n(70579));const r=e=>(0,s.jsx)("svg",(0,a.A)((0,a.A)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"},e),{},{children:(0,s.jsx)("path",{d:"M82.84 71.14 55.06 23a5.84 5.84 0 0 0-10.12 0L17.16 71.14a5.85 5.85 0 0 0 5.06 8.77h55.56a5.85 5.85 0 0 0 5.06-8.77m-30.1-.66h-5.48V65h5.48zm0-10.26h-5.48V38.46h5.48z"})}))},62431:(e,t,n)=>{n.d(t,{A:()=>r});var a=n(65043),s=n(45005);const r=e=>{let{value:t}=e;if(!t)return null;const n=(0,s.HZ)(t.toString()),r=n.protoNames().concat(["ipfs","p2p"]),l=n.toString().split("/");return a.createElement("div",{className:"charcoal-muted monospace"},l.map(((e,t)=>a.createElement("span",{key:t},a.createElement("span",{className:r.includes(e)?"force-select":"force-select charcoal"},e),t<l.length-1?"/":""))))}},62914:(e,t,n)=>{n.d(t,{A:()=>b});var a=n(65043),s=n(16470),r=n(64600),l=n.n(r),o=n(6454),c=n(10091),i=n(93031),d=n(28253),m=n(27463),u=n(70579);const p="unix",h="windowsPS",f="windowsCMD",b=()=>{const{t:e}=(0,s.Bd)("welcome"),t=(0,m.O0)("selectIsSameOrigin"),[n,r]=(0,a.useState)(p),b=["http://localhost:3000","http://127.0.0.1:5001","https://webui.ipfs.io"],v=window.location.origin,y=-1===b.indexOf(v);return(0,u.jsxs)(c.A,{className:"pv3 ph4 lh-copy charcoal",children:[(0,u.jsxs)("div",{className:"flex flex-wrap items-center",children:[(0,u.jsx)(d.A,{style:{height:76},className:"fill-red mr",role:"presentation"}),(0,u.jsx)("h1",{className:"montserrat fw4 charcoal ma0 f3 red",children:e("app:status.couldNotConnect")})]}),(0,u.jsx)(s.x6,{i18nKey:"notConnected.paragraph1",t:e,children:(0,u.jsxs)("p",{className:"fw6 mb3",children:["Check out the installation guide in the ",(0,u.jsx)("a",{className:"link blue",href:"https://docs.ipfs.tech/install/command-line-quick-start/",target:"_blank",rel:"noopener noreferrer",children:"IPFS Docs"}),", or try these common fixes:"]})}),(0,u.jsxs)("ol",{className:"pl3 pt2",children:[(0,u.jsx)(s.x6,{i18nKey:"notConnected.paragraph2",t:e,children:(0,u.jsx)("li",{className:"mb3",children:"Is your IPFS daemon running? Try starting or restarting Kubo from your terminal:"})}),(0,u.jsxs)(i.A,{title:"Any Shell",children:[(0,u.jsxs)("code",{className:"db",children:[(0,u.jsx)("b",{className:"no-select",children:"$ "}),"ipfs daemon"]}),(0,u.jsx)("code",{className:"db",children:"Initializing daemon..."}),(0,u.jsx)("code",{className:"db",children:"RPC API server listening on /ip4/127.0.0.1/tcp/5001"})]}),!t&&(0,u.jsxs)("div",{children:[(0,u.jsx)(s.x6,{i18nKey:"notConnected.paragraph3",t:e,children:(0,u.jsxs)("li",{className:"mb3 mt4",children:["Is your Kubo RPC API configured to allow ",(0,u.jsx)("a",{className:"link blue",href:"https://github.com/ipfs/ipfs-webui#configure-kubo-rpc-api-cors-headers",children:"cross-origin (CORS) requests"}),"? If not, run these commands and then start your daemon from the terminal:"]})}),(0,u.jsxs)("div",{className:"br1 overflow-hidden",children:[(0,u.jsxs)("div",{className:"f7 mb0 sans-serif charcoal pv1 pl2 bg-black-20 flex items-center overflow-x-auto",children:[(0,u.jsx)("button",{onClick:()=>r(p),className:l()("pointer mr3 ttu tracked",n===p&&"fw7"),children:"Unix & MacOS"}),(0,u.jsx)("button",{onClick:()=>r(h),className:l()("pointer mr3 ttu tracked",n===h&&"fw7"),children:"Windows Powershell"}),(0,u.jsx)("button",{onClick:()=>r(f),className:l()("pointer ttu tracked",n===f&&"fw7"),children:"Windows CMD"})]}),(0,u.jsxs)("div",{className:"bg-black-70 snow pa2 f7 lh-copy monospace nowrap overflow-x-auto",children:[n===p&&(0,u.jsxs)("div",{children:[(0,u.jsxs)("code",{className:"db",children:[(0,u.jsx)("b",{className:"no-select",children:"$ "}),"ipfs config --json API.HTTPHeaders.Access-Control-Allow-Origin '[",y&&'"'.concat(v,'", '),'"',b.join('", "'),"\"]'"]}),(0,u.jsxs)("code",{className:"db",children:[(0,u.jsx)("b",{className:"no-select",children:"$ "}),'ipfs config --json API.HTTPHeaders.Access-Control-Allow-Methods \'["PUT", "POST"]\'']})]}),n===h&&(0,u.jsxs)("div",{children:[(0,u.jsxs)("code",{className:"db",children:[(0,u.jsx)("b",{className:"no-select",children:"$ "}),"ipfs config --json API.HTTPHeaders.Access-Control-Allow-Origin '[",y&&'\\"'.concat(v,'\\", '),'\\"',b.join('\\", \\"'),"\\\"]'"]}),(0,u.jsxs)("code",{className:"db",children:[(0,u.jsx)("b",{className:"no-select",children:"$ "}),'ipfs config --json API.HTTPHeaders.Access-Control-Allow-Methods \'[\\"PUT\\", \\"POST\\"]\'']})]}),n===f&&(0,u.jsxs)("div",{children:[(0,u.jsxs)("code",{className:"db",children:[(0,u.jsx)("b",{className:"no-select",children:"$ "}),'ipfs config --json API.HTTPHeaders.Access-Control-Allow-Origin "[',y&&'"""'.concat(v,'""", '),'"""',b.join('""", """'),'"""]"']}),(0,u.jsxs)("code",{className:"db",children:[(0,u.jsx)("b",{className:"no-select",children:"$ "}),'ipfs config --json API.HTTPHeaders.Access-Control-Allow-Methods "["""PUT""", """POST"""]"']})]})]})]})]}),(0,u.jsx)(s.x6,{i18nKey:"notConnected.paragraph4",t:e,children:(0,u.jsxs)("li",{className:"mt4 mb3",children:["Is your Kubo RPC on a port other than 5001? If your node is configured with a ",(0,u.jsx)("a",{className:"link blue",href:"https://github.com/ipfs/kubo/blob/master/docs/config.md#addresses",target:"_blank",rel:"noopener noreferrer",children:"custom RPC API address"}),", enter it here."]})}),(0,u.jsx)(o.A,{})]})]})}},89937:(e,t,n)=>{n.r(t),n.d(t,{default:()=>me});var a=n(65043),s=n(70930),r=n(16470),l=n(13026),o=n(39412),c=n(1913),i=n(41684);const d=(0,r.CI)("status")((e=>{let{t:t,peersCount:n,repoSize:s}=e;const l=(0,i.Xe)(s||0);return a.createElement("header",null,a.createElement("h1",{className:"montserrat fw2 f3 charcoal ma0 pt0 pb2"},a.createElement(r.x6,{i18nKey:"app:status.connectedToIpfs",t:t},"Connected to IPFS")),a.createElement("p",{className:"montserrat fw4 f5 ma0 pb3 lh-copy"},a.createElement("span",{className:"db dib-ns"},a.createElement("a",{className:"link blue",href:"#/files"},t("StatusConnected.repoSize",{repoSize:l}))),a.createElement("span",{className:"dn di-ns gray"}," \u2014 "),a.createElement("span",{className:"db mt1 mt0-ns dib-ns"},a.createElement("a",{className:"link blue",href:"#/peers"},t("StatusConnected.peersCount",{peersCount:n.toString()})))))})),m=(0,l.N)("selectPeersCount","selectRepoSize",d);var u=n(93031),p=n(10091);const h=(0,r.CI)("status")((e=>{let{t:t}=e;return a.createElement(p.A,{className:"mt3 pa3"},a.createElement("h2",{className:"ttu yellow tracked f6 fw4 aqua mt0 mb4"},t("bandwidthStats")),a.createElement("p",{className:"mw6 mr2 lh-copy charcoal f6"},a.createElement(r.x6,{i18nKey:"bandwidthStatsDisabled",t:t},"You have the bandwidth metrics disabled. You can enable them by typing the command bellow or changing the key ",a.createElement("code",null,"Swarm.DisableBandwidthMetrics")," to ",a.createElement("code",null,"false")," on",a.createElement("a",{className:"link blue",href:"#/settings"},"Settings"),". Then, you need to restart the IPFS daemon to apply the changes.")),a.createElement(u.A,{className:"mw6"},a.createElement("code",{className:"db"},a.createElement("b",{className:"no-select"},"$ "),"ipfs config --json Swarm.DisableBandwidthMetrics false")))}));var f=n(62914),b=n(12820),v=n(70579);const y=e=>{let{name:t,url:n}=e;return null==n?(0,v.jsx)(v.Fragment,{children:t}):(0,v.jsx)("a",{href:n,className:"link blue",target:"_blank",rel:"noopener noreferrer",children:t})},g=e=>{let{version:t,url:n}=e;if(!t)return(0,v.jsx)(v.Fragment,{});if(null==n)return(0,v.jsxs)(v.Fragment,{children:[" v",t]});const a="".concat(n,"/releases/tag/v").concat(t);return(0,v.jsxs)("a",{href:a,className:"link blue ml2",target:"_blank",rel:"noopener noreferrer",children:["v",t]})},w=e=>{let{agentVersion:t}=e;if(!t)return(0,v.jsx)("span",{children:"Unknown"});const{name:n,version:a,suffix:s,url:r}=(0,b.$)(t);return(0,v.jsxs)("span",{children:[(0,v.jsx)(y,{name:n,url:r}),(0,v.jsx)(g,{version:a,url:r}),s?(0,v.jsxs)("span",{children:[" ",s]}):""]})},E=["children","className"];function N(){return N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},N.apply(null,arguments)}const x=e=>{let{term:t,desc:n,advanced:s,termWidth:r}=e;return a.createElement("div",{className:"dt dt--fixed pt1 mw9 lh-copy"},a.createElement(j,{width:r},t),a.createElement(C,{advanced:s},n))},j=e=>{let{children:t,width:n=100}=e;return a.createElement("dt",{className:"db ma0 pb1 pb0-ns dtc-ns silver tracked ttu f7",style:{width:n}},t)},C=e=>{let{children:t,advanced:n}=e;return a.createElement("dd",{className:"db dtc-ns ma0 charcoal monospace ".concat(n?"word-wrap pa2 f7 bg-white-80":"truncate f7 f6-ns")},t)},S=e=>{let{children:t,className:n="ma0"}=e,s=function(e,t){if(null==e)return{};var n,a,s=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}(e,E);return a.createElement("dl",N({className:n},s),t)},A=()=>{var e,t,n;const{identity:s}=(0,c.B)(),{t:l}=(0,r.Bd)("app");return a.createElement(S,null,a.createElement(x,{term:l("terms.peerId"),desc:null!==(e=null===s||void 0===s||null===(t=s.id)||void 0===t?void 0:t.toString())&&void 0!==e?e:l("loading")}),a.createElement(x,{term:l("terms.agent"),desc:a.createElement(w,{agentVersion:null!==(n=null===s||void 0===s?void 0:s.agentVersion)&&void 0!==n?n:l("loading")})}),a.createElement(x,{term:l("terms.ui"),desc:"c14b38a"}))};var P=n(45005),O=n(62431),k=n(56815);const I={"ipfs-companion":{url:"https://github.com/ipfs/ipfs-companion"},kubo:{url:"https://github.com/ipfs/kubo"}},T=e=>{let{name:t}=e;const n=(e=>I[e]||{name:e})(t);return n.url?a.createElement("a",{href:n.url,className:"link blue",target:"_blank",rel:"noopener noreferrer"},n.name||t):a.createElement("span",null,n.name||t)};function D(e){try{return(0,P.HZ)(e),!0}catch(t){return!1}}const F=(0,l.N)("selectIpfsProvider","selectIpfsApiAddress","selectGatewayUrl","selectIsNodeInfoOpen","doSetIsNodeInfoOpen",(0,r.CI)("status")((e=>{let{t:t,ipfsProvider:n,ipfsApiAddress:s,gatewayUrl:r,isNodeInfoOpen:l,doSetIsNodeInfoOpen:o}=e;const{identity:i,isLoading:d}=(0,c.B)(),m=t("loading"),u=(0,a.useMemo)((()=>d||null==(null===i||void 0===i?void 0:i.addresses)?m:[...new Set(i.addresses)].sort().map((e=>a.createElement(O.A,{key:e,value:e})))),[null===i||void 0===i?void 0:i.addresses,d,m]),p=(0,a.useMemo)((()=>{var e;return d?m:null!==(e=null===i||void 0===i?void 0:i.publicKey)&&void 0!==e?e:null}),[null===i||void 0===i?void 0:i.publicKey,d,m]);return a.createElement(k.A,{className:"mt3 f6",summaryText:t("app:terms.advanced"),open:l,onClick:e=>{o(!l),e.preventDefault()}},a.createElement(S,{className:"mt3"},a.createElement(x,{advanced:!0,term:t("app:terms.gateway"),desc:r}),"httpClient"===n?a.createElement(x,{advanced:!0,term:t("app:terms.api"),desc:a.createElement("div",{id:"http-api-address",className:"flex items-center"},D(s)?a.createElement(O.A,{value:s}):(h=s,"string"!==typeof h?t("customApiConfig"):h),a.createElement("a",{className:"ml2 link blue sans-serif fw6",href:"#/settings"},t("app:actions.edit")))}):a.createElement(x,{advanced:!0,term:t("app:terms.api"),desc:a.createElement(T,{name:n})}),a.createElement(x,{advanced:!0,term:t("app:terms.addresses"),desc:u}),a.createElement(x,{advanced:!0,term:t("app:terms.publicKey"),desc:p})));var h})));var B=n(97950),M=n(70139),R=n(65173),H=n.n(R),_=n(70678),L=n.n(_);const U=["children"];function K(){return K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},K.apply(null,arguments)}const $=e=>{let{children:t}=e,n=function(e,t){if(null==e)return{};var n,a,s=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}(e,U);return a.createElement("h2",K({className:"ttu tracked f6 fw4 teal mt0 mb4"},n),t)};function V(){return V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},V.apply(null,arguments)}function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){W(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const J={standard:"iec",base:2,bits:!1},q=L().partial(z({round:1,exponent:2},J)),G=L().partial(z({round:0,output:"array"},J)),Z={defaultFontFamily:"'Inter UI', system-ui, sans-serif",responsive:!0,tooltips:{mode:"x",position:"nearest",enabled:!1},hover:{mode:"index"},scales:{xAxes:[{type:"time",time:{minUnit:"second"}}],yAxes:[{stacked:!0,ticks:{callback:e=>q(e)+"/s",suggestedMax:2e5,maxTicksLimit:5}}]},legend:{reverse:!0,display:!0,position:"bottom"}},X=e=>{let{t:t,bw:n,show:s,pos:r}=e;return s?a.createElement("div",{className:"sans-serif absolute bg-white pa2 br3",style:{top:"".concat(r.top+window.scrollY,"px"),left:"".concat(r.left,"px"),transform:"translateY(calc(-100% - 20px))",filter:"drop-shadow(2px 2px 8px rgba(0, 0, 0, 0.2))"}},a.createElement("div",{className:"absolute",style:{bottom:"-14px",left:"0",width:"0",height:"0",borderTop:"20px solid white",borderRight:"20px solid transparent"}}),a.createElement("div",{className:"dt"},a.createElement("div",{className:"dt-row"},a.createElement("span",{className:"dtc f7 charcoal tr"},t("app:terms.in").toLowerCase(),":"),a.createElement("span",{className:"f4 ml1 charcoal-muted"},n.in[0]),a.createElement("span",{className:"f7 charcoal-muted"},n.in[1],"/s")),a.createElement("div",{className:"dt-row"},a.createElement("span",{className:"dtc f7 charcoal tr"},t("app:terms.out").toLowerCase(),":"),a.createElement("span",{className:"f4 ml1 charcoal-muted"},n.out[0]),a.createElement("span",{className:"f7 charcoal-muted"},n.out[1],"/s")))):null};class Q extends a.Component{constructor(){super(...arguments),W(this,"getTooltip",(e=>{let t=document.getElementById("node_bw_chart");return t||(t=document.createElement("div"),t.id="node_bw_chart",document.body.appendChild(t)),B.render(a.createElement(X,{t:e,show:!1}),t),t})),W(this,"data",(()=>{const{t:e,nodeBandwidthChartData:t}=this.props;return function(n){const a=n.getContext("2d"),s=a.createLinearGradient(n.width/2,0,n.width/2,n.height);s.addColorStop(0,"#70c5cd"),s.addColorStop(1,"#c6f1f3");const r=a.createLinearGradient(n.width/2,0,n.width/2,n.height/2);return r.addColorStop(0,"#f19237"),r.addColorStop(1,"#f9d1a6"),{datasets:[{label:e("app:terms.out"),data:t.out,borderColor:r,backgroundColor:r,pointRadius:2,cubicInterpolationMode:"monotone"},{label:e("app:terms.in"),data:t.in,borderColor:s,backgroundColor:s,pointRadius:2,cubicInterpolationMode:"monotone"}]}}}))}componentDidMount(){this.tooltip=document.createElement("div"),this.tooltip.id="node_bw_chart",document.body.appendChild(this.tooltip)}componentDidUpdate(){B.render(a.createElement(X,{show:!1}),this.tooltip)}render(){const{t:e,animatedPoints:t,nodeBandwidthChartData:n}=this.props;if(0===n.in.length)return null;const s=this.tooltip,r=z(z({},Z),{},{tooltips:z(z({},Z.tooltips),{},{custom:function(t){const n={show:!0};if(0===t.opacity)n.show=!1;else{n.bw={out:G(Math.abs(t.dataPoints[0].yLabel)),in:G(Math.abs(t.dataPoints[1].yLabel))};const e=this._chart.canvas.getBoundingClientRect();n.pos={left:e.left+t.caretX,top:e.top+t.caretY}}B.render(a.createElement(X,V({t:e},n)),s)}}),animation:{duration:n.in.length<=t?1e3:0}});return a.createElement("div",null,a.createElement($,null,e("bandwidthOverTime")),a.createElement(M.N1,{data:this.data(),options:r}))}}W(Q,"propTypes",{nodeBandwidthChartData:H().object.isRequired,animatedPoints:H().number}),W(Q,"defaultProps",{animatedPoints:500});const ee=(0,l.N)("selectNodeBandwidthChartData",(0,r.CI)("status")(Q)),te=e=>2*e*Math.PI;const ne=function(e){let{total:t=100,title:n,filled:s=0,noSpeed:r=!1,color:l="#FF6384"}=e;const o={options:{legend:{display:!1},tooltips:{enabled:!1},maintainAspectRatio:!1,cutoutPercentage:80,rotation:(c=.7,(1-c+.5)*Math.PI),circumference:te(.7)},data:{labels:["Speed","Nothing"],datasets:[{data:[s,s>t?0:t-s],backgroundColor:[l,"#DEDEDE"],hoverBackgroundColor:[l,"#DEDEDE"],borderWidth:[0,0]}]}};var c;const i=L()(s,{standard:"iec",base:2,output:"array",round:0,bits:!1});return a.createElement("div",{className:"relative tc center overflow-hidden",style:{width:"11em",height:"9em"}},a.createElement("div",{style:{width:"11em",height:"11em",marginTop:"-1em"}},a.createElement(M.nu,o)),a.createElement("div",{className:"absolute",style:{top:"60%",left:"50%",transform:"translate(-50%, -50%)"}},a.createElement("span",{className:"f3"},i[0]),a.createElement("span",{className:"ml1 f7"},i[1],r?"":"/s"),a.createElement("span",{className:"db f7 fw5"},n)))};function ae(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class se extends a.Component{constructor(){super(...arguments),ae(this,"state",{commonTotal:125e3,downFilled:0,upFilled:0})}componentDidUpdate(e,t){const{nodeBandwidth:n}=this.props,a=n?Math.trunc(Number(n.rateIn)||0):0,s=n?Math.trunc(Number(n.rateOut)||0):0;if(a!==t.downFilled||s!==t.upFilled){const e=a+s,n=Math.max(t.commonTotal,e);this.setState({downFilled:a,upFilled:s,commonTotal:n})}}render(){const{t:e}=this.props,{downFilled:t,upFilled:n,commonTotal:s}=this.state;return a.createElement("div",null,a.createElement($,null,e("networkTraffic")),a.createElement("div",{className:"flex flex-column justify-between",style:{maxWidth:400}},a.createElement("div",{className:"mh2 mv3 mt0-l"},a.createElement(ne,{title:e("app:terms.downSpeed"),color:"#69c4cd",filled:t,total:s})),a.createElement("div",{className:"mh2 mt3 mt0-l"},a.createElement(ne,{title:e("app:terms.upSpeed"),color:"#f39021",filled:n,total:s}))))}}const re=(0,l.N)("selectNodeBandwidth",(0,r.CI)("status")(se));var le=n(30446);const oe=e=>{let{className:t,label:n,yesLabel:s,onYes:r}=e;return a.createElement("div",{className:"f6 pv3 pv2-ns ph3 tc bg-snow charcoal flex ".concat(t)},a.createElement("span",{className:"fw4 lh-copy dib mb2 tl"},n),a.createElement("span",{className:"dib"},a.createElement(le.A,{className:"ml3 mv1 tc",bg:"bg-green",onClick:r},s)))};var ce=n(66064),ie=n(65156),de=n(22917);const me=(0,l.N)("selectIpfsConnected","selectNodeBandwidthEnabled","selectShowAnalyticsBanner","selectShowAnalyticsComponents","selectToursEnabled","doEnableAnalytics","doDisableAnalytics","doToggleShowAnalyticsBanner",(0,de.A)((0,r.CI)("status")((e=>{let{t:t,ipfsConnected:n,showAnalyticsComponents:l,showAnalyticsBanner:i,doEnableAnalytics:d,doDisableAnalytics:u,doToggleShowAnalyticsBanner:b,toursEnabled:v,handleJoyrideCallback:y,nodeBandwidthEnabled:g}=e;return a.createElement("div",{"data-id":"StatusPage",className:"mw9 center"},a.createElement(s.mg,null,a.createElement("title",null,t("title")," | IPFS")),a.createElement(p.A,{className:"pa3 joyride-status-node",style:{minHeight:0}},a.createElement("div",{className:"flex"},a.createElement("div",{className:"flex-auto"},n?a.createElement("div",null,a.createElement(m,null),a.createElement(c.U,null,a.createElement(A,null),a.createElement("div",{className:"pt2"},a.createElement(F,null)))):a.createElement("div",null,a.createElement(f.A,null))))),n&&l&&i&&a.createElement(oe,{className:"mt3",label:t("AnalyticsBanner.label"),yesLabel:t("app:actions.close"),onYes:()=>b(!1)}),a.createElement("div",{style:{opacity:n?1:.4}},g?a.createElement(p.A,{className:"mt3 pa3"},a.createElement("div",{className:"flex flex-column flex-row-l joyride-status-charts"},a.createElement("div",{className:"pr0 pr2-l flex-auto"},a.createElement(ee,null)),a.createElement("div",{className:"dn db-l pl3 pr5"},a.createElement(re,null)))):a.createElement(h,null),a.createElement(o.Ay,{run:v,steps:ce.Z_.getSteps({t:t,Trans:r.x6}),styles:ce.Z_.styles,callback:y,continuous:!0,scrollToFirstStep:!0,locale:(0,ie.Y)(t),showProgress:!0})))}))))},93031:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(65043),s=n(64600),r=n.n(s);const l=e=>{let{title:t="Shell",children:n,className:s}=e;return a.createElement("div",{className:r()("br1 overflow-hidden",s)},a.createElement("div",{className:"f7 mb0 sans-serif ttu tracked charcoal pv1 pl2 bg-black-20"},t),a.createElement("div",{className:"bg-black-70 snow pa2 f7 lh-copy monospace nowrap overflow-x-auto"},n))}}}]);
//# sourceMappingURL=937.ec59bbe0.chunk.js.map