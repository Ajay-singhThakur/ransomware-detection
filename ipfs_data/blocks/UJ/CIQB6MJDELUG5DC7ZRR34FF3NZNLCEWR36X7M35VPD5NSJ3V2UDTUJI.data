CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF]){0,14})/g;function lg(){let t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ms",r=null;return String(e).replace(new RegExp("(\\d)[".concat(lg.unit.placeholder).concat(lg.unit.group,"](\\d)"),"g"),"$1$2").replace(lg.unit.decimal,".").replace(cg,((e,o,i)=>{if(i)i=i.toLowerCase();else if(t){for(const n in lg.unit)if(lg.unit[n]<t){i=n;break}}else i=n;t=i=lg.unit[i]||lg.unit[i.replace(/s$/,"")],i&&(r=(r||0)+o*i)})),r&&r/(lg.unit[n]||1)*("-"===e[0]?-1:1)}lg.unit=ug;var hg=n(11505);class fg extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Request timed out"),this.name="TimeoutError"}}class dg extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The operation was aborted."),this.name="AbortError"}}class gg extends Error{constructor(t){super(t.statusText),(0,f.A)(this,"response",void 0),this.name="HTTPError",this.response=t}}const pg=globalThis.fetch,yg=globalThis.Headers,wg=globalThis.Request,mg=globalThis.Response,vg=pg,bg=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null!=e.onUploadProgress?async function(t){var e;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=new XMLHttpRequest;r.open(null!==(e=n.method)&&void 0!==e?e:"GET",t.toString(),!0);const{timeout:o,headers:i}=n,s=Number(o);if(!isNaN(s)&&s>0&&s<1/0&&(r.timeout=s),null!=n.overrideMimeType&&r.overrideMimeType(n.overrideMimeType),null!=i)for(const[a,u]of new yg(i))r.setRequestHeader(a,u);return null!=n.signal&&(n.signal.onabort=()=>{r.abort()}),null!=n.onUploadProgress&&(r.upload.onprogress=n.onUploadProgress),r.responseType="arraybuffer",new Promise(((t,e)=>{const o=n=>{switch(n.type){case"error":t(mg.error());break;case"load":t(new Eg(r.responseURL,r.response,{status:r.status,statusText:r.statusText,headers:Ag(r.getAllResponseHeaders())}));break;case"timeout":e(new fg);break;case"abort":e(new dg)}};r.onerror=o,r.onload=o,r.ontimeout=o,r.onabort=o,r.send(n.body)}))}(t,e):vg(t,e)},Ag=t=>{const e=new yg;for(const n of t.trim().split(/[\r\n]+/)){const t=n.indexOf(": ");t>0&&e.set(n.slice(0,t),n.slice(t+1))}return e};class Eg extends mg{constructor(t,e,n){super(e,n),Object.defineProperty(this,"url",{value:t})}}var Dg;const Bg=rg.bind({ignoreUndefined:!0}),kg=tg("kubo-rpc-client:fetch"),Cg={throwHttpErrors:!0,credentials:"same-origin"};class xg{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,f.A)(this,"opts",void 0),this.opts=Bg({},Cg,t)}async fetch(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Bg({},this.opts,e),r=new yg(n.headers);if("string"!==typeof t&&!(t instanceof hg.URL||t instanceof wg))throw new TypeError("`resource` must be a string, URL, or Request");const o=new hg.URL(t.toString(),n.base),{searchParams:i,transformSearchParams:s,json:a}=n;null!=i&&(o.search="function"===typeof s?s(new hg.URLSearchParams(n.searchParams)):new hg.URLSearchParams(n.searchParams).toString()),null!=a&&(n.body=JSON.stringify(n.json),r.set("content-type","application/json"));const u=[n.signal];null!=n.timeout&&isNaN(n.timeout)&&n.timeout>0&&u.push(AbortSignal.timeout(n.timeout));const l=ri(u);try{null!=globalThis.ReadableStream&&n.body instanceof globalThis.ReadableStream&&(ui||hi)&&(n.body=new Blob(await ss(di(n.body)))),kg.trace("outgoing headers",n.headers),kg.trace("%s %s",n.method,o);const t=await bg(o.toString(),(0,d.A)((0,d.A)({},n),{},{signal:n.signal,timeout:void 0,headers:r,duplex:"half"}));if(kg("%s %s %d",n.method,o,t.status),kg.trace("incoming headers",t.headers),!t.ok&&!0===n.throwHttpErrors)throw null!=n.handleError&&await n.handleError(t),new gg(t);return t.iterator=c((function*(){yield*fi((0,ni.A)(Fg(t.body)))})),t.ndjson=c((function*(){var n,r=!1,o=!1;try{for(var i,s=(0,ni.A)(Sg(t.iterator()));r=!(i=yield ei(s.next())).done;r=!1){const t=i.value;null!=e.transform?yield e.transform(t):yield t}}catch(a){o=!0,n=a}finally{try{r&&null!=s.return&&(yield ei(s.return()))}finally{if(o)throw n}}})),t}finally{l.clear()}}async post(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(t,(0,d.A)((0,d.A)({},e),{},{method:"POST"}))}async get(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(t,(0,d.A)((0,d.A)({},e),{},{method:"GET"}))}async put(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(t,(0,d.A)((0,d.A)({},e),{},{method:"PUT"}))}async delete(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(t,(0,d.A)((0,d.A)({},e),{},{method:"DELETE"}))}async options(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(t,(0,d.A)((0,d.A)({},e),{},{method:"OPTIONS"}))}}Dg=xg,(0,f.A)(xg,"HTTPError",gg),(0,f.A)(xg,"TimeoutError",fg),(0,f.A)(xg,"post",(async(t,e)=>new Dg(e).post(t,e))),(0,f.A)(xg,"get",(async(t,e)=>new Dg(e).get(t,e))),(0,f.A)(xg,"put",(async(t,e)=>new Dg(e).put(t,e))),(0,f.A)(xg,"delete",(async(t,e)=>new Dg(e).delete(t,e))),(0,f.A)(xg,"options",(async(t,e)=>new Dg(e).options(t,e)));const Sg=function(){var t=c((function*(t){const e=new TextDecoder;let n="";var r,o=!1,i=!1;try{for(var s,a=(0,ni.A)(t);o=!(s=yield ei(a.next())).done;o=!1){const t=s.value;{n+=e.decode(t,{stream:!0});const r=n.split(/\r?\n/);for(let t=0;t<r.length-1;t++){const e=r[t].trim();e.length>0&&(yield JSON.parse(e))}n=r[r.length-1]}}}catch(u){i=!0,r=u}finally{try{o&&null!=a.return&&(yield ei(a.return()))}finally{if(i)throw r}}n+=e.decode(),n=n.trim(),0!==n.length&&(yield JSON.parse(n))}));return function(e){return t.apply(this,arguments)}}(),Fg=t=>{if(Ig(t))return t;if(Tg(t)){const e=t[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:e.next.bind(e),return:n=>(t.destroy(),"function"===typeof e.return?e.return():Promise.resolve({done:!0,value:n}))})}}if(Ng(t)){const e=t.getReader();return c((function*(){try{for(;;){const{done:t,value:n}=yield ei(e.read());if(t)return;null!=n&&(yield n)}}finally{e.releaseLock()}}))()}throw new TypeError("Body can't be converted to AsyncIterable")},Ig=t=>null!==t&&"function"===typeof t[Symbol.asyncIterator],Ng=t=>null!=t&&"function"===typeof t.getReader,Tg=t=>Object.prototype.hasOwnProperty.call(t,"readable")&&Object.prototype.hasOwnProperty.call(t,"writable");var Ug=n(12544);function Og(t){try{t=(0,Ug._)((0,h.HZ)(t))}catch(e){}return t=t.toString()}const Lg=tg("js-kubo-rpc-client:lib:error-handler"),Rg=rg.bind({ignoreUndefined:!0}),_g=ui||hi?location.protocol:"http",Pg=ui||hi?location.hostname:"localhost",jg=ui||hi?location.port:"5001",Hg=async t=>{let e;try{var n;if((null!==(n=t.headers.get("Content-Type"))&&void 0!==n?n:"").startsWith("application/json")){var r;const n=await t.json();Lg(n),e=null!==(r=n.Message)&&void 0!==r?r:n.message}else e=await t.text()}catch(i){Lg("Failed to parse error response",i),e=i.message}let o=new xg.HTTPError(t);throw null!=e&&(e.includes("deadline has elapsed")&&(o=new xg.TimeoutError),e.includes("context deadline exceeded")&&(o=new xg.TimeoutError),e.includes("request timed out")&&(o=new xg.TimeoutError),o.message=e),o},Vg=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,Mg=t=>t.replace(Vg,(function(t){return"-"+t.toLowerCase()})),zg=t=>{var e;return"string"===typeof t?null!==(e=lg(t))&&void 0!==e?e:0:t};class Gg extends xg{constructor(){var t;const e=function(){let t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={};if("string"===typeof n||(0,h.R8)(n))t=new URL(Og(n));else if(n instanceof URL)t=n;else if("string"===typeof n.url||(0,h.R8)(n.url))t=new URL(Og(n.url)),r=n;else if(n.url instanceof URL)t=n.url,r=n;else{var o,i,s;r=null!==n&&void 0!==n?n:{};const e=(null!==(o=r.protocol)&&void 0!==o?o:_g).replace(":",""),a=(null!==(i=r.host)&&void 0!==i?i:Pg).split(":")[0],u=null!==(s=r.port)&&void 0!==s?s:jg;t=new URL("".concat(e,"://").concat(a,":").concat(u))}if(null!=r.apiPath?t.pathname=r.apiPath:"/"!==t.pathname&&void 0!==t.pathname||(t.pathname="api/v0"),li){var a;const t=void 0;e=null!==(a=r.agent)&&void 0!==a?a:new t({keepAlive:!0,maxSockets:6})}return(0,d.A)((0,d.A)({},r),{},{host:t.host,protocol:t.protocol.replace(":",""),port:Number(t.port),apiPath:t.pathname,url:t,agent:e})}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});super({timeout:null!=e.timeout?zg(e.timeout):void 0,headers:e.headers,base:"".concat(e.url),handleError:Hg,transformSearchParams:t=>{const e=new URLSearchParams;for(const[n,r]of t)"undefined"!==r&&"null"!==r&&"signal"!==n&&"timeout"!==n&&e.append(Mg(n),r),"timeout"!==n||isNaN(parseInt(r))||e.append(Mg(n),r);return e},agent:e.agent}),t=this,delete this.get,delete this.put,delete this.delete,delete this.options;const n=this.fetch;this.fetch=async function(r){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"!==typeof r||r.startsWith("/")||(r="".concat(e.url,"/").concat(r)),n.call(t,r,Rg(o,{method:"POST"}))}}}xg.HTTPError;const $g=async t=>Promise.reject(new Error('No base found for "'.concat(t,'"')));class qg{constructor(t){var e;(0,f.A)(this,"_basesByName",void 0),(0,f.A)(this,"_basesByPrefix",void 0),(0,f.A)(this,"_loadBase",void 0),this._basesByName={},this._basesByPrefix={},this._loadBase=null!==(e=t.loadBase)&&void 0!==e?e:$g;for(const n of t.bases)this.addBase(n)}addBase(t){if(null!=this._basesByName[t.name]&&null!=this._basesByPrefix[t.prefix])throw new Error('Codec already exists for codec "'.concat(t.name,'"'));this._basesByName[t.name]=t,this._basesByPrefix[t.prefix]=t}removeBase(t){delete this._basesByName[t.name],delete this._basesByPrefix[t.prefix]}async getBase(t){if(null!=this._basesByName[t])return this._basesByName[t];if(null!=this._basesByPrefix[t])return this._basesByPrefix[t];const e=await this._loadBase(t);return null==this._basesByName[e.name]&&null==this._basesByPrefix[e.prefix]&&this.addBase(e),e}listBases(){return Object.values(this._basesByName)}}const Kg=async t=>Promise.reject(new Error('No codec found for "'.concat(t,'"')));class Zg{constructor(t){var e;(0,f.A)(this,"_codecsByName",void 0),(0,f.A)(this,"_codecsByCode",void 0),(0,f.A)(this,"_loadCodec",void 0),this._codecsByName={},this._codecsByCode={},this._loadCodec=null!==(e=t.loadCodec)&&void 0!==e?e:Kg;for(const n of t.codecs)this.addCodec(n)}addCodec(t){if(null!=this._codecsByName[t.name]||null!=this._codecsByCode[t.code])throw new Error('Resolver already exists for codec "'.concat(t.name,'"'));this._codecsByName[t.name]=t,this._codecsByCode[t.code]=t}removeCodec(t){delete this._codecsByName[t.name],delete this._codecsByCode[t.code]}async getCodec(t){const e="string"===typeof t?this._codecsByName:this._codecsByCode;if(null!=e[t])return e[t];const n=await this._loadCodec(t);return null==e[t]&&this.addCodec(n),n}listCodecs(){return Object.values(this._codecsByName)}}const Wg=async t=>Promise.reject(new Error('No hasher found for "'.concat(t,'"')));class Jg{constructor(t){var e;(0,f.A)(this,"_hashersByName",void 0),(0,f.A)(this,"_hashersByCode",void 0),(0,f.A)(this,"_loadHasher",void 0),this._hashersByName={},this._hashersByCode={},this._loadHasher=null!==(e=t.loadHasher)&&void 0!==e?e:Wg;for(const n of t.hashers)this.addHasher(n)}addHasher(t){if(null!=this._hashersByName[t.name]||null!=this._hashersByCode[t.code])throw new Error('Resolver already exists for codec "'.concat(t.name,'"'));this._hashersByName[t.name]=t,this._hashersByCode[t.code]=t}removeHasher(t){delete this._hashersByName[t.name],delete this._hashersByCode[t.code]}async getHasher(t){const e="string"===typeof t?this._hashersByName:this._hashersByCode;if(null!=e[t])return e[t];const n=await this._loadHasher(t);return null==e[t]&&this.addHasher(n),n}listHashers(){return Object.values(this._hashersByName)}}function Yg(t){return async function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=await t.post("log/level",{signal:r.signal,searchParams:ys((0,d.A)({arg:[e,n]},r)),headers:r.headers});return ds(await o.json())}}function Xg(t){return async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await t.post("log/ls",{signal:e.signal,searchParams:ys(e),headers:e.headers});return(await n.json()).Strings}}function Qg(t){return function(){var e=c((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){const n=yield ei(t.post("log/tail",{signal:e.signal,searchParams:ys(e),headers:e.headers}));yield*fi((0,ni.A)(n.ndjson()))}()}));return function(){return e.apply(this,arguments)}}()}function tp(t){switch(t.Type){case 1:case 5:return"dir";default:return"file"}}function ep(t){return async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await t.post("name/publish",{signal:n.signal,searchParams:ys((0,d.A)({arg:"".concat(e)},n)),headers:n.headers});return ds(await r.json())}}function np(t){return async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await t.post("name/pubsub/cancel",{signal:n.signal,searchParams:ys((0,d.A)({arg:e},n)),headers:n.headers});return ds(await r.json())}}function rp(t){return async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await t.post("name/pubsub/state",{signal:e.signal,searchParams:ys(e),headers:e.headers});return ds(await n.json())}}function op(t){return async function(){var e;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=await t.post("name/pubsub/subs",{signal:n.signal,searchParams:ys(n),headers:n.headers});return null!==(e=(await r.json()).Strings)&&void 0!==e?e:[]}}function ip(t){return{cancel:np(t),state:rp(t),subs:op(t)}}function sp(t){return function(){var e=c((function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){const r=yield ei(t.post("name/resolve",{signal:n.signal,searchParams:ys((0,d.A)({arg:e,stream:!0},n)),headers:n.headers}));var o,i=!1,s=!1;try{for(var a,u=(0,ni.A)(r.ndjson());i=!(a=yield ei(u.next())).done;i=!1){const t=a.value;yield t.Path}}catch(c){s=!0,o=c}finally{try{i&&null!=u.return&&(yield ei(u.return()))}finally{if(s)throw o}}}()}));return function(t){return e.apply(this,arguments)}}()}function ap(t){return async function(e,n){var r,o,i,s,a;let u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const c=await t.post("object/patch/add-link",{signal:u.signal,searchParams:ys((0,d.A)({arg:["".concat(e),null!==(r=null!==(o=n.Name)&&void 0!==o?o:n.name)&&void 0!==r?r:"",null!==(i=(null!==(s=null!==(a=n.Hash)&&void 0!==a?a:n.cid)&&void 0!==s?s:"").toString())&&void 0!==i?i:null]},u)),headers:u.headers}),{Hash:l}=await c.json();return Pt.TO.parse(l)}}function up(t){return async function(e,n){var r,o;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=await t.post("object/patch/rm-link",{signal:i.signal,searchParams:ys((0,d.A)({arg:["".concat(e),null!==(r=null!==(o=n.Name)&&void 0!==o?o:n.name)&&void 0!==r?r:null]},i)),headers:i.headers}),{Hash:a}=await s.json();return Pt.TO.parse(a)}}function cp(t){return{addLink:ap(t),rmLink:up(t)}}function lp(t){return null!=Pt.TO.asCID(t)}function hp(t){return fp.apply(this,arguments)}function fp(){return fp=c((function*(t){if(null===t||void 0===t)throw new Ti("Unexpected input: ".concat(t));const e=Pt.TO.asCID(t);if(null==e){if("string"!==typeof t){if(null!=t.cid||null!=t.path)return yield dp(t);if(n=t,Symbol.iterator in n){const e=t[Symbol.iterator](),n=e.next();if(!0===n.done)return e;if(lp(n.value)){yield dp({cid:n.value});for(const t of e)yield dp({cid:t});return}if("string"===typeof n.value){yield dp({path:n.value});for(const t of e)yield dp({path:t});return}if(null!=n.value.cid||null!=n.value.path){yield dp(n.value);for(const t of e)yield dp(t);return}throw new Ti("Unexpected input: ".concat(typeof t))}var n;if(function(t){return Symbol.asyncIterator in t}(t)){const e=t[Symbol.asyncIterator](),n=yield ei(e.next());if(!0===n.done)return e;if(lp(n.value)){yield dp({cid:n.value});var r,o=!1,i=!1;try{for(var s,a=(0,ni.A)(e);o=!(s=yield ei(a.next())).done;o=!1){const t=s.value;yield dp({cid:t})}}catch(m){i=!0,r=m}finally{try{o&&null!=a.return&&(yield ei(a.return()))}finally{if(i)throw r}}return}if("string"===typeof n.value){yield dp({path:n.value});var u,c=!1,l=!1;try{for(var h,f=(0,ni.A)(e);c=!(h=yield ei(f.next())).done;c=!1){const t=h.value;yield dp({path:t})}}catch(m){l=!0,u=m}finally{try{c&&null!=f.return&&(yield ei(f.return()))}finally{if(l)throw u}}return}if(null!=n.value.cid||null!=n.value.path){yield dp(n.value);var d,g=!1,p=!1;try{for(var y,w=(0,ni.A)(e);g=!(y=yield ei(w.next())).done;g=!1){const t=y.value;yield dp(t)}}catch(m){p=!0,d=m}finally{try{g&&null!=w.return&&(yield ei(w.return()))}finally{if(p)throw d}}return}throw new Ti("Unexpected input: ".concat(typeof t))}throw new Ti("Unexpected input: ".concat(typeof t))}yield dp({path:t})}else yield dp({cid:e})})),fp.apply(this,arguments)}function dp(t){var e;const n=null!==(e=t.cid)&&void 0!==e?e:"".concat(t.path);if(null==n)throw new Ti("Unexpected input: Please path either a CID or an IPFS path");const r={path:n,recursive:!1!==t.recursive};return null!=t.metadata&&(r.metadata=t.metadata),r}function gp(t){return function(){var e=c((function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){var r,o=!1,i=!1;try{for(var s,a=(0,ni.A)(hp(e));o=!(s=yield ei(a.next())).done;o=!1){const{path:e,recursive:r,metadata:o}=s.value;{const i=yield ei(t.post("pin/add",{signal:n.signal,searchParams:ys((0,d.A)((0,d.A)({},n),{},{arg:e,recursive:r,metadata:null!=o?JSON.stringify(o):void 0,stream:!0})),headers:n.headers}));var u,c=!1,l=!1;try{for(var h,f=(0,ni.A)(i.ndjson());c=!(h=yield ei(f.next())).done;c=!1){const t=h.value;if(null==t.Pins)yield Pt.TO.parse(t);else for(const e of t.Pins)yield Pt.TO.parse(e)}}catch(g){l=!0,u=g}finally{try{c&&null!=f.return&&(yield ei(f.return()))}finally{if(l)throw u}}}}}catch(g){i=!0,r=g}finally{try{o&&null!=a.return&&(yield ei(a.return()))}finally{if(i)throw r}}}()}));return function(t){return e.apply(this,arguments)}}()}function pp(t){const e=gp(t);return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await As(e([(0,d.A)({path:t.toString()},n)],n));if(null==r)throw new Error("No response received");return r}}function yp(t,e,n,r){const o={type:t,cid:Pt.TO.parse(e)};return null!=n&&(o.metadata=n),null!=r&&(o.name=r),o}function wp(t){return function(){var e=c((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){let n=[];null!=e.paths&&(n=Array.isArray(e.paths)?e.paths:[e.paths]);const r=yield ei(t.post("pin/ls",{signal:e.signal,searchParams:ys((0,d.A)((0,d.A)({},e),{},{arg:n.map((t=>"".concat(t))),stream:!0})),headers:e.headers}));var o,i=!1,s=!1;try{for(var a,u=(0,ni.A)(r.ndjson());i=!(a=yield ei(u.next())).done;i=!1){const t=a.value;if(null!=t.Keys){for(const e of Object.keys(t.Keys))yield yp(t.Keys[e].Type,e,t.Keys[e].Metadata,t.Keys[e].Name);return}yield yp(t.Type,t.Cid,t.Metadata,t.Name)}}catch(c){s=!0,o=c}finally{try{i&&null!=u.return&&(yield ei(u.return()))}finally{if(s)throw o}}}()}));return function(){return e.apply(this,arguments)}}()}const mp=t=>{let{Name:e,Status:n,Cid:r}=t;return{cid:Pt.TO.parse(r),name:e,status:n}},vp=t=>{if("string"===typeof t&&""!==t)return t;throw new TypeError("service name must be passed")},bp=t=>{if(null!=Pt.TO.asCID(t))return t.toString();throw new TypeError("CID instance expected instead of ".concat(typeof t))},Ap=t=>{let{service:e,cid:n,name:r,status:o,all:i}=t;const s=ys({service:vp(e),name:r,force:!0===i||void 0});if(null!=n)for(const a of n)s.append("cid",bp(a));if(null!=o)for(const a of o)s.append("status",a);return s},Ep=(t,e)=>{let{service:n,background:r,name:o,origins:i}=e;const s=ys({arg:bp(t),service:vp(n),name:o,background:!0===r||void 0});if(null!=i)for(const a of i)s.append("origin",a.toString());return s},Dp=["timeout","signal","headers"];function Bp(t){return async function(e,n){let{timeout:r,signal:o,headers:i}=n,s=(0,gs.A)(n,Dp);const a=await t.post("pin/remote/add",{timeout:r,signal:o,headers:i,searchParams:Ep(e,s)});return mp(await a.json())}}const kp=["timeout","signal","headers"];function Cp(t){return function(){var e=c((function(e){let{timeout:n,signal:r,headers:o}=e,i=(0,gs.A)(e,kp);return function*(){const e=yield ei(t.post("pin/remote/ls",{timeout:n,signal:r,headers:o,searchParams:Ap(i)}));var s,a=!1,u=!1;try{for(var c,l=(0,ni.A)(e.ndjson());a=!(c=yield ei(l.next())).done;a=!1){const t=c.value;yield mp(t)}}catch(h){u=!0,s=h}finally{try{a&&null!=l.return&&(yield ei(l.return()))}finally{if(u)throw s}}}()}));return function(t){return e.apply(this,arguments)}}()}const xp=["timeout","signal","headers"];function Sp(t){return async function(e){let{timeout:n,signal:r,headers:o}=e,i=(0,gs.A)(e,xp);await t.post("pin/remote/rm",{timeout:n,signal:r,headers:o,searchParams:Ap((0,d.A)((0,d.A)({},i),{},{all:!0}))})}}const Fp=["timeout","signal","headers"];function Ip(t){return async function(e){let{timeout:n,signal:r,headers:o}=e,i=(0,gs.A)(e,Fp);await t.post("pin/remote/rm",{timeout:n,signal:r,headers:o,searchParams:Ap((0,d.A)((0,d.A)({},i),{},{all:!1}))})}}function Np(t){const e=String(t);if("undefined"===e)throw Error("endpoint is required");return"/"===e[e.length-1]?e.slice(0,-1):e}function Tp(t){const e={service:t.Service,endpoint:new URL(t.ApiEndpoint)};return null!=t.Stat&&(e.stat=function(t){switch(t.Status){case"valid":{const{Pinning:e,Pinned:n,Queued:r,Failed:o}=t.PinCount;return{status:"valid",pinCount:{queued:r,pinning:e,pinned:n,failed:o}}}case"invalid":return{status:"invalid"};default:return{status:t.Status}}}(t.Stat)),e}function Up(t){return async function(e,n){const{endpoint:r,key:o,headers:i,timeout:s,signal:a}=n;await t.post("pin/remote/service/add",{timeout:s,signal:a,searchParams:ys({arg:[e,Np(r),o]}),headers:i})}}function Op(t){return async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{stat:n,headers:r,timeout:o,signal:i}=e,s=await t.post("pin/remote/service/ls",{timeout:o,signal:i,headers:r,searchParams:!0===n?ys({stat:n}):void 0});return(await s.json()).RemoteServices.map(Tp)}}function Lp(t){return async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};await t.post("pin/remote/service/rm",{signal:n.signal,headers:n.headers,searchParams:ys({arg:e})})}}function Rp(t){return{add:Up(t),ls:Op(t),rm:Lp(t)}}function _p(t){return{add:Bp(t),ls:Cp(t),rm:Ip(t),rmAll:Sp(t),service:Rp(t)}}function Pp(t){return function(){var e=c((function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){var r,o=!1,i=!1;try{for(var s,a=(0,ni.A)(hp(e));o=!(s=yield ei(a.next())).done;o=!1){const{path:e,recursive:r}=s.value;{const o=new URLSearchParams(n.searchParams);o.append("arg","".concat(e)),null!=r&&o.set("recursive",String(r));const i=yield ei(t.post("pin/rm",{signal:n.signal,headers:n.headers,searchParams:ys((0,d.A)((0,d.A)({},n),{},{arg:"".concat(e),recursive:r}))}));var u,c=!1,l=!1;try{for(var h,f=(0,ni.A)(i.ndjson());c=!(h=yield ei(f.next())).done;c=!1){const t=h.value;null==t.Pins?yield Pt.TO.parse(t):yield*fi((0,ni.A)(t.Pins.map((t=>Pt.TO.parse(t)))))}}catch(g){l=!0,u=g}finally{try{c&&null!=f.return&&(yield ei(f.return()))}finally{if(l)throw u}}}}}catch(g){i=!0,r=g}finally{try{o&&null!=a.return&&(yield ei(a.return()))}finally{if(i)throw r}}}()}));return function(t){return e.apply(this,arguments)}}()}function jp(t){const e=Pp(t);return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await As(e([(0,d.A)({path:t.toString()},n)],n));if(null==r)throw new Error("No response received");return r}}function Hp(t){return async function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=await t.post("pin/update",{signal:r.signal,searchParams:ys((0,d.A)((0,d.A)({},r),{},{arg:[e.toString(),n.toString()]})),headers:r.headers}),{Pins:i}=await o.json();return i.map((t=>Pt.TO.parse(t)))}}function Vp(t,e="utf8"){const n=ed[e];if(null==n)throw new Error(`Unsupported encoding "${e}"`);return n.encoder.encode(t).substring(1)}const Mp=t=>Vp(zp(t)),zp=t=>An.base64url.decode(t),Gp=t=>BigInt("0x".concat(Vp(An.base64url.decode(t),"base16"))),$p=t=>An.base64url.encode(nd(t));function qp(t){return async function(){var e;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{Strings:r}=await(await t.post("pubsub/ls",{signal:n.signal,searchParams:ys(n),headers:n.headers})).json();return null!==(o=r,e=Array.isArray(o)?o.map(Mp):o)&&void 0!==e?e:[];var o}}function Kp(t){return async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await t.post("pubsub/peers",{signal:n.signal,searchParams:ys((0,d.A)({arg:$p(e)},n)),headers:n.headers}),{Strings:o}=await r.json();return null!==o&&void 0!==o?o:[]}}function Zp(t){return async function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=ys((0,d.A)({arg:$p(e)},r)),i=new AbortController,s=ri([i.signal,r.signal]);try{const e=await t.post("pubsub/pub",(0,d.A)({signal:s,searchParams:o},await fs([n],i,r.headers)));await e.text()}finally{s.clear()}}}const Wp=tg("js-kubo-rpc-client:pubsub:subscribe");function Jp(t,e){return async function(n,r){let o,i,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};s.signal=e.subscribe(n,r,s.signal);const a=new Promise(((t,e)=>{o=t,i=e})),u=setTimeout((()=>{o()}),1e3);return t.post("pubsub/sub",{signal:s.signal,searchParams:ys((0,d.A)({arg:$p(n)},s)),headers:s.headers}).catch((t=>{e.unsubscribe(n,r),i(t)})).then((t=>{clearTimeout(u),null!=t&&(!async function(t,e){var n;let{onMessage:r,onEnd:o,onError:i}=e;i=null!==(n=i)&&void 0!==n?n:Wp;try{var s,a=!1,u=!1;try{for(var c,l=(0,ni.A)(t.ndjson());a=!(c=await l.next()).done;a=!1){const t=c.value;try{if(null==t.from)continue;var h,f;if(null!=t.from&&null!=t.seqno)r({type:"signed",from:Lf(t.from),data:zp(t.data),sequenceNumber:Gp(t.seqno),topic:Mp(t.topicIDs[0]),key:null!=t.key?bf(zp(null!==(h=t.key)&&void 0!==h?h:"u")):void 0,signature:zp(null!==(f=t.signature)&&void 0!==f?f:"u")});else r({type:"unsigned",data:zp(t.data),topic:Mp(t.topicIDs[0])})}catch(d){d.message="Failed to parse pubsub message: ".concat(d.message),i(d,!1,t)}}}catch(d){u=!0,s=d}finally{try{a&&null!=l.return&&await l.return()}finally{if(u)throw s}}}catch(d){Yp(d)||i(d,!0)}finally{o()}}(t,{onMessage:t=>{null!=r&&("function"!==typeof r?"function"===typeof r.handleEvent&&r.handleEvent(t):r(t))},onEnd:()=>{e.unsubscribe(n,r)},onError:s.onError}),o())})),a}}const Yp=t=>{switch(t.type){case"aborted":case"abort":return!0;default:return"AbortError"===t.name}};class Xp{constructor(){(0,f.A)(this,"_subs",void 0),this._subs=new Map}subscribe(t,e,n){var r;const o=null!==(r=this._subs.get(t))&&void 0!==r?r:[];if(null!=o.find((t=>t.handler===e)))throw new Error("Already subscribed to ".concat(t," with this handler"));const i=new AbortController;return this._subs.set(t,[{handler:e,controller:i}].concat(o)),null!=n&&n.addEventListener("abort",(()=>{this.unsubscribe(t,e)})),i.signal}unsubscribe(t,e){var n,r;const o=null!==(n=this._subs.get(t))&&void 0!==n?n:[];let i;null!=e?(this._subs.set(t,o.filter((t=>t.handler!==e))),i=o.filter((t=>t.handler===e))):(this._subs.set(t,[]),i=o),0===(null!==(r=this._subs.get(t))&&void 0!==r?r:[]).length&&this._subs.delete(t),i.forEach((t=>{t.controller.abort()}))}}function Qp(t){return function(){var e=c((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){const n=yield ei(t.post("refs/local",{signal:e.signal,transform:ds,searchParams:ys(e),headers:e.headers}));yield*fi((0,ni.A)(n.ndjson()))}()}));return function(){return e.apply(this,arguments)}}()}function ty(t){return function(){var e=c((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){const n=yield ei(t.post("repo/gc",{signal:e.signal,searchParams:ys(e),headers:e.headers,transform:t=>{var e;return{err:null!=t.Error?new Error(t.Error):null,cid:null!=(null===(e=t.Key)||void 0===e?void 0:e["/"])?Pt.TO.parse(t.Key["/"]):null}}}));yield*fi((0,ni.A)(n.ndjson()))}()}));return function(){return e.apply(this,arguments)}}()}function ey(t){return async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await t.post("repo/stat",{signal:e.signal,searchParams:ys(e),headers:e.headers}),r=await n.json();return{numObjects:BigInt(r.NumObjects),repoSize:BigInt(r.RepoSize),repoPath:r.RepoPath,version:r.Version,storageMax:BigInt(r.StorageMax)}}}function ny(t){return async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await(await t.post("repo/version",{signal:e.signal,searchParams:ys(e),headers:e.headers})).json()).Version}}function ry(t){return function(){var e=c((function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){const r=yield ei(t.post("routing/findpeer",{signal:n.signal,searchParams:ys((0,d.A)({arg:e.toString(),stream:!0},n)),headers:n.headers}));var o,i=!1,s=!1;try{for(var a,u=(0,ni.A)(r.ndjson());i=!(a=yield ei(u.next())).done;i=!1){const t=a.value;yield dd(t)}}catch(c){s=!0,o=c}finally{try{i&&null!=u.return&&(yield ei(u.return()))}finally{if(s)throw o}}}()}));return function(t){return e.apply(this,arguments)}}()}function oy(t){return function(){var e=c((function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){const r=yield ei(t.post("routing/findprovs",{signal:n.signal,searchParams:ys((0,d.A)({arg:e.toString()},n)),headers:n.headers}));var o,i=!1,s=!1;try{for(var a,u=(0,ni.A)(r.ndjson());i=!(a=yield ei(u.next())).done;i=!1){const t=a.value;yield dd(t)}}catch(c){s=!0,o=c}finally{try{i&&null!=u.return&&(yield ei(u.return()))}finally{if(s)throw o}}}()}));return function(t){return e.apply(this,arguments)}}()}function iy(t){return function(){var e=c((function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){const r=yield ei(t.post("routing/get",{signal:n.signal,searchParams:ys((0,d.A)({arg:e instanceof Uint8Array?Vp(e):e.toString()},n)),headers:n.headers}));var o,i=!1,s=!1;try{for(var a,u=(0,ni.A)(r.ndjson());i=!(a=yield ei(u.next())).done;i=!1){const t=a.value;yield dd(t)}}catch(c){s=!0,o=c}finally{try{i&&null!=u.return&&(yield ei(u.return()))}finally{if(s)throw o}}}()}));return function(t){return e.apply(this,arguments)}}()}function sy(t){return function(){var e=c((function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{recursive:!1};return function*(){const r=Array.isArray(e)?e:[e],o=yield ei(t.post("routing/provide",{signal:n.signal,searchParams:ys((0,d.A)({arg:r.map((t=>t.toString()))},n)),headers:n.headers}));var i,s=!1,a=!1;try{for(var u,c=(0,ni.A)(o.ndjson());s=!(u=yield ei(c.next())).done;s=!1){const t=u.value;yield dd(t)}}catch(l){a=!0,i=l}finally{try{s&&null!=c.return&&(yield ei(c.return()))}finally{if(a)throw i}}}()}));return function(t){return e.apply(this,arguments)}}()}function ay(t){return function(){var e=c((function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function*(){const o=new AbortController,i=ri([o.signal,r.signal]);try{const f=yield ei(t.post("routing/put",(0,d.A)({signal:i,searchParams:ys((0,d.A)({arg:e instanceof Uint8Array?Vp(e):e.toString(),stream:!0},r))},yield ei(fs([n],o,r.headers)))));var s,a=!1,u=!1;try{for(var c,l=(0,ni.A)(f.ndjson());a=!(c=yield ei(l.next())).done;a=!1){const t=c.value;yield dd(t)}}catch(h){u=!0,s=h}finally{try{a&&null!=l.return&&(yield ei(l.return()))}finally{if(u)throw s}}}finally{i.clear()}}()}));return function(t,n){return e.apply(this,arguments)}}()}function uy(t){return function(){var e=c((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){const n=yield ei(t.post("stats/bw",{signal:e.signal,searchParams:ys(e),headers:e.headers,transform:t=>({totalIn:BigInt(t.TotalIn),totalOut:BigInt(t.TotalOut),rateIn:parseFloat(t.RateIn),rateOut:parseFloat(t.RateOut)})}));yield*fi((0,ni.A)(n.ndjson()))}()}));return function(){return e.apply(this,arguments)}}()}function cy(t){return async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await t.post("swarm/addrs",{signal:e.signal,searchParams:ys(e),headers:e.headers}),{Addrs:r}=await n.json();return Object.keys(r).map((t=>{var e;return{id:Lf(t),addrs:(null!==(e=r[t])&&void 0!==e?e:[]).map((t=>(0,h.HZ)(t)))}}))}}function ly(t){return async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await t.post("swarm/connect",{signal:n.signal,searchParams:ys((0,d.A)({arg:e},n)),headers:n.headers}),{Strings:o}=await r.json();return null!==o&&void 0!==o?o:[]}}function hy(t){return async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await t.post("swarm/disconnect",{signal:n.signal,searchParams:ys((0,d.A)({arg:e},n)),headers:n.headers}),{Strings:o}=await r.json();return null!==o&&void 0!==o?o:[]}}function fy(t){return async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await t.post("swarm/addrs/local",{signal:e.signal,searchParams:ys(e),headers:e.headers}),{Strings:r}=await n.json();return(null!==r&&void 0!==r?r:[]).map((t=>(0,h.HZ)(t)))}}function dy(t){return async function(){var e;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=await t.post("swarm/peers",{signal:n.signal,searchParams:ys(n),headers:n.headers});return(null!==(e=(await r.json()).Peers)&&void 0!==e?e:[]).map((t=>({addr:(0,h.HZ)(t.Addr),peer:Lf(t.Peer),muxer:t.Muxer,latency:t.Latency,streams:t.Streams,direction:null==t.Direction?void 0:0===t.Direction?"inbound":"outbound",identify:t.Identify})))}}class gy{constructor(t){var e,n,a,u,l,h,g,p,y;(0,f.A)(this,"bases",void 0),(0,f.A)(this,"codecs",void 0),(0,f.A)(this,"hashers",void 0),(0,f.A)(this,"bitswap",void 0),(0,f.A)(this,"block",void 0),(0,f.A)(this,"bootstrap",void 0),(0,f.A)(this,"config",void 0),(0,f.A)(this,"dag",void 0),(0,f.A)(this,"dht",void 0),(0,f.A)(this,"diag",void 0),(0,f.A)(this,"files",void 0),(0,f.A)(this,"key",void 0),(0,f.A)(this,"log",void 0),(0,f.A)(this,"name",void 0),(0,f.A)(this,"object",void 0),(0,f.A)(this,"pin",void 0),(0,f.A)(this,"pubsub",void 0),(0,f.A)(this,"refs",void 0),(0,f.A)(this,"repo",void 0),(0,f.A)(this,"routing",void 0),(0,f.A)(this,"stats",void 0),(0,f.A)(this,"swarm",void 0),(0,f.A)(this,"add",void 0),(0,f.A)(this,"addAll",void 0),(0,f.A)(this,"cat",void 0),(0,f.A)(this,"get",void 0),(0,f.A)(this,"ls",void 0),(0,f.A)(this,"id",void 0),(0,f.A)(this,"version",void 0),(0,f.A)(this,"stop",void 0),(0,f.A)(this,"ping",void 0),(0,f.A)(this,"resolve",void 0),(0,f.A)(this,"commands",void 0),(0,f.A)(this,"mount",void 0),(0,f.A)(this,"isOnline",void 0),(0,f.A)(this,"getEndpointConfig",void 0);const w=new Gg(t),m={name:ti.identity.name,code:ti.identity.code,encode:t=>t,decode:t=>t},v=Object.values(Qo.Fo);(null!==(e=null===(n=t.ipld)||void 0===n?void 0:n.bases)&&void 0!==e?e:[]).forEach((t=>v.push(t))),this.bases=new qg({bases:v,loadBase:null===(a=t.ipld)||void 0===a?void 0:a.loadBase});const b=Object.values(Qo.qr);[i,r,o,s,m].concat(null!==(u=null===(l=t.ipld)||void 0===l?void 0:l.codecs)&&void 0!==u?u:[]).forEach((t=>{b.push(t)})),this.codecs=new Zg({codecs:b,loadCodec:null===(h=t.ipld)||void 0===h?void 0:h.loadCodec});const A=Object.values(Qo.RY);(null!==(g=null===(p=t.ipld)||void 0===p?void 0:p.hashers)&&void 0!==g?g:[]).forEach((t=>A.push(t))),this.hashers=new Jg({hashers:A,loadHasher:null===(y=t.ipld)||void 0===y?void 0:y.loadHasher}),this.bitswap=function(t){return{wantlist:jf(t),wantlistForPeer:Pf(t),stat:_f(t)}}(w),this.block=function(t){return{get:Hf(t),put:Vf(t),rm:Mf(t),stat:Gf(t)}}(w),this.bootstrap=function(t){return{add:$f(t),list:qf(t),rm:Kf(t)}}(w),this.config=function(t){return{getAll:Zf(t),get:Wf(t),set:od(t),replace:rd(t),profiles:Yf(t)}}(w),this.dag=function(t,e){return{export:id(t),get:cd(t,e),import:ld(t),put:hd(t,e),resolve:fd(t)}}(w,this.codecs),this.dht=function(t){return{query:gd(t)}}(w),this.diag=function(t){return{cmds:wd(t),net:md(t),sys:vd(t)}}(w),this.files=function(t){return{cp:bd(t),flush:Ad(t),ls:Dd(t),mkdir:kd(t),mv:Cd(t),read:Sd(t),rm:Fd(t),stat:Id(t),write:Nd(t)}}(w),this.key=function(t){return{gen:Od(t),import:Ld(t),list:Rd(t),rename:_d(t),rm:Pd(t)}}(w),this.log=function(t){return{level:Yg(t),ls:Xg(t),tail:Qg(t)}}(w),this.name=function(t){return{publish:ep(t),resolve:sp(t),pubsub:ip(t)}}(w),this.object=function(t){return{patch:cp(t)}}(w,this.codecs),this.pin=function(t){return{addAll:gp(t),add:pp(t),ls:wp(t),rmAll:Pp(t),rm:jp(t),update:Hp(t),remote:_p(t)}}(w),this.pubsub=function(t){const e=new Xp;return{ls:qp(t),peers:Kp(t),publish:Zp(t),subscribe:Jp(t,e),unsubscribe:(n=e,async function(t,e){n.unsubscribe(t,e)})};var n}(w),this.refs=function(t){function e(){return e=c((function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){const r=Array.isArray(e)?e:[e],o=yield ei(t.post("refs",{signal:n.signal,searchParams:ys((0,d.A)({arg:r.map((t=>"".concat(t instanceof Uint8Array?Pt.TO.decode(t):t)))},n)),headers:n.headers,transform:ds}));yield*fi((0,ni.A)(o.ndjson()))}()})),e.apply(this,arguments)}return Object.assign((function(t){return e.apply(this,arguments)}),{local:Qp(t)})}(w),this.repo=function(t){return{gc:ty(t),stat:ey(t),version:ny(t)}}(w),this.routing=function(t){return{findPeer:ry(t),findProvs:oy(t),get:iy(t),provide:sy(t),put:ay(t)}}(w),this.stats=function(t){return{bitswap:_f(t),repo:ey(t),bw:uy(t)}}(w),this.swarm=function(t){return{addrs:cy(t),connect:ly(t),disconnect:hy(t),localAddrs:fy(t),peers:dy(t)}}(w),this.add=function(t){const e=ws(t);return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=Bs(t),o=e(r,n),i=await As(o);if(null==i)throw new Error("Invalid body");return i}}(w),this.addAll=ws(w),this.cat=function(t){return function(){var e=c((function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){const r=yield ei(t.post("cat",{signal:n.signal,searchParams:ys((0,d.A)({arg:e.toString()},n)),headers:n.headers}));yield*fi((0,ni.A)(r.iterator()))}()}));return function(t){return e.apply(this,arguments)}}()}(w),this.get=function(t){return function(){var e=c((function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){const r=(0,d.A)({arg:"".concat(e instanceof Uint8Array?Pt.TO.decode(e):e)},n),o=yield ei(t.post("get",{signal:n.signal,searchParams:ys(r),headers:n.headers}));yield*fi((0,ni.A)(o.iterator()))}()}));return function(t){return e.apply(this,arguments)}}()}(w),this.ls=function(t){return function(){var e=c((function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){const r="".concat(e instanceof Uint8Array?Pt.TO.decode(e):e);async function o(e){let n=e.Hash;if(!0===n.includes("/")){const e=!0===n.startsWith("/ipfs/")?n:"/ipfs/".concat(n);n=(await Id(t)(e)).cid}else n=Pt.TO.parse(n);return{name:e.Name,path:r+(null!=e.Name?"/".concat(e.Name):""),size:e.Size,cid:n,type:tp(e)}}const i=yield ei(t.post("ls",{signal:n.signal,searchParams:ys((0,d.A)({arg:r},n)),headers:n.headers}));var s,a=!1,u=!1;try{for(var c,l=(0,ni.A)(i.ndjson());a=!(c=yield ei(l.next())).done;a=!1){let t=c.value;{if(t=t.Objects,null==t)throw new Error("expected .Objects in results");if(t=t[0],null==t)throw new Error("expected one array in results.Objects");const e=t.Links;if(!Array.isArray(e))throw new Error("expected one array in results.Objects[0].Links");if(0===e.length)return void(yield o(t));yield*fi((0,ni.A)(e.map(o)))}}}catch(h){u=!0,s=h}finally{try{a&&null!=l.return&&(yield ei(l.return()))}finally{if(u)throw s}}}()}));return function(t){return e.apply(this,arguments)}}()}(w),this.id=Td(w),this.version=function(t){return async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await t.post("version",{signal:e.signal,searchParams:ys(e),headers:e.headers});return(0,d.A)((0,d.A)({},ds(await n.json())),{},{"ipfs-http-client":"1.0.0"})}}(w),this.stop=function(t){return async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await t.post("shutdown",{signal:e.signal,searchParams:ys(e),headers:e.headers});await n.text()}}(w),this.ping=function(t){return function(){var e=c((function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){const r=yield ei(t.post("ping",{signal:n.signal,searchParams:ys((0,d.A)({arg:"".concat(e)},n)),headers:n.headers,transform:ds}));yield*fi((0,ni.A)(r.ndjson()))}()}));return function(t){return e.apply(this,arguments)}}()}(w),this.resolve=function(t){return async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await t.post("resolve",{signal:n.signal,searchParams:ys((0,d.A)({arg:e},n)),headers:n.headers}),{Path:o}=await r.json();return o}}(w),this.commands=function(t){return async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await t.post("commands",{signal:e.signal,searchParams:ys(e),headers:e.headers})).json()}}(w),this.mount=function(t){return async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await t.post("dns",{signal:e.signal,searchParams:ys(e),headers:e.headers});return ds(await n.json())}}(w),this.isOnline=function(t){const e=Td(t);return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{var n;const r=await e(t);return Boolean(null===r||void 0===r||null===(n=r.addresses)||void 0===n?void 0:n.length)}catch(r){return!1}}}(w),this.getEndpointConfig=function(t){return function(){var e;const n=new URL(null!==(e=t.opts.base)&&void 0!==e?e:"");return{host:n.hostname,port:n.port,protocol:n.protocol,pathname:n.pathname,"api-path":n.pathname}}}(w)}}function py(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return("string"===typeof t||(0,h.R8)(t)||t instanceof URL)&&(t={url:t}),function(t){return new gy(t)}(t)}}}]);
//# sourceMappingURL=852.eaff4c8d.chunk.js.map