op",Qe="reset",et="prev",tt="next",nt="go",rt="close",ot="skip",it="update",st="tour:start",at="step:before",ut="beacon",lt="tooltip",ct="step:after",ft="tour:end",ht="tour:status",dt="error:target_not_found",pt={INIT:"init",READY:"ready",BEACON:"beacon",TOOLTIP:"tooltip",COMPLETE:"complete",ERROR:"error"},gt={IDLE:"idle",READY:"ready",WAITING:"waiting",RUNNING:"running",PAUSED:"paused",SKIPPED:"skipped",FINISHED:"finished",ERROR:"error"};function yt(){var e;return!("undefined"===typeof window||!(null==(e=window.document)?void 0:e.createElement))}function mt(e){return e?e.getBoundingClientRect():null}function bt(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{body:t,documentElement:n}=document;if(!t||!n)return 0;if(e){const e=[t.scrollHeight,t.offsetHeight,n.clientHeight,n.scrollHeight,n.offsetHeight].sort(((e,t)=>e-t)),r=Math.floor(e.length/2);return e.length%2===0?(e[r-1]+e[r])/2:e[r]}return Math.max(t.scrollHeight,t.offsetHeight,n.clientHeight,n.scrollHeight,n.offsetHeight)}function vt(e){if("string"===typeof e)try{return document.querySelector(e)}catch(t){return null}return e}function wt(e,t,n){if(!e)return Ct();const r=N()(e);if(r){if(r.isSameNode(Ct()))return n?document:Ct();if(!(r.scrollHeight>r.offsetHeight)&&!t)return r.style.overflow="initial",Ct()}return r}function Et(e,t){if(!e)return!1;const n=wt(e,t);return!!n&&!n.isSameNode(Ct())}function At(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fixed";if(!e||!(e instanceof HTMLElement))return!1;const{nodeName:n}=e,r=function(e){return e&&1===e.nodeType?getComputedStyle(e):null}(e);return"BODY"!==n&&"HTML"!==n&&(!(!r||r.position!==t)||!!e.parentNode&&At(e.parentNode,t))}function St(e,t,n){var r;if(!e)return 0;const{offsetTop:o=0,scrollTop:i=0}=null!=(r=N()(e))?r:{};let s=e.getBoundingClientRect().top+i;o&&(Et(e,n)||function(e){return e.offsetParent!==document.body}(e))&&(s-=o);const a=Math.floor(s-t);return a<0?0:a}function Ct(){var e;return null!=(e=document.scrollingElement)?e:document.documentElement}var Tt=void 0!==F.createPortal;function kt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:navigator.userAgent,t=e;return"undefined"===typeof window?t="node":document.documentMode?t="ie":/Edge/.test(e)?t="edge":Boolean(window.opera)||e.includes(" OPR/")?t="opera":"undefined"!==typeof window.InstallTrigger?t="firefox":window.chrome?t="chrome":/(Version\/([\d._]+).*Safari|CriOS|FxiOS| Mobile\/)/.test(e)&&(t="safari"),t}function xt(e){const t=[],n=e=>{if("string"===typeof e||"number"===typeof e)t.push(e);else if(Array.isArray(e))e.forEach((e=>n(e)));else if((0,i.isValidElement)(e)){const{children:t}=e.props;Array.isArray(t)?t.forEach((e=>n(e))):n(t)}};return n(e),t.join(" ").trim()}function Ot(e){const t=e.replace(/^#?([\da-f])([\da-f])([\da-f])$/i,((e,t,n,r)=>t+t+n+n+r+r)),n=/^#?([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i.exec(t);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:[]}function It(e){return e.disableBeacon||"center"===e.placement}function Pt(){return!["chrome","safari","firefox","opera"].includes(kt())}function Bt(e){let{data:t,debug:n=!1,title:r,warn:o=!1}=e;const i=o?console.warn||console.error:console.log;n&&(r&&t?(console.groupCollapsed("%creact-joyride: ".concat(r),"color: #ff0044; font-weight: bold; font-size: 12px;"),Array.isArray(t)?t.forEach((e=>{v.plainObject(e)&&e.key?i.apply(console,[e.key,e.value]):i.apply(console,[e])})):i.apply(console,[t]),console.groupEnd()):console.error("Missing title or data props"))}function Dt(e){if(!v.plainObject(e))throw new TypeError("Expected an object");const t={};for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];for(const i in e)({}).hasOwnProperty.call(e,i)&&(r.includes(i)||(t[i]=e[i]));return t}var Nt={options:{preventOverflow:{boundariesElement:"scrollParent"}},wrapperOptions:{offset:-18,position:!0}},Ft={back:"Back",close:"Close",last:"Last",next:"Next",nextLabelWithProgress:"Next (Step {step} of {steps})",open:"Open the dialog",skip:"Skip"},_t={event:"click",placement:"bottom",offset:10,disableBeacon:!1,disableCloseOnEsc:!1,disableOverlay:!1,disableOverlayClose:!1,disableScrollParentFix:!1,disableScrolling:!1,hideBackButton:!1,hideCloseButton:!1,hideFooter:!1,isFixed:!1,locale:Ft,showProgress:!1,showSkipButton:!1,spotlightClicks:!1,spotlightPadding:10},Lt={continuous:!1,debug:!1,disableCloseOnEsc:!1,disableOverlay:!1,disableOverlayClose:!1,disableScrolling:!1,disableScrollParentFix:!1,getHelpers:void 0,hideBackButton:!1,run:!0,scrollOffset:20,scrollDuration:300,scrollToFirstStep:!1,showSkipButton:!1,showProgress:!1,spotlightClicks:!1,spotlightPadding:10,steps:[]},Rt={arrowColor:"#fff",backgroundColor:"#fff",beaconSize:36,overlayColor:"rgba(0, 0, 0, 0.5)",primaryColor:"#f04",spotlightShadow:"0 0 15px rgba(0, 0, 0, 0.5)",textColor:"#333",width:380,zIndex:100},jt={backgroundColor:"transparent",border:0,borderRadius:0,color:"#555",cursor:"pointer",fontSize:16,lineHeight:1,padding:8,WebkitAppearance:"none"},Mt={borderRadius:4,position:"absolute"};function Ut(e){return function(e){if(!v.plainObject(e))throw new TypeError("Expected an object");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!n.length)return e;const o={};for(const i in e)({}).hasOwnProperty.call(e,i)&&n.includes(i)&&(o[i]=e[i]);return o}(e,"beaconComponent","disableCloseOnEsc","disableOverlay","disableOverlayClose","disableScrolling","disableScrollParentFix","floaterProps","hideBackButton","hideCloseButton","locale","showProgress","showSkipButton","spotlightClicks","spotlightPadding","styles","tooltipComponent")}function Ht(e,t){var n,r,i,s,a,u;const l=null!=t?t:{},c=L().all([_t,Ut(e),l],{isMergeableObject:v.plainObject}),f=function(e,t){var n,r,i,s,a;const{floaterProps:u,styles:l}=e,c=L()(null!=(n=t.floaterProps)?n:{},null!=u?u:{}),f=L()(null!=l?l:{},null!=(r=t.styles)?r:{}),h=L()(Rt,f.options||{}),d="center"===t.placement||t.disableBeacon;let{width:p}=h;window.innerWidth>480&&(p=380),"width"in h&&(p="number"===typeof h.width&&window.innerWidth<h.width?window.innerWidth-30:h.width);const g={bottom:0,left:0,overflow:"hidden",position:"absolute",right:0,top:0,zIndex:h.zIndex},y={beacon:(0,o.A)((0,o.A)({},jt),{},{display:d?"none":"inline-block",height:h.beaconSize,position:"relative",width:h.beaconSize,zIndex:h.zIndex}),beaconInner:{animation:"joyride-beacon-inner 1.2s infinite ease-in-out",backgroundColor:h.primaryColor,borderRadius:"50%",display:"block",height:"50%",left:"50%",opacity:.7,position:"absolute",top:"50%",transform:"translate(-50%, -50%)",width:"50%"},beaconOuter:{animation:"joyride-beacon-outer 1.2s infinite ease-in-out",backgroundColor:"rgba(".concat(Ot(h.primaryColor).join(","),", 0.2)"),border:"2px solid ".concat(h.primaryColor),borderRadius:"50%",boxSizing:"border-box",display:"block",height:"100%",left:0,opacity:.9,position:"absolute",top:0,transformOrigin:"center",width:"100%"},tooltip:{backgroundColor:h.backgroundColor,borderRadius:5,boxSizing:"border-box",color:h.textColor,fontSize:16,maxWidth:"100%",padding:15,position:"relative",width:p},tooltipContainer:{lineHeight:1.4,textAlign:"center"},tooltipTitle:{fontSize:18,margin:0},tooltipContent:{padding:"20px 10px"},tooltipFooter:{alignItems:"center",display:"flex",justifyContent:"flex-end",marginTop:15},tooltipFooterSpacer:{flex:1},buttonNext:(0,o.A)((0,o.A)({},jt),{},{backgroundColor:h.primaryColor,borderRadius:4,color:"#fff"}),buttonBack:(0,o.A)((0,o.A)({},jt),{},{color:h.primaryColor,marginLeft:"auto",marginRight:5}),buttonClose:(0,o.A)((0,o.A)({},jt),{},{color:h.textColor,height:14,padding:15,position:"absolute",right:0,top:0,width:14}),buttonSkip:(0,o.A)((0,o.A)({},jt),{},{color:h.textColor,fontSize:14}),overlay:(0,o.A)((0,o.A)({},g),{},{backgroundColor:h.overlayColor,mixBlendMode:"hard-light"}),overlayLegacy:(0,o.A)({},g),overlayLegacyCenter:(0,o.A)((0,o.A)({},g),{},{backgroundColor:h.overlayColor}),spotlight:(0,o.A)((0,o.A)({},Mt),{},{backgroundColor:"gray"}),spotlightLegacy:(0,o.A)((0,o.A)({},Mt),{},{boxShadow:"0 0 0 9999px ".concat(h.overlayColor,", ").concat(h.spotlightShadow)}),floaterStyles:{arrow:{color:null!=(a=null==(s=null==(i=null==c?void 0:c.styles)?void 0:i.arrow)?void 0:s.color)?a:h.arrowColor},options:{zIndex:h.zIndex+100}},options:h};return L()(y,f)}(e,c),h=Et(vt(c.target),c.disableScrollParentFix),d=L().all([Nt,null!=(n=e.floaterProps)?n:{},null!=(r=c.floaterProps)?r:{}]);return d.offset=c.offset,d.styles=L()(null!=(i=d.styles)?i:{},f.floaterStyles),d.offset+=null!=(a=null!=(s=e.spotlightPadding)?s:c.spotlightPadding)?a:0,c.placementBeacon&&d.wrapperOptions&&(d.wrapperOptions.placement=c.placementBeacon),h&&d.options.preventOverflow&&(d.options.preventOverflow.boundariesElement="window"),(0,o.A)((0,o.A)({},c),{},{locale:L().all([Ft,null!=(u=e.locale)?u:{},c.locale||{}]),floaterProps:d,styles:Dt(f,"floaterStyles")})}function zt(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return v.plainObject(e)?!!e.target||(Bt({title:"validateStep",data:"target is missing from the step",warn:!0,debug:t}),!1):(Bt({title:"validateStep",data:"step must be an object",warn:!0,debug:t}),!1)}function Vt(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return v.array(e)?e.every((e=>zt(e,t))):(Bt({title:"validateSteps",data:"steps must be an array",warn:!0,debug:t}),!1)}var $t,Gt={action:"init",controlled:!1,index:0,lifecycle:pt.INIT,origin:null,size:0,status:gt.IDLE},Wt=($t=Dt(Gt,"controlled","size"),Object.keys($t)),qt=class{constructor(e){var t=this;Ye(this,"beaconPopper"),Ye(this,"tooltipPopper"),Ye(this,"data",new Map),Ye(this,"listener"),Ye(this,"store",new Map),Ye(this,"addListener",(e=>{this.listener=e})),Ye(this,"setSteps",(e=>{const{size:t,status:n}=this.getState(),r={size:e.length,status:n};this.data.set("steps",e),n===gt.WAITING&&!t&&e.length&&(r.status=gt.RUNNING),this.setState(r)})),Ye(this,"getPopper",(e=>"beacon"===e?this.beaconPopper:this.tooltipPopper)),Ye(this,"setPopper",((e,t)=>{"beacon"===e?this.beaconPopper=t:this.tooltipPopper=t})),Ye(this,"cleanupPoppers",(()=>{this.beaconPopper=null,this.tooltipPopper=null})),Ye(this,"close",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const{index:n,status:r}=t.getState();r===gt.RUNNING&&t.setState((0,o.A)({},t.getNextState({action:rt,index:n+1,origin:e})))})),Ye(this,"go",(e=>{const{controlled:t,status:n}=this.getState();if(t||n!==gt.RUNNING)return;const r=this.getSteps()[e];this.setState((0,o.A)((0,o.A)({},this.getNextState({action:nt,index:e})),{},{status:r?n:gt.FINISHED}))})),Ye(this,"info",(()=>this.getState())),Ye(this,"next",(()=>{const{index:e,status:t}=this.getState();t===gt.RUNNING&&this.setState(this.getNextState({action:tt,index:e+1}))})),Ye(this,"open",(()=>{const{status:e}=this.getState();e===gt.RUNNING&&this.setState((0,o.A)({},this.getNextState({action:it,lifecycle:pt.TOOLTIP})))})),Ye(this,"prev",(()=>{const{index:e,status:t}=this.getState();t===gt.RUNNING&&this.setState((0,o.A)({},this.getNextState({action:et,index:e-1})))})),Ye(this,"reset",(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{controlled:n}=t.getState();n||t.setState((0,o.A)((0,o.A)({},t.getNextState({action:Qe,index:0})),{},{status:e?gt.RUNNING:gt.READY}))})),Ye(this,"skip",(()=>{const{status:e}=this.getState();e===gt.RUNNING&&this.setState({action:ot,lifecycle:pt.INIT,status:gt.SKIPPED})})),Ye(this,"start",(e=>{const{index:t,size:n}=this.getState();this.setState((0,o.A)((0,o.A)({},this.getNextState({action:Je,index:v.number(e)?e:t},!0)),{},{status:n?gt.RUNNING:gt.WAITING}))})),Ye(this,"stop",(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{index:n,status:r}=t.getState();[gt.FINISHED,gt.SKIPPED].includes(r)||t.setState((0,o.A)((0,o.A)({},t.getNextState({action:Xe,index:n+(e?1:0)})),{},{status:gt.PAUSED}))})),Ye(this,"update",(e=>{var t,n,r,i;if(r=e,i=Wt,!(v.plainObject(r)&&v.array(i)&&Object.keys(r).every((e=>i.includes(e)))))throw new Error("State is not valid. Valid keys: ".concat(Wt.join(", ")));this.setState((0,o.A)({},this.getNextState((0,o.A)((0,o.A)((0,o.A)({},this.getState()),e),{},{action:null!=(t=e.action)?t:it,origin:null!=(n=e.origin)?n:null}),!0)))}));const{continuous:n=!1,stepIndex:r,steps:i=[]}=null!=e?e:{};this.setState({action:Ze,controlled:v.number(r),continuous:n,index:v.number(r)?r:0,lifecycle:pt.INIT,origin:null,status:i.length?gt.READY:gt.IDLE},!0),this.beaconPopper=null,this.tooltipPopper=null,this.listener=null,this.setSteps(i)}getState(){return this.store.size?{action:this.store.get("action")||"",controlled:this.store.get("controlled")||!1,index:parseInt(this.store.get("index"),10),lifecycle:this.store.get("lifecycle")||"",origin:this.store.get("origin")||null,size:this.store.get("size")||0,status:this.store.get("status")||""}:(0,o.A)({},Gt)}getNextState(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var n,r,o,i,s;const{action:a,controlled:u,index:l,size:c,status:f}=this.getState(),h=v.number(e.index)?e.index:l,d=u&&!t?l:Math.min(Math.max(h,0),c);return{action:null!=(n=e.action)?n:a,controlled:u,index:d,lifecycle:null!=(r=e.lifecycle)?r:pt.INIT,origin:null!=(o=e.origin)?o:null,size:null!=(i=e.size)?i:c,status:d===c?gt.FINISHED:null!=(s=e.status)?s:f}}getSteps(){const e=this.data.get("steps");return Array.isArray(e)?e:[]}hasUpdatedState(e){return JSON.stringify(e)!==JSON.stringify(this.getState())}setState(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.getState(),{action:r,index:i,lifecycle:s,origin:a=null,size:u,status:l}=(0,o.A)((0,o.A)({},n),e);this.store.set("action",r),this.store.set("index",i),this.store.set("lifecycle",s),this.store.set("origin",a),this.store.set("size",u),this.store.set("status",l),t&&(this.store.set("controlled",e.controlled),this.store.set("continuous",e.continuous)),this.listener&&this.hasUpdatedState(n)&&this.listener(this.getState())}getHelpers(){return{close:this.close,go:this.go,info:this.info,next:this.next,open:this.open,prev:this.prev,reset:this.reset,skip:this.skip}}};var Kt=function(e){let{styles:t}=e;return i.createElement("div",{key:"JoyrideSpotlight",className:"react-joyride__spotlight","data-test-id":"spotlight",style:t})},Yt=class extends i.Component{constructor(){super(...arguments),Ye(this,"isActive",!1),Ye(this,"resizeTimeout"),Ye(this,"scrollTimeout"),Ye(this,"scrollParent"),Ye(this,"state",{isScrolling:!1,mouseOverSpotlight:!1,showSpotlight:!0}),Ye(this,"hideSpotlight",(()=>{const{continuous:e,disableOverlay:t,lifecycle:n}=this.props,r=[pt.INIT,pt.BEACON,pt.COMPLETE,pt.ERROR];return t||(e?r.includes(n):n!==pt.TOOLTIP)})),Ye(this,"handleMouseMove",(e=>{const{mouseOverSpotlight:t}=this.state,{height:n,left:r,position:o,top:i,width:s}=this.spotlightStyles,a="fixed"===o?e.clientY:e.pageY,u="fixed"===o?e.clientX:e.pageX,l=u>=r&&u<=r+s&&(a>=i&&a<=i+n);l!==t&&this.updateState({mouseOverSpotlight:l})})),Ye(this,"handleScroll",(()=>{const{target:e}=this.props,t=vt(e);if(this.scrollParent!==document){const{isScrolling:e}=this.state;e||this.updateState({isScrolling:!0,showSpotlight:!1}),clearTimeout(this.scrollTimeout),this.scrollTimeout=window.setTimeout((()=>{this.updateState({isScrolling:!1,showSpotlight:!0})}),50)}else At(t,"sticky")&&this.updateState({})})),Ye(this,"handleResize",(()=>{clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout((()=>{this.isActive&&this.forceUpdate()}),100)}))}componentDidMount(){const{debug:e,disableScrolling:t,disableScrollParentFix:n=!1,target:r}=this.props,o=vt(r);this.scrollParent=wt(null!=o?o:document.body,n,!0),this.isActive=!0,window.addEventListener("resize",this.handleResize)}componentDidUpdate(e){var t;const{lifecycle:n,spotlightClicks:r}=this.props,{changed:o}=I(e,this.props);o("lifecycle",pt.TOOLTIP)&&(null==(t=this.scrollParent)||t.addEventListener("scroll",this.handleScroll,{passive:!0}),setTimeout((()=>{const{isScrolling:e}=this.state;e||this.updateState({showSpotlight:!0})}),100)),(o("spotlightClicks")||o("disableOverlay")||o("lifecycle"))&&(r&&n===pt.TOOLTIP?window.addEventListener("mousemove",this.handleMouseMove,!1):n!==pt.TOOLTIP&&window.removeEventListener("mousemove",this.handleMouseMove))}componentWillUnmount(){var e;this.isActive=!1,window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("resize",this.handleResize),clearTimeout(this.resizeTimeout),clearTimeout(this.scrollTimeout),null==(e=this.scrollParent)||e.removeEventListener("scroll",this.handleScroll)}get overlayStyles(){const{mouseOverSpotlight:e}=this.state,{disableOverlayClose:t,placement:n,styles:r}=this.props;let i=r.overlay;return Pt()&&(i="center"===n?r.overlayLegacyCenter:r.overlayLegacy),(0,o.A)({cursor:t?"default":"pointer",height:bt(),pointerEvents:e?"none":"auto"},i)}get spotlightStyles(){var e,t,n;const{showSpotlight:r}=this.state,{disableScrollParentFix:i=!1,spotlightClicks:s,spotlightPadding:a=0,styles:u,target:l}=this.props,c=vt(l),f=mt(c),h=At(c),d=function(e,t,n){var r;const o=mt(e),i=wt(e,n),s=Et(e,n);let a=0,u=null!=(r=null==o?void 0:o.top)?r:0;return i instanceof HTMLElement&&(a=i.scrollTop,s||At(e)||(u+=a),i.isSameNode(Ct())||(u+=Ct().scrollTop)),Math.floor(u-t)}(c,a,i);return(0,o.A)((0,o.A)({},Pt()?u.spotlightLegacy:u.spotlight),{},{height:Math.round((null!=(e=null==f?void 0:f.height)?e:0)+2*a),left:Math.round((null!=(t=null==f?void 0:f.left)?t:0)-a),opacity:r?1:0,pointerEvents:s?"none":"auto",position:h?"fixed":"absolute",top:d,transition:"opacity 0.2s",width:Math.round((null!=(n=null==f?void 0:f.width)?n:0)+2*a)})}updateState(e){this.isActive&&this.setState((t=>(0,o.A)((0,o.A)({},t),e)))}render(){const{showSpotlight:e}=this.state,{onClickOverlay:t,placement:n}=this.props,{hideSpotlight:s,overlayStyles:a,spotlightStyles:u}=this;if(s())return null;let l="center"!==n&&e&&i.createElement(Kt,{styles:u});if("safari"===kt()){const{mixBlendMode:e,zIndex:t}=a,n=(0,r.A)(a,$e);l=i.createElement("div",{style:(0,o.A)({},n)},l),delete a.backgroundColor}return i.createElement("div",{className:"react-joyride__overlay","data-test-id":"overlay",onClick:t,role:"presentation",style:a},l)}},Zt=class extends i.Component{constructor(){super(...arguments),Ye(this,"node",null)}componentDidMount(){const{id:e}=this.props;yt()&&(this.node=document.createElement("div"),this.node.id=e,document.body.appendChild(this.node),Tt||this.renderReact15())}componentDidUpdate(){yt()&&(Tt||this.renderReact15())}componentWillUnmount(){yt()&&this.node&&(Tt||F.unmountComponentAtNode(this.node),this.node.parentNode===document.body&&(document.body.removeChild(this.node),this.node=null))}renderReact15(){if(!yt())return;const{children:e}=this.props;this.node&&F.unstable_renderSubtreeIntoContainer(this,e,this.node)}renderReact16(){if(!yt()||!Tt)return null;const{children:e}=this.props;return this.node?F.createPortal(e,this.node):null}render(){return Tt?this.renderReact16():null}},Jt=class{constructor(e,t){if(Ye(this,"element"),Ye(this,"options"),Ye(this,"canBeTabbed",(e=>{const{tabIndex:t}=e;return!(null===t||t<0)&&this.canHaveFocus(e)})),Ye(this,"canHaveFocus",(e=>{const t=e.nodeName.toLowerCase();return(/input|select|textarea|button|object/.test(t)&&!e.getAttribute("disabled")||"a"===t&&!!e.getAttribute("href"))&&this.isVisible(e)})),Ye(this,"findValidTabElements",(()=>[].slice.call(this.element.querySelectorAll("*"),0).filter(this.canBeTabbed))),Ye(this,"handleKeyDown",(e=>{const{code:t="Tab"}=this.options;e.code===t&&this.interceptTab(e)})),Ye(this,"interceptTab",(e=>{e.preventDefault();const t=this.findValidTabElements(),{shiftKey:n}=e;if(!t.length)return;let r=document.activeElement?t.indexOf(document.activeElement):0;-1===r||!n&&r+1===t.length?r=0:n&&0===r?r=t.length-1:r+=n?-1:1,t[r].focus()})),Ye(this,"isHidden",(e=>{const t=e.offsetWidth<=0&&e.offsetHeight<=0,n=window.getComputedStyle(e);return!(!t||e.innerHTML)||(t&&"visible"!==n.getPropertyValue("overflow")||"none"===n.getPropertyValue("display"))})),Ye(this,"isVisible",(e=>{let t=e;for(;t;)if(t instanceof HTMLElement){if(t===document.body)break;if(this.isHidden(t))return!1;t=t.parentNode}return!0})),Ye(this,"removeScope",(()=>{window.removeEventListener("keydown",this.handleKeyDown)})),Ye(this,"checkFocus",(e=>{document.activeElement!==e&&(e.focus(),window.requestAnimationFrame((()=>this.checkFocus(e))))})),Ye(this,"setFocus",(()=>{const{selector:e}=this.options;if(!e)return;const t=this.element.querySelector(e);t&&window.requestAnimationFrame((()=>this.checkFocus(t)))})),!(e instanceof HTMLElement))throw new TypeError("Invalid parameter: element must be an HTMLElement");this.element=e,this.options=t,window.addEventListener("keydown",this.handleKeyDown,!1),this.setFocus()}},Xt=class extends i.Component{constructor(e){if(super(e),Ye(this,"beacon",null),Ye(this,"setBeaconRef",(e=>{this.beacon=e})),e.beaconComponent)return;const t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.id="joyride-beacon-animation",e.nonce&&n.setAttribute("nonce",e.nonce);n.appendChild(document.createTextNode("\n        @keyframes joyride-beacon-inner {\n          20% {\n            opacity: 0.9;\n          }\n        \n          90% {\n            opacity: 0.7;\n          }\n        }\n        \n        @keyframes joyride-beacon-outer {\n          0% {\n            transform: scale(1);\n          }\n        \n          45% {\n            opacity: 0.7;\n            transform: scale(0.75);\n          }\n        \n          100% {\n            opacity: 0.9;\n            transform: scale(1);\n          }\n        }\n      ")),t.appendChild(n)}componentDidMount(){const{shouldFocus:e}=this.props;setTimeout((()=>{v.domElement(this.beacon)&&e&&this.beacon.focus()}),0)}componentWillUnmount(){const e=document.getElementById("joyride-beacon-animation");(null==e?void 0:e.parentNode)&&e.parentNode.removeChild(e)}render(){const{beaconComponent:e,continuous:t,index:n,isLastStep:r,locale:s,onClickOrHover:a,size:u,step:l,styles:c}=this.props,f=v.string(s.open)?s.open:Ve()(s.open),h={"aria-label":f,onClick:a,onMouseEnter:a,ref:this.setBeaconRef,title:f};let d;if(e){const s=e;d=i.createElement(s,(0,o.A)({continuous:t,index:n,isLastStep:r,size:u,step:l},h))}else d=i.createElement("button",(0,o.A)({key:"JoyrideBeacon",className:"react-joyride__beacon","data-test-id":"button-beacon",style:c.beacon,type:"button"},h),i.createElement("span",{style:c.beaconInner}),i.createElement("span",{style:c.beaconOuter}));return d}};var Qt=function(e){let{styles:t}=e,n=(0,r.A)(e,Ge);const{color:s,height:a,width:u}=t,l=(0,r.A)(t,We);return i.createElement("button",(0,o.A)({style:l,type:"button"},n),i.createElement("svg",{height:"number"===typeof a?"".concat(a,"px"):a,preserveAspectRatio:"xMidYMid",version:"1.1",viewBox:"0 0 18 18",width:"number"===typeof u?"".concat(u,"px"):u,xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",null,i.createElement("path",{d:"M8.13911129,9.00268191 L0.171521827,17.0258467 C-0.0498027049,17.248715 -0.0498027049,17.6098394 0.171521827,17.8327545 C0.28204354,17.9443526 0.427188206,17.9998706 0.572051765,17.9998706 C0.71714958,17.9998706 0.862013139,17.9443526 0.972581703,17.8327545 L9.0000937,9.74924618 L17.0276057,17.8327545 C17.1384085,17.9443526 17.2832721,17.9998706 17.4281356,17.9998706 C17.5729992,17.9998706 17.718097,17.9443526 17.8286656,17.8327545 C18.0499901,17.6098862 18.0499901,17.2487618 17.8286656,17.0258467 L9.86135722,9.00268191 L17.8340066,0.973848225 C18.0553311,0.750979934 18.0553311,0.389855532 17.8340066,0.16694039 C17.6126821,-0.0556467968 17.254037,-0.0556467968 17.0329467,0.16694039 L9.00042166,8.25611765 L0.967006424,0.167268345 C0.745681892,-0.0553188426 0.387317931,-0.0553188426 0.165993399,0.167268345 C-0.0553311331,0.390136635 -0.0553311331,0.751261038 0.165993399,0.974176179 L8.13920499,9.00268191 L8.13911129,9.00268191 Z",fill:s}))))};var en=function(e){const{backProps:t,closeProps:n,index:r,isLastStep:s,primaryProps:a,skipProps:u,step:l,tooltipProps:c}=e,{content:f,hideBackButton:h,hideCloseButton:d,hideFooter:p,showSkipButton:g,styles:y,title:m}=l,b={primary:a.title};return b.primary&&(b.primary=i.createElement("button",(0,o.A)({"data-test-id":"button-primary",style:y.buttonNext,type:"button"},a),b.primary)),g&&!s&&(b.skip=i.createElement("button",(0,o.A)({"aria-live":"off","data-test-id":"button-skip",style:y.buttonSkip,type:"button"},u),u.title)),!h&&r>0&&(b.back=i.createElement("button",(0,o.A)({"data-test-id":"button-back",style:y.buttonBack,type:"button"},t),t.title)),b.close=!d&&i.createElement(Qt,(0,o.A)({"data-test-id":"button-close",styles:y.buttonClose},n)),i.createElement("div",(0,o.A)({key:"JoyrideTooltip","aria-label":xt(m)||xt(f),className:"react-joyride__tooltip",style:y.tooltip},c),i.createElement("div",{style:y.tooltipContainer},m&&i.createElement("h1",{"aria-label":xt(m),style:y.tooltipTitle},m),i.createElement("div",{style:y.tooltipContent},f)),!p&&i.createElement("div",{style:y.tooltipFooter},i.createElement("div",{style:y.tooltipFooterSpacer},b.skip),b.back,b.primary),b.close)},tn=class extends i.Component{constructor(){super(...arguments),Ye(this,"handleClickBack",(e=>{e.preventDefault();const{helpers:t}=this.props;t.prev()})),Ye(this,"handleClickClose",(e=>{e.preventDefault();const{helpers:t}=this.props;t.close("button_close")})),Ye(this,"handleClickPrimary",(e=>{e.preventDefault();const{continuous:t,helpers:n}=this.props;t?n.next():n.close("button_primary")})),Ye(this,"handleClickSkip",(e=>{e.preventDefault();const{helpers:t}=this.props;t.skip()})),Ye(this,"getElementsProps",(()=>{const{continuous:e,index:t,isLastStep:n,setTooltipRef:r,size:o,step:i}=this.props,s=xt(i.locale.back),a=xt(i.locale.close),u=xt(i.locale.last),l=xt(i.locale.next),c=xt(i.locale.skip);let f=a,h=a;return e&&(f=l,h=l,i.showProgress&&!n&&(f=xt(i.locale.nextLabelWithProgress).replace("{step}",String(t+1)).replace("{steps}",String(o)),h="".concat(l," (").concat(t+1,"/").concat(o,")")),n&&(f=u,h=u)),{backProps:{"aria-label":s,"data-action":"back",onClick:this.handleClickBack,role:"button",title:s},closeProps:{"aria-label":a,"data-action":"close",onClick:this.handleClickClose,role:"button",title:a},primaryProps:{"aria-label":f,"data-action":"primary",onClick:this.handleClickPrimary,role:"button",title:h},skipProps:{"aria-label":c,"data-action":"skip",onClick:this.handleClickSkip,role:"button",title:c},tooltipProps:{"aria-modal":!0,ref:r,role:"alertdialog"}}}))}render(){const{continuous:e,index:t,isLastStep:n,setTooltipRef:s,size:a,step:u}=this.props,{beaconComponent:l,tooltipComponent:c}=u,f=(0,r.A)(u,qe);let h;if(c){const r=(0,o.A)((0,o.A)({},this.getElementsProps()),{},{continuous:e,index:t,isLastStep:n,size:a,step:f,setTooltipRef:s}),u=c;h=i.createElement(u,(0,o.A)({},r))}else h=i.createElement(en,(0,o.A)((0,o.A)({},this.getElementsProps()),{},{continuous:e,index:t,isLastStep:n,size:a,step:u}));return h}},nn=class extends i.Component{constructor(){super(...arguments),Ye(this,"scope",null),Ye(this,"tooltip",null),Ye(this,"handleClickHoverBeacon",(e=>{const{step:t,store:n}=this.props;"mouseenter"===e.type&&"hover"!==t.event||n.update({lifecycle:pt.TOOLTIP})})),Ye(this,"setTooltipRef",(e=>{this.tooltip=e})),Ye(this,"setPopper",((e,t)=>{var n;const{action:r,lifecycle:o,step:i,store:s}=this.props;"wrapper"===t?s.setPopper("beacon",e):s.setPopper("tooltip",e),s.getPopper("beacon")&&(s.getPopper("tooltip")||"center"===i.placement)&&o===pt.INIT&&s.update({action:r,lifecycle:pt.READY}),(null==(n=i.floaterProps)?void 0:n.getPopper)&&i.floaterProps.getPopper(e,t)})),Ye(this,"renderTooltip",(e=>{const{continuous:t,helpers:n,index:r,size:s,step:a}=this.props;return i.createElement(tn,(0,o.A)({continuous:t,helpers:n,index:r,isLastStep:r+1===s,setTooltipRef:this.setTooltipRef,size:s,step:a},e))}))}componentDidMount(){const{debug:e,index:t}=this.props;Bt({title:"step:".concat(t),data:[{key:"props",value:this.props}],debug:e})}componentDidUpdate(e){var t;const{action:n,callback:r,continuous:i,controlled:s,debug:a,helpers:u,index:l,lifecycle:c,status:f,step:h,store:d}=this.props,{changed:p,changedFrom:g}=I(e,this.props),y=u.info(),m=i&&n!==rt&&(l>0||n===et),b=p("action")||p("index")||p("lifecycle")||p("status"),v=g("lifecycle",[pt.TOOLTIP,pt.INIT],pt.INIT),w=p("action",[tt,et,ot,rt]),E=s&&l===e.index;if(w&&(v||E)&&r((0,o.A)((0,o.A)({},y),{},{index:e.index,lifecycle:pt.COMPLETE,step:e.step,type:ct})),"center"===h.placement&&f===gt.RUNNING&&p("index")&&n!==Je&&c===pt.INIT&&d.update({lifecycle:pt.READY}),b){const e=vt(h.target),t=!!e,i=t&&function(e){var t;if(!e)return!1;let n=e;for(;n&&n!==document.body;){if(n instanceof HTMLElement){const{display:e,visibility:t}=getComputedStyle(n);if("none"===e||"hidden"===t)return!1}n=null!=(t=n.parentElement)?t:null}return!0}(e);i?(g("status",gt.READY,gt.RUNNING)||g("lifecycle",pt.INIT,pt.READY))&&r((0,o.A)((0,o.A)({},y),{},{step:h,type:at})):(console.warn(t?"Target not visible":"Target not mounted",h),r((0,o.A)((0,o.A)({},y),{},{type:dt,step:h})),s||d.update({index:l+(n===et?-1:1)}))}g("lifecycle",pt.INIT,pt.READY)&&d.update({lifecycle:It(h)||m?pt.TOOLTIP:pt.BEACON}),p("index")&&Bt({title:"step:".concat(c),data:[{key:"props",value:this.props}],debug:a}),p("lifecycle",pt.BEACON)&&r((0,o.A)((0,o.A)({},y),{},{step:h,type:ut})),p("lifecycle",pt.TOOLTIP)&&(r((0,o.A)((0,o.A)({},y),{},{step:h,type:lt})),this.tooltip&&(this.scope=new Jt(this.tooltip,{selector:"[data-action=primary]"}),this.scope.setFocus())),g("lifecycle",[pt.TOOLTIP,pt.INIT],pt.INIT)&&(null==(t=this.scope)||t.removeScope(),d.cleanupPoppers())}componentWillUnmount(){var e;null==(e=this.scope)||e.removeScope()}get open(){const{lifecycle:e,step:t}=this.props;return It(t)||e===pt.TOOLTIP}render(){const{continuous:e,debug:t,index:n,nonce:r,shouldScroll:s,size:a,step:u}=this.props,l=vt(u.target);return zt(u)&&v.domElement(l)?i.createElement("div",{key:"JoyrideStep-".concat(n),className:"react-joyride__step"},i.createElement(He,(0,o.A)((0,o.A)({},u.floaterProps),{},{component:this.renderTooltip,debug:t,getPopper:this.setPopper,id:"react-joyride-step-".concat(n),open:this.open,placement:u.placement,target:u.target}),i.createElement(Xt,{beaconComponent:u.beaconComponent,continuous:e,index:n,isLastStep:n+1===a,locale:u.locale,nonce:r,onClickOrHover:this.handleClickHoverBeacon,shouldFocus:s,size:a,step:u,styles:u.styles}))):null}},rn=class extends i.Component{constructor(e){super(e),Ye(this,"helpers"),Ye(this,"store"),Ye(this,"callback",(e=>{const{callback:t}=this.props;v.function(t)&&t(e)})),Ye(this,"handleKeyboard",(e=>{const{index:t,lifecycle:n}=this.state,{steps:r}=this.props,o=r[t];n===pt.TOOLTIP&&"Escape"===e.code&&o&&!o.disableCloseOnEsc&&this.store.close("keyboard")})),Ye(this,"handleClickOverlay",(()=>{const{index:e}=this.state,{steps:t}=this.props;Ht(this.props,t[e]).disableOverlayClose||this.helpers.close("overlay")})),Ye(this,"syncState",(e=>{this.setState(e)}));const{debug:t,getHelpers:n,run:r=!0,stepIndex:i}=e;var s;this.store=(s=(0,o.A)((0,o.A)({},e),{},{controlled:r&&v.number(i)}),new qt(s)),this.helpers=this.store.getHelpers();const{addListener:a}=this.store;Bt({title:"init",data:[{key:"props",value:this.props},{key:"state",value:this.state}],debug:t}),a(this.syncState),n&&n(this.helpers),this.state=this.store.getState()}componentDidMount(){if(!yt())return;const{debug:e,disableCloseOnEsc:t,run:n,steps:r}=this.props,{start:o}=this.store;Vt(r,e)&&n&&o(),t||document.body.addEventListener("keydown",this.handleKeyboard,{passive:!0})}componentDidUpdate(e,t){if(!yt())return;const{action:n,controlled:r,index:i,status:s}=this.state,{debug:a,run:u,stepIndex:l,steps:c}=this.props,{stepIndex:h,steps:d}=e,{reset:p,setSteps:g,start:y,stop:m,update:b}=this.store,{changed:w}=I(e,this.props),{changed:E,changedFrom:A}=I(t,this.state),S=Ht(this.props,c[i]),C=!f(d,c),T=v.number(l)&&w("stepIndex"),k=vt(S.target);if(C&&(Vt(c,a)?g(c):console.warn("Steps are not valid",c)),w("run")&&(u?y(l):m()),T){let e=v.number(h)&&h<l?tt:et;n===Xe&&(e=Je),[gt.FINISHED,gt.SKIPPED].includes(s)||b({action:n===rt?rt:e,index:l,lifecycle:pt.INIT})}r||s!==gt.RUNNING||0!==i||k||(this.store.update({index:i+1}),this.callback((0,o.A)((0,o.A)({},this.state),{},{type:dt,step:S})));const x=(0,o.A)((0,o.A)({},this.state),{},{index:i,step:S});if(E("action",[tt,et,ot,rt])&&E("status",gt.PAUSED)){const e=Ht(this.props,c[t.index]);this.callback((0,o.A)((0,o.A)({},x),{},{index:t.index,lifecycle:pt.COMPLETE,step:e,type:ct}))}if(E("status",[gt.FINISHED,gt.SKIPPED])){const e=Ht(this.props,c[t.index]);r||this.callback((0,o.A)((0,o.A)({},x),{},{index:t.index,lifecycle:pt.COMPLETE,step:e,type:ct})),this.callback((0,o.A)((0,o.A)({},x),{},{type:ft,step:e,index:t.index})),p()}else A("status",[gt.IDLE,gt.READY],gt.RUNNING)?this.callback((0,o.A)((0,o.A)({},x),{},{type:st})):(E("status")||E("action",Qe))&&this.callback((0,o.A)((0,o.A)({},x),{},{type:ht}));this.scrollToStep(t)}componentWillUnmount(){const{disableCloseOnEsc:e}=this.props;e||document.body.removeEventListener("keydown",this.handleKeyboard)}scrollToStep(e){const{index:t,lifecycle:n,status:r}=this.state,{debug:o,disableScrollParentFix:i=!1,scrollDuration:s,scrollOffset:a=20,scrollToFirstStep:u=!1,steps:l}=this.props,c=Ht(this.props,l[t]),f=vt(c.target),h=function(e){const{isFirstStep:t,lifecycle:n,previousLifecycle:r,scrollToFirstStep:o,step:i,target:s}=e;return!i.disableScrolling&&(!t||o||n===pt.TOOLTIP)&&"center"!==i.placement&&(!i.isFixed||!At(s))&&r!==n&&[pt.BEACON,pt.TOOLTIP].includes(n)}({isFirstStep:0===t,lifecycle:n,previousLifecycle:e.lifecycle,scrollToFirstStep:u,step:c,target:f});if(r===gt.RUNNING&&h){const e=Et(f,i),u=wt(f,i);let l=Math.floor(St(f,a,i))||0;Bt({title:"scrollToStep",data:[{key:"index",value:t},{key:"lifecycle",value:n},{key:"status",value:r}],debug:o});const h=this.store.getPopper("beacon"),d=this.store.getPopper("tooltip");if(n===pt.BEACON&&h){const{offsets:t,placement:n}=h;["bottom"].includes(n)||e||(l=Math.floor(t.popper.top-a))}else if(n===pt.TOOLTIP&&d){const{flipped:t,offsets:n,placement:r}=d;!["top","right","left"].includes(r)||t||e?l-=c.spotlightPadding:l=Math.floor(n.popper.top-a)}l=l>=0?l:0,r===gt.RUNNING&&function(e,t){const{duration:n,element:r}=t;return new Promise(((t,o)=>{const{scrollTop:i}=r,s=e>i?e-i:i-e;B().top(r,e,{duration:s<100?50:n},(e=>e&&"Element already at target scroll position"!==e.message?o(e):t()))}))}(l,{element:u,duration:s}).then((()=>{setTimeout((()=>{var e;null==(e=this.store.getPopper("tooltip"))||e.instance.update()}),10)}))}}render(){if(!yt())return null;const{index:e,lifecycle:t,status:n}=this.state,{continuous:r=!1,debug:s=!1,nonce:a,scrollToFirstStep:u=!1,steps:l}=this.props,c={};if(n===gt.RUNNING&&l[e]){const n=Ht(this.props,l[e]);c.step=i.createElement(nn,(0,o.A)((0,o.A)({},this.state),{},{callback:this.callback,continuous:r,debug:s,helpers:this.helpers,nonce:a,shouldScroll:!n.disableScrolling&&(0!==e||u),step:n,store:this.store})),c.overlay=i.createElement(Zt,{id:"react-joyride-portal"},i.createElement(Yt,(0,o.A)((0,o.A)({},n),{},{continuous:r,debug:s,lifecycle:t,onClickOverlay:this.handleClickOverlay})))}return i.createElement("div",{className:"react-joyride"},c.step,c.overlay)}};Ye(rn,"defaultProps",Lt);var on=rn},39566:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(37566),o=(n(65043),n(70579));const i=e=>(0,o.jsx)("svg",(0,r.A)((0,r.A)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"},e),{},{children:(0,o.jsx)("path",{d:"M84.173 64.865v-29.1a4.48 4.48 0 1 0-4.4-7.63l-25.35-14.61a4.7 4.7 0 0 0 0-1.5 4.485 4.485 0 0 0-8.86 1.4v.17l-25 14.85a4.48 4.48 0 1 0-4.74 7.32v29.08a4.48 4.48 0 0 0 1.5 8.71 4 4 0 0 0 .7-.06 4.2 4.2 0 0 0 1.51-.5l26 14.72v.27a4.49 4.49 0 0 0 4.49 3.76 4 4 0 0 0 .7 0 4.5 4.5 0 0 0 3.78-4.19l25-15.32a4.48 4.48 0 0 0 3.2 1.37 4 4 0 0 0 .7-.06 4.47 4.47 0 0 0 .8-8.63zm-5.15 1.56a4.42 4.42 0 0 0-.82 3l-24.63 15.13a4.5 4.5 0 0 0-2.55-1.66v-28.55a4.48 4.48 0 0 0 3.44-5l25-14.77a4.46 4.46 0 0 0 1.74 1.15v29.12a4.46 4.46 0 0 0-2.18 1.58m-32.67 18.27-24.81-14a4.34 4.34 0 0 0 .26-2.3 4.44 4.44 0 0 0-2.93-3.5v-29.13a4.6 4.6 0 0 0 1.44-.85l25.33 14.16a4.4 4.4 0 0 0 0 1.62 4.48 4.48 0 0 0 3.38 3.66v28.55a4.52 4.52 0 0 0-2.67 1.79m3.67-67.48a4 4 0 0 0 .7-.06 4.33 4.33 0 0 0 2.2-1l25.35 14.58a4.8 4.8 0 0 0 0 1.51 4 4 0 0 0 .17.66l-24.71 14.59a4.46 4.46 0 0 0-7.25-.24l-25-14a4.3 4.3 0 0 0 .33-2.06l25.34-15a4.48 4.48 0 0 0 2.87 1.02m.39 35.24a2.49 2.49 0 1 1 2.07-2.85 2.5 2.5 0 0 1-2.07 2.85m31.87-23.37a2.49 2.49 0 1 1-2.07 2.84 2.49 2.49 0 0 1 2.07-2.84m-32.65-18.81a2.49 2.49 0 1 1-2.07 2.84 2.49 2.49 0 0 1 2.07-2.84m-34.71 21.65a2.49 2.49 0 1 1 2.84 2.07 2.48 2.48 0 0 1-2.84-2.07m2.84 39.6a2.49 2.49 0 0 1-.74-4.91 2.43 2.43 0 0 1 1.85.44 2.48 2.48 0 0 1-1.07 4.47zm32.65 18.19a2.49 2.49 0 1 1 2.07-2.84 2.5 2.5 0 0 1-2.07 2.84m32.61-18.19a2.49 2.49 0 1 1-.78-4.91 2.47 2.47 0 0 1 2.84 2.06 2.49 2.49 0 0 1-2.06 2.85"})}))},39811:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(37566),o=(n(65043),n(70579));const i=e=>(0,o.jsxs)("svg",(0,r.A)((0,r.A)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100"},e),{},{children:[(0,o.jsx)("path",{d:"M36 33.4h14.21a1 1 0 0 0 0-2H36a1 1 0 0 0 0 2m0 8.84h14.21a1 1 0 0 0 0-2H36a1 1 0 0 0 0 2m30.08 7.57a1 1 0 0 0-.07-.19v-.07l-.08-.08-.14-.15-.15-.1-.18-.08h-.2a.4.4 0 0 0-.11 0H36a1 1 0 0 0-1 1v17.68a.7.7 0 0 0 0 .2.6.6 0 0 0 .06.18.4.4 0 0 1 0 .07.7.7 0 0 0 .13.16 1.3 1.3 0 0 0 .28.19h.08a1 1 0 0 0 .34.07h29.24a1 1 0 0 0 1-1V50a2 2 0 0 0-.05-.19m-4.52 1.26L37 66V51.07zm-22 15.68 24.52-14.9v14.9z"}),(0,o.jsx)("path",{d:"M75.13 37.17v-.05L56.55 17.8H30a5.51 5.51 0 0 0-5.5 5.5v53.4a5.51 5.51 0 0 0 5.5 5.5h40a5.51 5.51 0 0 0 5.5-5.5V37.51zM56.91 22.51l14 14.61h-7.08c-4 0-6.92-2.53-6.92-6zM70 79.2H30a2.5 2.5 0 0 1-2.5-2.5V23.3a2.5 2.5 0 0 1 2.5-2.5h24.91v10.31c0 4.64 3.75 8 8.92 8h8.63V76.7A2.5 2.5 0 0 1 70 79.2"})]}))},39892:(e,t,n)=>{var r=n(83712);e.exports=function(e,t){if(null==e)return{};var n,o,i=r(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)n=s[o],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i},e.exports.__esModule=!0,e.exports.default=e.exports},39909:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>P,kl:()=>m,v0:()=>v});var r=n(45005),o=n(86693),i=n(56106),s=n.n(i),a=n(18760),u=n.n(a),l=n(92742),c=n(19156),f=n(55982),h=n(27463),d=n(67766);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const m=l.H(["IPFS_INIT","IPFS_STOPPED","IPFS_API_ADDRESS_UPDATED","IPFS_API_ADDRESS_PENDING_FIRST_CONNECTION","IPFS_API_ADDRESS_INVALID","IPFS_API_ADDRESS_INVALID_DISMISS","IPFS_CONNECT_FAILED","IPFS_CONNECT_SUCCEED","NOTIFY_DISMISSED"]),b=()=>{const e=(0,f.L)("ipfsApi");return null==e?null:w(e)},v=e=>null!=w(e),w=e=>S(e)||A(e)||E(e),E=e=>{try{return new URL(e).toString()}catch(t){return null}},A=e=>{if(null!=e&&""!==e)try{return(0,r.HZ)(e).toString()}catch(t){}return null},S=e=>"string"===typeof e?C(e):T(e),C=e=>{try{return T(JSON.parse(e))}catch(t){}try{const t=new URL(e),{username:n,password:r}=t;if(n&&r)return t.username=t.password="",{url:t.toString(),headers:{authorization:"Basic ".concat(btoa(n+":"+r))}}}catch(t){}return null},T=e=>e&&(e.url||e.host||e.apiPath||e.protocol||e.port||e.headers)?e:null;let k=null;const x={getIpfs:()=>k},O={selectIpfsReady:e=>e.ipfs.ready,selectIpfsProvider:e=>e.ipfs.provider,selectIpfsApiAddress:e=>e.ipfs.apiAddress,selectIpfsInvalidAddress:e=>e.ipfs.invalidAddress,selectIpfsInitFailed:e=>e.ipfs.failed,selectIpfsPendingFirstConnection:e=>e.ipfs.pendingFirstConnection,selectIpfs:()=>k},I={doSetupLocalStorage:()=>async()=>{null===localStorage.getItem("explore.ipld.gatewayEnabled")&&await(0,f.c)("explore.ipld.gatewayEnabled",!1);const e=(0,f.L)("kuboGateway");null===e||"string"===typeof e||"boolean"===typeof e||"number"===typeof e?await(0,f.c)("kuboGateway",{trustlessBlockBrokerConfig:{init:{allowLocal:!0,allowInsecure:!1}}}):null==e.trustlessBlockBrokerConfig&&await(0,f.c)("kuboGateway",g(g({},e),{},{trustlessBlockBrokerConfig:{init:{allowLocal:!0,allowInsecure:!1}}}))},doTryInitIpfs:()=>async e=>{let{store:t}=e;try{return await t.doInitIpfs(),!0}catch(n){return!1}},doInitIpfs:()=>(0,c.y)("IPFS_INIT",(async e=>{const{apiAddress:t}=e.getState().ipfs;let r={};const{create:i}=await n.e(852).then(n.bind(n,98852));r="string"===typeof t?g(g({},r),{},{url:t}):g(g({},t),r);const s=await(0,o.getIpfs)({connectionTest:async e=>{try{await u()(e.stats.bw())}catch(t){const e=t,n=e.toString()||e.message||e;if(!/bandwidth reporter disabled in config/.test(n))throw t}return!0},loadHttpClientModule:()=>i,providers:[o.providers.httpClient(r)]});if(s)return s;throw Error("Could not connect to the Kubo RPC (".concat(t,")"))})),doStopIpfs:()=>async e=>{k&&(await k.stop(),e.dispatch({type:"IPFS_STOPPED"}))},doUpdateIpfsApiAddress:e=>async t=>{const n=w(e);if(null==n)return t.dispatch({type:m.IPFS_API_ADDRESS_INVALID}),!1;{await(0,f.c)("ipfsApi",n),t.dispatch({type:m.IPFS_API_ADDRESS_UPDATED,payload:n}),t.dispatch({type:m.IPFS_API_ADDRESS_PENDING_FIRST_CONNECTION,pending:!0}),t.dispatch({type:m.IPFS_STOPPED}),t.dispatch({type:m.NOTIFY_DISMISSED});const e=await t.store.doTryInitIpfs();return e?t.dispatch({type:m.IPFS_CONNECT_SUCCEED}):t.dispatch({type:m.IPFS_CONNECT_FAILED}),t.dispatch({type:m.IPFS_API_ADDRESS_PENDING_FIRST_CONNECTION,pending:!1}),e}},doDismissIpfsInvalidAddress:()=>e=>{e.dispatch({type:"IPFS_API_ADDRESS_INVALID_DISMISS"})},doGetPathInfo:e=>async()=>{if(k)return await k.files.stat(e);throw Error("IPFS is not initialized")},doCheckIfPinned:e=>async()=>{if(null==k)return!1;try{return!!await s()(k.pin.ls({paths:[e],type:"recursive"}))}catch(t){return!1}}},P=g(g({name:"ipfs",reducer:(e,t)=>((e,t)=>{switch(t.type){case m.IPFS_INIT:{const{task:n}=t;switch(n.status){case"Init":return g(g({},e),{},{ready:!1});case"Exit":{const{result:t}=n;if(t.ok){const{provider:n,apiAddress:r,ipfs:o}=t.value;return k=o,g(g({},e),{},{ready:!0,failed:!1,provider:n,apiAddress:r||e.apiAddress})}return g(g({},e),{},{ready:!1,failed:!0})}default:return e}}case m.IPFS_STOPPED:return g(g({},e),{},{ready:!1,failed:!1});case m.IPFS_API_ADDRESS_UPDATED:return g(g({},e),{},{apiAddress:t.payload,invalidAddress:!1});case m.IPFS_API_ADDRESS_INVALID:case m.IPFS_API_ADDRESS_INVALID_DISMISS:return g(g({},e),{},{invalidAddress:!0});case m.IPFS_API_ADDRESS_PENDING_FIRST_CONNECTION:{const{pending:n}=t;return g(g({},e),{},{pendingFirstConnection:n})}case m.IPFS_CONNECT_SUCCEED:return g(g({},e),{},{failed:!1});case m.IPFS_CONNECT_FAILED:return g(g({},e),{},{failed:!0});default:return e}})(null==e?{apiAddress:b(),provider:null,failed:!1,ready:!1,invalidAddress:!1,pendingFirstConnection:!1}:e,t),getExtraArgs:()=>x,init:e=>{h.FY.setContext("doUpdateIpfsApiAddress",e.doUpdateIpfsApiAddress)},reactIpfsReadyToBridge:(0,d.Mz)("selectIpfsReady",(e=>{h.FY.setContext("selectIpfsReady",e)})),reactIpfsToBridge:(0,d.Mz)("selectIpfs",(e=>{h.FY.setContext("selectIpfs",e)})),reactApiAddressToBridge:(0,d.Mz)("selectIpfsApiAddress",(e=>{h.FY.setContext("selectIpfsApiAddress",e)})),reactInitFailedToBridge:(0,d.Mz)("selectIpfsInitFailed",(e=>{h.FY.setContext("selectIpfsInitFailed",e)}))},O),I)},39956:(e,t,n)=>{"use strict";n.r(t),n.d(t,{base36:()=>o,base36upper:()=>i});var r=n(63227);const o=(0,r._Q)({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),i=(0,r._Q)({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})},40644:(e,t,n)=>{"use strict";function r(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}n.d(t,{A:()=>r})},41137:(e,t,n)=>{"use strict";n.d(t,{RV:()=>l,U6:()=>a,UE:()=>i,Yv:()=>u,hL:()=>s,jD:()=>c});var r=n(78666),o=n(87331);function i(e,t,n,o){return new r.o(r.Z.tag,n,1)}function s(e,t,n,i){return new r.o(r.Z.tag,(0,o.xh)(e,t+1,i),2)}function a(e,t,n,i){return new r.o(r.Z.tag,(0,o.CV)(e,t+1,i),3)}function u(e,t,n,i){return new r.o(r.Z.tag,(0,o.Wg)(e,t+1,i),5)}function l(e,t,n,i){return new r.o(r.Z.tag,(0,o.VF)(e,t+1,i),9)}function c(e,t){(0,o.gv)(e,r.Z.tag.majorEncoded,t.value)}c.compareTokens=o.H2.compareTokens,c.encodedSize=function(e){return o.gv.encodedSize(e.value)}},41497:(e,t,n)=>{"use strict";var r=n(13218);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,i,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},41684:(e,t,n)=>{"use strict";n.d(t,{EW:()=>h,Vl:()=>u,XK:()=>d,Xe:()=>m,hv:()=>y,rw:()=>f});var r=n(70678),o=n.n(r);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return a=function(e){this.s=e,this.n=e.next},a.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new a(e)}function u(e){const t=[];for(const n of e)t.push({path:n.filepath||n.webkitRelativePath||n.name,content:n,size:n.size});return t}function l(e,t,n,r){if("directory"===e){const e="".concat(t||"download_".concat(n.toString()),".tar");return"".concat(r,"/ipfs/").concat(n.toString(),"?download=true&format=tar&filename=").concat(e)}{const e="".concat(t||n);return"".concat(r,"/ipfs/").concat(n.toString(),"?download=true&filename=").concat(e)}}async function c(e,t){const n="/zzzz_".concat(Date.now());await t.files.mkdir(n,{});for(const{cid:o,name:i}of e)await t.files.cp("/ipfs/".concat(o),"".concat(n,"/").concat(i));const r=await t.files.stat(n);return t.files.rm(n,{recursive:!0}),r.cid}async function f(e,t,n){if(1===e.length)return l(e[0].type,e[0].name,e[0].cid,t);return l("directory","",await c(e,n),t)}async function h(e,t,n,r){let o,i;1===e.length?(o=e[0].cid,"file"===e[0].type&&(i="?filename=".concat(encodeURIComponent(e[0].name)))):o=await c(e,r);const s=new URL(n);let a="";const u=o.toV1().toString();return a=u.length<64?"".concat(s.protocol,"//").concat(u,".ipfs.").concat(s.host).concat(i||""):"".concat(t,"/ipfs/").concat(o).concat(i||""),{link:a,cid:o}}async function d(e,t,n){let r,o;return 1===e.length?(r=e[0].cid,o=encodeURIComponent(e[0].name)):r=await c(e,n),"".concat(t,"/ipfs/").concat(r,"?format=car&filename=").concat(o||r,".car")}const p=new Map,g=9e5;async function y(e,t){const n=e.toString(),r=Date.now(),o=p.get(n);if(!(null!=o&&r-o<g))try{const o=t.routing.provide(e,{recursive:!1});var i,s=!1,u=!1;try{for(var l,c=function(e){var t,n,r,o=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);o--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new a(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}(o);s=!(l=await c.next()).done;s=!1){const e=l.value;"PUT_VALUE"===e.messageName&&console.debug("[PROVIDE] ".concat(n,":"),e)}}catch(f){u=!0,i=f}finally{try{s&&null!=c.return&&await c.return()}finally{if(u)throw i}}for(const[e,t]of p.entries())r-t>g&&p.delete(e);p.set(n,r)}catch(h){console.error("[PROVIDE] Failed for CID ".concat(n,":"),h)}}function m(e,t){return"undefined"===typeof e||null===e?"N/A":o()(e||0,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({spacer:String.fromCharCode(160),round:e>=1073741824?1:0,standard:"iec",base:2,bits:!1},t))}},42123:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(o){return!1}}()?Object.assign:function(e,o){for(var i,s,a=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),u=1;u<arguments.length;u++){for(var l in i=Object(arguments[u]))n.call(i,l)&&(a[l]=i[l]);if(t){s=t(i);for(var c=0;c<s.length;c++)r.call(i,s[c])&&(a[s[c]]=i[s[c]])}}return a}},43260:(e,t,n)=>{"use strict";n.d(t,{R:()=>i});const r=BigInt(Number.MAX_SAFE_INTEGER),o=BigInt(Number.MIN_SAFE_INTEGER);class i{lo;hi;constructor(e,t){this.lo=0|e,this.hi=0|t}toNumber(e=!1){if(!e&&this.hi>>>31>0){const e=1+~this.lo>>>0;let t=~this.hi>>>0;return 0===e&&(t=t+1>>>0),-(e+4294967296*t)}return this.lo+4294967296*this.hi}toBigInt(e=!1){if(e)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31!==0){const e=1+~this.lo>>>0;let t=~this.hi>>>0;return 0===e&&(t=t+1>>>0),-(BigInt(e)+(BigInt(t)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toString(e=!1){return this.toBigInt(e).toString()}zzEncode(){const e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this}zzDecode(){const e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this}length(){const e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}static fromBigInt(e){if(0n===e)return s;if(e<r&&e>o)return this.fromNumber(Number(e));const t=e<0n;t&&(e=-e);let n=e>>32n,u=e-(n<<32n);return t&&(n=0n|~n,u=0n|~u,++u>a&&(u=0n,++n>a&&(n=0n))),new i(Number(u),Number(n))}static fromNumber(e){if(0===e)return s;const t=e<0;t&&(e=-e);let n=e>>>0,r=(e-n)/4294967296>>>0;return t&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new i(n,r)}static from(e){return"number"===typeof e?i.fromNumber(e):"bigint"===typeof e?i.fromBigInt(e):"string"===typeof e?i.fromBigInt(BigInt(e)):null!=e.low||null!=e.high?new i(e.low>>>0,e.high>>>0):s}}const s=new i(0,0);s.toBigInt=function(){return 0n},s.zzEncode=s.zzDecode=function(){return this},s.length=function(){return 1};const a=4294967296n},43322:(e,t,n)=>{"use strict";var r=n(73795).default,o=n(49227).default,i=n(92606).default;const s=function(){var e=o((function*(e,t){var n,o=!1,s=!1;try{for(var a,u=i(e);o=!(a=yield r(u.next())).done;o=!1){const e=a.value;yield t(e)}}catch(l){s=!0,n=l}finally{try{o&&null!=u.return&&(yield r(u.return()))}finally{if(s)throw n}}}));return function(t,n){return e.apply(this,arguments)}}();e.exports=s},43738:(e,t,n)=>{var r=n(31308);e.exports=function(e,t){return r(e,t,"-")}},45005:(e,t,n)=>{"use strict";n.d(t,{eI:()=>C,Cm:()=>T,A6:()=>k,Jj:()=>x,Ik:()=>S,u:()=>A,C9:()=>O,R8:()=>J,HZ:()=>X,K6:()=>Z});var r=n(31046);function o(e=0){return new Uint8Array(e)}function i(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const s=i("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),a=i("ascii","a",(e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}),(e=>{const t=o((e=e.substring(1)).length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t})),u={utf8:s,"utf-8":s,hex:r.Fo.base16,latin1:a,ascii:a,binary:a,...r.Fo};function l(e,t="utf8"){const n=u[t];if(null==n)throw new Error(`Unsupported encoding "${t}"`);return n.encoder.encode(e).substring(1)}var c=n(51454),f=n(46053);function h(e,t="utf8"){const n=u[t];if(null==n)throw new Error(`Unsupported encoding "${t}"`);return n.decoder.decode(`${n.prefix}${e}`)}var d=n(4023);function p(e,t){null==t&&(t=e.reduce(((e,t)=>e+t.length),0));const n=o(t);let r=0;for(const o of e)n.set(o,r),r+=o.length;return n}class g extends Error{static name="InvalidMultiaddrError";name="InvalidMultiaddrError"}class y extends Error{static name="ValidationError";name="ValidationError"}class m extends Error{static name="InvalidParametersError";name="InvalidParametersError"}class b extends Error{static name="UnknownProtocolError";name="UnknownProtocolError"}var v=n(22976),w=n(62877),E=n(22469);const A=6,S=41,C=53,T=54,k=55,x=56,O=448;var I=n(51610);function P(e){return t=>l(t,e)}function B(e){return t=>h(t,e)}function D(e){return new DataView(e.buffer).getUint16(e.byteOffset).toString()}function N(e){const t=new ArrayBuffer(2);return new DataView(t).setUint16(0,"string"===typeof e?parseInt(e):e),new Uint8Array(t)}function F(e){const t=e.subarray(0,e.length-2),n=e.subarray(e.length-2);return`${l(t,"base32")}:${D(n)}`}const _=function(e){e=e.toString().trim();const t=new Uint8Array(4);return e.split(/\./g).forEach(((e,n)=>{const r=parseInt(e,10);if(isNaN(r)||r<0||r>255)throw new g("Invalid byte value in IP address");t[n]=r})),t};const L=Object.values(r.Fo).map((e=>e.decoder)),R=function(){let e=L[0].or(L[1]);return L.slice(2).forEach((t=>e=e.or(t))),e}();const j=function(...e){return t=>{for(const n of e)n(t)}}((function(e){if(parseInt(e).toString()!==e)throw new y("Value must be an integer")}),(function(e){if(e<0)throw new y("Value must be a positive integer, or zero")}),(M=65535,e=>{if(e>M)throw new y(`Value must be smaller than or equal to ${M}`)}));var M;const U=-1;const H=new class{protocolsByCode=new Map;protocolsByName=new Map;getProtocol(e){let t;if(t="string"===typeof e?this.protocolsByName.get(e):this.protocolsByCode.get(e),null==t)throw new b(`Protocol ${e} was unknown`);return t}addProtocol(e){this.protocolsByCode.set(e.code,e),this.protocolsByName.set(e.name,e),e.aliases?.forEach((t=>{this.protocolsByName.set(t,e)}))}removeProtocol(e){const t=this.protocolsByCode.get(e);null!=t&&(this.protocolsByCode.delete(t.code),this.protocolsByName.delete(t.name),t.aliases?.forEach((e=>{this.protocolsByName.delete(e)})))}};var z;function V(e,t,n){return null==e.size||0===e.size?0:e.size>0?e.size/8:d.D4(t,n)}[{code:4,name:"ip4",size:32,valueToBytes:_,bytesToValue:function(e){if(4!==e.byteLength)throw new g("IPv4 address was incorrect length");const t=[];for(let n=0;n<e.byteLength;n++)t.push(e[n]);return t.join(".")},validate:e=>{if(!(0,v.wM)(e))throw new y(`Invalid IPv4 address "${e}"`)}},{code:A,name:"tcp",size:16,valueToBytes:N,bytesToValue:D,validate:j},{code:273,name:"udp",size:16,valueToBytes:N,bytesToValue:D,validate:j},{code:33,name:"dccp",size:16,valueToBytes:N,bytesToValue:D,validate:j},{code:S,name:"ip6",size:128,valueToBytes:function(e){let t=0;const n=(e=e.toString().trim()).split(":",8);let r;for(r=0;r<n.length;r++){let e;(0,v.wM)(n[r])&&(e=_(n[r]),n[r]=l(e.subarray(0,2),"base16")),null!=e&&++r<8&&n.splice(r,0,l(e.subarray(2,4),"base16"))}if(""===n[0])for(;n.length<8;)n.unshift("0");else if(""===n[n.length-1])for(;n.length<8;)n.push("0");else if(n.length<8){for(r=0;r<n.length&&""!==n[r];r++);const e=[r,1];for(r=9-n.length;r>0;r--)e.push("0");n.splice.apply(n,e)}const o=new Uint8Array(t+16);for(r=0;r<n.length;r++){""===n[r]&&(n[r]="0");const e=parseInt(n[r],16);if(isNaN(e)||e<0||e>65535)throw new g("Invalid byte value in IP address");o[t++]=e>>8&255,o[t++]=255&e}return o},bytesToValue:function(e){if(16!==e.byteLength)throw new g("IPv6 address was incorrect length");const t=[];for(let r=0;r<e.byteLength;r+=2){const n=e[r],o=e[r+1],i=`${n.toString(16).padStart(2,"0")}${o.toString(16).padStart(2,"0")}`;t.push(i)}const n=t.join(":");try{const e=new URL(`http://[${n}]`);return e.hostname.substring(1,e.hostname.length-1)}catch{throw new g(`Invalid IPv6 address "${n}"`)}},stringToValue:function(e){try{const t=new URL(`http://[${e}]`);return t.hostname.substring(1,t.hostname.length-1)}catch{throw new g(`Invalid IPv6 address "${e}"`)}},validate:e=>{if(!(0,v.w7)(e))throw new y(`Invalid IPv6 address "${e}"`)}},{code:42,name:"ip6zone",size:U},{code:43,name:"ipcidr",size:8,bytesToValue:P("base10"),valueToBytes:B("base10")},{code:C,name:"dns",size:U,resolvable:!0},{code:T,name:"dns4",size:U,resolvable:!0},{code:k,name:"dns6",size:U,resolvable:!0},{code:x,name:"dnsaddr",size:U,resolvable:!0},{code:132,name:"sctp",size:16,valueToBytes:N,bytesToValue:D,validate:j},{code:301,name:"udt"},{code:302,name:"utp"},{code:400,name:"unix",size:U,path:!0,stringToValue:e=>decodeURIComponent(e),valueToString:e=>encodeURIComponent(e)},{code:421,name:"p2p",aliases:["ipfs"],size:U,bytesToValue:P("base58btc"),valueToBytes:e=>e.startsWith("Q")||e.startsWith("1")?B("base58btc")(e):w.TO.parse(e).multihash.bytes},{code:444,name:"onion",size:96,bytesToValue:F,valueToBytes:function(e){const t=e.split(":");if(2!==t.length)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(16!==t[0].length)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion address.`);const n=h(t[0],"base32"),r=parseInt(t[1],10);if(r<1||r>65536)throw new Error("Port number is not in range(1, 65536)");const o=N(r);return p([n,o],n.length+o.length)}},{code:445,name:"onion3",size:296,bytesToValue:F,valueToBytes:function(e){const t=e.split(":");if(2!==t.length)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(56!==t[0].length)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion3 address.`);const n=I.base32.decode(`b${t[0]}`),r=parseInt(t[1],10);if(r<1||r>65536)throw new Error("Port number is not in range(1, 65536)");const o=N(r);return p([n,o],n.length+o.length)}},{code:446,name:"garlic64",size:U},{code:447,name:"garlic32",size:U},{code:O,name:"tls"},{code:449,name:"sni",size:U},{code:454,name:"noise"},{code:460,name:"quic"},{code:461,name:"quic-v1"},{code:465,name:"webtransport"},{code:466,name:"certhash",size:U,bytesToValue:(z=E.base64url,e=>z.encoder.encode(e)),valueToBytes:function(e){return R.decode(e)}},{code:480,name:"http"},{code:481,name:"http-path",size:U,stringToValue:e=>`/${decodeURIComponent(e)}`,valueToString:e=>encodeURIComponent(e.substring(1))},{code:443,name:"https"},{code:477,name:"ws"},{code:478,name:"wss"},{code:479,name:"p2p-websocket-star"},{code:277,name:"p2p-stardust"},{code:275,name:"p2p-webrtc-star"},{code:276,name:"p2p-webrtc-direct"},{code:280,name:"webrtc-direct"},{code:281,name:"webrtc"},{code:290,name:"p2p-circuit"},{code:777,name:"memory",size:U}].forEach((e=>{H.addProtocol(e)}));const $=Symbol.for("nodejs.util.inspect.custom"),G=Symbol.for("@multiformats/multiaddr"),W=[C,T,k,x];class q extends Error{constructor(e="No available resolver"){super(e),this.name="NoAvailableResolverError"}}function K(e){if(null==e&&(e="/"),J(e))return e.getComponents();if(e instanceof Uint8Array)return function(e){const t=[];let n=0;for(;n<e.length;){const r=d.D4(e,n),o=H.getProtocol(r),i=d.OY(r),s=V(o,e,n+i);let a=0;s>0&&o.size===U&&(a=d.OY(s));const u=i+a+s,c={code:r,name:o.name,bytes:e.subarray(n,n+u)};if(s>0){const t=n+i+a,r=e.subarray(t,t+s);c.value=o.bytesToValue?.(r)??l(r)}t.push(c),n+=u}return t}(e);if("string"===typeof e)return""===(e=e.replace(/\/(\/)+/,"/").replace(/(\/)+$/,""))&&(e="/"),function(e){if("/"!==e.charAt(0))throw new g('String multiaddr must start with "/"');const t=[];let n="protocol",r="",o="";for(let i=1;i<e.length;i++){const s=e.charAt(i);"/"!==s&&("protocol"===n?o+=e.charAt(i):r+=e.charAt(i));const a=i===e.length-1;if("/"===s||a){const e=H.getProtocol(o);if("protocol"===n){if(null==e.size||0===e.size){t.push({code:e.code,name:e.name}),r="",o="",n="protocol";continue}if(a)throw new g(`Component ${o} was missing value`);n="value"}else if("value"===n){const i={code:e.code,name:e.name};if(null!=e.size&&0!==e.size){if(""===r)throw new g(`Component ${o} was missing value`);i.value=e.stringToValue?.(r)??r}t.push(i),r="",o="",n="protocol"}}}if(""!==o&&""!==r)throw new g("Incomplete multiaddr");return t}(e);if(Array.isArray(e))return e;throw new g("Must be a string, Uint8Array, Component[], or another Multiaddr")}class Y{[G]=!0;#e;#t;#n;constructor(e="/",t={}){this.#e=K(e),!1!==t.validate&&function(e){e.getComponents().forEach((e=>{const t=H.getProtocol(e.code);null!=e.value&&t.validate?.(e.value)}))}(this)}get bytes(){return null==this.#n&&(this.#n=function(e){let t=0;const n=[];for(const r of e){if(null==r.bytes){const e=H.getProtocol(r.code),t=d.OY(r.code);let n,o=0,i=0;null!=r.value&&(n=e.valueToBytes?.(r.value)??h(r.value),o=n.byteLength,e.size===U&&(i=d.OY(o)));const s=new Uint8Array(t+i+o);let a=0;d.mD(r.code,s,a),a+=t,null!=n&&(e.size===U&&(d.mD(o,s,a),a+=i),s.set(n,a)),r.bytes=s}n.push(r.bytes),t+=r.bytes.byteLength}return p(n,t)}(this.#e)),this.#n}toString(){return null==this.#t&&(this.#t=`/${this.#e.flatMap((e=>{if(null==e.value)return e.name;const t=H.getProtocol(e.code);if(null==t)throw new g(`Unknown protocol code ${e.code}`);return[e.name,t.valueToString?.(e.value)??e.value]})).join("/")}`),this.#t}toJSON(){return this.toString()}toOptions(){let e,t,n,r,o="";for(const{code:i,name:s,value:a}of this.#e)42===i&&(o=`%${a??""}`),W.includes(i)&&(t="tcp",r=443,n=`${a??""}${o}`,e=i===k?6:4),i!==A&&273!==i||(t="tcp"===s?"tcp":"udp",r=parseInt(a??"")),4!==i&&i!==S||(t="tcp",n=`${a??""}${o}`,e=i===S?6:4);if(null==e||null==t||null==n||null==r)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e,host:n,transport:t,port:r}}getComponents(){return[...this.#e]}protos(){return this.#e.map((({code:e,value:t})=>{const n=H.getProtocol(e);return{code:e,size:n.size??0,name:n.name,resolvable:Boolean(n.resolvable),path:Boolean(n.path)}}))}protoCodes(){return this.#e.map((({code:e})=>e))}protoNames(){return this.#e.map((({name:e})=>e))}tuples(){return this.#e.map((({code:e,value:t})=>{if(null==t)return[e];const n=H.getProtocol(e),r=[e];return null!=t&&r.push(n.valueToBytes?.(t)??h(t)),r}))}stringTuples(){return this.#e.map((({code:e,value:t})=>null==t?[e]:[e,t]))}encapsulate(e){const t=new Y(e);return new Y([...this.#e,...t.getComponents()],{validate:!1})}decapsulate(e){const t=e.toString(),n=this.toString(),r=n.lastIndexOf(t);if(r<0)throw new m(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new Y(n.slice(0,r),{validate:!1})}decapsulateCode(e){let t;for(let n=this.#e.length-1;n>-1;n--)if(this.#e[n].code===e){t=n;break}return new Y(this.#e.slice(0,t),{validate:!1})}getPeerId(){try{let e=[];this.#e.forEach((({code:t,value:n})=>{421===t&&e.push([t,n]),290===t&&(e=[])}));const t=e.pop();if(null!=t?.[1]){const e=t[1];return"Q"===e[0]||"1"===e[0]?l(c.base58btc.decode(`z${e}`),"base58btc"):l(f.TO.parse(e).multihash.bytes,"base58btc")}return null}catch(e){return null}}getPath(){for(const e of this.#e){if(H.getProtocol(e.code).path)return e.value??null}return null}equals(e){return function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0}(this.bytes,e.bytes)}async resolve(e){const t=this.protos().find((e=>e.resolvable));if(null==t)return[this];const n=Z.get(t.name);if(null==n)throw new q(`no available resolver for ${t.name}`);return(await n(this,e)).map((e=>X(e)))}nodeAddress(){const e=this.toOptions();if("tcp"!==e.transport&&"udp"!==e.transport)throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(){return 2===this.#e.length&&((4===this.#e[0].code||this.#e[0].code===S)&&(this.#e[1].code===A||273===this.#e[1].code))}[$](){return`Multiaddr(${this.toString()})`}}n(20598);parseInt("0xFFFF",16),new Uint8Array([0,0,0,0,0,0,0,0,0,0,255,255]);const Z=new Map;function J(e){return Boolean(e?.[G])}function X(e){return new Y(e)}},45312:e=>{"use strict";const t="undefined"!==typeof navigator&&"ReactNative"===navigator.product;const n=self.URL,r=t?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:"";e.exports={URLWithLegacySupport:class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;this.super=new n(e,t),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set username(e){this.super.username=e}static createObjectURL(e){return n.createObjectURL(e)}static revokeObjectURL(e){n.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}},URLSearchParams:self.URLSearchParams,defaultBase:r,format:function(e){if("string"===typeof e){return new n(e).toString()}if(!(e instanceof n)){const t=e.username&&e.password?"".concat(e.username,":").concat(e.password,"@"):"",n=e.auth?e.auth+"@":"",r=e.port?":"+e.port:"",o=e.protocol?e.protocol+"//":"",i=e.host||"",s=e.hostname||"",a=e.search||(e.query?"?"+e.query:""),u=e.hash||"",l=e.pathname||"",c=e.path||l+a;return"".concat(o).concat(t||n).concat(i||s+r).concat(c).concat(u)}}}},45447:(e,t,n)=>{"use strict";n.d(t,{Fc:()=>o.F,Nh:()=>r.Nh,l4:()=>r.l4,pP:()=>o.p});var r=n(73216),o=n(61247)},45470:(e,t,n)=>{"use strict";function r(e){switch(e){case 113:return"dag-cbor";case 112:return"dag-pb";case 120:return"git-raw";case 85:return"raw";case 512:return"json";case 297:return"dag-json";case 133:return"dag-jose";default:return"unknown"}}n.d(t,{A:()=>r})},45493:(e,t,n)=>{"use strict";n.r(t),n.d(t,{FILE:()=>r,TEXT:()=>i,URL:()=>o});var r="__NATIVE_FILE__",o="__NATIVE_URL__",i="__NATIVE_TEXT__"},45693:e=>{"use strict";e.exports={DEFAULT_HTTP_API:"/ip4/127.0.0.1/tcp/5001"}},46053:(e,t,n)=>{"use strict";n.d(t,{TO:()=>d});var r=n(67136),o=n(51610),i=n(84070),s=n(51454),a=n(37430),u=n(55716),l=n(74697);function c(e,t){const{bytes:n,version:r}=e;return 0===r?function(e,t,n){const{prefix:r}=n;if(r!==s.base58btc.prefix)throw Error("Cannot string encode V0 in ".concat(n.name," encoding"));const o=t.get(r);if(null==o){const o=n.encode(e).slice(1);return t.set(r,o),o}return o}(n,h(e),null!==t&&void 0!==t?t:s.base58btc.encoder):function(e,t,n){const{prefix:r}=n,o=t.get(r);if(null==o){const o=n.encode(e);return t.set(r,o),o}return o}(n,h(e),null!==t&&void 0!==t?t:o.base32.encoder)}const f=new WeakMap;function h(e){const t=f.get(e);if(null==t){const t=new Map;return f.set(e,t),t}return t}class d{constructor(e,t,n,o){(0,r.A)(this,"code",void 0),(0,r.A)(this,"version",void 0),(0,r.A)(this,"multihash",void 0),(0,r.A)(this,"bytes",void 0),(0,r.A)(this,"/",void 0),(0,r.A)(this,Symbol.toStringTag,"CID"),this.code=t,this.version=e,this.multihash=n,this.bytes=o,this["/"]=o}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:t}=this;if(e!==p)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==g)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return d.createV0(t)}default:throw Error("Can not convert CID version ".concat(this.version," to version 0. This is a bug please report"))}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,n=u.vt(e,t);return d.createV1(this.code,n)}case 1:return this;default:throw Error("Can not convert CID version ".concat(this.version," to version 1. This is a bug please report"))}}equals(e){return d.equals(this,e)}static equals(e,t){const n=t;return null!=n&&e.code===n.code&&e.version===n.version&&u.aI(e.multihash,n.multihash)}toString(e){return c(this,e)}toJSON(){return{"/":c(this)}}link(){return this}[Symbol.for("nodejs.util.inspect.custom")](){return"CID(".concat(this.toString(),")")}static asCID(e){if(null==e)return null;const t=e;if(t instanceof d)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){const{version:e,code:n,multihash:r,bytes:o}=t;return new d(e,n,r,null!==o&&void 0!==o?o:y(e,n,r.bytes))}if(!0===t[m]){const{version:e,multihash:n,code:r}=t,o=u.D4(n);return d.create(e,r,o)}return null}static create(e,t,n){if("number"!==typeof t)throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==p)throw new Error("Version 0 CID must use dag-pb (code: ".concat(p,") block encoding"));return new d(e,t,n,n.bytes);case 1:{const r=y(e,t,n.bytes);return new d(e,t,n,r)}default:throw new Error("Invalid version")}}static createV0(e){return d.create(0,p,e)}static createV1(e,t){return d.create(1,e,t)}static decode(e){const[t,n]=d.decodeFirst(e);if(0!==n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=d.inspectBytes(e),n=t.size-t.multihashSize,r=(0,a.au)(e.subarray(n,n+t.multihashSize));if(r.byteLength!==t.multihashSize)throw new Error("Incorrect length");const o=r.subarray(t.multihashSize-t.digestSize),i=new u.np(t.multihashCode,t.digestSize,o,r);return[0===t.version?d.createV0(i):d.createV1(t.codec,i),e.subarray(t.size)]}static inspectBytes(e){let t=0;const n=()=>{const[n,r]=l.D4(e.subarray(t));return t+=r,n};let r=n(),o=p;if(18===r?(r=0,t=0):o=n(),0!==r&&1!==r)throw new RangeError("Invalid CID version ".concat(r));const i=t,s=n(),a=n(),u=t+a;return{version:r,codec:o,multihashCode:s,digestSize:a,multihashSize:u-i,size:u}}static parse(e,t){const[n,r]=function(e,t){switch(e[0]){case"Q":{const n=null!==t&&void 0!==t?t:s.base58btc;return[s.base58btc.prefix,n.decode("".concat(s.base58btc.prefix).concat(e))]}case s.base58btc.prefix:{const n=null!==t&&void 0!==t?t:s.base58btc;return[s.base58btc.prefix,n.decode(e)]}case o.base32.prefix:{const n=null!==t&&void 0!==t?t:o.base32;return[o.base32.prefix,n.decode(e)]}case i.base36.prefix:{const n=null!==t&&void 0!==t?t:i.base36;return[i.base36.prefix,n.decode(e)]}default:if(null==t)throw Error("To parse non base32, base36 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}(e,t),a=d.decode(r);if(0===a.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return h(a).set(n,e),a}}const p=112,g=18;function y(e,t,n){const r=l.OY(e),o=r+l.OY(t),i=new Uint8Array(o+n.byteLength);return l.s_(e,i,0),l.s_(t,i,r),i.set(n,o),i}const m=Symbol.for("@ipld/js-cid/CID")},46844:(e,t,n)=>{var r=n(31308),o=n(99796);e.exports=function(e,t){return r(e,t,"-").replace(/^.|-./g,(function(e){return o(e,t)}))}},47199:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(65043),o=n(8429);const i=["className","label","disabled","checked","onChange"];function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(null,arguments)}const a=e=>{let{className:t,label:n,disabled:a,checked:u,onChange:l}=e,c=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,i);t="Checkbox dib sans-serif ".concat(t),a||(t+=" pointer");return r.createElement("label",s({className:t},c),r.createElement("input",{className:"absolute",type:"checkbox",checked:u,disabled:a,onChange:e=>{l(e.target.checked)}}),r.createElement("span",{className:"dib v-mid br1 w1 h1 pointer"},r.createElement(o.A,{className:"w1 h1 o-0 fill-aqua",viewBox:"25 25 50 50"})),Boolean(n)&&r.createElement("span",{className:"v-mid pl2"},n))};a.defaultProps={className:"",label:"",disabled:!1,checked:null,onChange:()=>{}};const u=a},47775:function(e,t,n){"use strict";e.exports="object"===typeof self&&self.self===self&&self||"object"===typeof n.g&&n.g.global===n.g&&n.g||this},48212:(e,t,n)=>{"use strict";var r=n(62285),o="win32"===r.platform,i=n(86494);function s(e,t){for(var n=[],r=0;r<e.length;r++){var o=e[r];o&&"."!==o&&(".."===o?n.length&&".."!==n[n.length-1]?n.pop():t&&n.push(".."):n.push(o))}return n}function a(e){for(var t=e.length-1,n=0;n<=t&&!e[n];n++);for(var r=t;r>=0&&!e[r];r--);return 0===n&&r===t?e:n>r?[]:e.slice(n,r+1)}var u=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,l=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,c={};function f(e){var t=u.exec(e),n=(t[1]||"")+(t[2]||""),r=t[3]||"",o=l.exec(r);return[n,o[1],o[2],o[3]]}function h(e){var t=u.exec(e),n=t[1]||"",r=!!n&&":"!==n[1];return{device:n,isUnc:r,isAbsolute:r||!!t[2],tail:t[3]}}function d(e){return"\\\\"+e.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}c.resolve=function(){for(var e="",t="",n=!1,o=arguments.length-1;o>=-1;o--){var a;if(o>=0?a=arguments[o]:e?(a={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_GIT_REV:"c14b38a",REACT_APP_VERSION:"4.9.0"}["="+e])&&a.substr(0,3).toLowerCase()===e.toLowerCase()+"\\"||(a=e+"\\"):a=r.cwd(),!i.isString(a))throw new TypeError("Arguments to path.resolve must be strings");if(a){var u=h(a),l=u.device,c=u.isUnc,f=u.isAbsolute,p=u.tail;if((!l||!e||l.toLowerCase()===e.toLowerCase())&&(e||(e=l),n||(t=p+"\\"+t,n=f),e&&n))break}}return c&&(e=d(e)),e+(n?"\\":"")+(t=s(t.split(/[\\\/]+/),!n).join("\\"))||"."},c.normalize=function(e){var t=h(e),n=t.device,r=t.isUnc,o=t.isAbsolute,i=t.tail,a=/[\\\/]$/.test(i);return(i=s(i.split(/[\\\/]+/),!o).join("\\"))||o||(i="."),i&&a&&(i+="\\"),r&&(n=d(n)),n+(o?"\\":"")+i},c.isAbsolute=function(e){return h(e).isAbsolute},c.join=function(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(!i.isString(n))throw new TypeError("Arguments to path.join must be strings");n&&e.push(n)}var r=e.join("\\");return/^[\\\/]{2}[^\\\/]/.test(e[0])||(r=r.replace(/^[\\\/]{2,}/,"\\")),c.normalize(r)},c.relative=function(e,t){e=c.resolve(e),t=c.resolve(t);for(var n=e.toLowerCase(),r=t.toLowerCase(),o=a(t.split("\\")),i=a(n.split("\\")),s=a(r.split("\\")),u=Math.min(i.length,s.length),l=u,f=0;f<u;f++)if(i[f]!==s[f]){l=f;break}if(0==l)return t;var h=[];for(f=l;f<i.length;f++)h.push("..");return(h=h.concat(o.slice(l))).join("\\")},c._makeLong=function(e){if(!i.isString(e))return e;if(!e)return"";var t=c.resolve(e);return/^[a-zA-Z]\:\\/.test(t)?"\\\\?\\"+t:/^\\\\[^?.]/.test(t)?"\\\\?\\UNC\\"+t.substring(2):e},c.dirname=function(e){var t=f(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},c.basename=function(e,t){var n=f(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},c.extname=function(e){return f(e)[3]},c.format=function(e){if(!i.isObject(e))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof e);var t=e.root||"";if(!i.isString(t))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof e.root);var n=e.dir,r=e.base||"";return n?n[n.length-1]===c.sep?n+r:n+c.sep+r:r},c.parse=function(e){if(!i.isString(e))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof e);var t=f(e);if(!t||4!==t.length)throw new TypeError("Invalid path '"+e+"'");return{root:t[0],dir:t[0]+t[1].slice(0,-1),base:t[2],ext:t[3],name:t[2].slice(0,t[2].length-t[3].length)}},c.sep="\\",c.delimiter=";";var p=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,g={};function y(e){return p.exec(e).slice(1)}g.resolve=function(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var o=n>=0?arguments[n]:r.cwd();if(!i.isString(o))throw new TypeError("Arguments to path.resolve must be strings");o&&(e=o+"/"+e,t="/"===o[0])}return(t?"/":"")+(e=s(e.split("/"),!t).join("/"))||"."},g.normalize=function(e){var t=g.isAbsolute(e),n=e&&"/"===e[e.length-1];return(e=s(e.split("/"),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},g.isAbsolute=function(e){return"/"===e.charAt(0)},g.join=function(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];if(!i.isString(n))throw new TypeError("Arguments to path.join must be strings");n&&(e+=e?"/"+n:n)}return g.normalize(e)},g.relative=function(e,t){e=g.resolve(e).substr(1),t=g.resolve(t).substr(1);for(var n=a(e.split("/")),r=a(t.split("/")),o=Math.min(n.length,r.length),i=o,s=0;s<o;s++)if(n[s]!==r[s]){i=s;break}var u=[];for(s=i;s<n.length;s++)u.push("..");return(u=u.concat(r.slice(i))).join("/")},g._makeLong=function(e){return e},g.dirname=function(e){var t=y(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},g.basename=function(e,t){var n=y(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},g.extname=function(e){return y(e)[3]},g.format=function(e){if(!i.isObject(e))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof e);var t=e.root||"";if(!i.isString(t))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof e.root);return(e.dir?e.dir+g.sep:"")+(e.base||"")},g.parse=function(e){if(!i.isString(e))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof e);var t=y(e);if(!t||4!==t.length)throw new TypeError("Invalid path '"+e+"'");return t[1]=t[1]||"",t[2]=t[2]||"",t[3]=t[3]||"",{root:t[0],dir:t[0]+t[1].slice(0,-1),base:t[2],ext:t[3],name:t[2].slice(0,t[2].length-t[3].length)}},g.sep="/",g.delimiter=":",e.exports=o?c:g,e.exports.posix=g,e.exports.win32=c},48298:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(96297);function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,(0,r.A)(e,t)}},48535:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(65043);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(null,arguments)}const i=e=>{let{props:t,children:n}=e;return r.createElement("h2",o({className:"ttu tracked f6 fw4 teal mt0 mb3"},t),n)}},49227:(e,t,n)=>{var r=n(81027);function o(e){var t,n;function o(t,n){try{var s=e[t](n),a=s.value,u=a instanceof r;Promise.resolve(u?a.v:a).then((function(n){if(u){var r="return"===t?"return":"next";if(!a.k||n.done)return o(r,n);n=e[r](n).value}i(s.done?"return":"normal",n)}),(function(e){o("throw",e)}))}catch(e){i("throw",e)}}function i(e,r){switch(e){case"return":t.resolve({value:r,done:!0});break;case"throw":t.reject(r);break;default:t.resolve({value:r,done:!1})}(t=t.next)?o(t.key,t.arg):n=null}this._invoke=function(e,r){return new Promise((function(i,s){var a={key:e,arg:r,resolve:i,reject:s,next:null};n?n=n.next=a:(t=n=a,o(e,r))}))},"function"!=typeof e.return&&(this.return=void 0)}o.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},o.prototype.next=function(e){return this._invoke("next",e)},o.prototype.throw=function(e){return this._invoke("throw",e)},o.prototype.return=function(e){return this._invoke("return",e)},e.exports=function(e){return function(){return new o(e.apply(this,arguments))}},e.exports.__esModule=!0,e.exports.default=e.exports},49728:(e,t,n)=>{"use strict";n.r(t),n.d(t,{base10:()=>r});const r=(0,n(63227)._Q)({prefix:"9",name:"base10",alphabet:"0123456789"})},51153:(e,t,n)=>{"use strict";var r=n(65043),o=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var i=Symbol.for;o=i("react.element"),t.Fragment=i("react.fragment")}var s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,i={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,r)&&!u.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:o,type:e,key:l,ref:c,props:i,_owner:s.current}}t.jsx=l,t.jsxs=l},51454:(e,t,n)=>{"use strict";n.r(t),n.d(t,{base58btc:()=>o,base58flickr:()=>i});var r=n(90015);const o=(0,r._Q)({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),i=(0,r._Q)({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})},51499:(e,t,n)=>{"use strict";n.d(t,{g:()=>o,i:()=>r});var r="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{};function o(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}},51517:(e,t,n)=>{"use strict";n.r(t),n.d(t,{sha256:()=>i,sha512:()=>s});var r=n(92923);function o(e){return async t=>new Uint8Array(await crypto.subtle.digest(e,t))}const i=(0,r.H)({name:"sha2-256",code:18,encode:o("SHA-256")}),s=(0,r.H)({name:"sha2-512",code:19,encode:o("SHA-512")})},51610:(e,t,n)=>{"use strict";n.r(t),n.d(t,{base32:()=>o,base32hex:()=>u,base32hexpad:()=>c,base32hexpadupper:()=>f,base32hexupper:()=>l,base32pad:()=>s,base32padupper:()=>a,base32upper:()=>i,base32z:()=>h});var r=n(90015);const o=(0,r.yE)({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),i=(0,r.yE)({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),s=(0,r.yE)({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),a=(0,r.yE)({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),u=(0,r.yE)({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),l=(0,r.yE)({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),c=(0,r.yE)({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),f=(0,r.yE)({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),h=(0,r.yE)({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})},52945:(e,t)=>{t.__esModule=!0;t.ATTRIBUTE_NAMES={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"};var n=t.TAG_NAMES={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"},r=(t.VALID_TAG_NAMES=Object.keys(n).map((function(e){return n[e]})),t.TAG_PROPERTIES={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src"},t.REACT_TAG_MAP={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"});t.HELMET_PROPS={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},t.HTML_TAG_MAP=Object.keys(r).reduce((function(e,t){return e[r[t]]=t,e}),{}),t.SELF_CLOSING_TAGS=[n.NOSCRIPT,n.SCRIPT,n.STYLE],t.HELMET_ATTRIBUTE="data-react-helmet"},52954:(e,t,n)=>{"use strict";n.r(t),n.d(t,{code:()=>v,decode:()=>E,encode:()=>w,format:()=>A,name:()=>b,parse:()=>C,stringify:()=>A});var r=n(12538),o=n(78666),i=(n(93351),n(87382)),s=n(94909);class a extends Array{constructor(){super(),this.inRecursive=[]}prefix(e){const t=this.inRecursive[this.inRecursive.length-1];t&&(t.type===o.Z.array&&(t.elements++,1!==t.elements&&e.push([44])),t.type===o.Z.map&&(t.elements++,1!==t.elements&&(t.elements%2===1?e.push([44]):e.push([58]))))}[o.Z.uint.major](e,t){this.prefix(e);const n=String(t.value),r=[];for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);e.push(r)}[o.Z.negint.major](e,t){this[o.Z.uint.major](e,t)}[o.Z.bytes.major](e,t){throw new Error(`${i.uz} unsupported type: Uint8Array`)}[o.Z.string.major](e,t){this.prefix(e);const n=(0,s.sH)(JSON.stringify(t.value));e.push(n.length>32?(0,s.H8)(n):n)}[o.Z.array.major](e,t){this.prefix(e),this.inRecursive.push({type:o.Z.array,elements:0}),e.push([91])}[o.Z.map.major](e,t){this.prefix(e),this.inRecursive.push({type:o.Z.map,elements:0}),e.push([123])}[o.Z.tag.major](e,t){}[o.Z.float.major](e,t){if("break"===t.type.name){const t=this.inRecursive.pop();if(t){if(t.type===o.Z.array)e.push([93]);else{if(t.type!==o.Z.map)throw new Error("Unexpected recursive type; this should not happen!");e.push([125])}return}throw new Error("Unexpected break; this should not happen!")}if(void 0===t.value)throw new Error(`${i.uz} unsupported type: undefined`);if(this.prefix(e),"true"===t.type.name)return void e.push([116,114,117,101]);if("false"===t.type.name)return void e.push([102,97,108,115,101]);if("null"===t.type.name)return void e.push([110,117,108,108]);const n=String(t.value),r=[];let s=!1;for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o),s||46!==r[o]&&101!==r[o]&&69!==r[o]||(s=!0);s||(r.push(46),r.push(48)),e.push(r)}}const u={addBreakTokens:!0,mapSorter:function(e,t){if(Array.isArray(e[0])||Array.isArray(t[0]))throw new Error(`${i.uz} complex map keys are not supported`);const n=e[0],r=t[0];if(n.type!==o.Z.string||r.type!==o.Z.string)throw new Error(`${i.uz} non-string map keys are not supported`);if(n<r)return-1;if(n>r)return 1;throw new Error(`${i.uz} unexpected duplicate map keys, this is not supported`)}};var l=n(61625);class c{constructor(e,t={}){this._pos=0,this.data=e,this.options=t,this.modeStack=["value"],this.lastToken=""}pos(){return this._pos}done(){return this._pos>=this.data.length}ch(){return this.data[this._pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let e=this.ch();for(;32===e||9===e||13===e||10===e;)e=this.data[++this._pos]}expect(e){if(this.data.length-this._pos<e.length)throw new Error(`${i.WR} unexpected end of input at position ${this._pos}`);for(let t=0;t<e.length;t++)if(this.data[this._pos++]!==e[t])throw new Error(`${i.WR} unexpected token at position ${this._pos}, expected to find '${String.fromCharCode(...e)}'`)}parseNumber(){const e=this._pos;let t=!1,n=!1;const r=e=>{for(;!this.done();){const t=this.ch();if(!e.includes(t))break;this._pos++}};if(45===this.ch()&&(t=!0,this._pos++),48===this.ch()){if(this._pos++,46!==this.ch())return new o.o(o.Z.uint,0,this._pos-e);this._pos++,n=!0}if(r([48,49,50,51,52,53,54,55,56,57]),t&&this._pos===e+1)throw new Error(`${i.WR} unexpected token at position ${this._pos}`);if(!this.done()&&46===this.ch()){if(n)throw new Error(`${i.WR} unexpected token at position ${this._pos}`);n=!0,this._pos++,r([48,49,50,51,52,53,54,55,56,57])}this.done()||101!==this.ch()&&69!==this.ch()||(n=!0,this._pos++,this.done()||43!==this.ch()&&45!==this.ch()||this._pos++,r([48,49,50,51,52,53,54,55,56,57]));const s=String.fromCharCode.apply(null,this.data.subarray(e,this._pos)),a=parseFloat(s);return n?new o.o(o.Z.float,a,this._pos-e):!0!==this.options.allowBigInt||Number.isSafeInteger(a)?new o.o(a>=0?o.Z.uint:o.Z.negint,a,this._pos-e):new o.o(a>=0?o.Z.uint:o.Z.negint,BigInt(s),this._pos-e)}parseString(){if(34!==this.ch())throw new Error(`${i.WR} unexpected character at position ${this._pos}; this shouldn't happen`);this._pos++;for(let i=this._pos,s=0;i<this.data.length&&s<65536;i++,s++){const e=this.data[i];if(92===e||e<32||e>=128)break;if(34===e){const e=String.fromCharCode.apply(null,this.data.subarray(this._pos,i));return this._pos=i+1,new o.o(o.Z.string,e,s)}}const e=this._pos,t=[],n=()=>{if(this._pos+4>=this.data.length)throw new Error(`${i.WR} unexpected end of unicode escape sequence at position ${this._pos}`);let e=0;for(let t=0;t<4;t++){let t=this.ch();if(t>=48&&t<=57)t-=48;else if(t>=97&&t<=102)t=t-97+10;else{if(!(t>=65&&t<=70))throw new Error(`${i.WR} unexpected unicode escape character at position ${this._pos}`);t=t-65+10}e=16*e+t,this._pos++}return e},r=()=>{const e=this.ch();let n,r,o,s,a=null,u=e>239?4:e>223?3:e>191?2:1;if(this._pos+u>this.data.length)throw new Error(`${i.WR} unexpected unicode sequence at position ${this._pos}`);switch(u){case 1:e<128&&(a=e);break;case 2:n=this.data[this._pos+1],128===(192&n)&&(s=(31&e)<<6|63&n,s>127&&(a=s));break;case 3:n=this.data[this._pos+1],r=this.data[this._pos+2],128===(192&n)&&128===(192&r)&&(s=(15&e)<<12|(63&n)<<6|63&r,s>2047&&(s<55296||s>57343)&&(a=s));break;case 4:n=this.data[this._pos+1],r=this.data[this._pos+2],o=this.data[this._pos+3],128===(192&n)&&128===(192&r)&&128===(192&o)&&(s=(15&e)<<18|(63&n)<<12|(63&r)<<6|63&o,s>65535&&s<1114112&&(a=s))}null===a?(a=65533,u=1):a>65535&&(a-=65536,t.push(a>>>10&1023|55296),a=56320|1023&a),t.push(a),this._pos+=u};for(;!this.done();){const a=this.ch();let u;switch(a){case 92:if(this._pos++,this.done())throw new Error(`${i.WR} unexpected string termination at position ${this._pos}`);switch(u=this.ch(),this._pos++,u){case 34:case 39:case 92:case 47:t.push(u);break;case 98:t.push(8);break;case 116:t.push(9);break;case 110:t.push(10);break;case 102:t.push(12);break;case 114:t.push(13);break;case 117:t.push(n());break;default:throw new Error(`${i.WR} unexpected string escape character at position ${this._pos}`)}break;case 34:return this._pos++,new o.o(o.Z.string,(0,s.y9)(t),this._pos-e);default:if(a<32)throw new Error(`${i.WR} invalid control character at position ${this._pos}`);a<128?(t.push(a),this._pos++):r()}}throw new Error(`${i.WR} unexpected end of string at position ${this._pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this._pos++,new o.o(o.Z.map,1/0,1);case 91:return this.modeStack.push("array-start"),this._pos++,new o.o(o.Z.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new o.o(o.Z.null,null,4);case 102:return this.expect([102,97,108,115,101]),new o.o(o.Z.false,!1,5);case 116:return this.expect([116,114,117,101]),new o.o(o.Z.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${i.WR} unexpected character at position ${this._pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":if(this.modeStack.pop(),93===this.ch())return this._pos++,this.skipWhitespace(),new o.o(o.Z.break,void 0,1);if(44!==this.ch())throw new Error(`${i.WR} unexpected character at position ${this._pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue();case"array-start":return this.modeStack.pop(),93===this.ch()?(this._pos++,this.skipWhitespace(),new o.o(o.Z.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(125===this.ch())return this.modeStack.pop(),this._pos++,this.skipWhitespace(),new o.o(o.Z.break,void 0,1);if(44!==this.ch())throw new Error(`${i.WR} unexpected character at position ${this._pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this._pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),125===this.ch())return this._pos++,this.skipWhitespace(),new o.o(o.Z.break,void 0,1);const e=this.parseString();if(this.skipWhitespace(),58!==this.ch())throw new Error(`${i.WR} unexpected character at position ${this._pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("obj-value"),e}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${i.WR} unexpected parse state at position ${this._pos}; this shouldn't happen`)}}}var f=n(53523),h=n(68631);function d(e){const t=h.base64.encode(e).slice(1);return[new o.o(o.Z.map,1/0,1),new o.o(o.Z.string,"/",1),new o.o(o.Z.map,1/0,1),new o.o(o.Z.string,"bytes",5),new o.o(o.Z.string,t,t.length),new o.o(o.Z.break,void 0,1),new o.o(o.Z.break,void 0,1)]}function p(e){return d(new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}const g={typeEncoders:{Object:function(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;const t=f.T.asCID(e);if(!t)return null;const n=t.toString();return[new o.o(o.Z.map,1/0,1),new o.o(o.Z.string,"/",1),new o.o(o.Z.string,n,n.length),new o.o(o.Z.break,void 0,1)]},Buffer:d,Uint8Array:d,Int8Array:p,Uint16Array:p,Int16Array:p,Uint32Array:p,Int32Array:p,Float32Array:p,Float64Array:p,Uint8ClampedArray:p,BigInt64Array:p,BigUint64Array:p,DataView:p,ArrayBuffer:function(e){return d(new Uint8Array(e))},undefined:function(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")},number:function(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}}};class y extends c{constructor(e,t){super(e,t),this.tokenBuffer=[]}done(){return 0===this.tokenBuffer.length&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){const e=this._next();if(e.type===o.Z.map){const e=this._next();if(e.type===o.Z.string&&"/"===e.value){const e=this._next();if(e.type===o.Z.string){if(this._next().type!==o.Z.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(e),new o.o(o.Z.tag,42,0)}if(e.type===o.Z.map){const e=this._next();if(e.type===o.Z.string&&"bytes"===e.value){const e=this._next();if(e.type===o.Z.string){for(let e=0;e<2;e++){if(this._next().type!==o.Z.break)throw new Error("Invalid encoded Bytes form")}const t=h.base64.decode(`m${e.value}`);return new o.o(o.Z.bytes,t,e.value.length)}this.tokenBuffer.push(e)}this.tokenBuffer.push(e)}this.tokenBuffer.push(e)}this.tokenBuffer.push(e)}return e}}const m={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};m.tags[42]=f.T.parse;const b="dag-json",v=297,w=e=>{return t=e,n=g,n=Object.assign({},u,n),(0,r.mW)(t,new a,n);var t,n},E=e=>{const t=function(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}(e);return function(e,t){return t=Object.assign({tokenizer:new c(e,t)},t),(0,l.D4)(e,t)}(t,Object.assign(m,{tokenizer:new y(t,m)}))},A=e=>S.decode(w(e)),S=new TextDecoder,C=e=>E(T.encode(e)),T=new TextEncoder},53199:(e,t,n)=>{"use strict";const r=n(58789);e.exports=async function(e){let{root:t,connectionTest:n}=e;if("object"===typeof t.chrome&&t.chrome.extension&&t.chrome.extension.getBackgroundPage){let e=null;try{e=t.chrome.extension.getBackgroundPage()}catch(o){return null}if(e&&e.ipfs){const{ipfs:t}=e;return await n(t),{ipfs:t,provider:r.webExt}}}}},53523:(e,t,n)=>{"use strict";n.d(t,{T:()=>h});var r=n(81160),o=n(39956),i=n(4652),s=n(1992),a=n(32090),u=n(87839);function l(e,t){const{bytes:n,version:o}=e;return 0===o?function(e,t,n){const{prefix:r}=n;if(r!==i.base58btc.prefix)throw Error(`Cannot string encode V0 in ${n.name} encoding`);const o=t.get(r);if(null==o){const o=n.encode(e).slice(1);return t.set(r,o),o}return o}(n,f(e),t??i.base58btc.encoder):function(e,t,n){const{prefix:r}=n,o=t.get(r);if(null==o){const o=n.encode(e);return t.set(r,o),o}return o}(n,f(e),t??r.base32.encoder)}const c=new WeakMap;function f(e){const t=c.get(e);if(null==t){const t=new Map;return c.set(e,t),t}return t}class h{code;version;multihash;bytes;"/";constructor(e,t,n,r){this.code=t,this.version=e,this.multihash=n,this.bytes=r,this["/"]=r}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:t}=this;if(e!==d)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==p)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return h.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,n=(0,a.vt)(e,t);return h.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return h.equals(this,e)}static equals(e,t){const n=t;return null!=n&&e.code===n.code&&e.version===n.version&&(0,a.aI)(e.multihash,n.multihash)}toString(e){return l(this,e)}toJSON(){return{"/":l(this)}}link(){return this}[Symbol.toStringTag]="CID";[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(null==e)return null;const t=e;if(t instanceof h)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){const{version:e,code:n,multihash:r,bytes:o}=t;return new h(e,n,r,o??g(e,n,r.bytes))}if(!0===t[y]){const{version:e,multihash:n,code:r}=t,o=(0,a.D4)(n);return h.create(e,r,o)}return null}static create(e,t,n){if("number"!==typeof t)throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==d)throw new Error(`Version 0 CID must use dag-pb (code: ${d}) block encoding`);return new h(e,t,n,n.bytes);case 1:{const r=g(e,t,n.bytes);return new h(e,t,n,r)}default:throw new Error("Invalid version")}}static createV0(e){return h.create(0,d,e)}static createV1(e,t){return h.create(1,e,t)}static decode(e){const[t,n]=h.decodeFirst(e);if(0!==n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=h.inspectBytes(e),n=t.size-t.multihashSize,r=(0,s.au)(e.subarray(n,n+t.multihashSize));if(r.byteLength!==t.multihashSize)throw new Error("Incorrect length");const o=r.subarray(t.multihashSize-t.digestSize),i=new a.np(t.multihashCode,t.digestSize,o,r);return[0===t.version?h.createV0(i):h.createV1(t.codec,i),e.subarray(t.size)]}static inspectBytes(e){let t=0;const n=()=>{const[n,r]=(0,u.D4)(e.subarray(t));return t+=r,n};let r=n(),o=d;if(18===r?(r=0,t=0):o=n(),0!==r&&1!==r)throw new RangeError(`Invalid CID version ${r}`);const i=t,s=n(),a=n(),l=t+a;return{version:r,codec:o,multihashCode:s,digestSize:a,multihashSize:l-i,size:l}}static parse(e,t){const[n,s]=function(e,t){switch(e[0]){case"Q":{const n=t??i.base58btc;return[i.base58btc.prefix,n.decode(`${i.base58btc.prefix}${e}`)]}case i.base58btc.prefix:{const n=t??i.base58btc;return[i.base58btc.prefix,n.decode(e)]}case r.base32.prefix:{const n=t??r.base32;return[r.base32.prefix,n.decode(e)]}case o.base36.prefix:{const n=t??o.base36;return[o.base36.prefix,n.decode(e)]}default:if(null==t)throw Error("To parse non base32, base36 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}(e,t),a=h.decode(s);if(0===a.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return f(a).set(n,e),a}}const d=112,p=18;function g(e,t,n){const r=(0,u.OY)(e),o=r+(0,u.OY)(t),i=new Uint8Array(o+n.byteLength);return(0,u.s_)(e,i,0),(0,u.s_)(t,i,r),i.set(n,o),i}const y=Symbol.for("@ipld/js-cid/CID")},54716:(e,t,n)=>{var r=n(31308);e.exports=function(e,t){return r(e,t,"_")}},55285:(e,t,n)=>{"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(null,arguments)}n.d(t,{A:()=>r})},55716:(e,t,n)=>{"use strict";n.d(t,{D4:()=>a,aI:()=>u,np:()=>l,vt:()=>s});var r=n(67136),o=n(37430),i=n(74697);function s(e,t){const n=t.byteLength,r=i.OY(e),o=r+i.OY(n),s=new Uint8Array(o+n);return i.s_(e,s,0),i.s_(n,s,r),s.set(t,o),new l(e,n,t,s)}function a(e){const t=(0,o.au)(e),[n,r]=i.D4(t),[s,a]=i.D4(t.subarray(r)),u=t.subarray(r+a);if(u.byteLength!==s)throw new Error("Incorrect length");return new l(n,s,u,t)}function u(e,t){if(e===t)return!0;{const n=t;return e.code===n.code&&e.size===n.size&&n.bytes instanceof Uint8Array&&(0,o.aI)(e.bytes,n.bytes)}}class l{constructor(e,t,n,o){(0,r.A)(this,"code",void 0),(0,r.A)(this,"size",void 0),(0,r.A)(this,"digest",void 0),(0,r.A)(this,"bytes",void 0),this.code=e,this.size=t,this.digest=n,this.bytes=o}}},55982:(e,t,n)=>{"use strict";n.d(t,{L:()=>r,c:()=>o});const r=e=>{let t=null;if(window.localStorage){try{t=window.localStorage.getItem(e)}catch(n){console.error("Error reading '".concat(e,"' value from localStorage"),n)}try{return JSON.parse(t||"")}catch(r){return t}}return t},o=(e,t)=>{try{window.localStorage.setItem(e,JSON.stringify(t))}catch(n){console.error("Error writing '".concat(e,"' value to localStorage"),n)}}},56106:(e,t,n)=>{"use strict";var r=n(92606).default;e.exports=async e=>{var t,n=!1,o=!1;try{for(var i,s=r(e);n=!(i=await s.next()).done;n=!1){return i.value}}catch(a){o=!0,t=a}finally{try{n&&null!=s.return&&await s.return()}finally{if(o)throw t}}}},56752:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(88574);function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(0,r.A)(o.key),o)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}},56815:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(65043);n(89334);const o=["summaryText","children","onClick"];const i=e=>{let{summaryText:t="Advanced",children:n,onClick:i}=e,s=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,o);return r.createElement("details",s,r.createElement("summary",{className:"pointer blue outline-0",onClick:i},t),n)}},57290:(e,t,n)=>{"use strict";n.r(t),n.d(t,{identity:()=>o});var r=n(1992);const o=(0,n(63227).HT)({prefix:"\0",name:"identity",encode:e=>(0,r.dI)(e),decode:e=>(0,r.sH)(e)})},58160:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(40644);function o(e,t){if(null==e)return{};var n,o,i=(0,r.A)(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)n=s[o],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}},58256:(e,t,n)=>{"use strict";const r=n(94820),o=n(65442);e.exports=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{concurrency:n=1/0}=t,i=o(n);return Promise.all(e.map((e=>e&&"function"===typeof e.then?r(e):r("function"===typeof e?i((()=>e())):Promise.resolve(e)))))}},58789:e=>{"use strict";e.exports={httpClient:"httpClient",windowIpfs:"windowIpfs",jsIpfs:"jsIpfs",webExt:"webExt"}},59542:(e,t,n)=>{"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{A:()=>r})},60374:(e,t,n)=>{"use strict";n.r(t),n.d(t,{code:()=>d,decode:()=>g,decodeOptions:()=>f,encode:()=>p,encodeOptions:()=>l,name:()=>h,toByteView:()=>a});var r=n(12538),o=n(61625),i=n(78666),s=n(53523);function a(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}const u={float64:!0,typeEncoders:{Object:function(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;const t=s.T.asCID(e);if(!t)return null;const n=new Uint8Array(t.bytes.byteLength+1);return n.set(t.bytes,1),[new i.o(i.Z.tag,42),new i.o(i.Z.bytes,n)]},undefined:function(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")},number:function(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}}},l={...u,typeEncoders:{...u.typeEncoders}};const c={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};c.tags[42]=function(e){if(0!==e[0])throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return s.T.decode(e.subarray(1))};const f={...c,tags:c.tags.slice()},h="dag-cbor",d=113,p=e=>(0,r.lF)(e,u),g=e=>(0,o.D4)(a(e),c)},60875:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{A:()=>r})},61247:(e,t,n)=>{"use strict";n.d(t,{F:()=>Yl,p:()=>Zl});var r={};n.r(r),n.d(r,{aK:()=>Eo,e8:()=>oo,DO:()=>ro,dJ:()=>Ao,OG:()=>So,My:()=>so,Ph:()=>ho,lX:()=>po,Id:()=>bo,fg:()=>ko,qj:()=>mo,aT:()=>fo,r4:()=>wo,aY:()=>no,x:()=>Io,lq:()=>go,z:()=>yo,zW:()=>ao,Q5:()=>Oo});var o=n(82318),i=n(65043);const s={"@helia/block-brokers":"^4.0.0","@helia/http":"^2.0.0","@helia/interface":"^5.0.0","@helia/routers":"^2.0.0","@ipld/car":"^5.3.2","@ipld/dag-cbor":"^9.2.1","@ipld/dag-json":"^10.2.2","@ipld/dag-pb":"^4.1.2","@multiformats/sha3":"^3.0.2",cytoscape:"^3.30.2","cytoscape-dagre":"^2.5.0","dag-jose":"^5.1.1",filesize:"^10.1.6","hash-wasm":"^4.11.0","i18next-chained-backend":"^4.6.2","i18next-localstorage-backend":"^4.2.0","ipfs-unixfs":"^11.2.0",multiformats:"^13.3.0","react-helmet":"^6.1.0","react-inspector":"^6.0.2","react-joyride":"^2.9.2","stream-to-it":"^1.0.1"};const a=new class{index=0;input="";new(e){return this.index=0,this.input=e,this}readAtomically(e){const t=this.index,n=e();return void 0===n&&(this.index=t),n}parseWith(e){const t=e();if(this.index===this.input.length)return t}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(e){return this.readAtomically((()=>{const t=this.readChar();if(t===e)return t}))}readSeparator(e,t,n){return this.readAtomically((()=>{if(!(t>0&&void 0===this.readGivenChar(e)))return n()}))}readNumber(e,t,n,r){return this.readAtomically((()=>{let o=0,i=0;const s=this.peekChar();if(void 0===s)return;const a="0"===s,u=2**(8*r)-1;for(;;){const n=this.readAtomically((()=>{const t=this.readChar();if(void 0===t)return;const n=Number.parseInt(t,e);return Number.isNaN(n)?void 0:n}));if(void 0===n)break;if(o*=e,o+=n,o>u)return;if(i+=1,void 0!==t&&i>t)return}return 0===i||!n&&a&&i>1?void 0:o}))}readIPv4Addr(){return this.readAtomically((()=>{const e=new Uint8Array(4);for(let t=0;t<e.length;t++){const n=this.readSeparator(".",t,(()=>this.readNumber(10,3,!1,1)));if(void 0===n)return;e[t]=n}return e}))}readIPv6Addr(){const e=e=>{for(let t=0;t<e.length/2;t++){const n=2*t;if(t<e.length-3){const r=this.readSeparator(":",t,(()=>this.readIPv4Addr()));if(void 0!==r)return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],[n+4,!0]}const r=this.readSeparator(":",t,(()=>this.readNumber(16,4,!0,2)));if(void 0===r)return[n,!1];e[n]=r>>8,e[n+1]=255&r}return[e.length,!1]};return this.readAtomically((()=>{const t=new Uint8Array(16),[n,r]=e(t);if(16===n)return t;if(r)return;if(void 0===this.readGivenChar(":"))return;if(void 0===this.readGivenChar(":"))return;const o=new Uint8Array(14),i=16-(n+2),[s]=e(o.subarray(0,i));return t.set(o.subarray(0,s),16-s),t}))}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}};function u(e){return Boolean(function(e){if(!(e.length>15))return a.new(e).parseWith((()=>a.readIPv4Addr()))}(e))}function l(e){return Boolean(function(e){if(e.includes("%")&&(e=e.split("%")[0]),!(e.length>45))return a.new(e).parseWith((()=>a.readIPv6Addr()))}(e))}function c(e){return Boolean(function(e){if(e.includes("%")&&(e=e.split("%")[0]),!(e.length>45))return a.new(e).parseWith((()=>a.readIPAddr()))}(e))}var f,h=n(51499);(function(){var e,t,n,r,o,i,s,a;a=function(e){return[(e&255<<24)>>>24,(e&255<<16)>>>16,(65280&e)>>>8,255&e].join(".")},s=function(e){var n,r,o,i,s,a;for(n=[],o=i=0;i<=3&&0!==e.length;o=++i){if(o>0){if("."!==e[0])throw new Error("Invalid IP");e=e.substring(1)}s=(a=t(e))[0],r=a[1],e=e.substring(r),n.push(s)}if(0!==e.length)throw new Error("Invalid IP");switch(n.length){case 1:if(n[0]>4294967295)throw new Error("Invalid IP");return n[0]>>>0;case 2:if(n[0]>255||n[1]>16777215)throw new Error("Invalid IP");return(n[0]<<24|n[1])>>>0;case 3:if(n[0]>255||n[1]>255||n[2]>65535)throw new Error("Invalid IP");return(n[0]<<24|n[1]<<16|n[2])>>>0;case 4:if(n[0]>255||n[1]>255||n[2]>255||n[3]>255)throw new Error("Invalid IP");return(n[0]<<24|n[1]<<16|n[2]<<8|n[3])>>>0;default:throw new Error("Invalid IP")}},r=(n=function(e){return e.charCodeAt(0)})("0"),i=n("a"),o=n("A"),t=function(e){var t,s,a,u,l;for(u=0,t=10,s="9",a=0,e.length>1&&"0"===e[a]&&("x"===e[a+1]||"X"===e[a+1]?(a+=2,t=16):"0"<=e[a+1]&&e[a+1]<="9"&&(a++,t=8,s="7")),l=a;a<e.length;){if("0"<=e[a]&&e[a]<=s)u=u*t+(n(e[a])-r)>>>0;else{if(16!==t)break;if("a"<=e[a]&&e[a]<="f")u=u*t+(10+n(e[a])-i)>>>0;else{if(!("A"<=e[a]&&e[a]<="F"))break;u=u*t+(10+n(e[a])-o)>>>0}}if(u>4294967295)throw new Error("too large");a++}if(a===l)throw new Error("empty octet");return[u,a]},e=function(){function e(e,t){var n,r,o;if("string"!==typeof e)throw new Error("Missing `net' parameter");if(t||(o=e.split("/",2),e=o[0],t=o[1]),t||(t=32),"string"===typeof t&&t.indexOf(".")>-1){try{this.maskLong=s(t)}catch(i){throw new Error("Invalid mask: "+t)}for(n=r=32;r>=0;n=--r)if(this.maskLong===4294967295<<32-n>>>0){this.bitmask=n;break}}else{if(!t&&0!==t)throw new Error("Invalid mask: empty");this.bitmask=parseInt(t,10),this.maskLong=0,this.bitmask>0&&(this.maskLong=4294967295<<32-this.bitmask>>>0)}try{this.netLong=(s(e)&this.maskLong)>>>0}catch(i){throw new Error("Invalid net address: "+e)}if(!(this.bitmask<=32))throw new Error("Invalid mask for ip4: "+t);this.size=Math.pow(2,32-this.bitmask),this.base=a(this.netLong),this.mask=a(this.maskLong),this.hostmask=a(~this.maskLong),this.first=this.bitmask<=30?a(this.netLong+1):this.base,this.last=this.bitmask<=30?a(this.netLong+this.size-2):a(this.netLong+this.size-1),this.broadcast=this.bitmask<=30?a(this.netLong+this.size-1):void 0}return e.prototype.contains=function(t){return"string"===typeof t&&(t.indexOf("/")>0||4!==t.split(".").length)&&(t=new e(t)),t instanceof e?this.contains(t.base)&&this.contains(t.broadcast||t.last):(s(t)&this.maskLong)>>>0===(this.netLong&this.maskLong)>>>0},e.prototype.next=function(t){return null==t&&(t=1),new e(a(this.netLong+this.size*t),this.mask)},e.prototype.forEach=function(e){var t,n,r;for(r=s(this.first),n=s(this.last),t=0;r<=n;)e(a(r),r,t),t++,r++},e.prototype.toString=function(){return this.base+"/"+this.bitmask},e}(),f=e}).call(h.i);const d=["0.0.0.0/8","10.0.0.0/8","100.64.0.0/10","127.0.0.0/8","169.254.0.0/16","172.16.0.0/12","192.0.0.0/24","192.0.0.0/29","192.0.0.8/32","192.0.0.9/32","192.0.0.10/32","192.0.0.170/32","192.0.0.171/32","192.0.2.0/24","192.31.196.0/24","192.52.193.0/24","192.88.99.0/24","192.168.0.0/16","192.175.48.0/24","198.18.0.0/15","198.51.100.0/24","203.0.113.0/24","240.0.0.0/4","255.255.255.255/32"].map((e=>new f(e)));function p(e){for(const t of d)if(t.contains(e))return!0;return!1}function g(e){return u(e)?p(e):/^::ffff:([0-9a-fA-F]{1,4}):([0-9a-fA-F]{1,4})$/.test(e)?function(e){const t=e.split(":");if(t.length<2)return!1;const n=t[t.length-1].padStart(4,"0"),r=t[t.length-2].padStart(4,"0");return p(`${parseInt(r.substring(0,2),16)}.${parseInt(r.substring(2),16)}.${parseInt(n.substring(0,2),16)}.${parseInt(n.substring(2),16)}`)}(e):function(e){return/^::ffff:([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(e)}(e)?function(e){const t=e.split(":");return p(t[t.length-1])}(e):l(e)?function(e){return/^::$/.test(e)||/^::1$/.test(e)||/^64:ff9b::([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(e)||/^100::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^2001::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^2001:2[0-9a-fA-F]:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^2001:db8:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^2002:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^f[c-d]([0-9a-fA-F]{2,2}):/i.test(e)||/^fe[8-9a-bA-B][0-9a-fA-F]:/i.test(e)||/^ff([0-9a-fA-F]{2,2}):/i.test(e)}(e):void 0}var y=n(4652),m=n(68631);const b=e=>({match:t=>!(t.length<1)&&(!!e(t[0])&&t.slice(1)),pattern:"fn"}),v=e=>({match:t=>b((t=>t===e)).match(t),pattern:e}),w=()=>({match:e=>b((e=>"string"===typeof e)).match(e),pattern:"{string}"}),E=()=>({match:e=>b((e=>!isNaN(parseInt(e)))).match(e),pattern:"{number}"}),A=()=>({match:e=>{if(e.length<2)return!1;if("p2p"!==e[0]&&"ipfs"!==e[0])return!1;if(!e[1].startsWith("Q")&&!e[1].startsWith("1"))return!1;try{y.base58btc.decode(`z${e[1]}`)}catch(t){return!1}return e.slice(2)},pattern:"/p2p/{peerid}"}),S=()=>({match:e=>{if(e.length<2)return!1;if("certhash"!==e[0])return!1;try{m.base64url.decode(e[1])}catch{return!1}return e.slice(2)},pattern:"/certhash/{certhash}"}),C=e=>({match:t=>{const n=e.match(t);return!1===n?t:n},pattern:`optional(${e.pattern})`}),T=(...e)=>({match:t=>{let n;for(const r of e){const e=r.match(t);!1!==e&&((null==n||e.length<n.length)&&(n=e))}return null!=n&&n},pattern:`or(${e.map((e=>e.pattern)).join(", ")})`}),k=(...e)=>({match:t=>{for(const n of e){const e=n.match(t);if(!1===e)return!1;t=e}return t},pattern:`and(${e.map((e=>e.pattern)).join(", ")})`});function x(...e){function t(t){let n=(e=>e.toString().split("/").slice(1))(t);for(const r of e){const e=r.match(n);if(!1===e)return!1;n=e}return n}return{matchers:e,matches:function(e){return!1!==t(e)},exactMatch:function(e){const n=t(e);return!1!==n&&0===n.length}}}const O=k(v("dns4"),w()),I=k(v("dns6"),w()),P=k(v("dnsaddr"),w()),B=k(v("dns"),w());x(O,C(A())),x(I,C(A())),x(P,C(A()));const D=x(T(B,P,O,I),C(A())),N=T(k(v("ip4"),b(u)),k(v("ip6"),b(l))),F=T(N,B,O,I,P);x(T(N,k(T(B,P,O,I),C(A()))));const _=k(F,v("tcp"),E()),L=k(F,v("udp"),E());x(k(_,C(A())));const R=k(L,v("quic")),j=k(L,v("quic-v1")),M=T(R,j),U=T(F,_,L,R,j),H=T(k(U,v("ws"),C(A()))),z=T(k(U,v("wss"),C(A())),k(U,v("tls"),v("ws"),C(A()))),V=k(L,v("webrtc-direct"),C(S()),C(S()),C(A())),$=k(j,v("webtransport"),C(S()),C(S()),C(A())),G=T(H,z,k(_,C(A())),k(M,C(A())),k(F,C(A())),V,$,A());k(G,v("p2p-circuit"),A()),T(k(G,v("p2p-circuit"),v("webrtc"),C(A())),k(G,v("webrtc"),C(A())),v("webrtc"));const W=x(T(k(F,v("tcp"),E(),v("http"),C(A())),k(F,v("http"),C(A())))),q=x(T(k(F,v("tcp"),T(k(v("443"),v("http")),k(E(),v("https"))),C(A())),k(F,v("tls"),v("http"),C(A())),k(F,v("https"),C(A()))));var K=n(53523);function Y(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0}var Z=n(22303);function J(e,t="utf8"){const n=Z.A[t];if(null==n)throw new Error(`Unsupported encoding "${t}"`);return n.encoder.encode(e).substring(1)}var X=n(74421),Q=n(77397);function ee(e,t){null==t&&(t=e.reduce(((e,t)=>e+t.length),0));const n=(0,Q.K)(t);let r=0;for(const o of e)n.set(o,r),r+=o.length;return n}var te=n(81160),ne=n(14108),re=n(32090),oe=n(89790);const ie=u,se=l,ae=function(e){let t=0;if(e=e.toString().trim(),ie(e)){const n=new Uint8Array(t+4);return e.split(/\./g).forEach((e=>{n[t++]=255&parseInt(e,10)})),n}if(se(e)){const n=e.split(":",8);let r;for(r=0;r<n.length;r++){let e;ie(n[r])&&(e=ae(n[r]),n[r]=J(e.slice(0,2),"base16")),null!=e&&++r<8&&n.splice(r,0,J(e.slice(2,4),"base16"))}if(""===n[0])for(;n.length<8;)n.unshift("0");else if(""===n[n.length-1])for(;n.length<8;)n.push("0");else if(n.length<8){for(r=0;r<n.length&&""!==n[r];r++);const e=[r,1];for(r=9-n.length;r>0;r--)e.push("0");n.splice.apply(n,e)}const o=new Uint8Array(t+16);for(r=0;r<n.length;r++){const e=parseInt(n[r],16);o[t++]=e>>8&255,o[t++]=255&e}return o}throw new Error("invalid ip address")},ue=-1,le={},ce={};function fe(e){if("number"===typeof e){if(null!=ce[e])return ce[e];throw new Error(`no protocol with code: ${e}`)}if("string"===typeof e){if(null!=le[e])return le[e];throw new Error(`no protocol with name: ${e}`)}throw new Error("invalid protocol id type: "+typeof e)}function he(e,t){switch(fe(e).code){case 4:case 41:return function(e){const t=function(e,t=0,n){t=~~t,n=n??e.length-t;const r=new DataView(e.buffer);if(4===n){const r=[];for(let o=0;o<n;o++)r.push(e[t+o]);return r.join(".")}if(16===n){const e=[];for(let o=0;o<n;o+=2)e.push(r.getUint16(t+o).toString(16));return e.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""}(e,0,e.length);if(null==t)throw new Error("ipBuff is required");if(!c(t))throw new Error("invalid ip address");return t}(t);case 42:case 53:case 54:case 55:case 56:case 400:case 449:case 777:return we(t);case 6:case 273:case 33:case 132:return be(t).toString();case 421:return function(e){const t=(0,X.D4)(e),n=e.slice((0,X.OY)(t));if(n.length!==t)throw new Error("inconsistent lengths");return J(n,"base58btc")}(t);case 444:case 445:return Ee(t);case 466:return function(e){const t=(0,X.D4)(e),n=e.slice((0,X.OY)(t));if(n.length!==t)throw new Error("inconsistent lengths");return"u"+J(n,"base64url")}(t);case 481:return globalThis.encodeURIComponent(we(t));default:return J(t,"base16")}}function de(e,t){switch(fe(e).code){case 4:case 41:return ye(t);case 42:case 53:case 54:case 55:case 56:case 400:case 449:case 777:return ve(t);case 6:case 273:case 33:case 132:return me(parseInt(t,10));case 421:return function(e){let t;t="Q"===e[0]||"1"===e[0]?(0,re.D4)(y.base58btc.decode(`z${e}`)).bytes:K.T.parse(e).multihash.bytes;const n=Uint8Array.from((0,X.lF)(t.length));return ee([n,t],n.length+t.length)}(t);case 444:return function(e){const t=e.split(":");if(2!==t.length)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(16!==t[0].length)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion address.`);const n=te.base32.decode("b"+t[0]),r=parseInt(t[1],10);if(r<1||r>65536)throw new Error("Port number is not in range(1, 65536)");const o=me(r);return ee([n,o],n.length+o.length)}(t);case 445:return function(e){const t=e.split(":");if(2!==t.length)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(56!==t[0].length)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion3 address.`);const n=te.base32.decode(`b${t[0]}`),r=parseInt(t[1],10);if(r<1||r>65536)throw new Error("Port number is not in range(1, 65536)");const o=me(r);return ee([n,o],n.length+o.length)}(t);case 466:return function(e){const t=ge.decode(e),n=Uint8Array.from((0,X.lF)(t.length));return ee([n,t],n.length+t.length)}(t);case 481:return ve(globalThis.decodeURIComponent(t));default:return(0,oe.s)(t,"base16")}}[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,ue,"ip6zone"],[43,8,"ipcidr"],[53,ue,"dns",!0],[54,ue,"dns4",!0],[55,ue,"dns6",!0],[56,ue,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,ue,"unix",!1,!0],[421,ue,"ipfs"],[421,ue,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,ue,"garlic64"],[448,0,"tls"],[449,ue,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,ue,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[481,ue,"http-path"],[777,ue,"memory"]].forEach((e=>{const t=function(e,t,n,r,o){return{code:e,size:t,name:n,resolvable:Boolean(r),path:Boolean(o)}}(...e);ce[t.code]=t,le[t.name]=t})),fe("ip4"),fe("ip6"),fe("ipcidr");const pe=Object.values(ne.F).map((e=>e.decoder)),ge=function(){let e=pe[0].or(pe[1]);return pe.slice(2).forEach((t=>e=e.or(t))),e}();function ye(e){if(!c(e))throw new Error("invalid ip address");return ae(e)}function me(e){const t=new ArrayBuffer(2);return new DataView(t).setUint16(0,e),new Uint8Array(t)}function be(e){return new DataView(e.buffer).getUint16(e.byteOffset)}function ve(e){const t=(0,oe.s)(e),n=Uint8Array.from((0,X.lF)(t.length));return ee([n,t],n.length+t.length)}function we(e){const t=(0,X.D4)(e);if((e=e.slice((0,X.OY)(t))).length!==t)throw new Error("inconsistent lengths");return J(e)}function Ee(e){const t=e.slice(0,e.length-2),n=e.slice(e.length-2);return`${J(t,"base32")}:${be(n)}`}function Ae(e){const t=[],n=[];let r=null,o=0;for(;o<e.length;){const i=(0,X.D4)(e,o),s=(0,X.OY)(i),a=fe(i),u=Te(a,e.slice(o+s));if(0===u){t.push([i]),n.push([i]),o+=s;continue}const l=e.slice(o+s,o+s+u);if(o+=u+s,o>e.length)throw xe("Invalid address Uint8Array: "+J(e,"base16"));t.push([i,l]);const c=he(i,l);if(n.push([i,c]),!0===a.path){r=c;break}}return{bytes:Uint8Array.from(e),string:Se(n),tuples:t,stringTuples:n,path:r}}function Se(e){const t=[];return e.map((e=>{const n=fe(e[0]);return t.push(n.name),e.length>1&&null!=e[1]&&t.push(e[1]),null})),ke(t.join("/"))}function Ce(e){return ee(e.map((e=>{const t=fe(e[0]);let n=Uint8Array.from((0,X.lF)(t.code));return e.length>1&&null!=e[1]&&(n=ee([n,e[1]])),n})))}function Te(e,t){if(e.size>0)return e.size/8;if(0===e.size)return 0;{const e=(0,X.D4)(t instanceof Uint8Array?t:Uint8Array.from(t));return e+(0,X.OY)(e)}}function ke(e){return"/"+e.trim().split("/").filter((e=>e)).join("/")}function xe(e){return new Error("Error parsing address: "+e)}const Oe=Symbol.for("nodejs.util.inspect.custom"),Ie=Symbol.for("@multiformats/js-multiaddr/multiaddr"),Pe=[fe("dns").code,fe("dns4").code,fe("dns6").code,fe("dnsaddr").code];class Be extends Error{constructor(e="No available resolver"){super(e),this.name="NoAvailableResolverError"}}class De{bytes;#t;#r;#o;#i;[Ie]=!0;constructor(e){let t;if(null==e&&(e=""),e instanceof Uint8Array)t=Ae(e);else if("string"===typeof e){if(e.length>0&&"/"!==e.charAt(0))throw new Error(`multiaddr "${e}" must start with a "/"`);t=function(e){const t=[],n=[];let r=null;const o=(e=ke(e)).split("/").slice(1);if(1===o.length&&""===o[0])return{bytes:new Uint8Array,string:"/",tuples:[],stringTuples:[],path:null};for(let i=0;i<o.length;i++){const s=fe(o[i]);if(0===s.size){t.push([s.code]),n.push([s.code]);continue}if(i++,i>=o.length)throw xe("invalid address: "+e);if(!0===s.path){r=ke(o.slice(i).join("/")),t.push([s.code,de(s.code,r)]),n.push([s.code,r]);break}const a=de(s.code,o[i]);t.push([s.code,a]),n.push([s.code,he(s.code,a)])}return{string:Se(n),bytes:Ce(t),tuples:t,stringTuples:n,path:r}}(e)}else{if(n=e,!Boolean(n?.[Ie]))throw new Error("addr must be a string, Buffer, or another Multiaddr");t=Ae(e.bytes)}var n;this.bytes=t.bytes,this.#t=t.string,this.#r=t.tuples,this.#o=t.stringTuples,this.#i=t.path}toString(){return this.#t}toJSON(){return this.toString()}toOptions(){let e,t,n,r,o="";const i=fe("tcp"),s=fe("udp"),a=fe("ip4"),u=fe("ip6"),l=fe("dns6"),c=fe("ip6zone");for(const[f,h]of this.stringTuples())f===c.code&&(o=`%${h??""}`),Pe.includes(f)&&(t=i.name,r=443,n=`${h??""}${o}`,e=f===l.code?6:4),f!==i.code&&f!==s.code||(t=fe(f).name,r=parseInt(h??"")),f!==a.code&&f!==u.code||(t=fe(f).name,n=`${h??""}${o}`,e=f===u.code?6:4);if(null==e||null==t||null==n||null==r)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e,host:n,transport:t,port:r}}protos(){return this.#r.map((([e])=>Object.assign({},fe(e))))}protoCodes(){return this.#r.map((([e])=>e))}protoNames(){return this.#r.map((([e])=>fe(e).name))}tuples(){return this.#r}stringTuples(){return this.#o}encapsulate(e){return e=new De(e),new De(this.toString()+e.toString())}decapsulate(e){const t=e.toString(),n=this.toString(),r=n.lastIndexOf(t);if(r<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new De(n.slice(0,r))}decapsulateCode(e){const t=this.tuples();for(let n=t.length-1;n>=0;n--)if(t[n][0]===e)return new De(Ce(t.slice(0,n)));return this}getPeerId(){try{let e=[];this.stringTuples().forEach((([t,n])=>{t===le.p2p.code&&e.push([t,n]),t===le["p2p-circuit"].code&&(e=[])}));const t=e.pop();if(null!=t?.[1]){const e=t[1];return"Q"===e[0]||"1"===e[0]?J(y.base58btc.decode(`z${e}`),"base58btc"):J(K.T.parse(e).multihash.bytes,"base58btc")}return null}catch(e){return null}}getPath(){return this.#i}equals(e){return Y(this.bytes,e.bytes)}async resolve(e){const t=this.protos().find((e=>e.resolvable));if(null==t)return[this];const n=Ne.get(t.name);if(null==n)throw new Be(`no available resolver for ${t.name}`);return(await n(this,e)).map((e=>Fe(e)))}nodeAddress(){const e=this.toOptions();if("tcp"!==e.transport&&"udp"!==e.transport)throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){const t=(e??this).protos();return 2===t.length&&((4===t[0].code||41===t[0].code)&&(6===t[1].code||273===t[1].code))}[Oe](){return`Multiaddr(${this.#t})`}}const Ne=new Map;function Fe(e){return new De(e)}const _e=[fe("tcp").code,fe("dns").code,fe("dnsaddr").code,fe("dns4").code,fe("dns6").code];function Le(e){let t;try{t=fe("sni").code}catch(n){return null}for(const[r,o]of e)if(r===t&&void 0!==o)return o;return null}function Re(e){return e.some((([e,t])=>e===fe("tls").code))}function je(e,t,n){const r=Me[fe(e).name];if(void 0===r)throw new Error(`Can't interpret protocol ${fe(e).name}`);const o=r(t,n);return e===fe("ip6").code?`[${o}]`:o}const Me={ip4:(e,t)=>e,ip6:(e,t)=>0===t.length?e:`[${e}]`,tcp:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`tcp://${je(n[0],n[1]??"",t)}:${e}`},udp:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`udp://${je(n[0],n[1]??"",t)}:${e}`},dnsaddr:(e,t)=>e,dns4:(e,t)=>e,dns6:(e,t)=>e,dns:(e,t)=>e,ipfs:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`${je(n[0],n[1]??"",t)}/ipfs/${e}`},p2p:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`${je(n[0],n[1]??"",t)}/p2p/${e}`},http:(e,t)=>{const n=Re(t),r=Le(t);if(n&&null!==r)return`https://${r}`;const o=n?"https://":"http://",i=t.pop();if(void 0===i)throw new Error("Unexpected end of multiaddr");let s=je(i[0],i[1]??"",t);return s=s.replace("tcp://",""),`${o}${s}`},"http-path":(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`${je(n[0],n[1]??"",t)}/${decodeURIComponent(e)}`},tls:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return je(n[0],n[1]??"",t)},sni:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return je(n[0],n[1]??"",t)},https:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");let r=je(n[0],n[1]??"",t);return r=r.replace("tcp://",""),`https://${r}`},ws:(e,t)=>{const n=Re(t),r=Le(t);if(n&&null!==r)return`wss://${r}`;const o=n?"wss://":"ws://",i=t.pop();if(void 0===i)throw new Error("Unexpected end of multiaddr");let s=je(i[0],i[1]??"",t);return s=s.replace("tcp://",""),`${o}${s}`},wss:(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");let r=je(n[0],n[1]??"",t);return r=r.replace("tcp://",""),`wss://${r}`},"p2p-websocket-star":(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`${je(n[0],n[1]??"",t)}/p2p-websocket-star`},"p2p-webrtc-star":(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`${je(n[0],n[1]??"",t)}/p2p-webrtc-star`},"p2p-webrtc-direct":(e,t)=>{const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return`${je(n[0],n[1]??"",t)}/p2p-webrtc-direct`}};function Ue(e,t){const n=Fe(e).stringTuples(),r=n.pop();if(void 0===r)throw new Error("Unexpected end of multiaddr");const o=fe(r[0]),i=Me[o.name];if(null==i)throw new Error(`No interpreter found for ${o.name}`);let s=i(r[1]??"",n);return _e.includes(r[0])&&(s=s.replace(/^.*:\/\//,""),s="443"===r[1]?`https://${s}`:`http://${s}`),(s.startsWith("http://")||s.startsWith("https://"))&&(s=new URL(s).toString(),s.endsWith("/")&&(s=s.substring(0,s.length-1))),s}class He{url;#s=0;#a=0;#u=0;#l=0;#c=new Map;log;constructor(e,t){this.url=e instanceof URL?e:new URL(e),this.log=t.forComponent(`helia:trustless-gateway-block-broker:${this.url.hostname}`)}#f(e){const t=e.multihash.bytes;return m.base64.encode(t)}async getRawBlock(e,t){const n=new URL(this.url.toString());if(n.pathname=`/ipfs/${e.toString()}`,n.search="?format=raw",!0===t?.aborted)throw new Error(`Signal to fetch raw block for CID ${e} from gateway ${this.url} was aborted prior to fetch`);const r=this.#f(e),o=new AbortController,i=()=>{o.abort()};t?.addEventListener("abort",i);try{let t=this.#c.get(r);return null==t&&(this.#s++,t=fetch(n.toString(),{signal:o.signal,headers:{Accept:"application/vnd.ipld.raw"},cache:"force-cache"}).then((async t=>{if(this.log("GET %s %d",n,t.status),!t.ok)throw this.#a++,new Error(`unable to fetch raw block for CID ${e} from gateway ${this.url}`);return this.#l++,new Uint8Array(await t.arrayBuffer())})),this.#c.set(r,t)),await t}catch(s){if(!0===t?.aborted)throw new Error(`fetching raw block for CID ${e} from gateway ${this.url} was aborted`);throw this.#a++,new Error(`unable to fetch raw block for CID ${e}`)}finally{t?.removeEventListener("abort",i),this.#c.delete(r)}}reliability(){return 0===this.#s?1:this.#u>0?-1/0:this.#l/(this.#s+3*this.#a)}incrementInvalidBlocks(){this.#u++}getStats(){return{attempts:this.#s,errors:this.#a,invalidBlocks:this.#u,successes:this.#l,pendingResponses:this.#c.size}}}function ze(e,t,n){return e.filter((e=>{if(q.matches(e)||t&&W.matches(e))return!!n||(!!D.matches(e)||!1===g(e.toOptions().host));if(!t&&n){const{host:t}=e.toOptions();if("127.0.0.1"===t||"localhost"===t||t.endsWith(".localhost"))return!0}return!1}))}async function*Ve(e,t,n,r,o,i){for await(const s of t.findProviders(e,i)){const e=ze(s.multiaddrs,r,o);if(0===e.length)continue;const t=Ue(e[0]);yield new He(t,n)}}function $e(){const e={};return e.promise=new Promise(((t,n)=>{e.resolve=t,e.reject=n})),e}class Ge{buffer;mask;top;btm;next;constructor(e){if(!(e>0)||0!==(e-1&e))throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return void 0===this.buffer[this.top]&&(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){const e=this.buffer[this.btm];if(void 0!==e)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return void 0===this.buffer[this.btm]}}class We{size;hwm;head;tail;constructor(e={}){this.hwm=e.splitLimit??16,this.head=new Ge(this.hwm),this.tail=this.head,this.size=0}calculateSize(e){return null!=e?.byteLength?e.byteLength:1}push(e){if(null!=e?.value&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){const t=this.head;this.head=t.next=new Ge(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(void 0===e&&null!=this.tail.next){const t=this.tail.next;this.tail.next=null,this.tail=t,e=this.tail.shift()}return null!=e?.value&&(this.size-=this.calculateSize(e.value)),e}isEmpty(){return this.head.isEmpty()}}class qe extends Error{type;code;constructor(e,t){super(e??"The operation was aborted"),this.type="aborted",this.code=t??"ABORT_ERR"}}function Ke(e={}){return function(e,t){t=t??{};let n,r,o,i=t.onEnd,s=new We,a=$e();const u=async()=>{try{return s.isEmpty()?o?{done:!0}:await new Promise(((t,o)=>{r=i=>{r=null,s.push(i);try{t(e(s))}catch(a){o(a)}return n}})):e(s)}finally{s.isEmpty()&&queueMicrotask((()=>{a.resolve(),a=$e()}))}},l=e=>null!=r?r(e):(s.push(e),n),c=e=>(s=new We,null!=r?r({error:e}):(s.push({error:e}),n)),f=e=>{if(o)return n;if(!0!==t?.objectMode&&null==e?.byteLength)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return l({done:!1,value:e})},h=e=>o?n:(o=!0,null!=e?c(e):l({done:!0})),d=()=>(s=new We,h(),{done:!0}),p=e=>(h(e),{done:!0});if(n={[Symbol.asyncIterator](){return this},next:u,return:d,throw:p,push:f,end:h,get readableLength(){return s.size},onEmpty:async e=>{const t=e?.signal;if(t?.throwIfAborted(),s.isEmpty())return;let n,r;null!=t&&(n=new Promise(((e,n)=>{r=()=>{n(new qe)},t.addEventListener("abort",r)})));try{await Promise.race([a.promise,n])}finally{null!=r&&null!=t&&t?.removeEventListener("abort",r)}}},null==i)return n;const g=n;return n={[Symbol.asyncIterator](){return this},next:()=>g.next(),throw:e=>(g.throw(e),null!=i&&(i(e),i=void 0),{done:!0}),return:()=>(g.return(),null!=i&&(i(),i=void 0),{done:!0}),push:f,end:e=>(g.end(e),null!=i&&(i(e),i=void 0),n),get readableLength(){return g.readableLength},onEmpty:e=>g.onEmpty(e)},n}((e=>{const t=e.shift();if(null==t)return{done:!0};if(null!=t.error)throw t.error;return{done:!0===t.done,value:t.value}}),e)}class Ye extends Error{type;code;constructor(e,t){super(e??"The operation was aborted"),this.type="aborted",this.name="AbortError",this.code=t??"ABORT_ERR"}}async function Ze(e,t,n,r){const o=new Ye(r?.errorMessage,r?.errorCode);return!0===n?.aborted?Promise.reject(o):new Promise(((i,s)=>{function a(){n?.removeEventListener("abort",c),e.removeEventListener(t,u),null!=r?.errorEvent&&e.removeEventListener(r.errorEvent,l)}const u=e=>{try{if(!1===r?.filter?.(e))return}catch(t){return a(),void s(t)}a(),i(e)},l=e=>{a(),s(e.detail)},c=()=>{a(),s(o)};n?.addEventListener("abort",c),e.addEventListener(t,u),null!=r?.errorEvent&&e.addEventListener(r.errorEvent,l)}))}class Je extends Error{static name="QueueFullError";constructor(e="The queue was full"){super(e),this.name="QueueFullError"}}class Xe extends Error{type;code;constructor(e,t,n){super(e??"The operation was aborted"),this.type="aborted",this.name=n??"AbortError",this.code=t??"ABORT_ERR"}}class Qe extends Error{static name="AbortError";constructor(e="The operation was aborted"){super(e),this.name="AbortError"}}class et extends Error{static name="InvalidParametersError";constructor(e="Invalid parameters"){super(e),this.name="InvalidParametersError"}}class tt extends Error{static name="InvalidPublicKeyError";constructor(e="Invalid public key"){super(e),this.name="InvalidPublicKeyError"}}class nt extends Error{static name="NotFoundError";constructor(e="Not found"){super(e),this.name="NotFoundError"}}class rt extends Error{static name="InvalidCIDError";constructor(e="Invalid CID"){super(e),this.name="InvalidCIDError"}}class ot extends Error{static name="InvalidMultihashError";constructor(e="Invalid Multihash"){super(e),this.name="InvalidMultihashError"}}class it extends Error{static name="UnsupportedKeyTypeError";constructor(e="Unsupported key type"){super(e),this.name="UnsupportedKeyTypeError"}}class st{deferred;signal;constructor(e){this.signal=e,this.deferred=$e(),this.onAbort=this.onAbort.bind(this),this.signal?.addEventListener("abort",this.onAbort)}onAbort(){this.deferred.reject(this.signal?.reason??new Qe)}cleanup(){this.signal?.removeEventListener("abort",this.onAbort)}}class at{id;fn;options;recipients;status;timeline;controller;constructor(e,t){this.id=`${parseInt(String(1e9*Math.random()),10).toString()}${Date.now()}`,this.status="queued",this.fn=e,this.options=t,this.recipients=[],this.timeline={created:Date.now()},this.controller=new AbortController,this.controller.signal,this.onAbort=this.onAbort.bind(this)}abort(e){this.controller.abort(e)}onAbort(){this.recipients.reduce(((e,t)=>e&&!0===t.signal?.aborted),!0)&&(this.controller.abort(new Qe),this.cleanup())}async join(e={}){const t=new st(e.signal);return this.recipients.push(t),e.signal?.addEventListener("abort",this.onAbort),t.deferred.promise}async run(){this.status="running",this.timeline.started=Date.now();try{this.controller.signal.throwIfAborted();const e=await async function(e,t,n){if(null==t)return e;if(t.aborted)return Promise.reject(new Xe(n?.errorMessage,n?.errorCode,n?.errorName));let r;const o=new Xe(n?.errorMessage,n?.errorCode,n?.errorName);try{return await Promise.race([e,new Promise(((e,n)=>{r=()=>{n(o)},t.addEventListener("abort",r)}))])}finally{null!=r&&t.removeEventListener("abort",r)}}(this.fn({...this.options??{},signal:this.controller.signal}),this.controller.signal);this.recipients.forEach((t=>{t.deferred.resolve(e)})),this.status="complete"}catch(e){this.recipients.forEach((t=>{t.deferred.reject(e)})),this.status="errored"}finally{this.timeline.finished=Date.now(),this.cleanup()}}cleanup(){this.recipients.forEach((e=>{e.cleanup(),e.signal?.removeEventListener("abort",this.onAbort)}))}}class ut extends EventTarget{#h=new Map;constructor(){super()}listenerCount(e){const t=this.#h.get(e);return null==t?0:t.length}addEventListener(e,t,n){super.addEventListener(e,t,n);let r=this.#h.get(e);null==r&&(r=[],this.#h.set(e,r)),r.push({callback:t,once:(!0!==n&&!1!==n&&n?.once)??!1})}removeEventListener(e,t,n){super.removeEventListener(e.toString(),t??null,n);let r=this.#h.get(e);null!=r&&(r=r.filter((({callback:e})=>e!==t)),this.#h.set(e,r))}dispatchEvent(e){const t=super.dispatchEvent(e);let n=this.#h.get(e.type);return null==n||(n=n.filter((({once:e})=>!e)),this.#h.set(e.type,n)),t}safeDispatchEvent(e,t={}){return this.dispatchEvent(new CustomEvent(e,t))}}class lt extends ut{concurrency;maxSize;queue;pending;sort;constructor(e={}){super(),this.concurrency=e.concurrency??Number.POSITIVE_INFINITY,this.maxSize=e.maxSize??Number.POSITIVE_INFINITY,this.pending=0,null!=e.metricName&&e.metrics?.registerMetricGroup(e.metricName,{calculate:()=>({size:this.queue.length,running:this.pending,queued:this.queue.length-this.pending})}),this.sort=e.sort,this.queue=[]}tryToStartAnother(){if(0===this.size)return queueMicrotask((()=>{this.safeDispatchEvent("empty")})),0===this.running&&queueMicrotask((()=>{this.safeDispatchEvent("idle")})),!1;if(this.pending<this.concurrency){let e;for(const t of this.queue)if("queued"===t.status){e=t;break}return null!=e&&(this.safeDispatchEvent("active"),this.pending++,e.run().finally((()=>{for(let t=0;t<this.queue.length;t++)if(this.queue[t]===e){this.queue.splice(t,1);break}this.pending--,this.tryToStartAnother(),this.safeDispatchEvent("next")})),!0)}return!1}enqueue(e){this.queue.push(e),null!=this.sort&&this.queue.sort(this.sort)}async add(e,t){if(t?.signal?.throwIfAborted(),this.size===this.maxSize)throw new Je;const n=new at(e,t);return this.enqueue(n),this.safeDispatchEvent("add"),this.tryToStartAnother(),n.join(t).then((e=>(this.safeDispatchEvent("completed",{detail:e}),this.safeDispatchEvent("success",{detail:{job:n,result:e}}),e))).catch((e=>{if("queued"===n.status)for(let t=0;t<this.queue.length;t++)if(this.queue[t]===n){this.queue.splice(t,1);break}throw this.safeDispatchEvent("error",{detail:e}),this.safeDispatchEvent("failure",{detail:{job:n,error:e}}),e}))}clear(){this.queue.splice(0,this.queue.length)}abort(){this.queue.forEach((e=>{e.abort(new Qe)})),this.clear()}async onEmpty(e){0!==this.size&&await Ze(this,"empty",e?.signal)}async onSizeLessThan(e,t){this.size<e||await Ze(this,"next",t?.signal,{filter:()=>this.size<e})}async onIdle(e){0===this.pending&&0===this.size||await Ze(this,"idle",e?.signal)}get size(){return this.queue.length}get queued(){return this.queue.length-this.pending}get running(){return this.pending}async*toGenerator(e){e?.signal?.throwIfAborted();const t=Ke({objectMode:!0}),n=e=>{null!=e?this.abort():this.clear(),t.end(e)},r=e=>{null!=e.detail&&t.push(e.detail)},o=e=>{n(e.detail)},i=()=>{n()},s=()=>{n(new Qe("Queue aborted"))};this.addEventListener("completed",r),this.addEventListener("error",o),this.addEventListener("idle",i),e?.signal?.addEventListener("abort",s);try{yield*t}finally{this.removeEventListener("completed",r),this.removeEventListener("error",o),this.removeEventListener("idle",i),e?.signal?.removeEventListener("abort",s),n()}}}const ct="object"===typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function ft(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function ht(e,...t){if(!((n=e)instanceof Uint8Array||null!=n&&"object"===typeof n&&"Uint8Array"===n.constructor.name))throw new Error("Uint8Array expected");var n;if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function dt(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}const pt=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),gt=(e,t)=>e<<32-t|e>>>t;function yt(e){return"string"===typeof e&&(e=function(e){if("string"!==typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),ht(e),e}new Uint8Array(new Uint32Array([287454020]).buffer)[0];class mt{clone(){return this._cloneInto()}}function bt(e){const t=t=>e().update(yt(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function vt(e=32){if(ct&&"function"===typeof ct.getRandomValues)return ct.getRandomValues(new Uint8Array(e));if(ct&&"function"===typeof ct.randomBytes)return ct.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}function wt(e){if(isNaN(e)||e<=0)throw new et("random bytes length must be a Number bigger than 0");return vt(e)}var Et,At,St={exports:{}};Et=St,At=St.exports,function(e,t){var n={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function r(e){if(!Array.isArray(e)&&!ArrayBuffer.isView(e))return!1;for(var t=0;t<e.length;t++)if(!Number.isInteger(e[t])||e[t]<0||e[t]>255)return!1;return!0}function o(e,t){return(65535&e)*t+(((e>>>16)*t&65535)<<16)}function i(e,t){return e<<t|e>>>32-t}function s(e){return e=o(e^=e>>>16,2246822507),e=o(e^=e>>>13,3266489909),e^=e>>>16}function a(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]+t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]+t[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=e[1]+t[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=e[0]+t[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]}function u(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]*t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]*t[3],n[1]+=n[2]>>>16,n[2]&=65535,n[2]+=e[3]*t[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=e[1]*t[3],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=e[2]*t[2],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=e[3]*t[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]}function l(e,t){return 32===(t%=64)?[e[1],e[0]]:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:(t-=32,[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t])}function c(e,t){return 0===(t%=64)?e:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]}function f(e,t){return[e[0]^t[0],e[1]^t[1]]}function h(e){return e=f(e,[0,e[0]>>>1]),e=f(e=u(e,[4283543511,3981806797]),[0,e[0]>>>1]),e=f(e=u(e,[3301882366,444984403]),[0,e[0]>>>1])}n.x86.hash32=function(e,a){if(n.inputValidation&&!r(e))return t;a=a||0;for(var u=e.length%4,l=e.length-u,c=a,f=0,h=3432918353,d=461845907,p=0;p<l;p+=4)f=o(f=e[p]|e[p+1]<<8|e[p+2]<<16|e[p+3]<<24,h),f=o(f=i(f,15),d),c=o(c=i(c^=f,13),5)+3864292196;switch(f=0,u){case 3:f^=e[p+2]<<16;case 2:f^=e[p+1]<<8;case 1:f=o(f^=e[p],h),c^=f=o(f=i(f,15),d)}return(c=s(c^=e.length))>>>0},n.x86.hash128=function(e,a){if(n.inputValidation&&!r(e))return t;a=a||0;for(var u=e.length%16,l=e.length-u,c=a,f=a,h=a,d=a,p=0,g=0,y=0,m=0,b=597399067,v=2869860233,w=951274213,E=2716044179,A=0;A<l;A+=16)p=e[A]|e[A+1]<<8|e[A+2]<<16|e[A+3]<<24,g=e[A+4]|e[A+5]<<8|e[A+6]<<16|e[A+7]<<24,y=e[A+8]|e[A+9]<<8|e[A+10]<<16|e[A+11]<<24,m=e[A+12]|e[A+13]<<8|e[A+14]<<16|e[A+15]<<24,p=i(p=o(p,b),15),c=i(c^=p=o(p,v),19),c=o(c+=f,5)+1444728091,g=i(g=o(g,v),16),f=i(f^=g=o(g,w),17),f=o(f+=h,5)+197830471,y=i(y=o(y,w),17),h=i(h^=y=o(y,E),15),h=o(h+=d,5)+2530024501,m=i(m=o(m,E),18),d=i(d^=m=o(m,b),13),d=o(d+=c,5)+850148119;switch(p=0,g=0,y=0,m=0,u){case 15:m^=e[A+14]<<16;case 14:m^=e[A+13]<<8;case 13:m=o(m^=e[A+12],E),d^=m=o(m=i(m,18),b);case 12:y^=e[A+11]<<24;case 11:y^=e[A+10]<<16;case 10:y^=e[A+9]<<8;case 9:y=o(y^=e[A+8],w),h^=y=o(y=i(y,17),E);case 8:g^=e[A+7]<<24;case 7:g^=e[A+6]<<16;case 6:g^=e[A+5]<<8;case 5:g=o(g^=e[A+4],v),f^=g=o(g=i(g,16),w);case 4:p^=e[A+3]<<24;case 3:p^=e[A+2]<<16;case 2:p^=e[A+1]<<8;case 1:p=o(p^=e[A],b),c^=p=o(p=i(p,15),v)}return c^=e.length,c+=f^=e.length,c+=h^=e.length,f+=c+=d^=e.length,h+=c,d+=c,c=s(c),c+=f=s(f),c+=h=s(h),f+=c+=d=s(d),h+=c,d+=c,("00000000"+(c>>>0).toString(16)).slice(-8)+("00000000"+(f>>>0).toString(16)).slice(-8)+("00000000"+(h>>>0).toString(16)).slice(-8)+("00000000"+(d>>>0).toString(16)).slice(-8)},n.x64.hash128=function(e,o){if(n.inputValidation&&!r(e))return t;o=o||0;for(var i=e.length%16,s=e.length-i,d=[0,o],p=[0,o],g=[0,0],y=[0,0],m=[2277735313,289559509],b=[1291169091,658871167],v=0;v<s;v+=16)g=[e[v+4]|e[v+5]<<8|e[v+6]<<16|e[v+7]<<24,e[v]|e[v+1]<<8|e[v+2]<<16|e[v+3]<<24],y=[e[v+12]|e[v+13]<<8|e[v+14]<<16|e[v+15]<<24,e[v+8]|e[v+9]<<8|e[v+10]<<16|e[v+11]<<24],g=l(g=u(g,m),31),d=a(d=l(d=f(d,g=u(g,b)),27),p),d=a(u(d,[0,5]),[0,1390208809]),y=l(y=u(y,b),33),p=a(p=l(p=f(p,y=u(y,m)),31),d),p=a(u(p,[0,5]),[0,944331445]);switch(g=[0,0],y=[0,0],i){case 15:y=f(y,c([0,e[v+14]],48));case 14:y=f(y,c([0,e[v+13]],40));case 13:y=f(y,c([0,e[v+12]],32));case 12:y=f(y,c([0,e[v+11]],24));case 11:y=f(y,c([0,e[v+10]],16));case 10:y=f(y,c([0,e[v+9]],8));case 9:y=u(y=f(y,[0,e[v+8]]),b),p=f(p,y=u(y=l(y,33),m));case 8:g=f(g,c([0,e[v+7]],56));case 7:g=f(g,c([0,e[v+6]],48));case 6:g=f(g,c([0,e[v+5]],40));case 5:g=f(g,c([0,e[v+4]],32));case 4:g=f(g,c([0,e[v+3]],24));case 3:g=f(g,c([0,e[v+2]],16));case 2:g=f(g,c([0,e[v+1]],8));case 1:g=u(g=f(g,[0,e[v]]),m),d=f(d,g=u(g=l(g,31),b))}return d=a(d=f(d,[0,e.length]),p=f(p,[0,e.length])),p=a(p,d),d=a(d=h(d),p=h(p)),p=a(p,d),("00000000"+(d[0]>>>0).toString(16)).slice(-8)+("00000000"+(d[1]>>>0).toString(16)).slice(-8)+("00000000"+(p[0]>>>0).toString(16)).slice(-8)+("00000000"+(p[1]>>>0).toString(16)).slice(-8)},Et.exports&&(At=Et.exports=n),At.murmurHash3=n}();var Ct=St.exports;const Tt=(0,h.g)(Ct),kt=Symbol.for("@achingbrain/uint8arraylist");function xt(e,t){if(null==t||t<0)throw new RangeError("index is out of bounds");let n=0;for(const r of e){const e=n+r.byteLength;if(t<e)return{buf:r,index:t-n};n=e}throw new RangeError("index is out of bounds")}function Ot(e){return Boolean(e?.[kt])}class It{bufs;length;[kt]=!0;constructor(...e){this.bufs=[],this.length=0,e.length>0&&this.appendAll(e)}*[Symbol.iterator](){yield*this.bufs}get byteLength(){return this.length}append(...e){this.appendAll(e)}appendAll(e){let t=0;for(const n of e)if(n instanceof Uint8Array)t+=n.byteLength,this.bufs.push(n);else{if(!Ot(n))throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");t+=n.byteLength,this.bufs.push(...n.bufs)}this.length+=t}prepend(...e){this.prependAll(e)}prependAll(e){let t=0;for(const n of e.reverse())if(n instanceof Uint8Array)t+=n.byteLength,this.bufs.unshift(n);else{if(!Ot(n))throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");t+=n.byteLength,this.bufs.unshift(...n.bufs)}this.length+=t}get(e){const t=xt(this.bufs,e);return t.buf[t.index]}set(e,t){const n=xt(this.bufs,e);n.buf[n.index]=t}write(e,t=0){if(e instanceof Uint8Array)for(let n=0;n<e.length;n++)this.set(t+n,e[n]);else{if(!Ot(e))throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList");for(let n=0;n<e.length;n++)this.set(t+n,e.get(n))}}consume(e){if(e=Math.trunc(e),!(Number.isNaN(e)||e<=0)){if(e===this.byteLength)return this.bufs=[],void(this.length=0);for(;this.bufs.length>0;){if(!(e>=this.bufs[0].byteLength)){this.bufs[0]=this.bufs[0].subarray(e),this.length-=e;break}e-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift()}}}slice(e,t){const{bufs:n,length:r}=this._subList(e,t);return ee(n,r)}subarray(e,t){const{bufs:n,length:r}=this._subList(e,t);return 1===n.length?n[0]:ee(n,r)}sublist(e,t){const{bufs:n,length:r}=this._subList(e,t),o=new It;return o.length=r,o.bufs=[...n],o}_subList(e,t){if(e=e??0,t=t??this.length,e<0&&(e=this.length+e),t<0&&(t=this.length+t),e<0||t>this.length)throw new RangeError("index is out of bounds");if(e===t)return{bufs:[],length:0};if(0===e&&t===this.length)return{bufs:this.bufs,length:this.length};const n=[];let r=0;for(let o=0;o<this.bufs.length;o++){const i=this.bufs[o],s=r,a=s+i.byteLength;if(r=a,e>=a)continue;const u=e>=s&&e<a,l=t>s&&t<=a;if(u&&l){if(e===s&&t===a){n.push(i);break}const r=e-s;n.push(i.subarray(r,r+(t-e)));break}if(u){if(0===e){n.push(i);continue}n.push(i.subarray(e-s))}else{if(l){if(t===a){n.push(i);break}n.push(i.subarray(0,t-s));break}n.push(i)}}return{bufs:n,length:t-e}}indexOf(e,t=0){if(!Ot(e)&&!(e instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');const n=e instanceof Uint8Array?e:e.subarray();if(t=Number(t??0),isNaN(t)&&(t=0),t<0&&(t=this.length+t),t<0&&(t=0),0===e.length)return t>this.length?this.length:t;const r=n.byteLength;if(0===r)throw new TypeError("search must be at least 1 byte long");const o=new Int32Array(256);for(let l=0;l<256;l++)o[l]=-1;for(let l=0;l<r;l++)o[n[l]]=l;const i=o,s=this.byteLength-n.byteLength,a=n.byteLength-1;let u;for(let l=t;l<=s;l+=u){u=0;for(let e=a;e>=0;e--){const t=this.get(l+e);if(n[e]!==t){u=Math.max(1,e-i[t]);break}}if(0===u)return l}return-1}getInt8(e){const t=this.subarray(e,e+1);return new DataView(t.buffer,t.byteOffset,t.byteLength).getInt8(0)}setInt8(e,t){const n=(0,Q.K)(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt8(0,t),this.write(n,e)}getInt16(e,t){const n=this.subarray(e,e+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt16(0,t)}setInt16(e,t,n){const r=(0,Q.c)(2);new DataView(r.buffer,r.byteOffset,r.byteLength).setInt16(0,t,n),this.write(r,e)}getInt32(e,t){const n=this.subarray(e,e+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt32(0,t)}setInt32(e,t,n){const r=(0,Q.c)(4);new DataView(r.buffer,r.byteOffset,r.byteLength).setInt32(0,t,n),this.write(r,e)}getBigInt64(e,t){const n=this.subarray(e,e+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigInt64(0,t)}setBigInt64(e,t,n){const r=(0,Q.c)(8);new DataView(r.buffer,r.byteOffset,r.byteLength).setBigInt64(0,t,n),this.write(r,e)}getUint8(e){const t=this.subarray(e,e+1);return new DataView(t.buffer,t.byteOffset,t.byteLength).getUint8(0)}setUint8(e,t){const n=(0,Q.K)(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint8(0,t),this.write(n,e)}getUint16(e,t){const n=this.subarray(e,e+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint16(0,t)}setUint16(e,t,n){const r=(0,Q.c)(2);new DataView(r.buffer,r.byteOffset,r.byteLength).setUint16(0,t,n),this.write(r,e)}getUint32(e,t){const n=this.subarray(e,e+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint32(0,t)}setUint32(e,t,n){const r=(0,Q.c)(4);new DataView(r.buffer,r.byteOffset,r.byteLength).setUint32(0,t,n),this.write(r,e)}getBigUint64(e,t){const n=this.subarray(e,e+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigUint64(0,t)}setBigUint64(e,t,n){const r=(0,Q.c)(8);new DataView(r.buffer,r.byteOffset,r.byteLength).setBigUint64(0,t,n),this.write(r,e)}getFloat32(e,t){const n=this.subarray(e,e+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat32(0,t)}setFloat32(e,t,n){const r=(0,Q.c)(4);new DataView(r.buffer,r.byteOffset,r.byteLength).setFloat32(0,t,n),this.write(r,e)}getFloat64(e,t){const n=this.subarray(e,e+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat64(0,t)}setFloat64(e,t,n){const r=(0,Q.c)(8);new DataView(r.buffer,r.byteOffset,r.byteLength).setFloat64(0,t,n),this.write(r,e)}equals(e){if(null==e)return!1;if(!(e instanceof It))return!1;if(e.bufs.length!==this.bufs.length)return!1;for(let t=0;t<this.bufs.length;t++)if(!Y(this.bufs[t],e.bufs[t]))return!1;return!0}static fromUint8Arrays(e,t){const n=new It;return n.bufs=e,null==t&&(t=e.reduce(((e,t)=>e+t.byteLength),0)),n.length=t,n}}const Pt=Math.LN2*Math.LN2;class Bt{static create(e,t=.005){const n=function(e,t=.005){const n=Math.round(-1*e*Math.log(t)/Pt),r=Math.round(n/e*Math.LN2);return{bits:n,hashes:r}}(e,t);return new Bt(n)}seeds;bits;buffer;constructor(e={}){null!=e.seeds?this.seeds=e.seeds:this.seeds=function(e){let t,n;const r=[];for(let o=0;o<e;o++)for(t=new It(wt(4)),r[o]=t.getUint32(0,!0),n=0;n<o;n++)if(r[o]===r[n]){o--;break}return r}(e.hashes??8),this.bits=e.bits??1024,this.buffer=(0,Q.c)(Math.ceil(this.bits/8))}add(e){"string"===typeof e&&(e=(0,oe.s)(e));for(let t=0;t<this.seeds.length;t++){const n=Tt.x86.hash32(e,this.seeds[t])%this.bits;this.setbit(n)}}has(e){"string"===typeof e&&(e=(0,oe.s)(e));for(let t=0;t<this.seeds.length;t++){const n=Tt.x86.hash32(e,this.seeds[t])%this.bits;if(!this.getbit(n))return!1}return!0}clear(){this.buffer.fill(0)}setbit(e){let t=0,n=e;for(;n>7;)t++,n-=8;let r=this.buffer[t];r|=1<<n,this.buffer[t]=r}getbit(e){let t=0,n=e;for(;n>7;)t++,n-=8;return 0!==(this.buffer[t]&1<<n)}}class Dt extends Error{static name="InsufficientProvidersError";constructor(e="Insufficient providers found"){super(e),this.name="InsufficientProvidersError"}}class Nt extends Error{static name="NoRoutersAvailableError";constructor(e="No routers available"){super(e),this.name="NoRoutersAvailableError"}}class Ft extends Error{static name="UnknownHashAlgorithmError";constructor(e="Unknown hash algorithm"){super(e),this.name="UnknownHashAlgorithmError"}}class _t extends Error{static name="UnknownCodecError";constructor(e="Unknown codec"){super(e),this.name="UnknownCodecError"}}class Lt extends ut{intialPeerSearchComplete;requests;name;log;logger;minProviders;maxProviders;providers;evictionFilter;constructor(e,t){super(),this.name=t.name,this.logger=e.logger,this.log=e.logger.forComponent(this.name),this.requests=new Map,this.minProviders=t.minProviders??1,this.maxProviders=t.maxProviders??5,this.providers=[],this.evictionFilter=Bt.create(this.maxProviders)}async retrieve(e,t={}){const n=m.base64.encode(e.multihash.bytes),r=this.requests.get(n);if(null!=r)return this.log("join existing request for %c",e),r;const o=$e();if(this.requests.set(n,o.promise),0===this.providers.length){let n=!1;null==this.intialPeerSearchComplete&&(n=!0,this.log=this.logger.forComponent(`${this.name}:${e}`),this.intialPeerSearchComplete=this.findProviders(e,this.minProviders,t)),await this.intialPeerSearchComplete,n&&this.log("found initial session peers for %c",e)}let i=!1;const s=new lt({concurrency:this.maxProviders});s.addEventListener("error",(()=>{})),s.addEventListener("failure",(e=>{this.log.error("error querying provider %o, evicting from session",e.detail.job.options.provider,e.detail.error),this.evict(e.detail.job.options.provider)})),s.addEventListener("success",(e=>{i=!0,o.resolve(e.detail.result)})),s.addEventListener("idle",(()=>{i||!0===t.signal?.aborted||Promise.resolve().then((async()=>{this.log("no session peers had block for for %c, finding new providers",e);for(let e=0;e<this.minProviders&&0!==this.providers.length;e++){const e=this.providers[Math.floor(Math.random()*this.providers.length)];this.evict(e)}await this.findProviders(e,this.minProviders,t),this.log("found new providers re-retrieving %c",e),this.requests.delete(n),o.resolve(await this.retrieve(e,t))})).catch((t=>{this.log.error("could not find new providers for %c",e,t),o.reject(t)}))}));const a=n=>{s.add((async()=>this.queryProvider(e,n.detail,t)),{provider:n.detail}).catch((n=>{!0!==t.signal?.aborted&&this.log.error("error retrieving session block for %c",e,n)}))};this.addEventListener("provider",a),Promise.all([...this.providers].map((async n=>s.add((async()=>this.queryProvider(e,n,t)),{provider:n})))).catch((n=>{!0!==t.signal?.aborted&&this.log.error("error retrieving session block for %c",e,n)}));try{return await o.promise}finally{this.removeEventListener("provider",a),s.clear(),this.requests.delete(n)}}evict(e){this.evictionFilter.add(this.toEvictionKey(e));const t=this.providers.findIndex((t=>this.equals(t,e)));-1!==t&&this.providers.splice(t,1)}isEvicted(e){return this.evictionFilter.has(this.toEvictionKey(e))}hasProvider(e){return null!=this.providers.find((t=>this.equals(t,e)))||!!this.isEvicted(e)}async findProviders(e,t,n){const r=$e();let o=0;return Promise.resolve().then((async()=>{this.log("finding %d-%d new provider(s) for %c",t,this.maxProviders,e);for await(const i of this.findNewProviders(e,n)){if(o===this.maxProviders||!0===n.signal?.aborted)break;if(!this.hasProvider(i)&&(this.log("found %d/%d new providers",o,this.maxProviders),this.providers.push(i),this.safeDispatchEvent("provider",{detail:i}),o++,o===t&&(this.log("session is ready"),r.resolve()),this.providers.length===this.maxProviders)){this.log("found max session peers",o);break}}if(this.log("found %d/%d new session peers",o,this.maxProviders),o<t)throw new Dt(`Found ${o} of ${t} ${this.name} providers for ${e}`)})).catch((t=>{this.log.error("error searching routing for potential session peers for %c",e,t.errors??t),r.reject(t)})),r.promise}}class Rt extends Lt{routing;allowInsecure;allowLocal;constructor(e,t){super(e,{...t,name:"helia:trustless-gateway:session"}),this.routing=e.routing,this.allowInsecure=t.allowInsecure??Mt,this.allowLocal=t.allowLocal??Ut}async queryProvider(e,t,n){this.log("fetching BLOCK for %c from %s",e,t.url);const r=await t.getRawBlock(e,n.signal);return this.log.trace("got block for %c from %s",e,t.url),await(n.validateFn?.(r)),r}async*findNewProviders(e,t={}){yield*Ve(e,this.routing,this.logger,this.allowInsecure,this.allowLocal,t)}toEvictionKey(e){return e.url.toString()}equals(e,t){return e.url.toString()===t.url.toString()}}class jt{allowInsecure;allowLocal;routing;log;logger;constructor(e,t={}){this.log=e.logger.forComponent("helia:trustless-gateway-block-broker"),this.logger=e.logger,this.routing=e.routing,this.allowInsecure=t.allowInsecure??Mt,this.allowLocal=t.allowLocal??Ut}async retrieve(e,t={}){const n=[];for await(const o of Ve(e,this.routing,this.logger,this.allowInsecure,this.allowLocal,t)){this.log("getting block for %c from %s",e,o.url);try{const n=await o.getRawBlock(e,t.signal);this.log.trace("got block for %c from %s",e,o.url);try{await(t.validateFn?.(n))}catch(r){this.log.error("failed to validate block for %c from %s",e,o.url,r);continue}return n}catch(r){if(this.log.error("failed to get block for %c from %s",e,o.url,r),r instanceof Error?n.push(r):n.push(new Error(`Unable to fetch raw block for CID ${e} from gateway ${o.url}`)),!0===t.signal?.aborted){this.log.trace("request aborted while fetching raw block for CID %c from gateway %s",e,o.url);break}}}throw n.length>0?new AggregateError(n,`Unable to fetch raw block for CID ${e} from any gateway`):new Error(`Unable to fetch raw block for CID ${e} from any gateway`)}createSession(e={}){return t={logger:this.logger,routing:this.routing},n={...e,allowLocal:this.allowLocal,allowInsecure:this.allowInsecure},new Rt(t,n);var t,n}}const Mt=!1,Ut=!1;function Ht(e={}){return t=>new jt(t,e)}const zt=1e3,Vt=60*zt,$t=60*Vt,Gt=24*$t,Wt=7*Gt,qt=365.25*Gt;function Kt(e,t){try{if("string"===typeof e&&e.length>0)return function(e){if((e=String(e)).length>100)throw new Error("Value exceeds the maximum length of 100 characters.");const t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return NaN;const n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*qt;case"weeks":case"week":case"w":return n*Wt;case"days":case"day":case"d":return n*Gt;case"hours":case"hour":case"hrs":case"hr":case"h":return n*$t;case"minutes":case"minute":case"mins":case"min":case"m":return n*Vt;case"seconds":case"second":case"secs":case"sec":case"s":return n*zt;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:throw new Error(`The unit ${r} was matched, but no matching case exists.`)}}(e);if("number"===typeof e&&isFinite(e))return t?.long?function(e){const t=Math.abs(e);if(t>=Gt)return Yt(e,t,Gt,"day");if(t>=$t)return Yt(e,t,$t,"hour");if(t>=Vt)return Yt(e,t,Vt,"minute");if(t>=zt)return Yt(e,t,zt,"second");return`${e} ms`}(e):function(e){const t=Math.abs(e);if(t>=Gt)return`${Math.round(e/Gt)}d`;if(t>=$t)return`${Math.round(e/$t)}h`;if(t>=Vt)return`${Math.round(e/Vt)}m`;if(t>=zt)return`${Math.round(e/zt)}s`;return`${e}ms`}(e);throw new Error("Value is not a string or number.")}catch(n){const t=function(e){return"object"===typeof e&&null!==e&&"message"in e}(n)?`${n.message}. value=${JSON.stringify(e)}`:"An unknown error has occured.";throw new Error(t)}}function Yt(e,t,n,r){const o=t>=1.5*n;return`${Math.round(e/n)} ${r}${o?"s":""}`}const Zt=function(){try{return localStorage}catch(e){}}();const Jt=console.debug??console.log??(()=>{});const Xt=function(e){function t(e){let r,o,i,s=null;function a(...e){if(!a.enabled)return;const n=a,o=Number(new Date),i=o-(r||o);n.diff=i,n.prev=r,n.curr=o,r=o,e[0]=t.coerce(e[0]),"string"!==typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((r,o)=>{if("%%"===r)return"%";s++;const i=t.formatters[o];if("function"===typeof i){const t=e[s];r=i.call(n,t),e.splice(s,1),s--}return r})),t.formatArgs.call(n,e);(n.log||t.log).apply(n,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=n,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(o!==t.namespaces&&(o=t.namespaces,i=t.enabled(e)),i),set:e=>{s=e}}),"function"===typeof t.init&&t.init(a),a}function n(e,n){const r=t(this.namespace+("undefined"===typeof n?":":n)+e);return r.log=this.log,r}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack??e.message;return e},t.disable=function(){const e=[...t.names.map(r),...t.skips.map(r).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"===typeof e?e:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=Kt,t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.setupFormatters(t.formatters),t.enable(t.load()),t}({formatArgs:function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+Kt(this.diff),!this.useColors)return;const t="color: "+this.color;e.splice(1,0,t,"color: inherit");let n=0,r=0;e[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(n++,"%c"===e&&(r=n))})),e.splice(r,0,t)},save:function(e){try{e?Zt?.setItem("debug",e):Zt?.removeItem("debug")}catch(t){}},load:function(){let e;try{e=Zt?.getItem("debug")}catch(t){}return!e&&"undefined"!==typeof globalThis.process&&"env"in globalThis.process&&(e=globalThis.process.env.DEBUG),e},useColors:function(){return!("undefined"===typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"===typeof navigator||null==navigator.userAgent?.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!==typeof document&&document.documentElement?.style?.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&null!=navigator.userAgent?.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent?.toLowerCase().match(/applewebkit\/(\d+)/))},setupFormatters:function(e){e.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},colors:["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],storage:Zt,log:Jt});function Qt(e){let t=function(e){const t=()=>{};return t.enabled=!1,t.color="",t.diff=0,t.log=()=>{},t.namespace=e,t.destroy=()=>!0,t.extend=()=>t,t}(`${e}:trace`);return Xt.enabled(`${e}:trace`)&&null!=Xt.names.map((e=>e.toString())).find((e=>e.includes(":trace")))&&(t=Xt(`${e}:trace`)),Object.assign(Xt(e),{error:Xt(`${e}:error`),trace:t})}Xt.formatters.b=e=>null==e?"undefined":y.base58btc.baseEncode(e),Xt.formatters.t=e=>null==e?"undefined":te.base32.baseEncode(e),Xt.formatters.m=e=>null==e?"undefined":m.base64.baseEncode(e),Xt.formatters.p=e=>null==e?"undefined":e.toString(),Xt.formatters.c=e=>null==e?"undefined":e.toString(),Xt.formatters.k=e=>null==e?"undefined":e.toString(),Xt.formatters.a=e=>null==e?"undefined":e.toString(),Xt.formatters.e=e=>null==e?"undefined":e.stack??e.message;class en extends Event{type;detail;constructor(e,t){super(e),this.type=e,this.detail=t}}var tn={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,r,i,s){if("function"!==typeof r)throw new TypeError("The listener must be a function");var a=new o(r,i||e,s),u=n?n+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],a]:e._events[u].push(a):(e._events[u]=a,e._eventsCount++),e}function s(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,r,o=[];if(0===this._eventsCount)return o;for(r in e=this._events)t.call(e,r)&&o.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},a.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,i=r.length,s=new Array(i);o<i;o++)s[o]=r[o].fn;return s},a.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},a.prototype.emit=function(e,t,r,o,i,s){var a=n?n+e:e;if(!this._events[a])return!1;var u,l,c=this._events[a],f=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),f){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,o),!0;case 5:return c.fn.call(c.context,t,r,o,i),!0;case 6:return c.fn.call(c.context,t,r,o,i,s),!0}for(l=1,u=new Array(f-1);l<f;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var h,d=c.length;for(l=0;l<d;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),f){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,r);break;case 4:c[l].fn.call(c[l].context,t,r,o);break;default:if(!u)for(h=1,u=new Array(f-1);h<f;h++)u[h-1]=arguments[h];c[l].fn.apply(c[l].context,u)}}return!0},a.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,r,o){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return s(this,i),this;var a=this._events[i];if(a.fn)a.fn!==t||o&&!a.once||r&&a.context!==r||s(this,i);else{for(var u=0,l=[],c=a.length;u<c;u++)(a[u].fn!==t||o&&!a[u].once||r&&a[u].context!==r)&&l.push(a[u]);l.length?this._events[i]=1===l.length?l[0]:l:s(this,i)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a}(tn);var nn=tn.exports;const rn=(0,h.g)(nn);class on extends Error{constructor(e){super(e),this.name="TimeoutError"}}class sn extends Error{constructor(e){super(),this.name="AbortError",this.message=e}}const an=e=>void 0===globalThis.DOMException?new sn(e):new DOMException(e),un=e=>{const t=void 0===e.reason?an("This operation was aborted."):e.reason;return t instanceof Error?t:an(t)};function ln(e,t){const{milliseconds:n,fallback:r,message:o,customTimers:i={setTimeout:setTimeout,clearTimeout:clearTimeout}}=t;let s;const a=new Promise(((a,u)=>{if("number"!==typeof n||1!==Math.sign(n))throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${n}\``);if(t.signal){const{signal:n}=t;n.aborted&&u(un(n));const r=()=>{u(un(n))};n.addEventListener("abort",r,{once:!0}),e.finally((()=>{n.removeEventListener("abort",r)}))}if(n===Number.POSITIVE_INFINITY)return void e.then(a,u);const l=new on;s=i.setTimeout.call(void 0,(()=>{if(r)try{a(r())}catch(t){u(t)}else"function"===typeof e.cancel&&e.cancel(),!1===o?a():o instanceof Error?u(o):(l.message=o??`Promise timed out after ${n} milliseconds`,u(l))}),n),(async()=>{try{a(await e)}catch(t){u(t)}})()})).finally((()=>{a.clear()}));return a.clear=()=>{i.clearTimeout.call(void 0,s),s=void 0},a}class cn{#d=[];enqueue(e,t){const n={priority:(t={priority:0,...t}).priority,run:e};if(this.size&&this.#d[this.size-1].priority>=t.priority)return void this.#d.push(n);const r=function(e,t,n){let r=0,o=e.length;for(;o>0;){const i=Math.trunc(o/2);let s=r+i;n(e[s],t)<=0?(r=++s,o-=i+1):o=i}return r}(this.#d,n,((e,t)=>t.priority-e.priority));this.#d.splice(r,0,n)}dequeue(){const e=this.#d.shift();return e?.run}filter(e){return this.#d.filter((t=>t.priority===e.priority)).map((e=>e.run))}get size(){return this.#d.length}}class fn extends rn{#p;#g;#y=0;#m;#b;#v=0;#w;#E;#d;#A;#S=0;#C;#T;#k;timeout;constructor(e){if(super(),!("number"===typeof(e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:cn,...e}).intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${e.intervalCap?.toString()??""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${e.interval?.toString()??""}\` (${typeof e.interval})`);this.#p=e.carryoverConcurrencyCount,this.#g=e.intervalCap===Number.POSITIVE_INFINITY||0===e.interval,this.#m=e.intervalCap,this.#b=e.interval,this.#d=new e.queueClass,this.#A=e.queueClass,this.concurrency=e.concurrency,this.timeout=e.timeout,this.#k=!0===e.throwOnTimeout,this.#T=!1===e.autoStart}get#x(){return this.#g||this.#y<this.#m}get#O(){return this.#S<this.#C}#I(){this.#S--,this.#P(),this.emit("next")}#B(){this.#D(),this.#N(),this.#E=void 0}get#F(){const e=Date.now();if(void 0===this.#w){const t=this.#v-e;if(!(t<0))return void 0===this.#E&&(this.#E=setTimeout((()=>{this.#B()}),t)),!0;this.#y=this.#p?this.#S:0}return!1}#P(){if(0===this.#d.size)return this.#w&&clearInterval(this.#w),this.#w=void 0,this.emit("empty"),0===this.#S&&this.emit("idle"),!1;if(!this.#T){const e=!this.#F;if(this.#x&&this.#O){const t=this.#d.dequeue();return!!t&&(this.emit("active"),t(),e&&this.#N(),!0)}}return!1}#N(){this.#g||void 0!==this.#w||(this.#w=setInterval((()=>{this.#D()}),this.#b),this.#v=Date.now()+this.#b)}#D(){0===this.#y&&0===this.#S&&this.#w&&(clearInterval(this.#w),this.#w=void 0),this.#y=this.#p?this.#S:0,this.#_()}#_(){for(;this.#P(););}get concurrency(){return this.#C}set concurrency(e){if(!("number"===typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this.#C=e,this.#_()}async#L(e){return new Promise(((t,n)=>{e.addEventListener("abort",(()=>{n(e.reason)}),{once:!0})}))}async add(e,t={}){return t={timeout:this.timeout,throwOnTimeout:this.#k,...t},new Promise(((n,r)=>{this.#d.enqueue((async()=>{this.#S++,this.#y++;try{t.signal?.throwIfAborted();let r=e({signal:t.signal});t.timeout&&(r=ln(Promise.resolve(r),{milliseconds:t.timeout})),t.signal&&(r=Promise.race([r,this.#L(t.signal)]));const o=await r;n(o),this.emit("completed",o)}catch(o){if(o instanceof on&&!t.throwOnTimeout)return void n();r(o),this.emit("error",o)}finally{this.#I()}}),t),this.emit("add"),this.#P()}))}async addAll(e,t){return Promise.all(e.map((async e=>this.add(e,t))))}start(){return this.#T?(this.#T=!1,this.#_(),this):this}pause(){this.#T=!0}clear(){this.#d=new this.#A}async onEmpty(){0!==this.#d.size&&await this.#R("empty")}async onSizeLessThan(e){this.#d.size<e||await this.#R("next",(()=>this.#d.size<e))}async onIdle(){0===this.#S&&0===this.#d.size||await this.#R("idle")}async#R(e,t){return new Promise((n=>{const r=()=>{t&&!t()||(this.off(e,r),n())};this.on(e,r)}))}get size(){return this.#d.size}sizeBy(e){return this.#d.filter(e).length}get pending(){return this.#S}get isPaused(){return this.#T}}function hn(e){const t=[vn.A];return null==e?t:Array.isArray(e)?0===e.length?t:e:[e]}function dn(e){return{Status:e.Status??0,TC:e.TC??e.flag_tc??!1,RD:e.RD??e.flag_rd??!1,RA:e.RA??e.flag_ra??!1,AD:e.AD??e.flag_ad??!1,CD:e.CD??e.flag_cd??!1,Question:(e.Question??e.questions??[]).map((e=>({name:e.name,type:vn[e.type]}))),Answer:(e.Answer??e.answers??[]).map((e=>({name:e.name,type:vn[e.type],TTL:e.TTL??e.ttl??60,data:e.data instanceof Uint8Array?J(e.data):e.data})))}}function pn(e,t={}){const n=new fn({concurrency:t.queryConcurrency??4});return async(t,r={})=>{const o=new URLSearchParams;o.set("name",t),hn(r.types).forEach((e=>{o.append("type",vn[e])})),r.onProgress?.(new en("dns:query",{detail:t}));const i=await n.add((async()=>{const t=await fetch(`${e}?${o}`,{headers:{accept:"application/dns-json"},signal:r?.signal});if(200!==t.status)throw new Error(`Unexpected HTTP status: ${t.status} - ${t.statusText}`);const n=dn(await t.json());return r.onProgress?.(new en("dns:response",{detail:n})),n}),{signal:r.signal});if(null==i)throw new Error("No DNS response received");return i}}var gn=function(e){if(!e)throw Error("hashlru must have a max value, of type number, greater than 0");var t=0,n=Object.create(null),r=Object.create(null);function o(o,i){n[o]=i,++t>=e&&(t=0,r=n,n=Object.create(null))}return{has:function(e){return void 0!==n[e]||void 0!==r[e]},remove:function(e){void 0!==n[e]&&(n[e]=void 0),void 0!==r[e]&&(r[e]=void 0)},get:function(e){var t=n[e];return void 0!==t?t:void 0!==(t=r[e])?(o(e,t),t):void 0},set:function(e,t){void 0!==n[e]?n[e]=t:o(e,t)},clear:function(){n=Object.create(null),r=Object.create(null)}}};const yn=(0,h.g)(gn);class mn{lru;constructor(e){this.lru=yn(e)}get(e,t){let n=!0;const r=[];for(const o of t){const t=this.getAnswers(e,o);if(0===t.length){n=!1;break}r.push(...t)}if(n)return dn({answers:r})}getAnswers(e,t){const n=`${e.toLowerCase()}-${t}`,r=this.lru.get(n);if(null!=r){const e=r.filter((e=>e.expires>Date.now())).map((({expires:e,value:t})=>({...t,TTL:Math.round((e-Date.now())/1e3),type:vn[t.type]})));return 0===e.length&&this.lru.remove(n),e}return[]}add(e,t){const n=`${e.toLowerCase()}-${t.type}`,r=this.lru.get(n)??[];r.push({expires:Date.now()+1e3*(t.TTL??60),value:t}),this.lru.set(n,r)}remove(e,t){const n=`${e.toLowerCase()}-${t}`;this.lru.remove(n)}clear(){this.lru.clear()}}class bn{resolvers;cache;constructor(e){var t;this.resolvers={},this.cache=(t=e.cacheSize??1e3,new mn(t)),Object.entries(e.resolvers??{}).forEach((([e,t])=>{Array.isArray(t)||(t=[t]),e.endsWith(".")||(e=`${e}.`),this.resolvers[e]=t})),null==this.resolvers["."]&&(this.resolvers["."]=[pn("https://cloudflare-dns.com/dns-query"),pn("https://dns.google/resolve")])}async query(e,t={}){const n=hn(t.types),r=!1!==t.cached?this.cache.get(e,n):void 0;if(null!=r)return t.onProgress?.(new en("dns:cache",{detail:r})),r;const o=`${e.split(".").pop()}.`,i=(this.resolvers[o]??this.resolvers["."]).sort((()=>Math.random()>.5?-1:1)),s=[];for(const u of i){if(!0===t.signal?.aborted)break;try{const r=await u(e,{...t,types:n});for(const t of r.Answer)this.cache.add(e,t);return r}catch(a){s.push(a),t.onProgress?.(new en("dns:error",{detail:a}))}}if(1===s.length)throw s[0];throw new AggregateError(s,`DNS lookup of ${e} ${n} failed`)}}var vn;function wn(e){if(null!=e[Symbol.asyncIterator])return(async()=>{for await(const t of e);})();for(const t of e);}!function(e){e[e.A=1]="A",e[e.CNAME=5]="CNAME",e[e.TXT=16]="TXT",e[e.AAAA=28]="AAAA"}(vn||(vn={}));var En=n(12538),An=n(61625);n(78666);const Sn="/",Cn=(new TextEncoder).encode(Sn),Tn=Cn[0];class kn{_buf;constructor(e,t){if("string"===typeof e)this._buf=(0,oe.s)(e);else{if(!(e instanceof Uint8Array))throw new Error("Invalid key, should be String of Uint8Array");this._buf=e}if(null==t&&(t=!0),t&&this.clean(),0===this._buf.byteLength||this._buf[0]!==Tn)throw new Error("Invalid key")}toString(e="utf8"){return J(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new kn(e.join(Sn))}static random(){return new kn(Math.random().toString().substring(2))}static asKey(e){return e instanceof Uint8Array||"string"===typeof e?new kn(e):"function"===typeof e.uint8Array?new kn(e.uint8Array()):null}clean(){if(null!=this._buf&&0!==this._buf.byteLength||(this._buf=Cn),this._buf[0]!==Tn){const e=new Uint8Array(this._buf.byteLength+1);e.fill(Tn,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===Tn;)this._buf=this._buf.subarray(0,-1)}less(e){const t=this.list(),n=e.list();for(let r=0;r<t.length;r++){if(n.length<r+1)return!1;const e=t[r],o=n[r];if(e<o)return!0;if(e>o)return!1}return t.length<n.length}reverse(){return kn.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){const e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(Sn).slice(1)}type(){return function(e){const t=e.split(":");if(t.length<2)return"";return t.slice(0,-1).join(":")}(this.baseNamespace())}name(){return function(e){const t=e.split(":");return t[t.length-1]}(this.baseNamespace())}instance(e){return new kn(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(Sn)||(e+=Sn),e+=this.type(),new kn(e)}parent(){const e=this.list();return 1===e.length?new kn(Sn):new kn(e.slice(0,-1).join(Sn))}child(e){return this.toString()===Sn?e:e.toString()===Sn?this:new kn(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()!==this.toString()&&e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()!==this.toString()&&this.toString().startsWith(e.toString())}isTopLevel(){return 1===this.list().length}concat(...e){return kn.withNamespaces([...this.namespaces(),...(t=e.map((e=>e.namespaces())),[].concat(...t))]);var t}}var xn=n(39956);function On({enumerable:e=!0,configurable:t=!1}={}){return{enumerable:e,configurable:t,writable:!1}}function*In(e,t){if(null!=t&&"object"===typeof t)if(Array.isArray(t))for(const[n,r]of t.entries()){const t=[...e,n],o=K.T.asCID(r);null!=o?yield[t.join("/"),o]:"object"===typeof r&&(yield*Pn(r,t))}else{const n=K.T.asCID(t);null!=n?yield[e.join("/"),n]:yield*Pn(t,e)}}function*Pn(e,t){if(null==e||e instanceof Uint8Array)return;const n=K.T.asCID(e);null!=n&&(yield[t.join("/"),n]);for(const[r,o]of Object.entries(e)){const e=[...t,r];yield*In(e,o)}}function*Bn(e,t){if(Array.isArray(t))for(const[n,r]of t.entries()){const t=[...e,n];yield t.join("/"),"object"===typeof r&&null==K.T.asCID(r)&&(yield*Dn(r,t))}else yield*Dn(t,e)}function*Dn(e,t){if(null!=e&&"object"===typeof e)for(const[n,r]of Object.entries(e)){const e=[...t,n];yield e.join("/"),null==r||r instanceof Uint8Array||"object"!==typeof r||null!=K.T.asCID(r)||(yield*Bn(e,r))}}class Nn{cid;bytes;value;asBlock;constructor({cid:e,bytes:t,value:n}){if(null==e||null==t||"undefined"===typeof n)throw new Error("Missing required argument");this.cid=e,this.bytes=t,this.value=n,this.asBlock=this,Object.defineProperties(this,{cid:On(),bytes:On(),value:On(),asBlock:On()})}links(){return Pn(this.value,[])}tree(){return Dn(this.value,[])}get(e="/"){return function(e,t){let n=e;for(const[r,o]of t.entries()){if(n=n[o],null==n)throw new Error(`Object has no property at ${t.slice(0,r+1).map((e=>`[${JSON.stringify(e)}]`)).join("")}`);const e=K.T.asCID(n);if(null!=e)return{value:e,remaining:t.slice(r+1).join("/")}}return{value:n}}(this.value,e.split("/").filter(Boolean))}}const Fn="/pin/",_n="/pinned-block/",Ln=xn.base36;function Rn(e){return 0===e.version&&(e=e.toV1()),new kn(`${Fn}${e.toString(Ln)}`)}class jn{datastore;blockstore;getCodec;constructor(e,t,n){this.datastore=e,this.blockstore=t,this.getCodec=n}async*add(e,t={}){const n=Rn(e);if(await this.datastore.has(n))throw new Error("Already pinned");const r=Math.round(t.depth??1/0);if(r<0)throw new Error("Depth must be greater than or equal to 0");const o=new lt({concurrency:1});for await(const s of this.#j(e,o,{...t,depth:r}))await this.#M(s,(t=>null==t.pinnedBy.find((t=>Y(t,e.bytes)))&&(t.pinCount++,t.pinnedBy.push(e.bytes),!0)),t),yield s;const i={depth:r,metadata:t.metadata??{}};await this.datastore.put(n,(0,En.lF)(i),t)}async*#j(e,t,n){if(-1===n.depth)return;const r=await this.getCodec(e.code),o=function({bytes:e,cid:t,value:n,codec:r}){const o=void 0!==n?n:r?.decode(e);if(void 0===o)throw new Error('Missing required argument, must either provide "value" or "codec"');return new Nn({cid:t,bytes:e,value:o})}({bytes:await this.blockstore.get(e,n),cid:e,codec:r});yield e;for await(const[,i]of o.links())yield*await t.add((async()=>this.#j(i,t,{...n,depth:n.depth-1})))}async#M(e,t,n){const r=new kn(`${_n}${Ln.encode(e.multihash.bytes)}`);let o={pinCount:0,pinnedBy:[]};try{o=(0,An.D4)(await this.datastore.get(r,n))}catch(i){if("NotFoundError"!==i.name)throw i}t(o)&&(0===o.pinCount&&await this.datastore.has(r)?await this.datastore.delete(r):(await this.datastore.put(r,(0,En.lF)(o),n),n.onProgress?.(new en("helia:pin:add",e))))}async*rm(e,t={}){const n=Rn(e),r=await this.datastore.get(n,t),o=(0,An.D4)(r);await this.datastore.delete(n,t);const i=new lt({concurrency:1});for await(const s of this.#j(e,i,{...t,depth:o.depth}))await this.#M(s,(t=>(t.pinCount--,t.pinnedBy=t.pinnedBy.filter((t=>Y(t,e.bytes))),!0)),{...t,depth:o.depth}),yield s}async*ls(e={}){for await(const{key:t,value:n}of this.datastore.query({prefix:Fn+(null!=e.cid?`${e.cid.toString(xn.base36)}`:"")},e)){const e=K.T.parse(t.toString().substring(5),xn.base36),r=(0,An.D4)(n);yield{cid:e,...r}}}async isPinned(e,t={}){const n=new kn(`${_n}${Ln.encode(e.multihash.bytes)}`);return this.datastore.has(n,t)}async get(e,t){const n=Rn(e),r=await this.datastore.get(n,t);return(0,An.D4)(r)}async setMetadata(e,t,n){const r=Rn(e),o=await this.datastore.get(r,n),i=(0,An.D4)(o);i.metadata=t??{},await this.datastore.put(r,(0,En.lF)(i),n)}}class Mn extends lt{has(e){return null!=this.find(e)}find(e){return this.queue.find((t=>e.equals(t.options.peerId)))}}function Un(...e){const t=[];for(const n of e)null==n[Symbol.asyncIterator]&&t.push(n);return t.length===e.length?function*(){for(const e of t)yield*e}():async function*(){const t=Ke({objectMode:!0});Promise.resolve().then((async()=>{try{await Promise.all(e.map((async e=>{for await(const n of e)t.push(n)}))),t.end()}catch(n){t.end(n)}})),yield*t}()}function Hn(e){return null!=e&&"function"===typeof e.start&&"function"===typeof e.stop}async function zn(...e){const t=[];for(const n of e)Hn(n)&&t.push(n);await Promise.all(t.map((async e=>{null!=e.beforeStart&&await e.beforeStart()}))),await Promise.all(t.map((async e=>{await e.start()}))),await Promise.all(t.map((async e=>{null!=e.afterStart&&await e.afterStart()})))}async function Vn(...e){const t=[];for(const n of e)Hn(n)&&t.push(n);await Promise.all(t.map((async e=>{null!=e.beforeStop&&await e.beforeStop()}))),await Promise.all(t.map((async e=>{await e.stop()}))),await Promise.all(t.map((async e=>{null!=e.afterStop&&await e.afterStop()})))}class $n{log;routers;providerLookupConcurrency;constructor(e,t){this.log=e.logger.forComponent("helia:routing"),this.routers=t.routers??[],this.providerLookupConcurrency=t.providerLookupConcurrency??5}async start(){await zn(...this.routers)}async stop(){await Vn(...this.routers)}async*findProviders(e,t={}){if(0===this.routers.length)throw new Nt("No content routers available");const n=new Mn({concurrency:this.providerLookupConcurrency});n.addEventListener("error",(()=>{}));for await(const r of Un(n.toGenerator(),...Gn(this.routers,"findProviders").map((n=>n.findProviders(e,t)))))if(null!=r){if(0===r.multiaddrs.length){if(null!=n.find(r.id))continue;n.add((async()=>{try{const e=await this.findPeer(r.id,t);return 0===e.multiaddrs.length?null:e}catch(e){return this.log.error("could not load multiaddrs for peer %p",r.id,e),null}}),{peerId:r.id,signal:t.signal}).catch((e=>{this.log.error("could not load multiaddrs for peer %p",r.id,e)}))}yield r}}async provide(e,t={}){if(0===this.routers.length)throw new Nt("No content routers available");await Promise.all(Gn(this.routers,"provide").map((async n=>{await n.provide(e,t)})))}async put(e,t,n){await Promise.all(Gn(this.routers,"put").map((async r=>{await r.put(e,t,n)})))}async get(e,t){return Promise.any(Gn(this.routers,"get").map((async n=>n.get(e,t))))}async findPeer(e,t){if(0===this.routers.length)throw new Nt("No peer routers available");const n=this,r=Un(...Gn(this.routers,"findPeer").map((r=>async function*(){try{yield await r.findPeer(e,t)}catch(o){n.log.error(o)}}())));for await(const o of r)if(null!=o)return o;throw new nt("Could not find peer in routing")}async*getClosestPeers(e,t={}){if(0===this.routers.length)throw new Nt("No peer routers available");for await(const n of Un(...Gn(this.routers,"getClosestPeers").map((n=>n.getClosestPeers(e,t)))))null!=n&&(yield n)}}function Gn(e,t){return e.filter((e=>null!=e[t]))}const Wn={},qn=e=>{e.addEventListener("message",(t=>{qn.dispatchEvent("message",e,t)})),null!=e.port&&e.port.addEventListener("message",(t=>{qn.dispatchEvent("message",e,t)}))};qn.addEventListener=(e,t)=>{null==Wn[e]&&(Wn[e]=[]),Wn[e].push(t)},qn.removeEventListener=(e,t)=>{null!=Wn[e]&&(Wn[e]=Wn[e].filter((e=>e===t)))},qn.dispatchEvent=function(e,t,n){null!=Wn[e]&&Wn[e].forEach((e=>e(t,n)))};const Kn="lock:worker:request-read",Yn="lock:worker:release-read",Zn="lock:master:grant-read",Jn="lock:worker:request-write",Xn="lock:worker:release-write",Qn="lock:master:grant-write",er=(e,t,n,r,o)=>(i,s)=>{if(s.data.type!==n)return;const a={type:s.data.type,name:s.data.name,identifier:s.data.identifier};e.dispatchEvent(new MessageEvent(t,{data:{name:a.name,handler:async()=>{i.postMessage({type:o,name:a.name,identifier:a.identifier}),await new Promise((e=>{const t=n=>{if(null==n||null==n.data)return;const o=n.data.type,s=(n.data.name,n.data.identifier);o===r&&s===a.identifier&&(i.removeEventListener("message",t),e())};i.addEventListener("message",t)}))}}}))},tr=(e,t,n,r)=>async()=>{const o=Math.random().toString().substring(2);return globalThis.postMessage({type:t,identifier:o,name:e}),new Promise((t=>{const i=s=>{if(null==s||null==s.data)return;const a=s.data.type,u=s.data.identifier;a===n&&u===o&&(globalThis.removeEventListener("message",i),t((()=>{globalThis.postMessage({type:r,identifier:o,name:e})})))};globalThis.addEventListener("message",i)}))},nr={singleProcess:!1},rr={};let or;async function ir(e,t){let n;const r=new Promise((e=>{n=e}));return e.add((async()=>ln((async()=>{await new Promise((e=>{n((()=>{e()}))}))})(),{milliseconds:t.timeout}))),r}const sr={name:"lock",concurrency:1/0,timeout:846e5,singleProcess:!1};function ar(e){const t=Object.assign({},sr,e);return null==or&&(or=(e=>{if(e=Object.assign({},nr,e),Boolean(globalThis.document)||e.singleProcess){const e=new EventTarget;return qn.addEventListener("message",er(e,"requestReadLock",Kn,Yn,Zn)),qn.addEventListener("message",er(e,"requestWriteLock",Jn,Xn,Qn)),e}return{isWorker:!0,readLock:e=>tr(e,Kn,Zn,Yn),writeLock:e=>tr(e,Jn,Qn,Xn)}})(t),!0!==or.isWorker&&(or.addEventListener("requestReadLock",(e=>{null!=rr[e.data.name]&&rr[e.data.name].readLock().then((async t=>e.data.handler().finally((()=>{t()}))))})),or.addEventListener("requestWriteLock",(async e=>{null!=rr[e.data.name]&&rr[e.data.name].writeLock().then((async t=>e.data.handler().finally((()=>{t()}))))})))),null==rr[t.name]&&(rr[t.name]=((e,t)=>{if(!0===or.isWorker)return{readLock:or.readLock(e,t),writeLock:or.writeLock(e,t)};const n=new fn({concurrency:1});let r;return{async readLock(){if(null!=r)return ir(r,t);r=new fn({concurrency:t.concurrency,autoStart:!1});const e=r,o=ir(r,t);return n.add((async()=>{e.start(),await e.onIdle().then((()=>{r===e&&(r=null)}))})),o},writeLock:async()=>(r=null,ir(n,t))}})(t.name,t)),rr[t.name]}class ur{lock;child;pins;started;constructor(e,t,n={}){this.child=e,this.pins=t,this.lock=ar({singleProcess:n.holdGcLock}),this.started=!1}isStarted(){return this.started}async start(){await zn(this.child),this.started=!0}async stop(){await Vn(this.child),this.started=!1}unwrap(){return this.child}async put(e,t,n={}){n?.signal?.throwIfAborted();const r=await this.lock.readLock();try{return await this.child.put(e,t,n)}finally{r()}}async*putMany(e,t={}){t?.signal?.throwIfAborted();const n=await this.lock.readLock();try{yield*this.child.putMany(e,t)}finally{n()}}async get(e,t={}){t?.signal?.throwIfAborted();const n=await this.lock.readLock();try{return await this.child.get(e,t)}finally{n()}}async*getMany(e,t={}){t?.signal?.throwIfAborted();const n=await this.lock.readLock();try{yield*this.child.getMany(e,t)}finally{n()}}async delete(e,t={}){t?.signal?.throwIfAborted();const n=await this.lock.writeLock();try{if(await this.pins.isPinned(e))throw new Error("CID was pinned");await this.child.delete(e,t)}finally{n()}}async*deleteMany(e,t={}){t?.signal?.throwIfAborted();const n=await this.lock.writeLock();try{const n=this;yield*this.child.deleteMany(async function*(){for await(const t of e){if(await n.pins.isPinned(t))throw new Error("CID was pinned");yield t}}(),t)}finally{n()}}async has(e,t={}){t?.signal?.throwIfAborted();const n=await this.lock.readLock();try{return await this.child.has(e,t)}finally{n()}}async*getAll(e={}){e?.signal?.throwIfAborted();const t=await this.lock.readLock();try{yield*this.child.getAll(e)}finally{t()}}createSession(e,t){return t?.signal?.throwIfAborted(),this.child.createSession(e,t)}}const lr=new kn("/version");var cr=n(60374),fr=n(52954),hr=n(70699),dr=n(89033),pr=n(86085);function gr(e){return null!=e?.then}var yr=n(87660),mr=n(37043);function br(e){const t=new globalThis.AbortController;function n(){t.abort();for(const t of e)null!=t?.removeEventListener&&t.removeEventListener("abort",n)}for(const o of e){if(!0===o?.aborted){n();break}null!=o?.addEventListener&&o.addEventListener("abort",n)}const r=t.signal;return r.clear=function(){for(const t of e)null!=t?.removeEventListener&&t.removeEventListener("abort",n)},r}class vr extends Error{static name="NotFoundError";static code="ERR_NOT_FOUND";name=vr.name;code=vr.code;constructor(e="Not Found"){super(e)}}class wr{has(e,t){return Promise.reject(new Error(".has is not implemented"))}put(e,t,n){return Promise.reject(new Error(".put is not implemented"))}async*putMany(e,t){for await(const{cid:n,block:r}of e)await this.put(n,r,t),yield n}get(e,t){return Promise.reject(new Error(".get is not implemented"))}async*getMany(e,t){for await(const n of e)yield{cid:n,block:await this.get(n,t)}}delete(e,t){return Promise.reject(new Error(".delete is not implemented"))}async*deleteMany(e,t){for await(const n of e)await this.delete(n,t),yield n}async*getAll(e){throw new Error(".getAll is not implemented")}}class Er extends wr{child;constructor(e){super(),this.child=e}put(e,t){return 0===e.multihash.code||null==this.child?e:this.child.put(e,t)}get(e){if(0===e.multihash.code)return e.multihash.digest;if(null==this.child)throw new vr;return this.child.get(e)}has(e){return 0===e.multihash.code||null!=this.child&&this.child.has(e)}delete(e){if(0!==e.code)return null!=this.child?this.child.delete(e):void 0}getAll(e){return null!=this.child?this.child.getAll(e):[]}}function Ar(e){const[t,n]=null!=e[Symbol.asyncIterator]?[e[Symbol.asyncIterator](),Symbol.asyncIterator]:[e[Symbol.iterator](),Symbol.iterator],r=[];return{peek:()=>t.next(),push:e=>{r.push(e)},next:()=>r.length>0?{done:!1,value:r.shift()}:t.next(),[n](){return this}}}function Sr(e,t){let n=0;if(null!=e[Symbol.asyncIterator])return async function*(){for await(const r of e)await t(r,n++)&&(yield r)}();const r=Ar(e),{value:o,done:i}=r.next();if(!0===i)return function*(){}();const s=t(o,n++);if("function"===typeof s.then)return async function*(){await s&&(yield o);for await(const e of r)await t(e,n++)&&(yield e)}();const a=t;return function*(){!0===s&&(yield o);for(const e of r)a(e,n++)&&(yield e)}()}function Cr(e){return null!=e?.then}function Tr(e,t){let n=0;if(null!=e[Symbol.asyncIterator])return async function*(){for await(const r of e){const e=t(r,n++);Cr(e)&&await e,yield r}}();const r=Ar(e),{value:o,done:i}=r.next();if(!0===i)return function*(){}();const s=t(o,n++);if("function"===typeof s?.then)return async function*(){yield o;for await(const e of r){const r=t(e,n++);Cr(r)&&await r,yield e}}();const a=t;return function*(){yield o;for(const e of r)a(e,n++),yield e}()}class kr{child;getHasher;log;logger;components;constructor(e){this.log=e.logger.forComponent("helia:networked-storage"),this.logger=e.logger,this.components=e,this.child=new Er(e.blockstore),this.getHasher=e.getHasher}async put(e,t,n={}){return await this.child.has(e,n)?(n.onProgress?.(new en("blocks:put:duplicate",e)),e):(n.onProgress?.(new en("blocks:put:providers:notify",e)),await Promise.all(this.components.blockBrokers.map((async r=>r.announce?.(e,t,n)))),n.onProgress?.(new en("blocks:put:blockstore:put",e)),this.child.put(e,t,n))}async*putMany(e,t={}){const n=Tr(Sr(e,(async({cid:e})=>{const n=await this.child.has(e,t);return n&&t.onProgress?.(new en("blocks:put-many:duplicate",e)),!n})),(async({cid:e,block:n})=>{t.onProgress?.(new en("blocks:put-many:providers:notify",e)),await Promise.all(this.components.blockBrokers.map((async r=>r.announce?.(e,n,t))))}));t.onProgress?.(new en("blocks:put-many:blockstore:put-many")),yield*this.child.putMany(n,t)}async get(e,t={}){if(!0!==t.offline&&!await this.child.has(e,t)){const n=await this.getHasher(e.multihash.code);t.onProgress?.(new en("blocks:get:providers:get",e));const r=await Br(e,this.components.blockBrokers,n,{...t,log:this.log});return t.onProgress?.(new en("blocks:get:blockstore:put",e)),await this.child.put(e,r,t),t.onProgress?.(new en("blocks:get:providers:notify",e)),await Promise.all(this.components.blockBrokers.map((async n=>n.announce?.(e,r,t)))),r}return t.onProgress?.(new en("blocks:get:blockstore:get",e)),this.child.get(e,t)}async*getMany(e,t={}){t.onProgress?.(new en("blocks:get-many:blockstore:get-many")),yield*this.child.getMany(Tr(e,(async e=>{if(!0!==t.offline&&!await this.child.has(e,t)){const n=await this.getHasher(e.multihash.code);t.onProgress?.(new en("blocks:get-many:providers:get",e));const r=await Br(e,this.components.blockBrokers,n,{...t,log:this.log});t.onProgress?.(new en("blocks:get-many:blockstore:put",e)),await this.child.put(e,r,t),t.onProgress?.(new en("blocks:get-many:providers:notify",e)),await Promise.all(this.components.blockBrokers.map((async n=>n.announce?.(e,r,t))))}})))}async delete(e,t={}){t.onProgress?.(new en("blocks:delete:blockstore:delete",e)),await this.child.delete(e,t)}async*deleteMany(e,t={}){t.onProgress?.(new en("blocks:delete-many:blockstore:delete-many")),yield*this.child.deleteMany(async function*(){for await(const t of e)yield t}(),t)}async has(e,t={}){return this.child.has(e,t)}async*getAll(e={}){e.onProgress?.(new en("blocks:get-all:blockstore:get-many")),yield*this.child.getAll(e)}}class xr extends kr{started;constructor(e){super(e),this.started=!1}isStarted(){return this.started}async start(){await zn(this.child,...this.components.blockBrokers),this.started=!0}async stop(){await Vn(this.child,...this.components.blockBrokers),this.started=!1}unwrap(){return this.child}createSession(e,t){const n=this.components.blockBrokers.map((e=>null==e.createSession?e:e.createSession(t)));return new Or({blockstore:this.child,blockBrokers:n,getHasher:this.getHasher,logger:this.logger},{root:e})}}class Or extends kr{closeController;constructor(e,t){super(e),this.closeController=new AbortController,this.closeController.signal,this.log=e.logger.forComponent(`helia:session-storage:${t.root}`)}close(){this.closeController.abort()}async put(e,t,n={}){const r=br([this.closeController.signal,n.signal]);try{return await super.put(e,t,{...n,signal:r})}finally{r.clear()}}async*putMany(e,t={}){const n=br([this.closeController.signal,t.signal]);try{yield*super.putMany(e,{...t,signal:n})}finally{n.clear()}}async get(e,t={}){const n=br([this.closeController.signal,t.signal]);try{return await super.get(e,{...t,signal:n})}finally{n.clear()}}async*getMany(e,t={}){const n=br([this.closeController.signal,t.signal]);try{yield*super.getMany(e,{...t,signal:n})}finally{n.clear()}}async delete(e,t={}){const n=br([this.closeController.signal,t.signal]);try{await super.delete(e,{...t,signal:n})}finally{n.clear()}}async*deleteMany(e,t={}){const n=br([this.closeController.signal,t.signal]);try{yield*super.deleteMany(e,{...t,signal:n})}finally{n.clear()}}async has(e,t={}){const n=br([this.closeController.signal,t.signal]);try{return await super.has(e,{...t,signal:n})}finally{n.clear()}}async*getAll(e={}){const t=br([this.closeController.signal,e.signal]);try{yield*super.getAll({...e,signal:t})}finally{t.clear()}}}function Ir(e){return"function"===typeof e.retrieve}const Pr=(e,t)=>{if(null==t)throw new et(`No hasher configured for multihash code 0x${e.multihash.code.toString(16)}, please configure one. You can look up which hash this is at https://github.com/multiformats/multicodec/blob/master/table.csv`);return async n=>{let r;const o=t.digest(n);if(r=gr(o)?await o:o,!Y(r.digest,e.multihash.digest))throw new ot("Hash of downloaded block did not match multihash from passed CID")}};async function Br(e,t,n,r){const o=Pr(e,n),i=new AbortController,s=br([i.signal,r.signal]);i.signal;const a=[];for(const u of t)Ir(u)&&a.push(u);try{return await Promise.any(a.map((async t=>{try{let n=!1;const i=await t.retrieve(e,{...r,signal:s,validateFn:async e=>{await o(e),n=!0}});return n||await o(i),i}catch(n){throw r.log.error("could not retrieve verified block for %c",e,n),n}})))}finally{i.abort(),s.clear()}}const Dr=Symbol.for("@libp2p/content-routing"),Nr=Symbol.for("@libp2p/peer-routing");class Fr{blockstore;datastore;pins;logger;routing;getCodec;getHasher;dns;metrics;log;constructor(e){this.logger=e.logger??{forComponent:e=>Qt(e)},this.log=this.logger.forComponent("helia"),this.getHasher=function(e=[],t){const n={[mr.s.code]:mr.s,[mr.Z.code]:mr.Z,[yr.D.code]:yr.D};return e.forEach((e=>{n[e.code]=e})),async e=>{let r=n[e];if(null==r&&null!=t){const o=t(e);r=gr(o)?await o:o,n[r.code]=r}if(null!=r)return r;throw new Ft(`No hasher configured for multihash code 0x${e.toString(16)}, please configure one. You can look up which hash this is at https://github.com/multiformats/multicodec/blob/master/table.csv`)}}(e.hashers,e.loadHasher),this.getCodec=function(e=[],t){const n={[hr.code]:hr,[pr.code]:pr,[cr.code]:cr,[fr.code]:fr,[dr.code]:dr};return e.forEach((e=>{n[e.code]=e})),async e=>{let r=n[e];if(null==r&&null!=t){const o=t(e);r=gr(o)?await o:o,n[r.code]=r}if(null!=r)return r;throw new _t(`Could not load codec for ${e}`)}}(e.codecs,e.loadCodec),this.dns=e.dns??function(e={}){return new bn(e)}(),this.metrics=e.metrics;const t={blockstore:e.blockstore,datastore:e.datastore,logger:this.logger,blockBrokers:[],getHasher:this.getHasher,getCodec:this.getCodec,dns:this.dns,metrics:this.metrics,...e.components??{}};this.routing=t.routing=new $n(t,{routers:(e.routers??[]).flatMap((e=>{const t=[e];return null!=e[Dr]&&t.push(e[Dr]),null!=e[Nr]&&t.push(e[Nr]),t})),providerLookupConcurrency:e.providerLookupConcurrency});const n=new xr(t);this.pins=new jn(e.datastore,n,this.getCodec),this.blockstore=new ur(n,this.pins,{holdGcLock:e.holdGcLock??!0}),this.datastore=e.datastore,t.blockBrokers=e.blockBrokers.map((e=>e(t)))}async start(){await async function(e){if(!await e.has(lr))return void await e.put(lr,(0,oe.s)("1"));const t=J(await e.get(lr));if(1!==parseInt(t,10))throw new Error("Unknown datastore version, a datastore migration may be required")}(this.datastore),await zn(this.blockstore,this.datastore,this.routing)}async stop(){await Vn(this.blockstore,this.datastore,this.routing)}async gc(e={}){const t=await this.blockstore.lock.writeLock();try{const t=this,n=this.blockstore.unwrap();this.log("gc start"),await wn(n.deleteMany(async function*(){for await(const{cid:o}of n.getAll())try{if(await t.pins.isPinned(o,e))continue;yield o,e.onProgress?.(new en("helia:gc:deleted",o))}catch(r){t.log.error("Error during gc",r),e.onProgress?.(new en("helia:gc:error",r))}}()))}finally{t()}this.log("gc finished")}}class _r extends wr{data;constructor(){super(),this.data=new Map}put(e,t){return this.data.set(te.base32.encode(e.multihash.bytes),t),e}get(e){const t=this.data.get(te.base32.encode(e.multihash.bytes));if(null==t)throw new vr;return t}has(e){return this.data.has(te.base32.encode(e.multihash.bytes))}async delete(e){this.data.delete(te.base32.encode(e.multihash.bytes))}async*getAll(){for(const[e,t]of this.data.entries())yield{cid:K.T.createV1(pr.code,(0,re.D4)(te.base32.decode(e))),block:t}}}function Lr(e){if(null!=e[Symbol.asyncIterator])return(async()=>{const t=[];for await(const n of e)t.push(n);return t})();const t=[];for(const n of e)t.push(n);return t}function Rr(e,t){return null!=e[Symbol.asyncIterator]?async function*(){const n=await Lr(e);yield*n.sort(t)}():function*(){const n=Lr(e);yield*n.sort(t)}()}function jr(e,t){return null!=e[Symbol.asyncIterator]?async function*(){let n=0;if(!(t<1))for await(const r of e)if(yield r,n++,n===t)return}():function*(){let n=0;if(!(t<1))for(const r of e)if(yield r,n++,n===t)return}()}Qt("blockstore:core:tiered");class Mr{put(e,t,n){return Promise.reject(new Error(".put is not implemented"))}get(e,t){return Promise.reject(new Error(".get is not implemented"))}has(e,t){return Promise.reject(new Error(".has is not implemented"))}delete(e,t){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,t={}){for await(const{key:n,value:r}of e)await this.put(n,r,t),yield n}async*getMany(e,t={}){for await(const n of e)yield{key:n,value:await this.get(n,t)}}async*deleteMany(e,t={}){for await(const n of e)await this.delete(n,t),yield n}batch(){let e=[],t=[];return{put(t,n){e.push({key:t,value:n})},delete(e){t.push(e)},commit:async n=>{await wn(this.putMany(e,n)),e=[],await wn(this.deleteMany(t,n)),t=[]}}}async*_all(e,t){throw new Error("._all is not implemented")}async*_allKeys(e,t){throw new Error("._allKeys is not implemented")}query(e,t){let n=this._all(e,t);if(null!=e.prefix){const t=e.prefix;n=Sr(n,(e=>e.key.toString().startsWith(t)))}if(Array.isArray(e.filters)&&(n=e.filters.reduce(((e,t)=>Sr(e,t)),n)),Array.isArray(e.orders)&&(n=e.orders.reduce(((e,t)=>Rr(e,t)),n)),null!=e.offset){let t=0;const r=e.offset;n=Sr(n,(()=>t++>=r))}return null!=e.limit&&(n=jr(n,e.limit)),n}queryKeys(e,t){let n=this._allKeys(e,t);if(null!=e.prefix){const t=e.prefix;n=Sr(n,(e=>e.toString().startsWith(t)))}if(Array.isArray(e.filters)&&(n=e.filters.reduce(((e,t)=>Sr(e,t)),n)),Array.isArray(e.orders)&&(n=e.orders.reduce(((e,t)=>Rr(e,t)),n)),null!=e.offset){const t=e.offset;let r=0;n=Sr(n,(()=>r++>=t))}return null!=e.limit&&(n=jr(n,e.limit)),n}}class Ur extends Mr{data;constructor(){super(),this.data=new Map}put(e,t){return this.data.set(e.toString(),t),e}get(e){const t=this.data.get(e.toString());if(null==t)throw new vr;return t}has(e){return this.data.has(e.toString())}delete(e){this.data.delete(e.toString())}*_all(){for(const[e,t]of this.data.entries())yield{key:new kn(e),value:t}}*_allKeys(){for(const e of this.data.keys())yield new kn(e)}}new kn("SHARDING"),Qt("datastore:core:tiered");const Hr=(e,t,n)=>e&t^e&n^t&n;class zr extends mt{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=pt(this.buffer)}update(e){dt(this);const{view:t,buffer:n,blockLen:r}=this,o=(e=yt(e)).length;for(let i=0;i<o;){const s=Math.min(r-this.pos,o-i);if(s!==r)n.set(e.subarray(i,i+s),this.pos),this.pos+=s,i+=s,this.pos===r&&(this.process(t,0),this.pos=0);else{const t=pt(e);for(;r<=o-i;i+=r)this.process(t,i)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){dt(this),function(e,t){ht(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:r,isLE:o}=this;let{pos:i}=this;t[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>r-i&&(this.process(n,0),i=0);for(let c=i;c<r;c++)t[c]=0;!function(e,t,n,r){if("function"===typeof e.setBigUint64)return e.setBigUint64(t,n,r);const o=BigInt(32),i=BigInt(4294967295),s=Number(n>>o&i),a=Number(n&i),u=r?4:0,l=r?0:4;e.setUint32(t+u,s,r),e.setUint32(t+l,a,r)}(n,r-8,BigInt(8*this.length),o),this.process(n,0);const s=pt(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=a/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(let c=0;c<u;c++)s.setUint32(4*c,l[c],o)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:o,destroyed:i,pos:s}=this;return e.length=r,e.pos=s,e.finished=o,e.destroyed=i,r%t&&e.buffer.set(n),e}}const Vr=BigInt(2**32-1),$r=BigInt(32);function Gr(e,t=!1){return t?{h:Number(e&Vr),l:Number(e>>$r&Vr)}:{h:0|Number(e>>$r&Vr),l:0|Number(e&Vr)}}const Wr={fromBig:Gr,split:function(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let o=0;o<e.length;o++){const{h:i,l:s}=Gr(e[o],t);[n[o],r[o]]=[i,s]}return[n,r]},toBig:(e,t)=>BigInt(e>>>0)<<$r|BigInt(t>>>0),shrSH:(e,t,n)=>e>>>n,shrSL:(e,t,n)=>e<<32-n|t>>>n,rotrSH:(e,t,n)=>e>>>n|t<<32-n,rotrSL:(e,t,n)=>e<<32-n|t>>>n,rotrBH:(e,t,n)=>e<<64-n|t>>>n-32,rotrBL:(e,t,n)=>e>>>n-32|t<<64-n,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:(e,t,n)=>e<<n|t>>>32-n,rotlSL:(e,t,n)=>t<<n|e>>>32-n,rotlBH:(e,t,n)=>t<<n-32|e>>>64-n,rotlBL:(e,t,n)=>e<<n-32|t>>>64-n,add:function(e,t,n,r){const o=(t>>>0)+(r>>>0);return{h:e+n+(o/2**32|0)|0,l:0|o}},add3L:(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),add3H:(e,t,n,r)=>t+n+r+(e/2**32|0)|0,add4L:(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),add4H:(e,t,n,r,o)=>t+n+r+o+(e/2**32|0)|0,add5H:(e,t,n,r,o,i)=>t+n+r+o+i+(e/2**32|0)|0,add5L:(e,t,n,r,o)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(o>>>0)},[qr,Kr]=(()=>Wr.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))))(),Yr=new Uint32Array(80),Zr=new Uint32Array(80);class Jr extends zr{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:n,Bl:r,Ch:o,Cl:i,Dh:s,Dl:a,Eh:u,El:l,Fh:c,Fl:f,Gh:h,Gl:d,Hh:p,Hl:g}=this;return[e,t,n,r,o,i,s,a,u,l,c,f,h,d,p,g]}set(e,t,n,r,o,i,s,a,u,l,c,f,h,d,p,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|r,this.Ch=0|o,this.Cl=0|i,this.Dh=0|s,this.Dl=0|a,this.Eh=0|u,this.El=0|l,this.Fh=0|c,this.Fl=0|f,this.Gh=0|h,this.Gl=0|d,this.Hh=0|p,this.Hl=0|g}process(e,t){for(let b=0;b<16;b++,t+=4)Yr[b]=e.getUint32(t),Zr[b]=e.getUint32(t+=4);for(let b=16;b<80;b++){const e=0|Yr[b-15],t=0|Zr[b-15],n=Wr.rotrSH(e,t,1)^Wr.rotrSH(e,t,8)^Wr.shrSH(e,t,7),r=Wr.rotrSL(e,t,1)^Wr.rotrSL(e,t,8)^Wr.shrSL(e,t,7),o=0|Yr[b-2],i=0|Zr[b-2],s=Wr.rotrSH(o,i,19)^Wr.rotrBH(o,i,61)^Wr.shrSH(o,i,6),a=Wr.rotrSL(o,i,19)^Wr.rotrBL(o,i,61)^Wr.shrSL(o,i,6),u=Wr.add4L(r,a,Zr[b-7],Zr[b-16]),l=Wr.add4H(u,n,s,Yr[b-7],Yr[b-16]);Yr[b]=0|l,Zr[b]=0|u}let{Ah:n,Al:r,Bh:o,Bl:i,Ch:s,Cl:a,Dh:u,Dl:l,Eh:c,El:f,Fh:h,Fl:d,Gh:p,Gl:g,Hh:y,Hl:m}=this;for(let b=0;b<80;b++){const e=Wr.rotrSH(c,f,14)^Wr.rotrSH(c,f,18)^Wr.rotrBH(c,f,41),t=Wr.rotrSL(c,f,14)^Wr.rotrSL(c,f,18)^Wr.rotrBL(c,f,41),v=c&h^~c&p,w=f&d^~f&g,E=Wr.add5L(m,t,w,Kr[b],Zr[b]),A=Wr.add5H(E,y,e,v,qr[b],Yr[b]),S=0|E,C=Wr.rotrSH(n,r,28)^Wr.rotrBH(n,r,34)^Wr.rotrBH(n,r,39),T=Wr.rotrSL(n,r,28)^Wr.rotrBL(n,r,34)^Wr.rotrBL(n,r,39),k=n&o^n&s^o&s,x=r&i^r&a^i&a;y=0|p,m=0|g,p=0|h,g=0|d,h=0|c,d=0|f,({h:c,l:f}=Wr.add(0|u,0|l,0|A,0|S)),u=0|s,l=0|a,s=0|o,a=0|i,o=0|n,i=0|r;const O=Wr.add3L(S,T,x);n=Wr.add3H(O,A,C,k),r=0|O}({h:n,l:r}=Wr.add(0|this.Ah,0|this.Al,0|n,0|r)),({h:o,l:i}=Wr.add(0|this.Bh,0|this.Bl,0|o,0|i)),({h:s,l:a}=Wr.add(0|this.Ch,0|this.Cl,0|s,0|a)),({h:u,l:l}=Wr.add(0|this.Dh,0|this.Dl,0|u,0|l)),({h:c,l:f}=Wr.add(0|this.Eh,0|this.El,0|c,0|f)),({h:h,l:d}=Wr.add(0|this.Fh,0|this.Fl,0|h,0|d)),({h:p,l:g}=Wr.add(0|this.Gh,0|this.Gl,0|p,0|g)),({h:y,l:m}=Wr.add(0|this.Hh,0|this.Hl,0|y,0|m)),this.set(n,r,o,i,s,a,u,l,c,f,h,d,p,g,y,m)}roundClean(){Yr.fill(0),Zr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Xr=bt((()=>new Jr)),Qr=BigInt(0),eo=BigInt(1),to=BigInt(2);function no(e){return e instanceof Uint8Array||null!=e&&"object"===typeof e&&"Uint8Array"===e.constructor.name}function ro(e){if(!no(e))throw new Error("Uint8Array expected")}function oo(e,t){if("boolean"!==typeof t)throw new Error(`${e} must be valid boolean, got "${t}".`)}const io=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function so(e){ro(e);let t="";for(let n=0;n<e.length;n++)t+=io[e[n]];return t}function ao(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function uo(e){if("string"!==typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}const lo={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function co(e){return e>=lo._0&&e<=lo._9?e-lo._0:e>=lo._A&&e<=lo._F?e-(lo._A-10):e>=lo._a&&e<=lo._f?e-(lo._a-10):void 0}function fo(e){if("string"!==typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let o=0,i=0;o<n;o++,i+=2){const t=co(e.charCodeAt(i)),n=co(e.charCodeAt(i+1));if(void 0===t||void 0===n){const t=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+i)}r[o]=16*t+n}return r}function ho(e){return uo(so(e))}function po(e){return ro(e),uo(so(Uint8Array.from(e).reverse()))}function go(e,t){return fo(e.toString(16).padStart(2*t,"0"))}function yo(e,t){return go(e,t).reverse()}function mo(e,t,n){let r;if("string"===typeof t)try{r=fo(t)}catch(i){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${i}`)}else{if(!no(t))throw new Error(`${e} must be hex string or Uint8Array`);r=Uint8Array.from(t)}const o=r.length;if("number"===typeof n&&o!==n)throw new Error(`${e} expected ${n} bytes, got ${o}`);return r}function bo(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];ro(n),t+=n.length}const n=new Uint8Array(t);for(let r=0,o=0;r<e.length;r++){const t=e[r];n.set(t,o),o+=t.length}return n}const vo=e=>"bigint"===typeof e&&Qr<=e;function wo(e,t,n){return vo(e)&&vo(t)&&vo(n)&&t<=e&&e<n}function Eo(e,t,n,r){if(!wo(t,n,r))throw new Error(`expected valid ${e}: ${n} <= n < ${r}, got ${typeof t} ${t}`)}function Ao(e){let t;for(t=0;e>Qr;e>>=eo,t+=1);return t}const So=e=>(to<<BigInt(e-1))-eo,Co=e=>new Uint8Array(e),To=e=>Uint8Array.from(e);function ko(e,t,n){if("number"!==typeof e||e<2)throw new Error("hashLen must be a number");if("number"!==typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!==typeof n)throw new Error("hmacFn must be a function");let r=Co(e),o=Co(e),i=0;const s=()=>{r.fill(1),o.fill(0),i=0},a=(...e)=>n(o,r,...e),u=(e=Co())=>{o=a(To([0]),e),r=a(),0!==e.length&&(o=a(To([1]),e),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const n=[];for(;e<t;){r=a();const t=r.slice();n.push(t),e+=r.length}return bo(...n)};return(e,t)=>{let n;for(s(),u(e);!(n=t(l()));)u();return s(),n}}const xo={bigint:e=>"bigint"===typeof e,function:e=>"function"===typeof e,boolean:e=>"boolean"===typeof e,string:e=>"string"===typeof e,stringOrUint8Array:e=>"string"===typeof e||no(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"===typeof e&&Number.isSafeInteger(e.outputLen)};function Oo(e,t,n={}){const r=(t,n,r)=>{const o=xo[n];if("function"!==typeof o)throw new Error(`Invalid validator "${n}", expected function`);const i=e[t];if((!r||void 0!==i)&&!o(i,e))throw new Error(`Invalid param ${String(t)}=${i} (${typeof i}), expected ${n}`)};for(const[o,i]of Object.entries(t))r(o,i,!1);for(const[o,i]of Object.entries(n))r(o,i,!0);return e}function Io(e){const t=new WeakMap;return(n,...r)=>{const o=t.get(n);if(void 0!==o)return o;const i=e(n,...r);return t.set(n,i),i}}const Po=BigInt(0),Bo=BigInt(1),Do=BigInt(2),No=BigInt(3),Fo=BigInt(4),_o=BigInt(5),Lo=BigInt(8);function Ro(e,t){const n=e%t;return n>=Po?n:t+n}function jo(e,t,n){if(n<=Po||t<Po)throw new Error("Expected power/modulo > 0");if(n===Bo)return Po;let r=Bo;for(;t>Po;)t&Bo&&(r=r*e%n),e=e*e%n,t>>=Bo;return r}function Mo(e,t,n){let r=e;for(;t-- >Po;)r*=r,r%=n;return r}function Uo(e,t){if(e===Po||t<=Po)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=Ro(e,t),r=t,o=Po,i=Bo;for(;n!==Po;){const e=r%n,t=o-i*(r/n);r=n,n=e,o=i,i=t}if(r!==Bo)throw new Error("invert: does not exist");return Ro(o,t)}function Ho(e){if(e%Fo===No){const t=(e+Bo)/Fo;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}if(e%Lo===_o){const t=(e-_o)/Lo;return function(e,n){const r=e.mul(n,Do),o=e.pow(r,t),i=e.mul(n,o),s=e.mul(e.mul(i,Do),o),a=e.mul(i,e.sub(s,e.ONE));if(!e.eql(e.sqr(a),n))throw new Error("Cannot find square root");return a}}return function(e){const t=(e-Bo)/Do;let n,r,o;for(n=e-Bo,r=0;n%Do===Po;n/=Do,r++);for(o=Do;o<e&&jo(o,t,e)!==e-Bo;o++);if(1===r){const t=(e+Bo)/Fo;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}const i=(n+Bo)/Do;return function(e,s){if(e.pow(s,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=r,u=e.pow(e.mul(e.ONE,o),n),l=e.pow(s,i),c=e.pow(s,n);for(;!e.eql(c,e.ONE);){if(e.eql(c,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(c);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);const n=e.pow(u,Bo<<BigInt(a-t-1));u=e.sqr(n),l=e.mul(l,n),c=e.mul(c,u),a=t}return l}}(e)}BigInt(9),BigInt(16);const zo=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Vo(e,t){const n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function $o(e,t,n=!1,r={}){if(e<=Po)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:o,nByteLength:i}=Vo(e,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=Ho(e),a=Object.freeze({ORDER:e,BITS:o,BYTES:i,MASK:So(o),ZERO:Po,ONE:Bo,create:t=>Ro(t,e),isValid:t=>{if("bigint"!==typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return Po<=t&&t<e},is0:e=>e===Po,isOdd:e=>(e&Bo)===Bo,neg:t=>Ro(-t,e),eql:(e,t)=>e===t,sqr:t=>Ro(t*t,e),add:(t,n)=>Ro(t+n,e),sub:(t,n)=>Ro(t-n,e),mul:(t,n)=>Ro(t*n,e),pow:(e,t)=>function(e,t,n){if(n<Po)throw new Error("Expected power > 0");if(n===Po)return e.ONE;if(n===Bo)return t;let r=e.ONE,o=t;for(;n>Po;)n&Bo&&(r=e.mul(r,o)),o=e.sqr(o),n>>=Bo;return r}(a,e,t),div:(t,n)=>Ro(t*Uo(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>Uo(t,e),sqrt:r.sqrt||(e=>s(a,e)),invertBatch:e=>function(e,t){const n=new Array(t.length),r=t.reduce(((t,r,o)=>e.is0(r)?t:(n[o]=t,e.mul(t,r))),e.ONE),o=e.inv(r);return t.reduceRight(((t,r,o)=>e.is0(r)?t:(n[o]=e.mul(t,n[o]),e.mul(t,r))),o),n}(a,e),cmov:(e,t,n)=>n?t:e,toBytes:e=>n?yo(e,i):go(e,i),fromBytes:e=>{if(e.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${e.length}`);return n?po(e):ho(e)}});return Object.freeze(a)}function Go(e){if("bigint"!==typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Wo(e){const t=Go(e);return t+Math.ceil(t/2)}const qo=BigInt(0),Ko=BigInt(1),Yo=new WeakMap,Zo=new WeakMap;function Jo(e,t){const n=(e,t)=>{const n=t.negate();return e?n:t},r=e=>{if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error(`Wrong window size=${e}, should be [1..${t}]`)},o=e=>{r(e);return{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}};return{constTimeNegate:n,unsafeLadder(t,n){let r=e.ZERO,o=t;for(;n>qo;)n&Ko&&(r=r.add(o)),o=o.double(),n>>=Ko;return r},precomputeWindow(e,t){const{windows:n,windowSize:r}=o(t),i=[];let s=e,a=s;for(let o=0;o<n;o++){a=s,i.push(a);for(let e=1;e<r;e++)a=a.add(s),i.push(a);s=a.double()}return i},wNAF(t,r,i){const{windows:s,windowSize:a}=o(t);let u=e.ZERO,l=e.BASE;const c=BigInt(2**t-1),f=2**t,h=BigInt(t);for(let e=0;e<s;e++){const t=e*a;let o=Number(i&c);i>>=h,o>a&&(o-=f,i+=Ko);const s=t,d=t+Math.abs(o)-1,p=e%2!==0,g=o<0;0===o?l=l.add(n(p,r[s])):u=u.add(n(g,r[d]))}return{p:u,f:l}},wNAFCached(e,t,n){const r=Zo.get(e)||1;let o=Yo.get(e);return o||(o=this.precomputeWindow(e,r),1!==r&&Yo.set(e,n(o))),this.wNAF(r,o,t)},setWindowSize(e,t){r(t),Zo.set(e,t),Yo.delete(e)}}}function Xo(e,t,n,r){if(!Array.isArray(n)||!Array.isArray(r)||r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");r.forEach(((e,n)=>{if(!t.isValid(e))throw new Error(`wrong scalar at index ${n}`)})),n.forEach(((t,n)=>{if(!(t instanceof e))throw new Error(`wrong point at index ${n}`)}));const o=Ao(BigInt(n.length)),i=o>12?o-3:o>4?o-2:o?2:1,s=(1<<i)-1,a=new Array(s+1).fill(e.ZERO),u=Math.floor((t.BITS-1)/i)*i;let l=e.ZERO;for(let c=u;c>=0;c-=i){a.fill(e.ZERO);for(let e=0;e<r.length;e++){const t=r[e],o=Number(t>>BigInt(c)&BigInt(s));a[o]=a[o].add(n[e])}let t=e.ZERO;for(let n=a.length-1,r=e.ZERO;n>0;n--)r=r.add(a[n]),t=t.add(r);if(l=l.add(t),0!==c)for(let e=0;e<i;e++)l=l.double()}return l}function Qo(e){return function(e){const t=zo.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});Oo(e,t)}(e.Fp),Oo(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Vo(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const ei=BigInt(0),ti=BigInt(1),ni=BigInt(2),ri=BigInt(8),oi={zip215:!0};function ii(e){const t=function(e){const t=Qo(e);return Oo(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}(e),{Fp:n,n:r,prehash:o,hash:i,randomBytes:s,nByteLength:a,h:u}=t,l=ni<<BigInt(8*a)-ti,c=n.create,f=$o(t.n,t.nBitLength),h=t.uvRatio||((e,t)=>{try{return{isValid:!0,value:n.sqrt(e*n.inv(t))}}catch(r){return{isValid:!1,value:ei}}}),d=t.adjustScalarBytes||(e=>e),p=t.domain||((e,t,n)=>{if(oo("phflag",n),t.length||n)throw new Error("Contexts/pre-hash are not supported");return e});function g(e,t){Eo("coordinate "+e,t,ei,l)}function y(e){if(!(e instanceof v))throw new Error("ExtendedPoint expected")}const m=Io(((e,t)=>{const{ex:r,ey:o,ez:i}=e,s=e.is0();null==t&&(t=s?ri:n.inv(i));const a=c(r*t),u=c(o*t),l=c(i*t);if(s)return{x:ei,y:ti};if(l!==ti)throw new Error("invZ was invalid");return{x:a,y:u}})),b=Io((e=>{const{a:n,d:r}=t;if(e.is0())throw new Error("bad point: ZERO");const{ex:o,ey:i,ez:s,et:a}=e,u=c(o*o),l=c(i*i),f=c(s*s),h=c(f*f),d=c(u*n);if(c(f*c(d+l))!==c(h+c(r*c(u*l))))throw new Error("bad point: equation left != right (1)");if(c(o*i)!==c(s*a))throw new Error("bad point: equation left != right (2)");return!0}));class v{constructor(e,t,n,r){this.ex=e,this.ey=t,this.ez=n,this.et=r,g("x",e),g("y",t),g("z",n),g("t",r),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(e){if(e instanceof v)throw new Error("extended point not allowed");const{x:t,y:n}=e||{};return g("x",t),g("y",n),new v(t,n,ti,c(t*n))}static normalizeZ(e){const t=n.invertBatch(e.map((e=>e.ez)));return e.map(((e,n)=>e.toAffine(t[n]))).map(v.fromAffine)}static msm(e,t){return Xo(v,f,e,t)}_setWindowSize(e){A.setWindowSize(this,e)}assertValidity(){b(this)}equals(e){y(e);const{ex:t,ey:n,ez:r}=this,{ex:o,ey:i,ez:s}=e,a=c(t*s),u=c(o*r),l=c(n*s),f=c(i*r);return a===u&&l===f}is0(){return this.equals(v.ZERO)}negate(){return new v(c(-this.ex),this.ey,this.ez,c(-this.et))}double(){const{a:e}=t,{ex:n,ey:r,ez:o}=this,i=c(n*n),s=c(r*r),a=c(ni*c(o*o)),u=c(e*i),l=n+r,f=c(c(l*l)-i-s),h=u+s,d=h-a,p=u-s,g=c(f*d),y=c(h*p),m=c(f*p),b=c(d*h);return new v(g,y,b,m)}add(e){y(e);const{a:n,d:r}=t,{ex:o,ey:i,ez:s,et:a}=this,{ex:u,ey:l,ez:f,et:h}=e;if(n===BigInt(-1)){const e=c((i-o)*(l+u)),t=c((i+o)*(l-u)),n=c(t-e);if(n===ei)return this.double();const r=c(s*ni*h),d=c(a*ni*f),p=d+r,g=t+e,y=d-r,m=c(p*n),b=c(g*y),w=c(p*y),E=c(n*g);return new v(m,b,E,w)}const d=c(o*u),p=c(i*l),g=c(a*r*h),m=c(s*f),b=c((o+i)*(u+l)-d-p),w=m-g,E=m+g,A=c(p-n*d),S=c(b*w),C=c(E*A),T=c(b*A),k=c(w*E);return new v(S,C,k,T)}subtract(e){return this.add(e.negate())}wNAF(e){return A.wNAFCached(this,e,v.normalizeZ)}multiply(e){const t=e;Eo("scalar",t,ti,r);const{p:n,f:o}=this.wNAF(t);return v.normalizeZ([n,o])[0]}multiplyUnsafe(e){const t=e;return Eo("scalar",t,ei,r),t===ei?E:this.equals(E)||t===ti?this:this.equals(w)?this.wNAF(t).p:A.unsafeLadder(this,t)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return A.unsafeLadder(this,r).is0()}toAffine(e){return m(this,e)}clearCofactor(){const{h:e}=t;return e===ti?this:this.multiplyUnsafe(e)}static fromHex(e,r=!1){const{d:o,a:i}=t,s=n.BYTES;e=mo("pointHex",e,s),oo("zip215",r);const a=e.slice(),u=e[s-1];a[s-1]=-129&u;const f=po(a),d=r?l:n.ORDER;Eo("pointHex.y",f,ei,d);const p=c(f*f),g=c(p-ti),y=c(o*p-i);let{isValid:m,value:b}=h(g,y);if(!m)throw new Error("Point.fromHex: invalid y coordinate");const w=(b&ti)===ti,E=0!==(128&u);if(!r&&b===ei&&E)throw new Error("Point.fromHex: x=0 and x_0=1");return E!==w&&(b=c(-b)),v.fromAffine({x:b,y:f})}static fromPrivateKey(e){return T(e).point}toRawBytes(){const{x:e,y:t}=this.toAffine(),r=yo(t,n.BYTES);return r[r.length-1]|=e&ti?128:0,r}toHex(){return so(this.toRawBytes())}}v.BASE=new v(t.Gx,t.Gy,ti,c(t.Gx*t.Gy)),v.ZERO=new v(ei,ti,ti,ei);const{BASE:w,ZERO:E}=v,A=Jo(v,8*a);function S(e){return Ro(e,r)}function C(e){return S(po(e))}function T(e){const t=a;e=mo("private key",e,t);const n=mo("hashed private key",i(e),2*t),r=d(n.slice(0,t)),o=n.slice(t,2*t),s=C(r),u=w.multiply(s),l=u.toRawBytes();return{head:r,prefix:o,scalar:s,point:u,pointBytes:l}}function k(e=new Uint8Array,...t){const n=bo(...t);return C(i(p(n,mo("context",e),!!o)))}const x=oi;w._setWindowSize(8);return{CURVE:t,getPublicKey:function(e){return T(e).pointBytes},sign:function(e,t,i={}){e=mo("message",e),o&&(e=o(e));const{prefix:s,scalar:u,pointBytes:l}=T(t),c=k(i.context,s,e),f=w.multiply(c).toRawBytes(),h=S(c+k(i.context,f,l,e)*u);return Eo("signature.s",h,ei,r),mo("result",bo(f,yo(h,n.BYTES)),2*a)},verify:function(e,t,r,i=x){const{context:s,zip215:a}=i,u=n.BYTES;e=mo("signature",e,2*u),t=mo("message",t),void 0!==a&&oo("zip215",a),o&&(t=o(t));const l=po(e.slice(u,2*u));let c,f,h;try{c=v.fromHex(r,a),f=v.fromHex(e.slice(0,u),a),h=w.multiplyUnsafe(l)}catch(p){return!1}if(!a&&c.isSmallOrder())return!1;const d=k(s,f.toRawBytes(),c.toRawBytes(),t);return f.add(c.multiplyUnsafe(d)).subtract(h).clearCofactor().equals(v.ZERO)},ExtendedPoint:v,utils:{getExtendedPublicKey:T,randomPrivateKey:()=>s(n.BYTES),precompute:(e=8,t=v.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}}const si=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),ai=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const ui=BigInt(1),li=BigInt(2);BigInt(3);const ci=BigInt(5),fi=BigInt(8);function hi(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function di(e,t){const n=si,r=Ro(t*t*t,n),o=function(e){const t=BigInt(10),n=BigInt(20),r=BigInt(40),o=BigInt(80),i=si,s=e*e%i*e%i,a=Mo(s,li,i)*s%i,u=Mo(a,ui,i)*e%i,l=Mo(u,ci,i)*u%i,c=Mo(l,t,i)*l%i,f=Mo(c,n,i)*c%i,h=Mo(f,r,i)*f%i,d=Mo(h,o,i)*h%i,p=Mo(d,o,i)*h%i,g=Mo(p,t,i)*l%i;return{pow_p_5_8:Mo(g,li,i)*e%i,b2:s}}(e*Ro(r*r*t,n)).pow_p_5_8;let i=Ro(e*r*o,n);const s=Ro(t*i*i,n),a=i,u=Ro(i*ai,n),l=s===e,c=s===Ro(-e,n),f=s===Ro(-e*ai,n);return l&&(i=a),(c||f)&&(i=u),(Ro(i,n)&Bo)===Bo&&(i=Ro(-i,n)),{isValid:l||c,value:i}}const pi=(()=>$o(si,void 0,!0))(),gi=(()=>({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:pi,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:fi,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Xr,randomBytes:vt,adjustScalarBytes:hi,uvRatio:di}))(),yi=(()=>ii(gi))();class mi{type="Ed25519";raw;constructor(e){this.raw=vi(e,32)}toMultihash(){return yr.D.digest(Au(this))}toCID(){return K.T.createV1(114,this.toMultihash())}toString(){return y.base58btc.encode(this.toMultihash().bytes).substring(1)}equals(e){return null!=e&&e.raw instanceof Uint8Array&&Y(this.raw,e.raw)}verify(e,t){return function(e,t,n){return yi.verify(t,n instanceof Uint8Array?n:n.subarray(),e)}(this.raw,t,e)}}function bi(e){return e=vi(e,32),new mi(e)}function vi(e,t){if((e=Uint8Array.from(e??[])).length!==t)throw new et(`Key must be a Uint8Array of length ${t}, got ${e.length}`);return e}var wi,Ei,Ai,Si,Ci=n(33902),Ti=n(94318),ki=n(65379),xi=n(68671);n(67198),n(43260),n(33337);!function(e){e.RSA="RSA",e.Ed25519="Ed25519",e.secp256k1="secp256k1"}(wi||(wi={})),function(e){e[e.RSA=0]="RSA",e[e.Ed25519=1]="Ed25519",e[e.secp256k1=2]="secp256k1"}(Ei||(Ei={})),function(e){e.codec=()=>(0,ki.e)(Ei)}(wi||(wi={})),function(e){let t;e.codec=()=>(null==t&&(t=(0,xi.i)(((e,t,n={})=>{!1!==n.lengthDelimited&&t.fork(),null!=e.Type&&(t.uint32(8),wi.codec().encode(e.Type,t)),null!=e.Data&&(t.uint32(18),t.bytes(e.Data)),!1!==n.lengthDelimited&&t.ldelim()}),((e,t,n={})=>{const r={},o=null==t?e.len:e.pos+t;for(;e.pos<o;){const t=e.uint32();switch(t>>>3){case 1:r.Type=wi.codec().decode(e);break;case 2:r.Data=e.bytes();break;default:e.skipType(7&t)}}return r}))),t),e.encode=t=>(0,Ti.m)(t,e.codec()),e.decode=(t,n)=>(0,Ci.Y)(t,e.codec(),n)}(Ai||(Ai={})),function(e){let t;e.codec=()=>(null==t&&(t=(0,xi.i)(((e,t,n={})=>{!1!==n.lengthDelimited&&t.fork(),null!=e.Type&&(t.uint32(8),wi.codec().encode(e.Type,t)),null!=e.Data&&(t.uint32(18),t.bytes(e.Data)),!1!==n.lengthDelimited&&t.ldelim()}),((e,t,n={})=>{const r={},o=null==t?e.len:e.pos+t;for(;e.pos<o;){const t=e.uint32();switch(t>>>3){case 1:r.Type=wi.codec().decode(e);break;case 2:r.Data=e.bytes();break;default:e.skipType(7&t)}}return r}))),t),e.encode=t=>(0,Ti.m)(t,e.codec()),e.decode=(t,n)=>(0,Ci.Y)(t,e.codec(),n)}(Si||(Si={}));const Oi=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ii=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Pi=new Uint32Array(64);class Bi extends zr{constructor(){super(64,32,8,!1),this.A=0|Ii[0],this.B=0|Ii[1],this.C=0|Ii[2],this.D=0|Ii[3],this.E=0|Ii[4],this.F=0|Ii[5],this.G=0|Ii[6],this.H=0|Ii[7]}get(){const{A:e,B:t,C:n,D:r,E:o,F:i,G:s,H:a}=this;return[e,t,n,r,o,i,s,a]}set(e,t,n,r,o,i,s,a){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|o,this.F=0|i,this.G=0|s,this.H=0|a}process(e,t){for(let f=0;f<16;f++,t+=4)Pi[f]=e.getUint32(t,!1);for(let f=16;f<64;f++){const e=Pi[f-15],t=Pi[f-2],n=gt(e,7)^gt(e,18)^e>>>3,r=gt(t,17)^gt(t,19)^t>>>10;Pi[f]=r+Pi[f-7]+n+Pi[f-16]|0}let{A:n,B:r,C:o,D:i,E:s,F:a,G:u,H:l}=this;for(let f=0;f<64;f++){const e=l+(gt(s,6)^gt(s,11)^gt(s,25))+((c=s)&a^~c&u)+Oi[f]+Pi[f]|0,t=(gt(n,2)^gt(n,13)^gt(n,22))+Hr(n,r,o)|0;l=u,u=a,a=s,s=i+e|0,i=o,o=r,r=n,n=e+t|0}var c;n=n+this.A|0,r=r+this.B|0,o=o+this.C|0,i=i+this.D|0,s=s+this.E|0,a=a+this.F|0,u=u+this.G|0,l=l+this.H|0,this.set(n,r,o,i,s,a,u,l)}roundClean(){Pi.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Di=bt((()=>new Bi));var Ni=n(26382).Buffer;class Fi{static isArrayBuffer(e){return"[object ArrayBuffer]"===Object.prototype.toString.call(e)}static toArrayBuffer(e){return this.isArrayBuffer(e)?e:e.byteLength===e.buffer.byteLength||0===e.byteOffset&&e.byteLength===e.buffer.byteLength?e.buffer:this.toUint8Array(e.buffer).slice(e.byteOffset,e.byteOffset+e.byteLength).buffer}static toUint8Array(e){return this.toView(e,Uint8Array)}static toView(e,t){if(e.constructor===t)return e;if(this.isArrayBuffer(e))return new t(e);if(this.isArrayBufferView(e))return new t(e.buffer,e.byteOffset,e.byteLength);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(e){return this.isArrayBufferView(e)||this.isArrayBuffer(e)}static isArrayBufferView(e){return ArrayBuffer.isView(e)||e&&this.isArrayBuffer(e.buffer)}static isEqual(e,t){const n=Fi.toUint8Array(e),r=Fi.toUint8Array(t);if(n.length!==r.byteLength)return!1;for(let o=0;o<n.length;o++)if(n[o]!==r[o])return!1;return!0}static concat(...e){let t;t=!Array.isArray(e[0])||e[1]instanceof Function?Array.isArray(e[0])&&e[1]instanceof Function?e[0]:e[e.length-1]instanceof Function?e.slice(0,e.length-1):e:e[0];let n=0;for(const i of t)n+=i.byteLength;const r=new Uint8Array(n);let o=0;for(const i of t){const e=this.toUint8Array(i);r.set(e,o),o+=e.length}return e[e.length-1]instanceof Function?this.toView(r,e[e.length-1]):r.buffer}}const _i="string",Li=/^[0-9a-f]+$/i,Ri=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/,ji=/^[a-zA-Z0-9-_]+$/;class Mi{static fromString(e){const t=unescape(encodeURIComponent(e)),n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n.buffer}static toString(e){const t=Fi.toUint8Array(e);let n="";for(let r=0;r<t.length;r++)n+=String.fromCharCode(t[r]);return decodeURIComponent(escape(n))}}class Ui{static toString(e,t=!1){const n=Fi.toArrayBuffer(e),r=new DataView(n);let o="";for(let i=0;i<n.byteLength;i+=2){const e=r.getUint16(i,t);o+=String.fromCharCode(e)}return o}static fromString(e,t=!1){const n=new ArrayBuffer(2*e.length),r=new DataView(n);for(let o=0;o<e.length;o++)r.setUint16(2*o,e.charCodeAt(o),t);return n}}class Hi{static isHex(e){return typeof e===_i&&Li.test(e)}static isBase64(e){return typeof e===_i&&Ri.test(e)}static isBase64Url(e){return typeof e===_i&&ji.test(e)}static ToString(e,t="utf8"){const n=Fi.toUint8Array(e);switch(t.toLowerCase()){case"utf8":return this.ToUtf8String(n);case"binary":return this.ToBinary(n);case"hex":return this.ToHex(n);case"base64":return this.ToBase64(n);case"base64url":return this.ToBase64Url(n);case"utf16le":return Ui.toString(n,!0);case"utf16":case"utf16be":return Ui.toString(n);default:throw new Error(`Unknown type of encoding '${t}'`)}}static FromString(e,t="utf8"){if(!e)return new ArrayBuffer(0);switch(t.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);case"utf16le":return Ui.fromString(e,!0);case"utf16":case"utf16be":return Ui.fromString(e);default:throw new Error(`Unknown type of encoding '${t}'`)}}static ToBase64(e){const t=Fi.toUint8Array(e);if("undefined"!==typeof btoa){const e=this.ToString(t,"binary");return btoa(e)}return Ni.from(t).toString("base64")}static FromBase64(e){const t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!Hi.isBase64(t))throw new TypeError("Argument 'base64Text' is not Base64 encoded");return"undefined"!==typeof atob?this.FromBinary(atob(t)):new Uint8Array(Ni.from(t,"base64")).buffer}static FromBase64Url(e){const t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!Hi.isBase64Url(t))throw new TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(t.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(e,t=Hi.DEFAULT_UTF8_ENCODING){switch(t){case"ascii":return this.FromBinary(e);case"utf8":return Mi.fromString(e);case"utf16":case"utf16be":return Ui.fromString(e);case"utf16le":case"usc2":return Ui.fromString(e,!0);default:throw new Error(`Unknown type of encoding '${t}'`)}}static ToUtf8String(e,t=Hi.DEFAULT_UTF8_ENCODING){switch(t){case"ascii":return this.ToBinary(e);case"utf8":return Mi.toString(e);case"utf16":case"utf16be":return Ui.toString(e);case"utf16le":case"usc2":return Ui.toString(e,!0);default:throw new Error(`Unknown type of encoding '${t}'`)}}static FromBinary(e){const t=e.length,n=new Uint8Array(t);for(let r=0;r<t;r++)n[r]=e.charCodeAt(r);return n.buffer}static ToBinary(e){const t=Fi.toUint8Array(e);let n="";for(let r=0;r<t.length;r++)n+=String.fromCharCode(t[r]);return n}static ToHex(e){const t=Fi.toUint8Array(e);let n="";const r=t.length;for(let o=0;o<r;o++){const e=t[o];e<16&&(n+="0"),n+=e.toString(16)}return n}static FromHex(e){let t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!Hi.isHex(t))throw new TypeError("Argument 'hexString' is not HEX encoded");t.length%2&&(t=`0${t}`);const n=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2){const e=t.slice(r,r+2);n[r/2]=parseInt(e,16)}return n.buffer}static ToUtf16String(e,t=!1){return Ui.toString(e,t)}static FromUtf16String(e,t=!1){return Ui.fromString(e,t)}static Base64Padding(e){const t=4-e.length%4;if(t<4)for(let n=0;n<t;n++)e+="=";return e}static formatString(e){return(null===e||void 0===e?void 0:e.replace(/[\n\r\t ]/g,""))||""}}function zi(e,t){let n=0;if(1===e.length)return e[0];for(let r=e.length-1;r>=0;r--)n+=e[e.length-1-r]*Math.pow(2,t*r);return n}function Vi(e,t,n=-1){const r=n;let o=e,i=0,s=Math.pow(2,t);for(let a=1;a<8;a++){if(e<s){let e;if(r<0)e=new ArrayBuffer(a),i=a;else{if(r<a)return new ArrayBuffer(0);e=new ArrayBuffer(r),i=r}const n=new Uint8Array(e);for(let r=a-1;r>=0;r--){const e=Math.pow(2,r*t);n[i-r-1]=Math.floor(o/e),o-=n[i-r-1]*e}return e}s*=Math.pow(2,t)}return new ArrayBuffer(0)}function $i(...e){let t=0,n=0;for(const i of e)t+=i.length;const r=new ArrayBuffer(t),o=new Uint8Array(r);for(const i of e)o.set(i,n),n+=i.length;return o}function Gi(){const e=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){const t=255===e[0]&&128&e[1],n=0===e[0]&&0===(128&e[1]);(t||n)&&this.warnings.push("Needlessly long format")}const t=new ArrayBuffer(this.valueHex.byteLength),n=new Uint8Array(t);for(let s=0;s<this.valueHex.byteLength;s++)n[s]=0;n[0]=128&e[0];const r=zi(n,8),o=new ArrayBuffer(this.valueHex.byteLength),i=new Uint8Array(o);for(let s=0;s<this.valueHex.byteLength;s++)i[s]=e[s];i[0]&=127;return zi(i,8)-r}function Wi(e,t){const n=e.toString(10);if(t<n.length)return"";const r=t-n.length,o=new Array(r);for(let i=0;i<r;i++)o[i]="0";return o.join("").concat(n)}function qi(){if("undefined"===typeof BigInt)throw new Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function Ki(e){let t=0,n=0;for(let o=0;o<e.length;o++){t+=e[o].byteLength}const r=new Uint8Array(t);for(let o=0;o<e.length;o++){const t=e[o];r.set(new Uint8Array(t),n),n+=t.byteLength}return r.buffer}function Yi(e,t,n,r){return t instanceof Uint8Array?t.byteLength?n<0?(e.error="Wrong parameter: inputOffset less than zero",!1):r<0?(e.error="Wrong parameter: inputLength less than zero",!1):!(t.byteLength-n-r<0)||(e.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1):(e.error="Wrong parameter: inputBuffer has zero length",!1):(e.error="Wrong parameter: inputBuffer must be 'Uint8Array'",!1)}Hi.DEFAULT_UTF8_ENCODING="utf8";class Zi{constructor(){this.items=[]}write(e){this.items.push(e)}final(){return Ki(this.items)}}const Ji=[new Uint8Array([1])],Xi="0123456789",Qi="",es=new ArrayBuffer(0),ts=new Uint8Array(0),ns="EndOfContent",rs="OCTET STRING",os="BIT STRING";function is(e){var t;return(t=class extends e{constructor(...e){var t;super(...e);const n=e[0]||{};this.isHexOnly=null!==(t=n.isHexOnly)&&void 0!==t&&t,this.valueHexView=n.valueHex?Fi.toUint8Array(n.valueHex):ts}get valueHex(){return this.valueHexView.slice().buffer}set valueHex(e){this.valueHexView=new Uint8Array(e)}fromBER(e,t,n){const r=e instanceof ArrayBuffer?new Uint8Array(e):e;if(!Yi(this,r,t,n))return-1;const o=t+n;return this.valueHexView=r.subarray(t,o),this.valueHexView.length?(this.blockLength=n,o):(this.warnings.push("Zero buffer length"),t)}toBER(e=!1){return this.isHexOnly?e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer:(this.error="Flag 'isHexOnly' is not set, abort",es)}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:Hi.ToHex(this.valueHexView)}}}).NAME="hexBlock",t}class ss{constructor({blockLength:e=0,error:t="",warnings:n=[],valueBeforeDecode:r=ts}={}){this.blockLength=e,this.error=t,this.warnings=n,this.valueBeforeDecodeView=Fi.toUint8Array(r)}static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(e){this.valueBeforeDecodeView=new Uint8Array(e)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:Hi.ToHex(this.valueBeforeDecodeView)}}}ss.NAME="baseBlock";class as extends ss{fromBER(e,t,n){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(e,t){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}}as.NAME="valueBlock";class us extends(is(ss)){constructor({idBlock:e={}}={}){var t,n,r,o;super(),e?(this.isHexOnly=null!==(t=e.isHexOnly)&&void 0!==t&&t,this.valueHexView=e.valueHex?Fi.toUint8Array(e.valueHex):ts,this.tagClass=null!==(n=e.tagClass)&&void 0!==n?n:-1,this.tagNumber=null!==(r=e.tagNumber)&&void 0!==r?r:-1,this.isConstructed=null!==(o=e.isConstructed)&&void 0!==o&&o):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}toBER(e=!1){let t=0;switch(this.tagClass){case 1:t|=0;break;case 2:t|=64;break;case 3:t|=128;break;case 4:t|=192;break;default:return this.error="Unknown tag class",es}if(this.isConstructed&&(t|=32),this.tagNumber<31&&!this.isHexOnly){const n=new Uint8Array(1);if(!e){let e=this.tagNumber;e&=31,t|=e,n[0]=t}return n.buffer}if(!this.isHexOnly){const n=Vi(this.tagNumber,7),r=new Uint8Array(n),o=n.byteLength,i=new Uint8Array(o+1);if(i[0]=31|t,!e){for(let e=0;e<o-1;e++)i[e+1]=128|r[e];i[o]=r[o-1]}return i.buffer}const n=new Uint8Array(this.valueHexView.byteLength+1);if(n[0]=31|t,!e){const e=this.valueHexView;for(let t=0;t<e.length-1;t++)n[t+1]=128|e[t];n[this.valueHexView.byteLength]=e[e.length-1]}return n.buffer}fromBER(e,t,n){const r=Fi.toUint8Array(e);if(!Yi(this,r,t,n))return-1;const o=r.subarray(t,t+n);if(0===o.length)return this.error="Zero buffer length",-1;switch(192&o[0]){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=32===(32&o[0]),this.isHexOnly=!1;const i=31&o[0];if(31!==i)this.tagNumber=i,this.blockLength=1;else{let e=1,t=this.valueHexView=new Uint8Array(255),n=255;for(;128&o[e];){if(t[e-1]=127&o[e],e++,e>=o.length)return this.error="End of input reached before message was fully decoded",-1;if(e===n){n+=255;const e=new Uint8Array(n);for(let n=0;n<t.length;n++)e[n]=t[n];t=this.valueHexView=new Uint8Array(n)}}this.blockLength=e+1,t[e-1]=127&o[e];const r=new Uint8Array(e);for(let o=0;o<e;o++)r[o]=t[o];t=this.valueHexView=new Uint8Array(e),t.set(r),this.blockLength<=9?this.tagNumber=zi(t,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(1===this.tagClass&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return t+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}}us.NAME="identificationBlock";class ls extends ss{constructor({lenBlock:e={}}={}){var t,n,r;super(),this.isIndefiniteForm=null!==(t=e.isIndefiniteForm)&&void 0!==t&&t,this.longFormUsed=null!==(n=e.longFormUsed)&&void 0!==n&&n,this.length=null!==(r=e.length)&&void 0!==r?r:0}fromBER(e,t,n){const r=Fi.toUint8Array(e);if(!Yi(this,r,t,n))return-1;const o=r.subarray(t,t+n);if(0===o.length)return this.error="Zero buffer length",-1;if(255===o[0])return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=128===o[0],this.isIndefiniteForm)return this.blockLength=1,t+this.blockLength;if(this.longFormUsed=!!(128&o[0]),!1===this.longFormUsed)return this.length=o[0],this.blockLength=1,t+this.blockLength;const i=127&o[0];if(i>8)return this.error="Too big integer",-1;if(i+1>o.length)return this.error="End of input reached before message was fully decoded",-1;const s=t+1,a=r.subarray(s,s+i);return 0===a[i-1]&&this.warnings.push("Needlessly long encoded length"),this.length=zi(a,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=i+1,t+this.blockLength}toBER(e=!1){let t,n;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return t=new ArrayBuffer(1),!1===e&&(n=new Uint8Array(t),n[0]=128),t;if(this.longFormUsed){const r=Vi(this.length,8);if(r.byteLength>127)return this.error="Too big length",es;if(t=new ArrayBuffer(r.byteLength+1),e)return t;const o=new Uint8Array(r);n=new Uint8Array(t),n[0]=128|r.byteLength;for(let e=0;e<r.byteLength;e++)n[e+1]=o[e];return t}return t=new ArrayBuffer(1),!1===e&&(n=new Uint8Array(t),n[0]=this.length),t}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}}ls.NAME="lengthBlock";const cs={};class fs extends ss{constructor({name:e="",optional:t=!1,primitiveSchema:n,...r}={},o){super(r),this.name=e,this.optional=t,n&&(this.primitiveSchema=n),this.idBlock=new us(r),this.lenBlock=new ls(r),this.valueBlock=o?new o(r):new as(r)}fromBER(e,t,n){const r=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return-1===r?(this.error=this.valueBlock.error,r):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),r)}toBER(e,t){const n=t||new Zi;t||hs(this);const r=this.idBlock.toBER(e);if(n.write(r),this.lenBlock.isIndefiniteForm)n.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(e,n),n.write(new ArrayBuffer(2));else{const t=this.valueBlock.toBER(e);this.lenBlock.length=t.byteLength;const r=this.lenBlock.toBER(e);n.write(r),n.write(t)}return t?es:n.final()}toJSON(){const e={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};return this.primitiveSchema&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}toString(e="ascii"){return"ascii"===e?this.onAsciiEncoding():Hi.ToHex(this.toBER())}onAsciiEncoding(){return`${this.constructor.NAME} : ${Hi.ToHex(this.valueBlock.valueBeforeDecodeView)}`}isEqual(e){if(this===e)return!0;if(!(e instanceof this.constructor))return!1;return function(e,t){if(e.byteLength!==t.byteLength)return!1;const n=new Uint8Array(e),r=new Uint8Array(t);for(let o=0;o<n.length;o++)if(n[o]!==r[o])return!1;return!0}(this.toBER(),e.toBER())}}function hs(e){if(e instanceof cs.Constructed)for(const t of e.valueBlock.value)hs(t)&&(e.lenBlock.isIndefiniteForm=!0);return!!e.lenBlock.isIndefiniteForm}fs.NAME="BaseBlock";class ds extends fs{constructor({value:e="",...t}={},n){super(t,n),e&&this.fromString(e)}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}fromBER(e,t,n){const r=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return-1===r?(this.error=this.valueBlock.error,r):(this.fromBuffer(this.valueBlock.valueHexView),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),r)}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}}ds.NAME="BaseStringBlock";class ps extends(is(as)){constructor({isHexOnly:e=!0,...t}={}){super(t),this.isHexOnly=e}}var gs,ys,ms,bs,vs,ws,Es,As,Ss,Cs,Ts,ks,xs,Os,Is,Ps,Bs,Ds,Ns,Fs,_s,Ls,Rs,js,Ms,Us,Hs,zs,Vs,$s,Gs,Ws,qs;ps.NAME="PrimitiveValueBlock";class Ks extends fs{constructor(e={}){super(e,ps),this.idBlock.isConstructed=!1}}function Ys(e,t=0,n=e.length){const r=t;let o=new fs({},as);const i=new ss;if(!Yi(i,e,t,n))return o.error=i.error,{offset:-1,result:o};if(!e.subarray(t,t+n).length)return o.error="Zero buffer length",{offset:-1,result:o};let s=o.idBlock.fromBER(e,t,n);if(o.idBlock.warnings.length&&o.warnings.concat(o.idBlock.warnings),-1===s)return o.error=o.idBlock.error,{offset:-1,result:o};if(t=s,n-=o.idBlock.blockLength,s=o.lenBlock.fromBER(e,t,n),o.lenBlock.warnings.length&&o.warnings.concat(o.lenBlock.warnings),-1===s)return o.error=o.lenBlock.error,{offset:-1,result:o};if(t=s,n-=o.lenBlock.blockLength,!o.idBlock.isConstructed&&o.lenBlock.isIndefiniteForm)return o.error="Indefinite length form used for primitive encoding form",{offset:-1,result:o};let a=fs;if(1===o.idBlock.tagClass){if(o.idBlock.tagNumber>=37&&!1===o.idBlock.isHexOnly)return o.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:o};switch(o.idBlock.tagNumber){case 0:if(o.idBlock.isConstructed&&o.lenBlock.length>0)return o.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:o};a=cs.EndOfContent;break;case 1:a=cs.Boolean;break;case 2:a=cs.Integer;break;case 3:a=cs.BitString;break;case 4:a=cs.OctetString;break;case 5:a=cs.Null;break;case 6:a=cs.ObjectIdentifier;break;case 10:a=cs.Enumerated;break;case 12:a=cs.Utf8String;break;case 13:a=cs.RelativeObjectIdentifier;break;case 14:a=cs.TIME;break;case 15:return o.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:o};case 16:a=cs.Sequence;break;case 17:a=cs.Set;break;case 18:a=cs.NumericString;break;case 19:a=cs.PrintableString;break;case 20:a=cs.TeletexString;break;case 21:a=cs.VideotexString;break;case 22:a=cs.IA5String;break;case 23:a=cs.UTCTime;break;case 24:a=cs.GeneralizedTime;break;case 25:a=cs.GraphicString;break;case 26:a=cs.VisibleString;break;case 27:a=cs.GeneralString;break;case 28:a=cs.UniversalString;break;case 29:a=cs.CharacterString;break;case 30:a=cs.BmpString;break;case 31:a=cs.DATE;break;case 32:a=cs.TimeOfDay;break;case 33:a=cs.DateTime;break;case 34:a=cs.Duration;break;default:{const e=o.idBlock.isConstructed?new cs.Constructed:new cs.Primitive;e.idBlock=o.idBlock,e.lenBlock=o.lenBlock,e.warnings=o.warnings,o=e}}}else a=o.idBlock.isConstructed?cs.Constructed:cs.Primitive;return o=function(e,t){if(e instanceof t)return e;const n=new t;return n.idBlock=e.idBlock,n.lenBlock=e.lenBlock,n.warnings=e.warnings,n.valueBeforeDecodeView=e.valueBeforeDecodeView,n}(o,a),s=o.fromBER(e,t,o.lenBlock.isIndefiniteForm?n:o.lenBlock.length),o.valueBeforeDecodeView=e.subarray(r,r+o.blockLength),{offset:s,result:o}}gs=Ks,cs.Primitive=gs,Ks.NAME="PRIMITIVE";class Zs extends as{constructor({value:e=[],isIndefiniteForm:t=!1,...n}={}){super(n),this.value=e,this.isIndefiniteForm=t}fromBER(e,t,n){const r=Fi.toUint8Array(e);if(!Yi(this,r,t,n))return-1;if(this.valueBeforeDecodeView=r.subarray(t,t+n),0===this.valueBeforeDecodeView.length)return this.warnings.push("Zero buffer length"),t;let o=t;for(;i=this.isIndefiniteForm,s=n,(i?1:s)>0;){const e=Ys(r,o,n);if(-1===e.offset)return this.error=e.result.error,this.warnings.concat(e.result.warnings),-1;if(o=e.offset,this.blockLength+=e.result.blockLength,n-=e.result.blockLength,this.value.push(e.result),this.isIndefiniteForm&&e.result.constructor.NAME===ns)break}var i,s;return this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.NAME===ns?this.value.pop():this.warnings.push("No EndOfContent block encoded")),o}toBER(e,t){const n=t||new Zi;for(let r=0;r<this.value.length;r++)this.value[r].toBER(e,n);return t?es:n.final()}toJSON(){const e={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(const t of this.value)e.value.push(t.toJSON());return e}}Zs.NAME="ConstructedValueBlock";class Js extends fs{constructor(e={}){super(e,Zs),this.idBlock.isConstructed=!0}fromBER(e,t,n){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;const r=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return-1===r?(this.error=this.valueBlock.error,r):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),r)}onAsciiEncoding(){const e=[];for(const n of this.valueBlock.value)e.push(n.toString("ascii").split("\n").map((e=>`  ${e}`)).join("\n"));const t=3===this.idBlock.tagClass?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return e.length?`${t} :\n${e.join("\n")}`:`${t} :`}}ys=Js,cs.Constructed=ys,Js.NAME="CONSTRUCTED";class Xs extends as{fromBER(e,t,n){return t}toBER(e){return es}}Xs.override="EndOfContentValueBlock";class Qs extends fs{constructor(e={}){super(e,Xs),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}}ms=Qs,cs.EndOfContent=ms,Qs.NAME=ns;class ea extends fs{constructor(e={}){super(e,as),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}fromBER(e,t,n){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=n,t+n>e.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):t+n}toBER(e,t){const n=new ArrayBuffer(2);if(!e){const e=new Uint8Array(n);e[0]=5,e[1]=0}return t&&t.write(n),n}onAsciiEncoding(){return`${this.constructor.NAME}`}}bs=ea,cs.Null=bs,ea.NAME="NULL";class ta extends(is(as)){constructor({value:e,...t}={}){super(t),t.valueHex?this.valueHexView=Fi.toUint8Array(t.valueHex):this.valueHexView=new Uint8Array(1),e&&(this.value=e)}get value(){for(const e of this.valueHexView)if(e>0)return!0;return!1}set value(e){this.valueHexView[0]=e?255:0}fromBER(e,t,n){const r=Fi.toUint8Array(e);return Yi(this,r,t,n)?(this.valueHexView=r.subarray(t,t+n),n>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,Gi.call(this),this.blockLength=n,t+n):-1}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}}ta.NAME="BooleanValueBlock";class na extends fs{constructor(e={}){super(e,ta),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}}vs=na,cs.Boolean=vs,na.NAME="BOOLEAN";class ra extends(is(Zs)){constructor({isConstructed:e=!1,...t}={}){super(t),this.isConstructed=e}fromBER(e,t,n){let r=0;if(this.isConstructed){if(this.isHexOnly=!1,r=Zs.prototype.fromBER.call(this,e,t,n),-1===r)return r;for(let e=0;e<this.value.length;e++){const t=this.value[e].constructor.NAME;if(t===ns){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(t!==rs)return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,r=super.fromBER(e,t,n),this.blockLength=n;return r}toBER(e,t){return this.isConstructed?Zs.prototype.toBER.call(this,e,t):e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}}ra.NAME="OctetStringValueBlock";class oa extends fs{constructor({idBlock:e={},lenBlock:t={},...n}={}){var r,o;null!==(r=n.isConstructed)&&void 0!==r||(n.isConstructed=!!(null===(o=n.value)||void 0===o?void 0:o.length)),super({idBlock:{isConstructed:n.isConstructed,...e},lenBlock:{...t,isIndefiniteForm:!!n.isIndefiniteForm},...n},ra),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(e,t,n){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,0===n)return 0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),t;if(!this.valueBlock.isConstructed){const o=(e instanceof ArrayBuffer?new Uint8Array(e):e).subarray(t,t+n);try{if(o.byteLength){const e=Ys(o,0,o.byteLength);-1!==e.offset&&e.offset===n&&(this.valueBlock.value=[e.result])}}catch(r){}}return super.fromBER(e,t,n)}onAsciiEncoding(){return this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length?Js.prototype.onAsciiEncoding.call(this):`${this.constructor.NAME} : ${Hi.ToHex(this.valueBlock.valueHexView)}`}getValue(){if(!this.idBlock.isConstructed)return this.valueBlock.valueHexView.slice().buffer;const e=[];for(const t of this.valueBlock.value)t instanceof oa&&e.push(t.valueBlock.valueHexView);return Fi.concat(e)}}ws=oa,cs.OctetString=ws,oa.NAME=rs;class ia extends(is(Zs)){constructor({unusedBits:e=0,isConstructed:t=!1,...n}={}){super(n),this.unusedBits=e,this.isConstructed=t,this.blockLength=this.valueHexView.byteLength}fromBER(e,t,n){if(!n)return t;let r=-1;if(this.isConstructed){if(r=Zs.prototype.fromBER.call(this,e,t,n),-1===r)return r;for(const e of this.value){const t=e.constructor.NAME;if(t===ns){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(t!==os)return this.error="BIT STRING may consists of BIT STRINGs only",-1;const n=e.valueBlock;if(this.unusedBits>0&&n.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;this.unusedBits=n.unusedBits}return r}const o=Fi.toUint8Array(e);if(!Yi(this,o,t,n))return-1;const i=o.subarray(t,t+n);if(this.unusedBits=i[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){const e=i.subarray(1);try{if(e.byteLength){const t=Ys(e,0,e.byteLength);-1!==t.offset&&t.offset===n-1&&(this.value=[t.result])}}catch(s){}}return this.valueHexView=i.subarray(1),this.blockLength=i.length,t+n}toBER(e,t){if(this.isConstructed)return Zs.prototype.toBER.call(this,e,t);if(e)return new ArrayBuffer(this.valueHexView.byteLength+1);if(!this.valueHexView.byteLength)return es;const n=new Uint8Array(this.valueHexView.length+1);return n[0]=this.unusedBits,n.set(this.valueHexView,1),n.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unused