/*! For license information please see 852.eaff4c8d.chunk.js.LICENSE.txt */
(self.webpackChunkipfs_webui=self.webpackChunkipfs_webui||[]).push([[852],{4053:(t,e,n)=>{var r=n(62285);t.exports=function(){return"undefined"!==typeof window&&"object"===typeof window.process&&"renderer"===window.process.type||(!("undefined"===typeof r||"object"!==typeof r.versions||!r.versions.electron)||"object"===typeof navigator&&"string"===typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}},8275:(t,e,n)=>{"use strict";var r=n(26382).Buffer;class o{static isArrayBuffer(t){return"[object ArrayBuffer]"===Object.prototype.toString.call(t)}static toArrayBuffer(t){return this.isArrayBuffer(t)?t:t.byteLength===t.buffer.byteLength||0===t.byteOffset&&t.byteLength===t.buffer.byteLength?t.buffer:this.toUint8Array(t.buffer).slice(t.byteOffset,t.byteOffset+t.byteLength).buffer}static toUint8Array(t){return this.toView(t,Uint8Array)}static toView(t,e){if(t.constructor===e)return t;if(this.isArrayBuffer(t))return new e(t);if(this.isArrayBufferView(t))return new e(t.buffer,t.byteOffset,t.byteLength);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(t){return this.isArrayBufferView(t)||this.isArrayBuffer(t)}static isArrayBufferView(t){return ArrayBuffer.isView(t)||t&&this.isArrayBuffer(t.buffer)}static isEqual(t,e){const n=o.toUint8Array(t),r=o.toUint8Array(e);if(n.length!==r.byteLength)return!1;for(let o=0;o<n.length;o++)if(n[o]!==r[o])return!1;return!0}static concat(){let t;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t=!Array.isArray(n[0])||n[1]instanceof Function?Array.isArray(n[0])&&n[1]instanceof Function?n[0]:n[n.length-1]instanceof Function?n.slice(0,n.length-1):n:n[0];let o=0;for(const a of t)o+=a.byteLength;const i=new Uint8Array(o);let s=0;for(const a of t){const t=this.toUint8Array(a);i.set(t,s),s+=t.length}return n[n.length-1]instanceof Function?this.toView(i,n[n.length-1]):i.buffer}}const i="string",s=/^[0-9a-f]+$/i,a=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/,u=/^[a-zA-Z0-9-_]+$/;class c{static fromString(t){const e=unescape(encodeURIComponent(t)),n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n.buffer}static toString(t){const e=o.toUint8Array(t);let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return decodeURIComponent(escape(n))}}class l{static toString(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=o.toArrayBuffer(t),r=new DataView(n);let i="";for(let o=0;o<n.byteLength;o+=2){const t=r.getUint16(o,e);i+=String.fromCharCode(t)}return i}static fromString(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=new ArrayBuffer(2*t.length),r=new DataView(n);for(let o=0;o<t.length;o++)r.setUint16(2*o,t.charCodeAt(o),e);return n}}class h{static isHex(t){return typeof t===i&&s.test(t)}static isBase64(t){return typeof t===i&&a.test(t)}static isBase64Url(t){return typeof t===i&&u.test(t)}static ToString(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";const n=o.toUint8Array(t);switch(e.toLowerCase()){case"utf8":return this.ToUtf8String(n);case"binary":return this.ToBinary(n);case"hex":return this.ToHex(n);case"base64":return this.ToBase64(n);case"base64url":return this.ToBase64Url(n);case"utf16le":return l.toString(n,!0);case"utf16":case"utf16be":return l.toString(n);default:throw new Error("Unknown type of encoding '".concat(e,"'"))}}static FromString(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";if(!t)return new ArrayBuffer(0);switch(e.toLowerCase()){case"utf8":return this.FromUtf8String(t);case"binary":return this.FromBinary(t);case"hex":return this.FromHex(t);case"base64":return this.FromBase64(t);case"base64url":return this.FromBase64Url(t);case"utf16le":return l.fromString(t,!0);case"utf16":case"utf16be":return l.fromString(t);default:throw new Error("Unknown type of encoding '".concat(e,"'"))}}static ToBase64(t){const e=o.toUint8Array(t);if("undefined"!==typeof btoa){const t=this.ToString(e,"binary");return btoa(t)}return r.from(e).toString("base64")}static FromBase64(t){const e=this.formatString(t);if(!e)return new ArrayBuffer(0);if(!h.isBase64(e))throw new TypeError("Argument 'base64Text' is not Base64 encoded");return"undefined"!==typeof atob?this.FromBinary(atob(e)):new Uint8Array(r.from(e,"base64")).buffer}static FromBase64Url(t){const e=this.formatString(t);if(!e)return new ArrayBuffer(0);if(!h.isBase64Url(e))throw new TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(e.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(t){return this.ToBase64(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.DEFAULT_UTF8_ENCODING;switch(e){case"ascii":return this.FromBinary(t);case"utf8":return c.fromString(t);case"utf16":case"utf16be":return l.fromString(t);case"utf16le":case"usc2":return l.fromString(t,!0);default:throw new Error("Unknown type of encoding '".concat(e,"'"))}}static ToUtf8String(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.DEFAULT_UTF8_ENCODING;switch(e){case"ascii":return this.ToBinary(t);case"utf8":return c.toString(t);case"utf16":case"utf16be":return l.toString(t);case"utf16le":case"usc2":return l.toString(t,!0);default:throw new Error("Unknown type of encoding '".concat(e,"'"))}}static FromBinary(t){const e=t.length,n=new Uint8Array(e);for(let r=0;r<e;r++)n[r]=t.charCodeAt(r);return n.buffer}static ToBinary(t){const e=o.toUint8Array(t);let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return n}static ToHex(t){const e=o.toUint8Array(t);let n="";const r=e.length;for(let o=0;o<r;o++){const t=e[o];t<16&&(n+="0"),n+=t.toString(16)}return n}static FromHex(t){let e=this.formatString(t);if(!e)return new ArrayBuffer(0);if(!h.isHex(e))throw new TypeError("Argument 'hexString' is not HEX encoded");e.length%2&&(e="0".concat(e));const n=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){const t=e.slice(r,r+2);n[r/2]=parseInt(t,16)}return n.buffer}static ToUtf16String(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return l.toString(t,e)}static FromUtf16String(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return l.fromString(t,e)}static Base64Padding(t){const e=4-t.length%4;if(e<4)for(let n=0;n<e;n++)t+="=";return t}static formatString(t){return(null===t||void 0===t?void 0:t.replace(/[\n\r\t ]/g,""))||""}}h.DEFAULT_UTF8_ENCODING="utf8",e._H=o,e.U$=h},18354:(t,e,n)=>{"use strict";function r(t){var e,n,r,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(n&&null!=(e=t[n]))return e.call(t);if(r&&null!=(e=t[r]))return new o(e.call(t));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function o(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then((function(t){return{value:t,done:e}}))}return o=function(t){this.s=t,this.n=t.next},o.prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var n=this.s.return;return void 0===n?Promise.resolve({value:t,done:!0}):e(n.apply(this.s,arguments))},throw:function(t){var n=this.s.return;return void 0===n?Promise.reject(t):e(n.apply(this.s,arguments))}},new o(t)}n.d(e,{A:()=>r})},54823:t=>{"use strict";function e(t,e){for(const n in e)Object.defineProperty(t,n,{value:e[n],enumerable:!0,configurable:!0});return t}t.exports=function(t,n,r){if(!t||"string"===typeof t)throw new TypeError("Please pass an Error to err-code");r||(r={}),"object"===typeof n&&(r=n,n=""),n&&(r.code=n);try{return e(t,r)}catch(o){r.message=t.message,r.stack=t.stack;const n=function(){};n.prototype=Object.create(Object.getPrototypeOf(t));return e(new n,r)}}},98852:(t,e,n)=>{"use strict";n.d(e,{create:()=>py});var r={};n.r(r),n.d(r,{code:()=>$t,decode:()=>Kt,decodeOptions:()=>zt,encode:()=>qt,encodeOptions:()=>Vt,name:()=>Gt,toByteView:()=>jt});var o={};n.r(o),n.d(o,{code:()=>Sn,decode:()=>In,encode:()=>Fn,format:()=>Nn,name:()=>xn,parse:()=>Un,stringify:()=>Nn});var i={};n.r(i),n.d(i,{code:()=>sr,createLink:()=>or,createNode:()=>rr,decode:()=>ur,encode:()=>ar,name:()=>ir,prepare:()=>er,validate:()=>nr});var s={};n.r(s),n.d(s,{code:()=>Ko,decode:()=>Xo,encode:()=>Yo,name:()=>qo,toGeneral:()=>Jo});var a={};function u(t,e){this.v=t,this.k=e}function c(t){return function(){return new l(t.apply(this,arguments))}}function l(t){var e,n;function r(e,n){try{var i=t[e](n),s=i.value,a=s instanceof u;Promise.resolve(a?s.v:s).then((function(n){if(a){var u="return"===e?"return":"next";if(!s.k||n.done)return r(u,n);n=t[u](n).value}o(i.done?"return":"normal",n)}),(function(t){r("throw",t)}))}catch(t){o("throw",t)}}function o(t,o){switch(t){case"return":e.resolve({value:o,done:!0});break;case"throw":e.reject(o);break;default:e.resolve({value:o,done:!1})}(e=e.next)?r(e.key,e.arg):n=null}this._invoke=function(t,o){return new Promise((function(i,s){var a={key:t,arg:o,resolve:i,reject:s,next:null};n?n=n.next=a:(e=n=a,r(t,o))}))},"function"!=typeof t.return&&(this.return=void 0)}n.r(a),n.d(a,{aK:()=>ba,e8:()=>oa,DO:()=>ra,dJ:()=>Aa,OG:()=>Ea,My:()=>sa,Ph:()=>fa,lX:()=>da,Id:()=>wa,fg:()=>ka,qj:()=>ya,aT:()=>ha,r4:()=>va,aY:()=>na,x:()=>Sa,lq:()=>ga,z:()=>pa,zW:()=>aa,Q5:()=>xa}),l.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},l.prototype.next=function(t){return this._invoke("next",t)},l.prototype.throw=function(t){return this._invoke("throw",t)},l.prototype.return=function(t){return this._invoke("return",t)};var h=n(45005),f=n(67136),d=n(37566);const g=["string","number","bigint","symbol"],p=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function y(t){if(null===t)return"null";if(void 0===t)return"undefined";if(!0===t||!1===t)return"boolean";const e=typeof t;if(g.includes(e))return e;if("function"===e)return"Function";if(Array.isArray(t))return"Array";if(function(t){return t&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t)}(t))return"Buffer";const n=function(t){const e=Object.prototype.toString.call(t).slice(8,-1);if(p.includes(e))return e;return}(t);return n||"Object"}class w{constructor(t,e,n){this.major=t,this.majorEncoded=t<<5,this.name=e,this.terminal=n}toString(){return"Type[".concat(this.major,"].").concat(this.name)}compare(t){return this.major<t.major?-1:this.major>t.major?1:0}}w.uint=new w(0,"uint",!0),w.negint=new w(1,"negint",!0),w.bytes=new w(2,"bytes",!0),w.string=new w(3,"string",!0),w.array=new w(4,"array",!1),w.map=new w(5,"map",!1),w.tag=new w(6,"tag",!1),w.float=new w(7,"float",!0),w.false=new w(7,"false",!0),w.true=new w(7,"true",!0),w.null=new w(7,"null",!0),w.undefined=new w(7,"undefined",!0),w.break=new w(7,"break",!0);class m{constructor(t,e,n){this.type=t,this.value=e,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return"Token[".concat(this.type,"].").concat(this.value)}}const v=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&"function"===typeof globalThis.Buffer.isBuffer,b=new TextDecoder,A=new TextEncoder;function E(t){return v&&globalThis.Buffer.isBuffer(t)}function D(t){return t instanceof Uint8Array?E(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t:Uint8Array.from(t)}const B=v?(t,e,n)=>n-e>64?globalThis.Buffer.from(t.subarray(e,n)).toString("utf8"):N(t,e,n):(t,e,n)=>n-e>64?b.decode(t.subarray(e,n)):N(t,e,n),k=v?t=>t.length>64?globalThis.Buffer.from(t):I(t):t=>t.length>64?A.encode(t):I(t),C=t=>Uint8Array.from(t),x=v?(t,e,n)=>E(t)?new Uint8Array(t.subarray(e,n)):t.slice(e,n):(t,e,n)=>t.slice(e,n),S=v?(t,e)=>(t=t.map((t=>t instanceof Uint8Array?t:globalThis.Buffer.from(t))),D(globalThis.Buffer.concat(t,e))):(t,e)=>{const n=new Uint8Array(e);let r=0;for(let o of t)r+o.length>n.length&&(o=o.subarray(0,n.length-r)),n.set(o,r),r+=o.length;return n},F=v?t=>globalThis.Buffer.allocUnsafe(t):t=>new Uint8Array(t);function I(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let o=t.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):55296===(64512&o)&&r+1<t.length&&56320===(64512&t.charCodeAt(r+1))?(o=65536+((1023&o)<<10)+(1023&t.charCodeAt(++r)),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e}function N(t,e,n){const r=[];for(;e<n;){const o=t[e];let i=null,s=o>239?4:o>223?3:o>191?2:1;if(e+s<=n){let n,r,a,u;switch(s){case 1:o<128&&(i=o);break;case 2:n=t[e+1],128===(192&n)&&(u=(31&o)<<6|63&n,u>127&&(i=u));break;case 3:n=t[e+1],r=t[e+2],128===(192&n)&&128===(192&r)&&(u=(15&o)<<12|(63&n)<<6|63&r,u>2047&&(u<55296||u>57343)&&(i=u));break;case 4:n=t[e+1],r=t[e+2],a=t[e+3],128===(192&n)&&128===(192&r)&&128===(192&a)&&(u=(15&o)<<18|(63&n)<<12|(63&r)<<6|63&a,u>65535&&u<1114112&&(i=u))}}null===i?(i=65533,s=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|1023&i),r.push(i),e+=s}return function(t){const e=t.length;if(e<=T)return String.fromCharCode.apply(String,t);let n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=T));return n}(r)}const T=4096;class U{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:256;this.chunkSize=t,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),null!==this._initReuseChunk&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(t){let e=this.chunks[this.chunks.length-1];if(this.cursor+t.length<=this.maxCursor+1){const n=e.length-(this.maxCursor-this.cursor)-1;e.set(t,n)}else{if(e){const t=e.length-(this.maxCursor-this.cursor)-1;t<e.length&&(this.chunks[this.chunks.length-1]=e.subarray(0,t),this.maxCursor=this.cursor-1)}t.length<64&&t.length<this.chunkSize?(e=F(this.chunkSize),this.chunks.push(e),this.maxCursor+=e.length,null===this._initReuseChunk&&(this._initReuseChunk=e),e.set(t,0)):(this.chunks.push(t),this.maxCursor+=t.length)}this.cursor+=t.length}toBytes(){let t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(1===this.chunks.length){const n=this.chunks[0];e&&this.cursor>n.length/2?(t=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=x(n,0,this.cursor)}else t=S(this.chunks,this.cursor);return e&&this.reset(),t}}const O="CBOR decode error:",L="CBOR encode error:",R=[];function _(t,e,n){if(t.length-e<n)throw new Error("".concat(O," not enough data for type"))}R[23]=1,R[24]=2,R[25]=3,R[26]=5,R[27]=9;const P=[24,256,65536,4294967296,BigInt("18446744073709551616")];function j(t,e,n){_(t,e,1);const r=t[e];if(!0===n.strict&&r<P[0])throw new Error("".concat(O," integer encoded in more bytes than necessary (strict decode)"));return r}function H(t,e,n){_(t,e,2);const r=t[e]<<8|t[e+1];if(!0===n.strict&&r<P[1])throw new Error("".concat(O," integer encoded in more bytes than necessary (strict decode)"));return r}function V(t,e,n){_(t,e,4);const r=16777216*t[e]+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];if(!0===n.strict&&r<P[2])throw new Error("".concat(O," integer encoded in more bytes than necessary (strict decode)"));return r}function M(t,e,n){_(t,e,8);const r=16777216*t[e]+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3],o=16777216*t[e+4]+(t[e+5]<<16)+(t[e+6]<<8)+t[e+7],i=(BigInt(r)<<BigInt(32))+BigInt(o);if(!0===n.strict&&i<P[3])throw new Error("".concat(O," integer encoded in more bytes than necessary (strict decode)"));if(i<=Number.MAX_SAFE_INTEGER)return Number(i);if(!0===n.allowBigInt)return i;throw new Error("".concat(O," integers outside of the safe integer range are not supported"))}function z(t,e){return G(t,0,e.value)}function G(t,e,n){if(n<P[0]){const r=Number(n);t.push([e|r])}else if(n<P[1]){const r=Number(n);t.push([24|e,r])}else if(n<P[2]){const r=Number(n);t.push([25|e,r>>>8,255&r])}else if(n<P[3]){const r=Number(n);t.push([26|e,r>>>24&255,r>>>16&255,r>>>8&255,255&r])}else{const r=BigInt(n);if(!(r<P[4]))throw new Error("".concat(O," encountered BigInt larger than allowable range"));{const n=[27|e,0,0,0,0,0,0,0];let o=Number(r&BigInt(4294967295)),i=Number(r>>BigInt(32)&BigInt(4294967295));n[8]=255&o,o>>=8,n[7]=255&o,o>>=8,n[6]=255&o,o>>=8,n[5]=255&o,n[4]=255&i,i>>=8,n[3]=255&i,i>>=8,n[2]=255&i,i>>=8,n[1]=255&i,t.push(n)}}}z.encodedSize=function(t){return G.encodedSize(t.value)},G.encodedSize=function(t){return t<P[0]?1:t<P[1]?2:t<P[2]?3:t<P[3]?5:9},z.compareTokens=function(t,e){return t.value<e.value?-1:t.value>e.value?1:0};const $=BigInt(-1),q=BigInt(1);function K(t,e){const n=e.value,r="bigint"===typeof n?n*$-q:-1*n-1;G(t,e.type.majorEncoded,r)}function Z(t,e,n,r){_(t,e,n+r);const o=x(t,e+n,e+n+r);return new m(w.bytes,o,n+r)}function W(t,e,n,r){return Z(t,e,1,n)}function J(t){return void 0===t.encodedBytes&&(t.encodedBytes=t.type===w.string?k(t.value):t.value),t.encodedBytes}function Y(t,e){const n=J(e);G(t,e.type.majorEncoded,n.length),t.push(n)}function X(t,e,n,r,o){const i=n+r;_(t,e,i);const s=new m(w.string,B(t,e+n,e+i),i);return!0===o.retainStringBytes&&(s.byteValue=x(t,e+n,e+i)),s}function Q(t,e,n,r){return X(t,e,1,n,r)}K.encodedSize=function(t){const e=t.value,n="bigint"===typeof e?e*$-q:-1*e-1;return n<P[0]?1:n<P[1]?2:n<P[2]?3:n<P[3]?5:9},K.compareTokens=function(t,e){return t.value<e.value?1:t.value>e.value?-1:0},Y.encodedSize=function(t){const e=J(t);return G.encodedSize(e.length)+e.length},Y.compareTokens=function(t,e){return n=J(t),r=J(e),n.length<r.length?-1:n.length>r.length?1:function(t,e){if(E(t)&&E(e))return t.compare(e);for(let n=0;n<t.length;n++)if(t[n]!==e[n])return t[n]<e[n]?-1:1;return 0}(n,r);var n,r};const tt=Y;function et(t,e,n,r){return new m(w.array,r,n)}function nt(t,e,n,r){return et(0,0,1,n)}function rt(t,e){G(t,w.array.majorEncoded,e.value)}function ot(t,e,n,r){return new m(w.map,r,n)}function it(t,e,n,r){return ot(0,0,1,n)}function st(t,e){G(t,w.map.majorEncoded,e.value)}function at(t,e,n,r){return new m(w.tag,n,1)}function ut(t,e){G(t,w.tag.majorEncoded,e.value)}rt.compareTokens=z.compareTokens,rt.encodedSize=function(t){return G.encodedSize(t.value)},st.compareTokens=z.compareTokens,st.encodedSize=function(t){return G.encodedSize(t.value)},ut.compareTokens=z.compareTokens,ut.encodedSize=function(t){return G.encodedSize(t.value)};function ct(t,e,n){if(n){if(!1===n.allowNaN&&Number.isNaN(t))throw new Error("".concat(O," NaN values are not supported"));if(!1===n.allowInfinity&&(t===1/0||t===-1/0))throw new Error("".concat(O," Infinity values are not supported"))}return new m(w.float,t,e)}function lt(t,e,n){const r=e.value;if(!1===r)t.push([20|w.float.majorEncoded]);else if(!0===r)t.push([21|w.float.majorEncoded]);else if(null===r)t.push([22|w.float.majorEncoded]);else if(void 0===r)t.push([23|w.float.majorEncoded]);else{let e,i=!1;n&&!0===n.float64||(gt(r),e=pt(dt,1),r===e||Number.isNaN(r)?(dt[0]=249,t.push(dt.slice(0,3)),i=!0):(yt(r),e=wt(dt,1),r===e&&(dt[0]=250,t.push(dt.slice(0,5)),i=!0))),i||(o=r,ft.setFloat64(0,o,!1),e=mt(dt,1),dt[0]=251,t.push(dt.slice(0,9)))}var o}lt.encodedSize=function(t,e){const n=t.value;if(!1===n||!0===n||null===n||void 0===n)return 1;if(!e||!0!==e.float64){gt(n);let t=pt(dt,1);if(n===t||Number.isNaN(n))return 3;if(yt(n),t=wt(dt,1),n===t)return 5}return 9};const ht=new ArrayBuffer(9),ft=new DataView(ht,1),dt=new Uint8Array(ht,0);function gt(t){if(t===1/0)ft.setUint16(0,31744,!1);else if(t===-1/0)ft.setUint16(0,64512,!1);else if(Number.isNaN(t))ft.setUint16(0,32256,!1);else{ft.setFloat32(0,t);const e=ft.getUint32(0),n=(2139095040&e)>>23,r=8388607&e;if(255===n)ft.setUint16(0,31744,!1);else if(0===n)ft.setUint16(0,(2147483648&t)>>16|r>>13,!1);else{const t=n-127;t<-24?ft.setUint16(0,0):t<-14?ft.setUint16(0,(2147483648&e)>>16|1<<24+t,!1):ft.setUint16(0,(2147483648&e)>>16|t+15<<10|r>>13,!1)}}}function pt(t,e){if(t.length-e<2)throw new Error("".concat(O," not enough data for float16"));const n=(t[e]<<8)+t[e+1];if(31744===n)return 1/0;if(64512===n)return-1/0;if(32256===n)return NaN;const r=n>>10&31,o=1023&n;let i;return i=0===r?o*2**-24:31!==r?(o+1024)*2**(r-25):0===o?1/0:NaN,32768&n?-i:i}function yt(t){ft.setFloat32(0,t,!1)}function wt(t,e){if(t.length-e<4)throw new Error("".concat(O," not enough data for float32"));const n=(t.byteOffset||0)+e;return new DataView(t.buffer,n,4).getFloat32(0,!1)}function mt(t,e){if(t.length-e<8)throw new Error("".concat(O," not enough data for float64"));const n=(t.byteOffset||0)+e;return new DataView(t.buffer,n,8).getFloat64(0,!1)}function vt(t,e,n){throw new Error("".concat(O," encountered invalid minor (").concat(n,") for major ").concat(t[e]>>>5))}function bt(t){return()=>{throw new Error("".concat(O," ").concat(t))}}lt.compareTokens=z.compareTokens;const At=[];for(let yy=0;yy<=23;yy++)At[yy]=vt;At[24]=function(t,e,n,r){return new m(w.uint,j(t,e+1,r),2)},At[25]=function(t,e,n,r){return new m(w.uint,H(t,e+1,r),3)},At[26]=function(t,e,n,r){return new m(w.uint,V(t,e+1,r),5)},At[27]=function(t,e,n,r){return new m(w.uint,M(t,e+1,r),9)},At[28]=vt,At[29]=vt,At[30]=vt,At[31]=vt;for(let yy=32;yy<=55;yy++)At[yy]=vt;At[56]=function(t,e,n,r){return new m(w.negint,-1-j(t,e+1,r),2)},At[57]=function(t,e,n,r){return new m(w.negint,-1-H(t,e+1,r),3)},At[58]=function(t,e,n,r){return new m(w.negint,-1-V(t,e+1,r),5)},At[59]=function(t,e,n,r){const o=M(t,e+1,r);if("bigint"!==typeof o){const t=-1-o;if(t>=Number.MIN_SAFE_INTEGER)return new m(w.negint,t,9)}if(!0!==r.allowBigInt)throw new Error("".concat(O," integers outside of the safe integer range are not supported"));return new m(w.negint,$-BigInt(o),9)},At[60]=vt,At[61]=vt,At[62]=vt,At[63]=vt;for(let yy=64;yy<=87;yy++)At[yy]=W;At[88]=function(t,e,n,r){return Z(t,e,2,j(t,e+1,r))},At[89]=function(t,e,n,r){return Z(t,e,3,H(t,e+1,r))},At[90]=function(t,e,n,r){return Z(t,e,5,V(t,e+1,r))},At[91]=function(t,e,n,r){const o=M(t,e+1,r);if("bigint"===typeof o)throw new Error("".concat(O," 64-bit integer bytes lengths not supported"));return Z(t,e,9,o)},At[92]=vt,At[93]=vt,At[94]=vt,At[95]=bt("indefinite length bytes/strings are not supported");for(let yy=96;yy<=119;yy++)At[yy]=Q;At[120]=function(t,e,n,r){return X(t,e,2,j(t,e+1,r),r)},At[121]=function(t,e,n,r){return X(t,e,3,H(t,e+1,r),r)},At[122]=function(t,e,n,r){return X(t,e,5,V(t,e+1,r),r)},At[123]=function(t,e,n,r){const o=M(t,e+1,r);if("bigint"===typeof o)throw new Error("".concat(O," 64-bit integer string lengths not supported"));return X(t,e,9,o,r)},At[124]=vt,At[125]=vt,At[126]=vt,At[127]=bt("indefinite length bytes/strings are not supported");for(let yy=128;yy<=151;yy++)At[yy]=nt;At[152]=function(t,e,n,r){return et(0,0,2,j(t,e+1,r))},At[153]=function(t,e,n,r){return et(0,0,3,H(t,e+1,r))},At[154]=function(t,e,n,r){return et(0,0,5,V(t,e+1,r))},At[155]=function(t,e,n,r){const o=M(t,e+1,r);if("bigint"===typeof o)throw new Error("".concat(O," 64-bit integer array lengths not supported"));return et(0,0,9,o)},At[156]=vt,At[157]=vt,At[158]=vt,At[159]=function(t,e,n,r){if(!1===r.allowIndefinite)throw new Error("".concat(O," indefinite length items not allowed"));return et(0,0,1,1/0)};for(let yy=160;yy<=183;yy++)At[yy]=it;At[184]=function(t,e,n,r){return ot(0,0,2,j(t,e+1,r))},At[185]=function(t,e,n,r){return ot(0,0,3,H(t,e+1,r))},At[186]=function(t,e,n,r){return ot(0,0,5,V(t,e+1,r))},At[187]=function(t,e,n,r){const o=M(t,e+1,r);if("bigint"===typeof o)throw new Error("".concat(O," 64-bit integer map lengths not supported"));return ot(0,0,9,o)},At[188]=vt,At[189]=vt,At[190]=vt,At[191]=function(t,e,n,r){if(!1===r.allowIndefinite)throw new Error("".concat(O," indefinite length items not allowed"));return ot(0,0,1,1/0)};for(let yy=192;yy<=215;yy++)At[yy]=at;At[216]=function(t,e,n,r){return new m(w.tag,j(t,e+1,r),2)},At[217]=function(t,e,n,r){return new m(w.tag,H(t,e+1,r),3)},At[218]=function(t,e,n,r){return new m(w.tag,V(t,e+1,r),5)},At[219]=function(t,e,n,r){return new m(w.tag,M(t,e+1,r),9)},At[220]=vt,At[221]=vt,At[222]=vt,At[223]=vt;for(let yy=224;yy<=243;yy++)At[yy]=bt("simple values are not supported");At[244]=vt,At[245]=vt,At[246]=vt,At[247]=function(t,e,n,r){if(!1===r.allowUndefined)throw new Error("".concat(O," undefined values are not supported"));return!0===r.coerceUndefinedToNull?new m(w.null,null,1):new m(w.undefined,void 0,1)},At[248]=bt("simple values are not supported"),At[249]=function(t,e,n,r){return ct(pt(t,e+1),3,r)},At[250]=function(t,e,n,r){return ct(wt(t,e+1),5,r)},At[251]=function(t,e,n,r){return ct(mt(t,e+1),9,r)},At[252]=vt,At[253]=vt,At[254]=vt,At[255]=function(t,e,n,r){if(!1===r.allowIndefinite)throw new Error("".concat(O," indefinite length items not allowed"));return new m(w.break,void 0,1)};const Et=[];for(let yy=0;yy<24;yy++)Et[yy]=new m(w.uint,yy,1);for(let yy=-1;yy>=-24;yy--)Et[31-yy]=new m(w.negint,yy,1);Et[64]=new m(w.bytes,new Uint8Array(0),1),Et[96]=new m(w.string,"",1),Et[128]=new m(w.array,0,1),Et[160]=new m(w.map,0,1),Et[244]=new m(w.false,!1,1),Et[245]=new m(w.true,!0,1),Et[246]=new m(w.null,null,1);const Dt={float64:!1,mapSorter:function(t,e){const n=Array.isArray(t[0])?t[0][0]:t[0],r=Array.isArray(e[0])?e[0][0]:e[0];if(n.type!==r.type)return n.type.compare(r.type);const o=n.type.major,i=Bt[o].compareTokens(n,r);0===i&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone");return i},quickEncodeToken:function(t){switch(t.type){case w.false:return C([244]);case w.true:return C([245]);case w.null:return C([246]);case w.bytes:return t.value.length?void 0:C([64]);case w.string:return""===t.value?C([96]):void 0;case w.array:return 0===t.value?C([128]):void 0;case w.map:return 0===t.value?C([160]):void 0;case w.uint:return t.value<24?C([Number(t.value)]):void 0;case w.negint:if(t.value>=-24)return C([31-Number(t.value)])}}};const Bt=function(){const t=[];return t[w.uint.major]=z,t[w.negint.major]=K,t[w.bytes.major]=Y,t[w.string.major]=tt,t[w.array.major]=rt,t[w.map.major]=st,t[w.tag.major]=ut,t[w.float.major]=lt,t}(),kt=new U;class Ct{constructor(t,e){this.obj=t,this.parent=e}includes(t){let e=this;do{if(e.obj===t)return!0}while(e=e.parent);return!1}static createCheck(t,e){if(t&&t.includes(e))throw new Error("".concat(L," object contains circular references"));return new Ct(e,t)}}const xt={null:new m(w.null,null),undefined:new m(w.undefined,void 0),true:new m(w.true,!0),false:new m(w.false,!1),emptyArray:new m(w.array,0),emptyMap:new m(w.map,0)},St={number:(t,e,n,r)=>Number.isInteger(t)&&Number.isSafeInteger(t)?new m(t>=0?w.uint:w.negint,t):new m(w.float,t),bigint:(t,e,n,r)=>t>=BigInt(0)?new m(w.uint,t):new m(w.negint,t),Uint8Array:(t,e,n,r)=>new m(w.bytes,t),string:(t,e,n,r)=>new m(w.string,t),boolean:(t,e,n,r)=>t?xt.true:xt.false,null:(t,e,n,r)=>xt.null,undefined:(t,e,n,r)=>xt.undefined,ArrayBuffer:(t,e,n,r)=>new m(w.bytes,new Uint8Array(t)),DataView:(t,e,n,r)=>new m(w.bytes,new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),Array(t,e,n,r){if(!t.length)return!0===n.addBreakTokens?[xt.emptyArray,new m(w.break)]:xt.emptyArray;r=Ct.createCheck(r,t);const o=[];let i=0;for(const s of t)o[i++]=Ft(s,n,r);return n.addBreakTokens?[new m(w.array,t.length),o,new m(w.break)]:[new m(w.array,t.length),o]},Object(t,e,n,r){const o="Object"!==e,i=o?t.keys():Object.keys(t),s=o?t.size:i.length;if(!s)return!0===n.addBreakTokens?[xt.emptyMap,new m(w.break)]:xt.emptyMap;r=Ct.createCheck(r,t);const a=[];let u=0;for(const c of i)a[u++]=[Ft(c,n,r),Ft(o?t.get(c):t[c],n,r)];return function(t,e){e.mapSorter&&t.sort(e.mapSorter)}(a,n),n.addBreakTokens?[new m(w.map,s),a,new m(w.break)]:[new m(w.map,s),a]}};St.Map=St.Object,St.Buffer=St.Uint8Array;for(const yy of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))St["".concat(yy,"Array")]=St.DataView;function Ft(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const r=y(t),o=e&&e.typeEncoders&&e.typeEncoders[r]||St[r];if("function"===typeof o){const i=o(t,r,e,n);if(null!=i)return i}const i=St[r];if(!i)throw new Error("".concat(L," unsupported type: ").concat(r));return i(t,r,e,n)}function It(t,e,n,r){if(Array.isArray(e))for(const o of e)It(t,o,n,r);else n[e.type.major](t,e,r)}function Nt(t,e,n){const r=Ft(t,n);if(!Array.isArray(r)&&n.quickEncodeToken){const t=n.quickEncodeToken(r);if(t)return t;const o=e[r.type.major];if(o.encodedSize){const t=o.encodedSize(r,n),e=new U(t);if(o(e,r,n),1!==e.chunks.length)throw new Error("Unexpected error: pre-calculated length for ".concat(r," was wrong"));return D(e.chunks[0])}}return kt.reset(),It(kt,r,e,n),kt.toBytes(!0)}const Tt={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class Ut{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._pos=0,this.data=t,this.options=e}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){const t=this.data[this._pos];let e=Et[t];if(void 0===e){const n=At[t];if(!n)throw new Error("".concat(O," no decoder for major type ").concat(t>>>5," (byte 0x").concat(t.toString(16).padStart(2,"0"),")"));const r=31&t;e=n(this.data,this._pos,r,this.options)}return this._pos+=e.encodedLength,e}}const Ot=Symbol.for("DONE"),Lt=Symbol.for("BREAK");function Rt(t,e){if(t.done())return Ot;const n=t.next();if(n.type===w.break)return Lt;if(n.type.terminal)return n.value;if(n.type===w.array)return function(t,e,n){const r=[];for(let o=0;o<t.value;o++){const i=Rt(e,n);if(i===Lt){if(t.value===1/0)break;throw new Error("".concat(O," got unexpected break to lengthed array"))}if(i===Ot)throw new Error("".concat(O," found array but not enough entries (got ").concat(o,", expected ").concat(t.value,")"));r[o]=i}return r}(n,t,e);if(n.type===w.map)return function(t,e,n){const r=!0===n.useMaps,o=r?void 0:{},i=r?new Map:void 0;for(let s=0;s<t.value;s++){const a=Rt(e,n);if(a===Lt){if(t.value===1/0)break;throw new Error("".concat(O," got unexpected break to lengthed map"))}if(a===Ot)throw new Error("".concat(O," found map but not enough entries (got ").concat(s," [no key], expected ").concat(t.value,")"));if(!0!==r&&"string"!==typeof a)throw new Error("".concat(O," non-string keys not supported (got ").concat(typeof a,")"));if(!0===n.rejectDuplicateMapKeys&&(r&&i.has(a)||!r&&a in o))throw new Error("".concat(O,' found repeat map key "').concat(a,'"'));const u=Rt(e,n);if(u===Ot)throw new Error("".concat(O," found map but not enough entries (got ").concat(s," [no value], expected ").concat(t.value,")"));r?i.set(a,u):o[a]=u}return r?i:o}(n,t,e);if(n.type===w.tag){if(e.tags&&"function"===typeof e.tags[n.value]){const r=Rt(t,e);return e.tags[n.value](r)}throw new Error("".concat(O," tag not supported (").concat(n.value,")"))}throw new Error("unsupported")}function _t(t,e){const[n,r]=function(t,e){if(!(t instanceof Uint8Array))throw new Error("".concat(O," data to decode must be a Uint8Array"));const n=(e=Object.assign({},Tt,e)).tokenizer||new Ut(t,e),r=Rt(n,e);if(r===Ot)throw new Error("".concat(O," did not find any content to decode"));if(r===Lt)throw new Error("".concat(O," got unexpected break"));return[r,t.subarray(n.pos())]}(t,e);if(r.length>0)throw new Error("".concat(O," too many terminals, data makes no sense"));return n}var Pt=n(46053);function jt(t){return t instanceof ArrayBuffer?new Uint8Array(t,0,t.byteLength):t}const Ht={float64:!0,typeEncoders:{Object:function(t){if(t.asCID!==t&&t["/"]!==t.bytes)return null;const e=Pt.TO.asCID(t);if(!e)return null;const n=new Uint8Array(e.bytes.byteLength+1);return n.set(e.bytes,1),[new m(w.tag,42),new m(w.bytes,n)]},undefined:function(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")},number:function(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}}},Vt=(0,d.A)((0,d.A)({},Ht),{},{typeEncoders:(0,d.A)({},Ht.typeEncoders)});const Mt={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};Mt.tags[42]=function(t){if(0!==t[0])throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return Pt.TO.decode(t.subarray(1))};const zt=(0,d.A)((0,d.A)({},Mt),{},{tags:Mt.tags.slice()}),Gt="dag-cbor",$t=113,qt=t=>{return e=t,n=Ht,n=Object.assign({},Dt,n),Nt(e,Bt,n);var e,n},Kt=t=>_t(jt(t),Mt),Zt=["string","number","bigint","symbol"],Wt=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function Jt(t){if(null===t)return"null";if(void 0===t)return"undefined";if(!0===t||!1===t)return"boolean";const e=typeof t;if(Zt.includes(e))return e;if("function"===e)return"Function";if(Array.isArray(t))return"Array";if(function(t){return t&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t)}(t))return"Buffer";const n=function(t){const e=Object.prototype.toString.call(t).slice(8,-1);if(Wt.includes(e))return e;return}(t);return n||"Object"}class Yt{constructor(t,e,n){this.major=t,this.majorEncoded=t<<5,this.name=e,this.terminal=n}toString(){return"Type[".concat(this.major,"].").concat(this.name)}compare(t){return this.major<t.major?-1:this.major>t.major?1:0}}Yt.uint=new Yt(0,"uint",!0),Yt.negint=new Yt(1,"negint",!0),Yt.bytes=new Yt(2,"bytes",!0),Yt.string=new Yt(3,"string",!0),Yt.array=new Yt(4,"array",!1),Yt.map=new Yt(5,"map",!1),Yt.tag=new Yt(6,"tag",!1),Yt.float=new Yt(7,"float",!0),Yt.false=new Yt(7,"false",!0),Yt.true=new Yt(7,"true",!0),Yt.null=new Yt(7,"null",!0),Yt.undefined=new Yt(7,"undefined",!0),Yt.break=new Yt(7,"break",!0);class Xt{constructor(t,e,n){this.type=t,this.value=e,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return"Token[".concat(this.type,"].").concat(this.value)}}const Qt=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&"function"===typeof globalThis.Buffer.isBuffer,te=new TextDecoder,ee=new TextEncoder;function ne(t){return Qt&&globalThis.Buffer.isBuffer(t)}function re(t){return t instanceof Uint8Array?ne(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t:Uint8Array.from(t)}const oe=Qt?(t,e,n)=>n-e>64?globalThis.Buffer.from(t.subarray(e,n)).toString("utf8"):le(t,e,n):(t,e,n)=>n-e>64?te.decode(t.subarray(e,n)):le(t,e,n),ie=Qt?t=>t.length>64?globalThis.Buffer.from(t):ce(t):t=>t.length>64?ee.encode(t):ce(t),se=Qt?(t,e,n)=>ne(t)?new Uint8Array(t.subarray(e,n)):t.slice(e,n):(t,e,n)=>t.slice(e,n),ae=Qt?(t,e)=>(t=t.map((t=>t instanceof Uint8Array?t:globalThis.Buffer.from(t))),re(globalThis.Buffer.concat(t,e))):(t,e)=>{const n=new Uint8Array(e);let r=0;for(let o of t)r+o.length>n.length&&(o=o.subarray(0,n.length-r)),n.set(o,r),r+=o.length;return n},ue=Qt?t=>globalThis.Buffer.allocUnsafe(t):t=>new Uint8Array(t);function ce(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let o=t.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):55296===(64512&o)&&r+1<t.length&&56320===(64512&t.charCodeAt(r+1))?(o=65536+((1023&o)<<10)+(1023&t.charCodeAt(++r)),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e}function le(t,e,n){const r=[];for(;e<n;){const o=t[e];let i=null,s=o>239?4:o>223?3:o>191?2:1;if(e+s<=n){let n,r,a,u;switch(s){case 1:o<128&&(i=o);break;case 2:n=t[e+1],128===(192&n)&&(u=(31&o)<<6|63&n,u>127&&(i=u));break;case 3:n=t[e+1],r=t[e+2],128===(192&n)&&128===(192&r)&&(u=(15&o)<<12|(63&n)<<6|63&r,u>2047&&(u<55296||u>57343)&&(i=u));break;case 4:n=t[e+1],r=t[e+2],a=t[e+3],128===(192&n)&&128===(192&r)&&128===(192&a)&&(u=(15&o)<<18|(63&n)<<12|(63&r)<<6|63&a,u>65535&&u<1114112&&(i=u))}}null===i?(i=65533,s=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|1023&i),r.push(i),e+=s}return fe(r)}const he=4096;function fe(t){const e=t.length;if(e<=he)return String.fromCharCode.apply(String,t);let n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=he));return n}class de{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:256;this.chunkSize=t,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),null!==this._initReuseChunk&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(t){let e=this.chunks[this.chunks.length-1];if(this.cursor+t.length<=this.maxCursor+1){const n=e.length-(this.maxCursor-this.cursor)-1;e.set(t,n)}else{if(e){const t=e.length-(this.maxCursor-this.cursor)-1;t<e.length&&(this.chunks[this.chunks.length-1]=e.subarray(0,t),this.maxCursor=this.cursor-1)}t.length<64&&t.length<this.chunkSize?(e=ue(this.chunkSize),this.chunks.push(e),this.maxCursor+=e.length,null===this._initReuseChunk&&(this._initReuseChunk=e),e.set(t,0)):(this.chunks.push(t),this.maxCursor+=t.length)}this.cursor+=t.length}toBytes(){let t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(1===this.chunks.length){const n=this.chunks[0];e&&this.cursor>n.length/2?(t=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=se(n,0,this.cursor)}else t=ae(this.chunks,this.cursor);return e&&this.reset(),t}}const ge="CBOR decode error:",pe="CBOR encode error:",ye=[];function we(t,e,n){if(t.length-e<n)throw new Error("".concat(ge," not enough data for type"))}ye[23]=1,ye[24]=2,ye[25]=3,ye[26]=5,ye[27]=9;const me=[24,256,65536,4294967296,BigInt("18446744073709551616")];function ve(t,e,n){we(t,e,1);const r=t[e];if(!0===n.strict&&r<me[0])throw new Error("".concat(ge," integer encoded in more bytes than necessary (strict decode)"));return r}function be(t,e,n){we(t,e,2);const r=t[e]<<8|t[e+1];if(!0===n.strict&&r<me[1])throw new Error("".concat(ge," integer encoded in more bytes than necessary (strict decode)"));return r}function Ae(t,e,n){we(t,e,4);const r=16777216*t[e]+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];if(!0===n.strict&&r<me[2])throw new Error("".concat(ge," integer encoded in more bytes than necessary (strict decode)"));return r}function Ee(t,e,n){we(t,e,8);const r=16777216*t[e]+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3],o=16777216*t[e+4]+(t[e+5]<<16)+(t[e+6]<<8)+t[e+7],i=(BigInt(r)<<BigInt(32))+BigInt(o);if(!0===n.strict&&i<me[3])throw new Error("".concat(ge," integer encoded in more bytes than necessary (strict decode)"));if(i<=Number.MAX_SAFE_INTEGER)return Number(i);if(!0===n.allowBigInt)return i;throw new Error("".concat(ge," integers outside of the safe integer range are not supported"))}function De(t,e){return Be(t,0,e.value)}function Be(t,e,n){if(n<me[0]){const r=Number(n);t.push([e|r])}else if(n<me[1]){const r=Number(n);t.push([24|e,r])}else if(n<me[2]){const r=Number(n);t.push([25|e,r>>>8,255&r])}else if(n<me[3]){const r=Number(n);t.push([26|e,r>>>24&255,r>>>16&255,r>>>8&255,255&r])}else{const r=BigInt(n);if(!(r<me[4]))throw new Error("".concat(ge," encountered BigInt larger than allowable range"));{const n=[27|e,0,0,0,0,0,0,0];let o=Number(r&BigInt(4294967295)),i=Number(r>>BigInt(32)&BigInt(4294967295));n[8]=255&o,o>>=8,n[7]=255&o,o>>=8,n[6]=255&o,o>>=8,n[5]=255&o,n[4]=255&i,i>>=8,n[3]=255&i,i>>=8,n[2]=255&i,i>>=8,n[1]=255&i,t.push(n)}}}De.encodedSize=function(t){return Be.encodedSize(t.value)},Be.encodedSize=function(t){return t<me[0]?1:t<me[1]?2:t<me[2]?3:t<me[3]?5:9},De.compareTokens=function(t,e){return t.value<e.value?-1:t.value>e.value?1:0};const ke=BigInt(-1),Ce=BigInt(1);function xe(t,e){const n=e.value,r="bigint"===typeof n?n*ke-Ce:-1*n-1;Be(t,e.type.majorEncoded,r)}function Se(t,e,n,r){we(t,e,n+r);const o=se(t,e+n,e+n+r);return new Xt(Yt.bytes,o,n+r)}function Fe(t,e,n,r){return Se(t,e,1,n)}function Ie(t){return void 0===t.encodedBytes&&(t.encodedBytes=t.type===Yt.string?ie(t.value):t.value),t.encodedBytes}function Ne(t,e){const n=Ie(e);Be(t,e.type.majorEncoded,n.length),t.push(n)}function Te(t,e,n,r,o){const i=n+r;we(t,e,i);const s=new Xt(Yt.string,oe(t,e+n,e+i),i);return!0===o.retainStringBytes&&(s.byteValue=se(t,e+n,e+i)),s}function Ue(t,e,n,r){return Te(t,e,1,n,r)}xe.encodedSize=function(t){const e=t.value,n="bigint"===typeof e?e*ke-Ce:-1*e-1;return n<me[0]?1:n<me[1]?2:n<me[2]?3:n<me[3]?5:9},xe.compareTokens=function(t,e){return t.value<e.value?1:t.value>e.value?-1:0},Ne.encodedSize=function(t){const e=Ie(t);return Be.encodedSize(e.length)+e.length},Ne.compareTokens=function(t,e){return n=Ie(t),r=Ie(e),n.length<r.length?-1:n.length>r.length?1:function(t,e){if(ne(t)&&ne(e))return t.compare(e);for(let n=0;n<t.length;n++)if(t[n]!==e[n])return t[n]<e[n]?-1:1;return 0}(n,r);var n,r};const Oe=Ne;function Le(t,e,n,r){return new Xt(Yt.array,r,n)}function Re(t,e,n,r){return Le(0,0,1,n)}function _e(t,e){Be(t,Yt.array.majorEncoded,e.value)}function Pe(t,e,n,r){return new Xt(Yt.map,r,n)}function je(t,e,n,r){return Pe(0,0,1,n)}function He(t,e){Be(t,Yt.map.majorEncoded,e.value)}function Ve(t,e,n,r){return new Xt(Yt.tag,n,1)}function Me(t,e){Be(t,Yt.tag.majorEncoded,e.value)}_e.compareTokens=De.compareTokens,_e.encodedSize=function(t){return Be.encodedSize(t.value)},He.compareTokens=De.compareTokens,He.encodedSize=function(t){return Be.encodedSize(t.value)},Me.compareTokens=De.compareTokens,Me.encodedSize=function(t){return Be.encodedSize(t.value)};function ze(t,e,n){if(n){if(!1===n.allowNaN&&Number.isNaN(t))throw new Error("".concat(ge," NaN values are not supported"));if(!1===n.allowInfinity&&(t===1/0||t===-1/0))throw new Error("".concat(ge," Infinity values are not supported"))}return new Xt(Yt.float,t,e)}function Ge(t,e,n){const r=e.value;if(!1===r)t.push([20|Yt.float.majorEncoded]);else if(!0===r)t.push([21|Yt.float.majorEncoded]);else if(null===r)t.push([22|Yt.float.majorEncoded]);else if(void 0===r)t.push([23|Yt.float.majorEncoded]);else{let e,i=!1;n&&!0===n.float64||(Ze(r),e=We(Ke,1),r===e||Number.isNaN(r)?(Ke[0]=249,t.push(Ke.slice(0,3)),i=!0):(Je(r),e=Ye(Ke,1),r===e&&(Ke[0]=250,t.push(Ke.slice(0,5)),i=!0))),i||(o=r,qe.setFloat64(0,o,!1),e=Xe(Ke,1),Ke[0]=251,t.push(Ke.slice(0,9)))}var o}Ge.encodedSize=function(t,e){const n=t.value;if(!1===n||!0===n||null===n||void 0===n)return 1;if(!e||!0!==e.float64){Ze(n);let t=We(Ke,1);if(n===t||Number.isNaN(n))return 3;if(Je(n),t=Ye(Ke,1),n===t)return 5}return 9};const $e=new ArrayBuffer(9),qe=new DataView($e,1),Ke=new Uint8Array($e,0);function Ze(t){if(t===1/0)qe.setUint16(0,31744,!1);else if(t===-1/0)qe.setUint16(0,64512,!1);else if(Number.isNaN(t))qe.setUint16(0,32256,!1);else{qe.setFloat32(0,t);const e=qe.getUint32(0),n=(2139095040&e)>>23,r=8388607&e;if(255===n)qe.setUint16(0,31744,!1);else if(0===n)qe.setUint16(0,(2147483648&t)>>16|r>>13,!1);else{const t=n-127;t<-24?qe.setUint16(0,0):t<-14?qe.setUint16(0,(2147483648&e)>>16|1<<24+t,!1):qe.setUint16(0,(2147483648&e)>>16|t+15<<10|r>>13,!1)}}}function We(t,e){if(t.length-e<2)throw new Error("".concat(ge," not enough data for float16"));const n=(t[e]<<8)+t[e+1];if(31744===n)return 1/0;if(64512===n)return-1/0;if(32256===n)return NaN;const r=n>>10&31,o=1023&n;let i;return i=0===r?o*2**-24:31!==r?(o+1024)*2**(r-25):0===o?1/0:NaN,32768&n?-i:i}function Je(t){qe.setFloat32(0,t,!1)}function Ye(t,e){if(t.length-e<4)throw new Error("".concat(ge," not enough data for float32"));const n=(t.byteOffset||0)+e;return new DataView(t.buffer,n,4).getFloat32(0,!1)}function Xe(t,e){if(t.length-e<8)throw new Error("".concat(ge," not enough data for float64"));const n=(t.byteOffset||0)+e;return new DataView(t.buffer,n,8).getFloat64(0,!1)}function Qe(t,e,n){throw new Error("".concat(ge," encountered invalid minor (").concat(n,") for major ").concat(t[e]>>>5))}function tn(t){return()=>{throw new Error("".concat(ge," ").concat(t))}}Ge.compareTokens=De.compareTokens;const en=[];for(let yy=0;yy<=23;yy++)en[yy]=Qe;en[24]=function(t,e,n,r){return new Xt(Yt.uint,ve(t,e+1,r),2)},en[25]=function(t,e,n,r){return new Xt(Yt.uint,be(t,e+1,r),3)},en[26]=function(t,e,n,r){return new Xt(Yt.uint,Ae(t,e+1,r),5)},en[27]=function(t,e,n,r){return new Xt(Yt.uint,Ee(t,e+1,r),9)},en[28]=Qe,en[29]=Qe,en[30]=Qe,en[31]=Qe;for(let yy=32;yy<=55;yy++)en[yy]=Qe;en[56]=function(t,e,n,r){return new Xt(Yt.negint,-1-ve(t,e+1,r),2)},en[57]=function(t,e,n,r){return new Xt(Yt.negint,-1-be(t,e+1,r),3)},en[58]=function(t,e,n,r){return new Xt(Yt.negint,-1-Ae(t,e+1,r),5)},en[59]=function(t,e,n,r){const o=Ee(t,e+1,r);if("bigint"!==typeof o){const t=-1-o;if(t>=Number.MIN_SAFE_INTEGER)return new Xt(Yt.negint,t,9)}if(!0!==r.allowBigInt)throw new Error("".concat(ge," integers outside of the safe integer range are not supported"));return new Xt(Yt.negint,ke-BigInt(o),9)},en[60]=Qe,en[61]=Qe,en[62]=Qe,en[63]=Qe;for(let yy=64;yy<=87;yy++)en[yy]=Fe;en[88]=function(t,e,n,r){return Se(t,e,2,ve(t,e+1,r))},en[89]=function(t,e,n,r){return Se(t,e,3,be(t,e+1,r))},en[90]=function(t,e,n,r){return Se(t,e,5,Ae(t,e+1,r))},en[91]=function(t,e,n,r){const o=Ee(t,e+1,r);if("bigint"===typeof o)throw new Error("".concat(ge," 64-bit integer bytes lengths not supported"));return Se(t,e,9,o)},en[92]=Qe,en[93]=Qe,en[94]=Qe,en[95]=tn("indefinite length bytes/strings are not supported");for(let yy=96;yy<=119;yy++)en[yy]=Ue;en[120]=function(t,e,n,r){return Te(t,e,2,ve(t,e+1,r),r)},en[121]=function(t,e,n,r){return Te(t,e,3,be(t,e+1,r),r)},en[122]=function(t,e,n,r){return Te(t,e,5,Ae(t,e+1,r),r)},en[123]=function(t,e,n,r){const o=Ee(t,e+1,r);if("bigint"===typeof o)throw new Error("".concat(ge," 64-bit integer string lengths not supported"));return Te(t,e,9,o,r)},en[124]=Qe,en[125]=Qe,en[126]=Qe,en[127]=tn("indefinite length bytes/strings are not supported");for(let yy=128;yy<=151;yy++)en[yy]=Re;en[152]=function(t,e,n,r){return Le(0,0,2,ve(t,e+1,r))},en[153]=function(t,e,n,r){return Le(0,0,3,be(t,e+1,r))},en[154]=function(t,e,n,r){return Le(0,0,5,Ae(t,e+1,r))},en[155]=function(t,e,n,r){const o=Ee(t,e+1,r);if("bigint"===typeof o)throw new Error("".concat(ge," 64-bit integer array lengths not supported"));return Le(0,0,9,o)},en[156]=Qe,en[157]=Qe,en[158]=Qe,en[159]=function(t,e,n,r){if(!1===r.allowIndefinite)throw new Error("".concat(ge," indefinite length items not allowed"));return Le(0,0,1,1/0)};for(let yy=160;yy<=183;yy++)en[yy]=je;en[184]=function(t,e,n,r){return Pe(0,0,2,ve(t,e+1,r))},en[185]=function(t,e,n,r){return Pe(0,0,3,be(t,e+1,r))},en[186]=function(t,e,n,r){return Pe(0,0,5,Ae(t,e+1,r))},en[187]=function(t,e,n,r){const o=Ee(t,e+1,r);if("bigint"===typeof o)throw new Error("".concat(ge," 64-bit integer map lengths not supported"));return Pe(0,0,9,o)},en[188]=Qe,en[189]=Qe,en[190]=Qe,en[191]=function(t,e,n,r){if(!1===r.allowIndefinite)throw new Error("".concat(ge," indefinite length items not allowed"));return Pe(0,0,1,1/0)};for(let yy=192;yy<=215;yy++)en[yy]=Ve;en[216]=function(t,e,n,r){return new Xt(Yt.tag,ve(t,e+1,r),2)},en[217]=function(t,e,n,r){return new Xt(Yt.tag,be(t,e+1,r),3)},en[218]=function(t,e,n,r){return new Xt(Yt.tag,Ae(t,e+1,r),5)},en[219]=function(t,e,n,r){return new Xt(Yt.tag,Ee(t,e+1,r),9)},en[220]=Qe,en[221]=Qe,en[222]=Qe,en[223]=Qe;for(let yy=224;yy<=243;yy++)en[yy]=tn("simple values are not supported");en[244]=Qe,en[245]=Qe,en[246]=Qe,en[247]=function(t,e,n,r){if(!1===r.allowUndefined)throw new Error("".concat(ge," undefined values are not supported"));return!0===r.coerceUndefinedToNull?new Xt(Yt.null,null,1):new Xt(Yt.undefined,void 0,1)},en[248]=tn("simple values are not supported"),en[249]=function(t,e,n,r){return ze(We(t,e+1),3,r)},en[250]=function(t,e,n,r){return ze(Ye(t,e+1),5,r)},en[251]=function(t,e,n,r){return ze(Xe(t,e+1),9,r)},en[252]=Qe,en[253]=Qe,en[254]=Qe,en[255]=function(t,e,n,r){if(!1===r.allowIndefinite)throw new Error("".concat(ge," indefinite length items not allowed"));return new Xt(Yt.break,void 0,1)};const nn=[];for(let yy=0;yy<24;yy++)nn[yy]=new Xt(Yt.uint,yy,1);for(let yy=-1;yy>=-24;yy--)nn[31-yy]=new Xt(Yt.negint,yy,1);nn[64]=new Xt(Yt.bytes,new Uint8Array(0),1),nn[96]=new Xt(Yt.string,"",1),nn[128]=new Xt(Yt.array,0,1),nn[160]=new Xt(Yt.map,0,1),nn[244]=new Xt(Yt.false,!1,1),nn[245]=new Xt(Yt.true,!0,1),nn[246]=new Xt(Yt.null,null,1);!function(){const t=[];t[Yt.uint.major]=De,t[Yt.negint.major]=xe,t[Yt.bytes.major]=Ne,t[Yt.string.major]=Oe,t[Yt.array.major]=_e,t[Yt.map.major]=He,t[Yt.tag.major]=Me,t[Yt.float.major]=Ge}();const rn=new de;class on{constructor(t,e){this.obj=t,this.parent=e}includes(t){let e=this;do{if(e.obj===t)return!0}while(e=e.parent);return!1}static createCheck(t,e){if(t&&t.includes(e))throw new Error("".concat(pe," object contains circular references"));return new on(e,t)}}const sn={null:new Xt(Yt.null,null),undefined:new Xt(Yt.undefined,void 0),true:new Xt(Yt.true,!0),false:new Xt(Yt.false,!1),emptyArray:new Xt(Yt.array,0),emptyMap:new Xt(Yt.map,0)},an={number:(t,e,n,r)=>Number.isInteger(t)&&Number.isSafeInteger(t)?new Xt(t>=0?Yt.uint:Yt.negint,t):new Xt(Yt.float,t),bigint:(t,e,n,r)=>t>=BigInt(0)?new Xt(Yt.uint,t):new Xt(Yt.negint,t),Uint8Array:(t,e,n,r)=>new Xt(Yt.bytes,t),string:(t,e,n,r)=>new Xt(Yt.string,t),boolean:(t,e,n,r)=>t?sn.true:sn.false,null:(t,e,n,r)=>sn.null,undefined:(t,e,n,r)=>sn.undefined,ArrayBuffer:(t,e,n,r)=>new Xt(Yt.bytes,new Uint8Array(t)),DataView:(t,e,n,r)=>new Xt(Yt.bytes,new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),Array(t,e,n,r){if(!t.length)return!0===n.addBreakTokens?[sn.emptyArray,new Xt(Yt.break)]:sn.emptyArray;r=on.createCheck(r,t);const o=[];let i=0;for(const s of t)o[i++]=un(s,n,r);return n.addBreakTokens?[new Xt(Yt.array,t.length),o,new Xt(Yt.break)]:[new Xt(Yt.array,t.length),o]},Object(t,e,n,r){const o="Object"!==e,i=o?t.keys():Object.keys(t),s=o?t.size:i.length;if(!s)return!0===n.addBreakTokens?[sn.emptyMap,new Xt(Yt.break)]:sn.emptyMap;r=on.createCheck(r,t);const a=[];let u=0;for(const c of i)a[u++]=[un(c,n,r),un(o?t.get(c):t[c],n,r)];return function(t,e){e.mapSorter&&t.sort(e.mapSorter)}(a,n),n.addBreakTokens?[new Xt(Yt.map,s),a,new Xt(Yt.break)]:[new Xt(Yt.map,s),a]}};an.Map=an.Object,an.Buffer=an.Uint8Array;for(const yy of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))an["".concat(yy,"Array")]=an.DataView;function un(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const r=Jt(t),o=e&&e.typeEncoders&&e.typeEncoders[r]||an[r];if("function"===typeof o){const i=o(t,r,e,n);if(null!=i)return i}const i=an[r];if(!i)throw new Error("".concat(pe," unsupported type: ").concat(r));return i(t,r,e,n)}function cn(t,e,n,r){if(Array.isArray(e))for(const o of e)cn(t,o,n,r);else n[e.type.major](t,e,r)}function ln(t,e,n){const r=un(t,n);if(!Array.isArray(r)&&n.quickEncodeToken){const t=n.quickEncodeToken(r);if(t)return t;const o=e[r.type.major];if(o.encodedSize){const t=o.encodedSize(r,n),e=new de(t);if(o(e,r,n),1!==e.chunks.length)throw new Error("Unexpected error: pre-calculated length for ".concat(r," was wrong"));return re(e.chunks[0])}}return rn.reset(),cn(rn,r,e,n),rn.toBytes(!0)}const hn={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class fn{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._pos=0,this.data=t,this.options=e}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){const t=this.data[this._pos];let e=nn[t];if(void 0===e){const n=en[t];if(!n)throw new Error("".concat(ge," no decoder for major type ").concat(t>>>5," (byte 0x").concat(t.toString(16).padStart(2,"0"),")"));const r=31&t;e=n(this.data,this._pos,r,this.options)}return this._pos+=e.encodedLength,e}}const dn=Symbol.for("DONE"),gn=Symbol.for("BREAK");function pn(t,e){if(t.done())return dn;const n=t.next();if(n.type===Yt.break)return gn;if(n.type.terminal)return n.value;if(n.type===Yt.array)return function(t,e,n){const r=[];for(let o=0;o<t.value;o++){const i=pn(e,n);if(i===gn){if(t.value===1/0)break;throw new Error("".concat(ge," got unexpected break to lengthed array"))}if(i===dn)throw new Error("".concat(ge," found array but not enough entries (got ").concat(o,", expected ").concat(t.value,")"));r[o]=i}return r}(n,t,e);if(n.type===Yt.map)return function(t,e,n){const r=!0===n.useMaps,o=r?void 0:{},i=r?new Map:void 0;for(let s=0;s<t.value;s++){const a=pn(e,n);if(a===gn){if(t.value===1/0)break;throw new Error("".concat(ge," got unexpected break to lengthed map"))}if(a===dn)throw new Error("".concat(ge," found map but not enough entries (got ").concat(s," [no key], expected ").concat(t.value,")"));if(!0!==r&&"string"!==typeof a)throw new Error("".concat(ge," non-string keys not supported (got ").concat(typeof a,")"));if(!0===n.rejectDuplicateMapKeys&&(r&&i.has(a)||!r&&a in o))throw new Error("".concat(ge,' found repeat map key "').concat(a,'"'));const u=pn(e,n);if(u===dn)throw new Error("".concat(ge," found map but not enough entries (got ").concat(s," [no value], expected ").concat(t.value,")"));r?i.set(a,u):o[a]=u}return r?i:o}(n,t,e);if(n.type===Yt.tag){if(e.tags&&"function"===typeof e.tags[n.value]){const r=pn(t,e);return e.tags[n.value](r)}throw new Error("".concat(ge," tag not supported (").concat(n.value,")"))}throw new Error("unsupported")}function yn(t,e){const[n,r]=function(t,e){if(!(t instanceof Uint8Array))throw new Error("".concat(ge," data to decode must be a Uint8Array"));const n=(e=Object.assign({},hn,e)).tokenizer||new fn(t,e),r=pn(n,e);if(r===dn)throw new Error("".concat(ge," did not find any content to decode"));if(r===gn)throw new Error("".concat(ge," got unexpected break"));return[r,t.subarray(n.pos())]}(t,e);if(r.length>0)throw new Error("".concat(ge," too many terminals, data makes no sense"));return n}class wn extends Array{constructor(){super(),this.inRecursive=[]}prefix(t){const e=this.inRecursive[this.inRecursive.length-1];e&&(e.type===Yt.array&&(e.elements++,1!==e.elements&&t.push([44])),e.type===Yt.map&&(e.elements++,1!==e.elements&&(e.elements%2===1?t.push([44]):t.push([58]))))}[Yt.uint.major](t,e){this.prefix(t);const n=String(e.value),r=[];for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);t.push(r)}[Yt.negint.major](t,e){this[Yt.uint.major](t,e)}[Yt.bytes.major](t,e){throw new Error("".concat(pe," unsupported type: Uint8Array"))}[Yt.string.major](t,e){this.prefix(t);const n=ie(JSON.stringify(e.value));t.push(n.length>32?re(n):n)}[Yt.array.major](t,e){this.prefix(t),this.inRecursive.push({type:Yt.array,elements:0}),t.push([91])}[Yt.map.major](t,e){this.prefix(t),this.inRecursive.push({type:Yt.map,elements:0}),t.push([123])}[Yt.tag.major](t,e){}[Yt.float.major](t,e){if("break"===e.type.name){const e=this.inRecursive.pop();if(e){if(e.type===Yt.array)t.push([93]);else{if(e.type!==Yt.map)throw new Error("Unexpected recursive type; this should not happen!");t.push([125])}return}throw new Error("Unexpected break; this should not happen!")}if(void 0===e.value)throw new Error("".concat(pe," unsupported type: undefined"));if(this.prefix(t),"true"===e.type.name)return void t.push([116,114,117,101]);if("false"===e.type.name)return void t.push([102,97,108,115,101]);if("null"===e.type.name)return void t.push([110,117,108,108]);const n=String(e.value),r=[];let o=!1;for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i),o||46!==r[i]&&101!==r[i]&&69!==r[i]||(o=!0);o||(r.push(46),r.push(48)),t.push(r)}}const mn={addBreakTokens:!0,mapSorter:function(t,e){if(Array.isArray(t[0])||Array.isArray(e[0]))throw new Error("".concat(pe," complex map keys are not supported"));const n=t[0],r=e[0];if(n.type!==Yt.string||r.type!==Yt.string)throw new Error("".concat(pe," non-string map keys are not supported"));if(n<r)return-1;if(n>r)return 1;throw new Error("".concat(pe," unexpected duplicate map keys, this is not supported"))}};class vn{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._pos=0,this.data=t,this.options=e,this.modeStack=["value"],this.lastToken=""}pos(){return this._pos}done(){return this._pos>=this.data.length}ch(){return this.data[this._pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let t=this.ch();for(;32===t||9===t||13===t||10===t;)t=this.data[++this._pos]}expect(t){if(this.data.length-this._pos<t.length)throw new Error("".concat(ge," unexpected end of input at position ").concat(this._pos));for(let e=0;e<t.length;e++)if(this.data[this._pos++]!==t[e])throw new Error("".concat(ge," unexpected token at position ").concat(this._pos,", expected to find '").concat(String.fromCharCode(...t),"'"))}parseNumber(){const t=this._pos;let e=!1,n=!1;const r=t=>{for(;!this.done();){const e=this.ch();if(!t.includes(e))break;this._pos++}};if(45===this.ch()&&(e=!0,this._pos++),48===this.ch()){if(this._pos++,46!==this.ch())return new Xt(Yt.uint,0,this._pos-t);this._pos++,n=!0}if(r([48,49,50,51,52,53,54,55,56,57]),e&&this._pos===t+1)throw new Error("".concat(ge," unexpected token at position ").concat(this._pos));if(!this.done()&&46===this.ch()){if(n)throw new Error("".concat(ge," unexpected token at position ").concat(this._pos));n=!0,this._pos++,r([48,49,50,51,52,53,54,55,56,57])}this.done()||101!==this.ch()&&69!==this.ch()||(n=!0,this._pos++,this.done()||43!==this.ch()&&45!==this.ch()||this._pos++,r([48,49,50,51,52,53,54,55,56,57]));const o=String.fromCharCode.apply(null,this.data.subarray(t,this._pos)),i=parseFloat(o);return n?new Xt(Yt.float,i,this._pos-t):!0!==this.options.allowBigInt||Number.isSafeInteger(i)?new Xt(i>=0?Yt.uint:Yt.negint,i,this._pos-t):new Xt(i>=0?Yt.uint:Yt.negint,BigInt(o),this._pos-t)}parseString(){if(34!==this.ch())throw new Error("".concat(ge," unexpected character at position ").concat(this._pos,"; this shouldn't happen"));this._pos++;for(let o=this._pos,i=0;o<this.data.length&&i<65536;o++,i++){const t=this.data[o];if(92===t||t<32||t>=128)break;if(34===t){const t=String.fromCharCode.apply(null,this.data.subarray(this._pos,o));return this._pos=o+1,new Xt(Yt.string,t,i)}}const t=this._pos,e=[],n=()=>{if(this._pos+4>=this.data.length)throw new Error("".concat(ge," unexpected end of unicode escape sequence at position ").concat(this._pos));let t=0;for(let e=0;e<4;e++){let e=this.ch();if(e>=48&&e<=57)e-=48;else if(e>=97&&e<=102)e=e-97+10;else{if(!(e>=65&&e<=70))throw new Error("".concat(ge," unexpected unicode escape character at position ").concat(this._pos));e=e-65+10}t=16*t+e,this._pos++}return t},r=()=>{const t=this.ch();let n,r,o,i,s=null,a=t>239?4:t>223?3:t>191?2:1;if(this._pos+a>this.data.length)throw new Error("".concat(ge," unexpected unicode sequence at position ").concat(this._pos));switch(a){case 1:t<128&&(s=t);break;case 2:n=this.data[this._pos+1],128===(192&n)&&(i=(31&t)<<6|63&n,i>127&&(s=i));break;case 3:n=this.data[this._pos+1],r=this.data[this._pos+2],128===(192&n)&&128===(192&r)&&(i=(15&t)<<12|(63&n)<<6|63&r,i>2047&&(i<55296||i>57343)&&(s=i));break;case 4:n=this.data[this._pos+1],r=this.data[this._pos+2],o=this.data[this._pos+3],128===(192&n)&&128===(192&r)&&128===(192&o)&&(i=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&o,i>65535&&i<1114112&&(s=i))}null===s?(s=65533,a=1):s>65535&&(s-=65536,e.push(s>>>10&1023|55296),s=56320|1023&s),e.push(s),this._pos+=a};for(;!this.done();){const o=this.ch();let i;switch(o){case 92:if(this._pos++,this.done())throw new Error("".concat(ge," unexpected string termination at position ").concat(this._pos));switch(i=this.ch(),this._pos++,i){case 34:case 39:case 92:case 47:e.push(i);break;case 98:e.push(8);break;case 116:e.push(9);break;case 110:e.push(10);break;case 102:e.push(12);break;case 114:e.push(13);break;case 117:e.push(n());break;default:throw new Error("".concat(ge," unexpected string escape character at position ").concat(this._pos))}break;case 34:return this._pos++,new Xt(Yt.string,fe(e),this._pos-t);default:if(o<32)throw new Error("".concat(ge," invalid control character at position ").concat(this._pos));o<128?(e.push(o),this._pos++):r()}}throw new Error("".concat(ge," unexpected end of string at position ").concat(this._pos))}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this._pos++,new Xt(Yt.map,1/0,1);case 91:return this.modeStack.push("array-start"),this._pos++,new Xt(Yt.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new Xt(Yt.null,null,4);case 102:return this.expect([102,97,108,115,101]),new Xt(Yt.false,!1,5);case 116:return this.expect([116,114,117,101]),new Xt(Yt.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error("".concat(ge," unexpected character at position ").concat(this._pos))}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":if(this.modeStack.pop(),93===this.ch())return this._pos++,this.skipWhitespace(),new Xt(Yt.break,void 0,1);if(44!==this.ch())throw new Error("".concat(ge," unexpected character at position ").concat(this._pos,", was expecting array delimiter but found '").concat(String.fromCharCode(this.ch()),"'"));return this._pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue();case"array-start":return this.modeStack.pop(),93===this.ch()?(this._pos++,this.skipWhitespace(),new Xt(Yt.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(125===this.ch())return this.modeStack.pop(),this._pos++,this.skipWhitespace(),new Xt(Yt.break,void 0,1);if(44!==this.ch())throw new Error("".concat(ge," unexpected character at position ").concat(this._pos,", was expecting object delimiter but found '").concat(String.fromCharCode(this.ch()),"'"));this._pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),125===this.ch())return this._pos++,this.skipWhitespace(),new Xt(Yt.break,void 0,1);const t=this.parseString();if(this.skipWhitespace(),58!==this.ch())throw new Error("".concat(ge," unexpected character at position ").concat(this._pos,", was expecting key/value delimiter ':' but found '").concat(String.fromCharCode(this.ch()),"'"));return this._pos++,this.modeStack.push("obj-value"),t}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error("".concat(ge," unexpected parse state at position ").concat(this._pos,"; this shouldn't happen"))}}}var bn=n(62877),An=n(22469);function En(t){const e=An.base64.encode(t).slice(1);return[new Xt(Yt.map,1/0,1),new Xt(Yt.string,"/",1),new Xt(Yt.map,1/0,1),new Xt(Yt.string,"bytes",5),new Xt(Yt.string,e,e.length),new Xt(Yt.break,void 0,1),new Xt(Yt.break,void 0,1)]}function Dn(t){return En(new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}const Bn={typeEncoders:{Object:function(t){if(t.asCID!==t&&t["/"]!==t.bytes)return null;const e=bn.TO.asCID(t);if(!e)return null;const n=e.toString();return[new Xt(Yt.map,1/0,1),new Xt(Yt.string,"/",1),new Xt(Yt.string,n,n.length),new Xt(Yt.break,void 0,1)]},Buffer:En,Uint8Array:En,Int8Array:Dn,Uint16Array:Dn,Int16Array:Dn,Uint32Array:Dn,Int32Array:Dn,Float32Array:Dn,Float64Array:Dn,Uint8ClampedArray:Dn,BigInt64Array:Dn,BigUint64Array:Dn,DataView:Dn,ArrayBuffer:function(t){return En(new Uint8Array(t))},undefined:function(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")},number:function(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}}};class kn extends vn{constructor(t,e){super(t,e),this.tokenBuffer=[]}done(){return 0===this.tokenBuffer.length&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){const t=this._next();if(t.type===Yt.map){const t=this._next();if(t.type===Yt.string&&"/"===t.value){const t=this._next();if(t.type===Yt.string){if(this._next().type!==Yt.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(t),new Xt(Yt.tag,42,0)}if(t.type===Yt.map){const t=this._next();if(t.type===Yt.string&&"bytes"===t.value){const t=this._next();if(t.type===Yt.string){for(let t=0;t<2;t++){if(this._next().type!==Yt.break)throw new Error("Invalid encoded Bytes form")}const e=An.base64.decode("m".concat(t.value));return new Xt(Yt.bytes,e,t.value.length)}this.tokenBuffer.push(t)}this.tokenBuffer.push(t)}this.tokenBuffer.push(t)}this.tokenBuffer.push(t)}return t}}const Cn={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};Cn.tags[42]=bn.TO.parse;const xn="dag-json",Sn=297,Fn=t=>{return e=t,n=Bn,n=Object.assign({},mn,n),ln(e,new wn,n);var e,n},In=t=>{const e=function(t){return t instanceof ArrayBuffer?new Uint8Array(t,0,t.byteLength):t}(t);return function(t,e){return yn(t,e=Object.assign({tokenizer:new vn(t,e)},e))}(e,Object.assign(Cn,{tokenizer:new kn(e,Cn)}))},Nn=t=>Tn.decode(Fn(t)),Tn=new TextDecoder,Un=t=>In(On.encode(t)),On=new TextEncoder,Ln=new TextDecoder;function Rn(t,e){let n=0;for(let r=0;;r+=7){if(r>=64)throw new Error("protobuf: varint overflow");if(e>=t.length)throw new Error("protobuf: unexpected end of data");const o=t[e++];if(n+=r<28?(127&o)<<r:(127&o)*2**r,o<128)break}return[n,e]}function _n(t,e){let n;[n,e]=Rn(t,e);const r=e+n;if(n<0||r<0)throw new Error("protobuf: invalid length");if(r>t.length)throw new Error("protobuf: unexpected end of data");return[t.subarray(e,r),r]}function Pn(t,e){let n;return[n,e]=Rn(t,e),[7&n,n>>3,e]}function jn(t){const e={},n=t.length;let r=0;for(;r<n;){let n,o;if([n,o,r]=Pn(t,r),1===o){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(2!==n)throw new Error("protobuf: (PBLink) wrong wireType (".concat(n,") for Hash"));if(void 0!==e.Name)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(void 0!==e.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,r]=_n(t,r)}else if(2===o){if(void 0!==e.Name)throw new Error("protobuf: (PBLink) duplicate Name section");if(2!==n)throw new Error("protobuf: (PBLink) wrong wireType (".concat(n,") for Name"));if(void 0!==e.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let o;[o,r]=_n(t,r),e.Name=Ln.decode(o)}else{if(3!==o)throw new Error("protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ".concat(o));if(void 0!==e.Tsize)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(0!==n)throw new Error("protobuf: (PBLink) wrong wireType (".concat(n,") for Tsize"));[e.Tsize,r]=Rn(t,r)}}if(r>n)throw new Error("protobuf: (PBLink) unexpected end of data");return e}const Hn=new TextEncoder,Vn=2**32,Mn=2**31;function zn(t,e){let n=e.length;if("number"===typeof t.Tsize){if(t.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(t.Tsize))throw new Error("Tsize too large for encoding");n=qn(e,n,t.Tsize)-1,e[n]=24}if("string"===typeof t.Name){const r=Hn.encode(t.Name);n-=r.length,e.set(r,n),n=qn(e,n,r.length)-1,e[n]=18}return t.Hash&&(n-=t.Hash.length,e.set(t.Hash,n),n=qn(e,n,t.Hash.length)-1,e[n]=10),e.length-n}function Gn(t){const e=function(t){let e=0;if(t.Data){const n=t.Data.length;e+=1+n+Kn(n)}if(t.Links)for(const n of t.Links){const t=$n(n);e+=1+t+Kn(t)}return e}(t),n=new Uint8Array(e);let r=e;if(t.Data&&(r-=t.Data.length,n.set(t.Data,r),r=qn(n,r,t.Data.length)-1,n[r]=10),t.Links)for(let o=t.Links.length-1;o>=0;o--){const e=zn(t.Links[o],n.subarray(0,r));r-=e,r=qn(n,r,e)-1,n[r]=18}return n}function $n(t){let e=0;if(t.Hash){const n=t.Hash.length;e+=1+n+Kn(n)}if("string"===typeof t.Name){const n=Hn.encode(t.Name).length;e+=1+n+Kn(n)}return"number"===typeof t.Tsize&&(e+=1+Kn(t.Tsize)),e}function qn(t,e,n){const r=e-=Kn(n);for(;n>=Mn;)t[e++]=127&n|128,n/=128;for(;n>=128;)t[e++]=127&n|128,n>>>=7;return t[e]=n,r}function Kn(t){return t%2===0&&t++,Math.floor((function(t){let e=0;t>=Vn&&(t=Math.floor(t/Vn),e=32);t>=65536&&(t>>>=16,e+=16);t>=256&&(t>>>=8,e+=8);return e+Zn[t]}(t)+6)/7)}const Zn=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],Wn=["Data","Links"],Jn=["Hash","Name","Tsize"],Yn=new TextEncoder;function Xn(t,e){if(t===e)return 0;const n=t.Name?Yn.encode(t.Name):[],r=e.Name?Yn.encode(e.Name):[];let o=n.length,i=r.length;for(let s=0,a=Math.min(o,i);s<a;++s)if(n[s]!==r[s]){o=n[s],i=r[s];break}return o<i?-1:i<o?1:0}function Qn(t,e){return!Object.keys(t).some((t=>!e.includes(t)))}function tr(t){if("object"===typeof t.asCID){const e=Pt.TO.asCID(t);if(!e)throw new TypeError("Invalid DAG-PB form");return{Hash:e}}if("object"!==typeof t||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");const e={};if(t.Hash){let r=Pt.TO.asCID(t.Hash);try{r||("string"===typeof t.Hash?r=Pt.TO.parse(t.Hash):t.Hash instanceof Uint8Array&&(r=Pt.TO.decode(t.Hash)))}catch(n){throw new TypeError("Invalid DAG-PB form: ".concat(n.message))}r&&(e.Hash=r)}if(!e.Hash)throw new TypeError("Invalid DAG-PB form");return"string"===typeof t.Name&&(e.Name=t.Name),"number"===typeof t.Tsize&&(e.Tsize=t.Tsize),e}function er(t){if((t instanceof Uint8Array||"string"===typeof t)&&(t={Data:t}),"object"!==typeof t||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");const e={};if(void 0!==t.Data)if("string"===typeof t.Data)e.Data=Yn.encode(t.Data);else{if(!(t.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form");e.Data=t.Data}if(void 0!==t.Links){if(!Array.isArray(t.Links))throw new TypeError("Invalid DAG-PB form");e.Links=t.Links.map(tr),e.Links.sort(Xn)}else e.Links=[];return e}function nr(t){if(!t||"object"!==typeof t||Array.isArray(t)||t instanceof Uint8Array||t["/"]&&t["/"]===t.bytes)throw new TypeError("Invalid DAG-PB form");if(!Qn(t,Wn))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(void 0!==t.Data&&!(t.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be bytes)");if(!Array.isArray(t.Links))throw new TypeError("Invalid DAG-PB form (Links must be a list)");for(let e=0;e<t.Links.length;e++){const n=t.Links[e];if(!n||"object"!==typeof n||Array.isArray(n)||n instanceof Uint8Array||n["/"]&&n["/"]===n.bytes)throw new TypeError("Invalid DAG-PB form (bad link)");if(!Qn(n,Jn))throw new TypeError("Invalid DAG-PB form (extraneous properties on link)");if(void 0===n.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(null==n.Hash||!n.Hash["/"]||n.Hash["/"]!==n.Hash.bytes)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(void 0!==n.Name&&"string"!==typeof n.Name)throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(void 0!==n.Tsize){if("number"!==typeof n.Tsize||n.Tsize%1!==0)throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(n.Tsize<0)throw new TypeError("Invalid DAG-PB form (link Tsize cannot be negative)")}if(e>0&&-1===Xn(n,t.Links[e-1]))throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function rr(t){return er({Data:t,Links:arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]})}function or(t,e,n){return tr({Hash:n,Name:t,Tsize:e})}const ir="dag-pb",sr=112;function ar(t){nr(t);const e={};return t.Links&&(e.Links=t.Links.map((t=>{const e={};return t.Hash&&(e.Hash=t.Hash.bytes),void 0!==t.Name&&(e.Name=t.Name),void 0!==t.Tsize&&(e.Tsize=t.Tsize),e}))),t.Data&&(e.Data=t.Data),Gn(e)}function ur(t){const e=function(t){const e=t.length;let n,r,o=0,i=!1;for(;o<e;){let e,s;if([e,s,o]=Pn(t,o),2!==e)throw new Error("protobuf: (PBNode) invalid wireType, expected 2, got ".concat(e));if(1===s){if(r)throw new Error("protobuf: (PBNode) duplicate Data section");[r,o]=_n(t,o),n&&(i=!0)}else{if(2!==s)throw new Error("protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ".concat(s));{if(i)throw new Error("protobuf: (PBNode) duplicate Links section");let e;n||(n=[]),[e,o]=_n(t,o),n.push(jn(e))}}}if(o>e)throw new Error("protobuf: (PBNode) unexpected end of data");const s={};return r&&(s.Data=r),s.Links=n||[],s}(function(t){return t instanceof ArrayBuffer?new Uint8Array(t,0,t.byteLength):t}(t)),n={};return e.Data&&(n.Data=e.Data),e.Links&&(n.Links=e.Links.map((t=>{const e={};try{e.Hash=Pt.TO.decode(t.Hash)}catch(n){}if(!e.Hash)throw new Error("Invalid Hash field found in link, expected CID");return void 0!==t.Name&&(e.Name=t.Name),void 0!==t.Tsize&&(e.Tsize=t.Tsize),e}))),n}function cr(t){return An.base64url.encode(t).slice(1)}function lr(t){return An.base64url.decode(`u${t}`)}function hr(t){const e={signature:lr(t.signature)};return t.header&&(e.header=t.header),t.protected&&(e.protected=lr(t.protected)),e}function fr(t){const e={signature:cr(t.signature)};return t.header&&(e.header=t.header),t.protected&&(e.protected=cr(t.protected)),e}function dr(t){const e={payload:cr(t.payload),signatures:t.signatures.map(fr)};try{return e.pld=gr((n=t.payload,JSON.parse((new TextDecoder).decode(n)))),e}catch(r){try{return e.link=Pt.TO.decode(new Uint8Array(t.payload)),e}catch(r){throw new Error("Invalid payload, must be either JSON or CID")}}var n}function gr(t){if("string"===typeof t){if(t.startsWith("ipfs://"))return Pt.TO.parse(t.slice(7))}else{if(Array.isArray(t))return t.map(gr);if(function(t){return"object"===typeof t&&null!==t}(t)){const e={};for(const n in t)e[n]=gr(t[n]);return e}}return t}function pr(t){const e={};return t.encrypted_key&&(e.encrypted_key=lr(t.encrypted_key)),t.header&&(e.header=t.header),e}function yr(t){const e={};return t.encrypted_key&&(e.encrypted_key=cr(t.encrypted_key)),t.header&&(e.header=t.header),e}const wr=["string","number","bigint","symbol"],mr=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function vr(t){if(null===t)return"null";if(void 0===t)return"undefined";if(!0===t||!1===t)return"boolean";const e=typeof t;if(wr.includes(e))return e;if("function"===e)return"Function";if(Array.isArray(t))return"Array";if(function(t){return t&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t)}(t))return"Buffer";const n=function(t){const e=Object.prototype.toString.call(t).slice(8,-1);if(mr.includes(e))return e;return}(t);return n||"Object"}class br{constructor(t,e,n){this.major=t,this.majorEncoded=t<<5,this.name=e,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(t){return this.major<t.major?-1:this.major>t.major?1:0}}br.uint=new br(0,"uint",!0),br.negint=new br(1,"negint",!0),br.bytes=new br(2,"bytes",!0),br.string=new br(3,"string",!0),br.array=new br(4,"array",!1),br.map=new br(5,"map",!1),br.tag=new br(6,"tag",!1),br.float=new br(7,"float",!0),br.false=new br(7,"false",!0),br.true=new br(7,"true",!0),br.null=new br(7,"null",!0),br.undefined=new br(7,"undefined",!0),br.break=new br(7,"break",!0);class Ar{constructor(t,e,n){this.type=t,this.value=e,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const Er=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&"function"===typeof globalThis.Buffer.isBuffer,Dr=new TextDecoder,Br=new TextEncoder;function kr(t){return Er&&globalThis.Buffer.isBuffer(t)}function Cr(t){return t instanceof Uint8Array?kr(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t:Uint8Array.from(t)}const xr=Er?(t,e,n)=>n-e>64?globalThis.Buffer.from(t.subarray(e,n)).toString("utf8"):Or(t,e,n):(t,e,n)=>n-e>64?Dr.decode(t.subarray(e,n)):Or(t,e,n),Sr=Er?t=>t.length>64?globalThis.Buffer.from(t):Ur(t):t=>t.length>64?Br.encode(t):Ur(t),Fr=t=>Uint8Array.from(t),Ir=Er?(t,e,n)=>kr(t)?new Uint8Array(t.subarray(e,n)):t.slice(e,n):(t,e,n)=>t.slice(e,n),Nr=Er?(t,e)=>(t=t.map((t=>t instanceof Uint8Array?t:globalThis.Buffer.from(t))),Cr(globalThis.Buffer.concat(t,e))):(t,e)=>{const n=new Uint8Array(e);let r=0;for(let o of t)r+o.length>n.length&&(o=o.subarray(0,n.length-r)),n.set(o,r),r+=o.length;return n},Tr=Er?t=>globalThis.Buffer.allocUnsafe(t):t=>new Uint8Array(t);function Ur(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let o=t.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):55296===(64512&o)&&r+1<t.length&&56320===(64512&t.charCodeAt(r+1))?(o=65536+((1023&o)<<10)+(1023&t.charCodeAt(++r)),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e}function Or(t,e,n){const r=[];for(;e<n;){const o=t[e];let i=null,s=o>239?4:o>223?3:o>191?2:1;if(e+s<=n){let n,r,a,u;switch(s){case 1:o<128&&(i=o);break;case 2:n=t[e+1],128===(192&n)&&(u=(31&o)<<6|63&n,u>127&&(i=u));break;case 3:n=t[e+1],r=t[e+2],128===(192&n)&&128===(192&r)&&(u=(15&o)<<12|(63&n)<<6|63&r,u>2047&&(u<55296||u>57343)&&(i=u));break;case 4:n=t[e+1],r=t[e+2],a=t[e+3],128===(192&n)&&128===(192&r)&&128===(192&a)&&(u=(15&o)<<18|(63&n)<<12|(63&r)<<6|63&a,u>65535&&u<1114112&&(i=u))}}null===i?(i=65533,s=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|1023&i),r.push(i),e+=s}return function(t){const e=t.length;if(e<=Lr)return String.fromCharCode.apply(String,t);let n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=Lr));return n}(r)}const Lr=4096;class Rr{constructor(t=256){this.chunkSize=t,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),null!==this._initReuseChunk&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(t){let e=this.chunks[this.chunks.length-1];if(this.cursor+t.length<=this.maxCursor+1){const n=e.length-(this.maxCursor-this.cursor)-1;e.set(t,n)}else{if(e){const t=e.length-(this.maxCursor-this.cursor)-1;t<e.length&&(this.chunks[this.chunks.length-1]=e.subarray(0,t),this.maxCursor=this.cursor-1)}t.length<64&&t.length<this.chunkSize?(e=Tr(this.chunkSize),this.chunks.push(e),this.maxCursor+=e.length,null===this._initReuseChunk&&(this._initReuseChunk=e),e.set(t,0)):(this.chunks.push(t),this.maxCursor+=t.length)}this.cursor+=t.length}toBytes(t=!1){let e;if(1===this.chunks.length){const n=this.chunks[0];t&&this.cursor>n.length/2?(e=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):e=Ir(n,0,this.cursor)}else e=Nr(this.chunks,this.cursor);return t&&this.reset(),e}}const _r="CBOR decode error:",Pr="CBOR encode error:",jr=[];function Hr(t,e,n){if(t.length-e<n)throw new Error(`${_r} not enough data for type`)}jr[23]=1,jr[24]=2,jr[25]=3,jr[26]=5,jr[27]=9;const Vr=[24,256,65536,4294967296,BigInt("18446744073709551616")];function Mr(t,e,n){Hr(t,e,1);const r=t[e];if(!0===n.strict&&r<Vr[0])throw new Error(`${_r} integer encoded in more bytes than necessary (strict decode)`);return r}function zr(t,e,n){Hr(t,e,2);const r=t[e]<<8|t[e+1];if(!0===n.strict&&r<Vr[1])throw new Error(`${_r} integer encoded in more bytes than necessary (strict decode)`);return r}function Gr(t,e,n){Hr(t,e,4);const r=16777216*t[e]+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];if(!0===n.strict&&r<Vr[2])throw new Error(`${_r} integer encoded in more bytes than necessary (strict decode)`);return r}function $r(t,e,n){Hr(t,e,8);const r=16777216*t[e]+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3],o=16777216*t[e+4]+(t[e+5]<<16)+(t[e+6]<<8)+t[e+7],i=(BigInt(r)<<BigInt(32))+BigInt(o);if(!0===n.strict&&i<Vr[3])throw new Error(`${_r} integer encoded in more bytes than necessary (strict decode)`);if(i<=Number.MAX_SAFE_INTEGER)return Number(i);if(!0===n.allowBigInt)return i;throw new Error(`${_r} integers outside of the safe integer range are not supported`)}function qr(t,e){return Kr(t,0,e.value)}function Kr(t,e,n){if(n<Vr[0]){const r=Number(n);t.push([e|r])}else if(n<Vr[1]){const r=Number(n);t.push([24|e,r])}else if(n<Vr[2]){const r=Number(n);t.push([25|e,r>>>8,255&r])}else if(n<Vr[3]){const r=Number(n);t.push([26|e,r>>>24&255,r>>>16&255,r>>>8&255,255&r])}else{const r=BigInt(n);if(!(r<Vr[4]))throw new Error(`${_r} encountered BigInt larger than allowable range`);{const n=[27|e,0,0,0,0,0,0,0];let o=Number(r&BigInt(4294967295)),i=Number(r>>BigInt(32)&BigInt(4294967295));n[8]=255&o,o>>=8,n[7]=255&o,o>>=8,n[6]=255&o,o>>=8,n[5]=255&o,n[4]=255&i,i>>=8,n[3]=255&i,i>>=8,n[2]=255&i,i>>=8,n[1]=255&i,t.push(n)}}}qr.encodedSize=function(t){return Kr.encodedSize(t.value)},Kr.encodedSize=function(t){return t<Vr[0]?1:t<Vr[1]?2:t<Vr[2]?3:t<Vr[3]?5:9},qr.compareTokens=function(t,e){return t.value<e.value?-1:t.value>e.value?1:0};const Zr=BigInt(-1),Wr=BigInt(1);function Jr(t,e){const n=e.value,r="bigint"===typeof n?n*Zr-Wr:-1*n-1;Kr(t,e.type.majorEncoded,r)}function Yr(t,e,n,r){Hr(t,e,n+r);const o=Ir(t,e+n,e+n+r);return new Ar(br.bytes,o,n+r)}function Xr(t,e,n,r){return Yr(t,e,1,n)}function Qr(t){return void 0===t.encodedBytes&&(t.encodedBytes=t.type===br.string?Sr(t.value):t.value),t.encodedBytes}function to(t,e){const n=Qr(e);Kr(t,e.type.majorEncoded,n.length),t.push(n)}function eo(t,e,n,r,o){const i=n+r;Hr(t,e,i);const s=new Ar(br.string,xr(t,e+n,e+i),i);return!0===o.retainStringBytes&&(s.byteValue=Ir(t,e+n,e+i)),s}function no(t,e,n,r){return eo(t,e,1,n,r)}Jr.encodedSize=function(t){const e=t.value,n="bigint"===typeof e?e*Zr-Wr:-1*e-1;return n<Vr[0]?1:n<Vr[1]?2:n<Vr[2]?3:n<Vr[3]?5:9},Jr.compareTokens=function(t,e){return t.value<e.value?1:t.value>e.value?-1:0},to.encodedSize=function(t){const e=Qr(t);return Kr.encodedSize(e.length)+e.length},to.compareTokens=function(t,e){return n=Qr(t),r=Qr(e),n.length<r.length?-1:n.length>r.length?1:function(t,e){if(kr(t)&&kr(e))return t.compare(e);for(let n=0;n<t.length;n++)if(t[n]!==e[n])return t[n]<e[n]?-1:1;return 0}(n,r);var n,r};const ro=to;function oo(t,e,n,r){return new Ar(br.array,r,n)}function io(t,e,n,r){return oo(0,0,1,n)}function so(t,e){Kr(t,br.array.majorEncoded,e.value)}function ao(t,e,n,r){return new Ar(br.map,r,n)}function uo(t,e,n,r){return ao(0,0,1,n)}function co(t,e){Kr(t,br.map.majorEncoded,e.value)}function lo(t,e,n,r){return new Ar(br.tag,n,1)}function ho(t,e){Kr(t,br.tag.majorEncoded,e.value)}so.compareTokens=qr.compareTokens,so.encodedSize=function(t){return Kr.encodedSize(t.value)},co.compareTokens=qr.compareTokens,co.encodedSize=function(t){return Kr.encodedSize(t.value)},ho.compareTokens=qr.compareTokens,ho.encodedSize=function(t){return Kr.encodedSize(t.value)};function fo(t,e,n){if(n){if(!1===n.allowNaN&&Number.isNaN(t))throw new Error(`${_r} NaN values are not supported`);if(!1===n.allowInfinity&&(t===1/0||t===-1/0))throw new Error(`${_r} Infinity values are not supported`)}return new Ar(br.float,t,e)}function go(t,e,n){const r=e.value;if(!1===r)t.push([20|br.float.majorEncoded]);else if(!0===r)t.push([21|br.float.majorEncoded]);else if(null===r)t.push([22|br.float.majorEncoded]);else if(void 0===r)t.push([23|br.float.majorEncoded]);else{let e,i=!1;n&&!0===n.float64||(mo(r),e=vo(wo,1),r===e||Number.isNaN(r)?(wo[0]=249,t.push(wo.slice(0,3)),i=!0):(bo(r),e=Ao(wo,1),r===e&&(wo[0]=250,t.push(wo.slice(0,5)),i=!0))),i||(o=r,yo.setFloat64(0,o,!1),e=Eo(wo,1),wo[0]=251,t.push(wo.slice(0,9)))}var o}go.encodedSize=function(t,e){const n=t.value;if(!1===n||!0===n||null===n||void 0===n)return 1;if(!e||!0!==e.float64){mo(n);let t=vo(wo,1);if(n===t||Number.isNaN(n))return 3;if(bo(n),t=Ao(wo,1),n===t)return 5}return 9};const po=new ArrayBuffer(9),yo=new DataView(po,1),wo=new Uint8Array(po,0);function mo(t){if(t===1/0)yo.setUint16(0,31744,!1);else if(t===-1/0)yo.setUint16(0,64512,!1);else if(Number.isNaN(t))yo.setUint16(0,32256,!1);else{yo.setFloat32(0,t);const e=yo.getUint32(0),n=(2139095040&e)>>23,r=8388607&e;if(255===n)yo.setUint16(0,31744,!1);else if(0===n)yo.setUint16(0,(2147483648&t)>>16|r>>13,!1);else{const t=n-127;t<-24?yo.setUint16(0,0):t<-14?yo.setUint16(0,(2147483648&e)>>16|1<<24+t,!1):yo.setUint16(0,(2147483648&e)>>16|t+15<<10|r>>13,!1)}}}function vo(t,e){if(t.length-e<2)throw new Error(`${_r} not enough data for float16`);const n=(t[e]<<8)+t[e+1];if(31744===n)return 1/0;if(64512===n)return-1/0;if(32256===n)return NaN;const r=n>>10&31,o=1023&n;let i;return i=0===r?o*2**-24:31!==r?(o+1024)*2**(r-25):0===o?1/0:NaN,32768&n?-i:i}function bo(t){yo.setFloat32(0,t,!1)}function Ao(t,e){if(t.length-e<4)throw new Error(`${_r} not enough data for float32`);const n=(t.byteOffset||0)+e;return new DataView(t.buffer,n,4).getFloat32(0,!1)}function Eo(t,e){if(t.length-e<8)throw new Error(`${_r} not enough data for float64`);const n=(t.byteOffset||0)+e;return new DataView(t.buffer,n,8).getFloat64(0,!1)}function Do(t,e,n){throw new Error(`${_r} encountered invalid minor (${n}) for major ${t[e]>>>5}`)}function Bo(t){return()=>{throw new Error(`${_r} ${t}`)}}go.compareTokens=qr.compareTokens;const ko=[];for(let yy=0;yy<=23;yy++)ko[yy]=Do;ko[24]=function(t,e,n,r){return new Ar(br.uint,Mr(t,e+1,r),2)},ko[25]=function(t,e,n,r){return new Ar(br.uint,zr(t,e+1,r),3)},ko[26]=function(t,e,n,r){return new Ar(br.uint,Gr(t,e+1,r),5)},ko[27]=function(t,e,n,r){return new Ar(br.uint,$r(t,e+1,r),9)},ko[28]=Do,ko[29]=Do,ko[30]=Do,ko[31]=Do;for(let yy=32;yy<=55;yy++)ko[yy]=Do;ko[56]=function(t,e,n,r){return new Ar(br.negint,-1-Mr(t,e+1,r),2)},ko[57]=function(t,e,n,r){return new Ar(br.negint,-1-zr(t,e+1,r),3)},ko[58]=function(t,e,n,r){return new Ar(br.negint,-1-Gr(t,e+1,r),5)},ko[59]=function(t,e,n,r){const o=$r(t,e+1,r);if("bigint"!==typeof o){const t=-1-o;if(t>=Number.MIN_SAFE_INTEGER)return new Ar(br.negint,t,9)}if(!0!==r.allowBigInt)throw new Error(`${_r} integers outside of the safe integer range are not supported`);return new Ar(br.negint,Zr-BigInt(o),9)},ko[60]=Do,ko[61]=Do,ko[62]=Do,ko[63]=Do;for(let yy=64;yy<=87;yy++)ko[yy]=Xr;ko[88]=function(t,e,n,r){return Yr(t,e,2,Mr(t,e+1,r))},ko[89]=function(t,e,n,r){return Yr(t,e,3,zr(t,e+1,r))},ko[90]=function(t,e,n,r){return Yr(t,e,5,Gr(t,e+1,r))},ko[91]=function(t,e,n,r){const o=$r(t,e+1,r);if("bigint"===typeof o)throw new Error(`${_r} 64-bit integer bytes lengths not supported`);return Yr(t,e,9,o)},ko[92]=Do,ko[93]=Do,ko[94]=Do,ko[95]=Bo("indefinite length bytes/strings are not supported");for(let yy=96;yy<=119;yy++)ko[yy]=no;ko[120]=function(t,e,n,r){return eo(t,e,2,Mr(t,e+1,r),r)},ko[121]=function(t,e,n,r){return eo(t,e,3,zr(t,e+1,r),r)},ko[122]=function(t,e,n,r){return eo(t,e,5,Gr(t,e+1,r),r)},ko[123]=function(t,e,n,r){const o=$r(t,e+1,r);if("bigint"===typeof o)throw new Error(`${_r} 64-bit integer string lengths not supported`);return eo(t,e,9,o,r)},ko[124]=Do,ko[125]=Do,ko[126]=Do,ko[127]=Bo("indefinite length bytes/strings are not supported");for(let yy=128;yy<=151;yy++)ko[yy]=io;ko[152]=function(t,e,n,r){return oo(0,0,2,Mr(t,e+1,r))},ko[153]=function(t,e,n,r){return oo(0,0,3,zr(t,e+1,r))},ko[154]=function(t,e,n,r){return oo(0,0,5,Gr(t,e+1,r))},ko[155]=function(t,e,n,r){const o=$r(t,e+1,r);if("bigint"===typeof o)throw new Error(`${_r} 64-bit integer array lengths not supported`);return oo(0,0,9,o)},ko[156]=Do,ko[157]=Do,ko[158]=Do,ko[159]=function(t,e,n,r){if(!1===r.allowIndefinite)throw new Error(`${_r} indefinite length items not allowed`);return oo(0,0,1,1/0)};for(let yy=160;yy<=183;yy++)ko[yy]=uo;ko[184]=function(t,e,n,r){return ao(0,0,2,Mr(t,e+1,r))},ko[185]=function(t,e,n,r){return ao(0,0,3,zr(t,e+1,r))},ko[186]=function(t,e,n,r){return ao(0,0,5,Gr(t,e+1,r))},ko[187]=function(t,e,n,r){const o=$r(t,e+1,r);if("bigint"===typeof o)throw new Error(`${_r} 64-bit integer map lengths not supported`);return ao(0,0,9,o)},ko[188]=Do,ko[189]=Do,ko[190]=Do,ko[191]=function(t,e,n,r){if(!1===r.allowIndefinite)throw new Error(`${_r} indefinite length items not allowed`);return ao(0,0,1,1/0)};for(let yy=192;yy<=215;yy++)ko[yy]=lo;ko[216]=function(t,e,n,r){return new Ar(br.tag,Mr(t,e+1,r),2)},ko[217]=function(t,e,n,r){return new Ar(br.tag,zr(t,e+1,r),3)},ko[218]=function(t,e,n,r){return new Ar(br.tag,Gr(t,e+1,r),5)},ko[219]=function(t,e,n,r){return new Ar(br.tag,$r(t,e+1,r),9)},ko[220]=Do,ko[221]=Do,ko[222]=Do,ko[223]=Do;for(let yy=224;yy<=243;yy++)ko[yy]=Bo("simple values are not supported");ko[244]=Do,ko[245]=Do,ko[246]=Do,ko[247]=function(t,e,n,r){if(!1===r.allowUndefined)throw new Error(`${_r} undefined values are not supported`);return!0===r.coerceUndefinedToNull?new Ar(br.null,null,1):new Ar(br.undefined,void 0,1)},ko[248]=Bo("simple values are not supported"),ko[249]=function(t,e,n,r){return fo(vo(t,e+1),3,r)},ko[250]=function(t,e,n,r){return fo(Ao(t,e+1),5,r)},ko[251]=function(t,e,n,r){return fo(Eo(t,e+1),9,r)},ko[252]=Do,ko[253]=Do,ko[254]=Do,ko[255]=function(t,e,n,r){if(!1===r.allowIndefinite)throw new Error(`${_r} indefinite length items not allowed`);return new Ar(br.break,void 0,1)};const Co=[];for(let yy=0;yy<24;yy++)Co[yy]=new Ar(br.uint,yy,1);for(let yy=-1;yy>=-24;yy--)Co[31-yy]=new Ar(br.negint,yy,1);Co[64]=new Ar(br.bytes,new Uint8Array(0),1),Co[96]=new Ar(br.string,"",1),Co[128]=new Ar(br.array,0,1),Co[160]=new Ar(br.map,0,1),Co[244]=new Ar(br.false,!1,1),Co[245]=new Ar(br.true,!0,1),Co[246]=new Ar(br.null,null,1);const xo={float64:!1,mapSorter:function(t,e){const n=Array.isArray(t[0])?t[0][0]:t[0],r=Array.isArray(e[0])?e[0][0]:e[0];if(n.type!==r.type)return n.type.compare(r.type);const o=n.type.major,i=So[o].compareTokens(n,r);0===i&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone");return i},quickEncodeToken:function(t){switch(t.type){case br.false:return Fr([244]);case br.true:return Fr([245]);case br.null:return Fr([246]);case br.bytes:return t.value.length?void 0:Fr([64]);case br.string:return""===t.value?Fr([96]):void 0;case br.array:return 0===t.value?Fr([128]):void 0;case br.map:return 0===t.value?Fr([160]):void 0;case br.uint:return t.value<24?Fr([Number(t.value)]):void 0;case br.negint:if(t.value>=-24)return Fr([31-Number(t.value)])}}};const So=function(){const t=[];return t[br.uint.major]=qr,t[br.negint.major]=Jr,t[br.bytes.major]=to,t[br.string.major]=ro,t[br.array.major]=so,t[br.map.major]=co,t[br.tag.major]=ho,t[br.float.major]=go,t}(),Fo=new Rr;class Io{constructor(t,e){this.obj=t,this.parent=e}includes(t){let e=this;do{if(e.obj===t)return!0}while(e=e.parent);return!1}static createCheck(t,e){if(t&&t.includes(e))throw new Error(`${Pr} object contains circular references`);return new Io(e,t)}}const No={null:new Ar(br.null,null),undefined:new Ar(br.undefined,void 0),true:new Ar(br.true,!0),false:new Ar(br.false,!1),emptyArray:new Ar(br.array,0),emptyMap:new Ar(br.map,0)},To={number:(t,e,n,r)=>Number.isInteger(t)&&Number.isSafeInteger(t)?new Ar(t>=0?br.uint:br.negint,t):new Ar(br.float,t),bigint:(t,e,n,r)=>t>=BigInt(0)?new Ar(br.uint,t):new Ar(br.negint,t),Uint8Array:(t,e,n,r)=>new Ar(br.bytes,t),string:(t,e,n,r)=>new Ar(br.string,t),boolean:(t,e,n,r)=>t?No.true:No.false,null:(t,e,n,r)=>No.null,undefined:(t,e,n,r)=>No.undefined,ArrayBuffer:(t,e,n,r)=>new Ar(br.bytes,new Uint8Array(t)),DataView:(t,e,n,r)=>new Ar(br.bytes,new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),Array(t,e,n,r){if(!t.length)return!0===n.addBreakTokens?[No.emptyArray,new Ar(br.break)]:No.emptyArray;r=Io.createCheck(r,t);const o=[];let i=0;for(const s of t)o[i++]=Uo(s,n,r);return n.addBreakTokens?[new Ar(br.array,t.length),o,new Ar(br.break)]:[new Ar(br.array,t.length),o]},Object(t,e,n,r){const o="Object"!==e,i=o?t.keys():Object.keys(t),s=o?t.size:i.length;if(!s)return!0===n.addBreakTokens?[No.emptyMap,new Ar(br.break)]:No.emptyMap;r=Io.createCheck(r,t);const a=[];let u=0;for(const c of i)a[u++]=[Uo(c,n,r),Uo(o?t.get(c):t[c],n,r)];return function(t,e){e.mapSorter&&t.sort(e.mapSorter)}(a,n),n.addBreakTokens?[new Ar(br.map,s),a,new Ar(br.break)]:[new Ar(br.map,s),a]}};To.Map=To.Object,To.Buffer=To.Uint8Array;for(const yy of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))To[`${yy}Array`]=To.DataView;function Uo(t,e={},n){const r=vr(t),o=e&&e.typeEncoders&&e.typeEncoders[r]||To[r];if("function"===typeof o){const i=o(t,r,e,n);if(null!=i)return i}const i=To[r];if(!i)throw new Error(`${Pr} unsupported type: ${r}`);return i(t,r,e,n)}function Oo(t,e,n,r){if(Array.isArray(e))for(const o of e)Oo(t,o,n,r);else n[e.type.major](t,e,r)}function Lo(t,e,n){const r=Uo(t,n);if(!Array.isArray(r)&&n.quickEncodeToken){const t=n.quickEncodeToken(r);if(t)return t;const o=e[r.type.major];if(o.encodedSize){const t=o.encodedSize(r,n),e=new Rr(t);if(o(e,r,n),1!==e.chunks.length)throw new Error(`Unexpected error: pre-calculated length for ${r} was wrong`);return Cr(e.chunks[0])}}return Fo.reset(),Oo(Fo,r,e,n),Fo.toBytes(!0)}const Ro={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class _o{constructor(t,e={}){this._pos=0,this.data=t,this.options=e}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){const t=this.data[this._pos];let e=Co[t];if(void 0===e){const n=ko[t];if(!n)throw new Error(`${_r} no decoder for major type ${t>>>5} (byte 0x${t.toString(16).padStart(2,"0")})`);const r=31&t;e=n(this.data,this._pos,r,this.options)}return this._pos+=e.encodedLength,e}}const Po=Symbol.for("DONE"),jo=Symbol.for("BREAK");function Ho(t,e){if(t.done())return Po;const n=t.next();if(n.type===br.break)return jo;if(n.type.terminal)return n.value;if(n.type===br.array)return function(t,e,n){const r=[];for(let o=0;o<t.value;o++){const i=Ho(e,n);if(i===jo){if(t.value===1/0)break;throw new Error(`${_r} got unexpected break to lengthed array`)}if(i===Po)throw new Error(`${_r} found array but not enough entries (got ${o}, expected ${t.value})`);r[o]=i}return r}(n,t,e);if(n.type===br.map)return function(t,e,n){const r=!0===n.useMaps,o=r?void 0:{},i=r?new Map:void 0;for(let s=0;s<t.value;s++){const a=Ho(e,n);if(a===jo){if(t.value===1/0)break;throw new Error(`${_r} got unexpected break to lengthed map`)}if(a===Po)throw new Error(`${_r} found map but not enough entries (got ${s} [no key], expected ${t.value})`);if(!0!==r&&"string"!==typeof a)throw new Error(`${_r} non-string keys not supported (got ${typeof a})`);if(!0===n.rejectDuplicateMapKeys&&(r&&i.has(a)||!r&&a in o))throw new Error(`${_r} found repeat map key "${a}"`);const u=Ho(e,n);if(u===Po)throw new Error(`${_r} found map but not enough entries (got ${s} [no value], expected ${t.value})`);r?i.set(a,u):o[a]=u}return r?i:o}(n,t,e);if(n.type===br.tag){if(e.tags&&"function"===typeof e.tags[n.value]){const r=Ho(t,e);return e.tags[n.value](r)}throw new Error(`${_r} tag not supported (${n.value})`)}throw new Error("unsupported")}function Vo(t,e){const[n,r]=function(t,e){if(!(t instanceof Uint8Array))throw new Error(`${_r} data to decode must be a Uint8Array`);const n=(e=Object.assign({},Ro,e)).tokenizer||new _o(t,e),r=Ho(n,e);if(r===Po)throw new Error(`${_r} did not find any content to decode`);if(r===jo)throw new Error(`${_r} got unexpected break`);return[r,t.subarray(n.pos())]}(t,e);if(r.length>0)throw new Error(`${_r} too many terminals, data makes no sense`);return n}const Mo={float64:!0,typeEncoders:{Object:function(t){if(t.asCID!==t&&t["/"]!==t.bytes)return null;const e=Pt.TO.asCID(t);if(!e)return null;const n=new Uint8Array(e.bytes.byteLength+1);return n.set(e.bytes,1),[new Ar(br.tag,42),new Ar(br.bytes,n)]},undefined:function(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")},number:function(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}}};const zo={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};zo.tags[42]=function(t){if(0!==t[0])throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return Pt.TO.decode(t.subarray(1))};zo.tags.slice();const Go=t=>{return e=t,n=Mo,n=Object.assign({},xo,n),Lo(e,So,n);var e,n},$o=t=>Vo(function(t){return t instanceof ArrayBuffer?new Uint8Array(t,0,t.byteLength):t}(t),zo),qo="dag-jose",Ko=133;function Zo(t){return"payload"in t&&"string"===typeof t.payload&&"signatures"in t&&Array.isArray(t.signatures)}function Wo(t){return"ciphertext"in t&&"string"===typeof t.ciphertext&&"iv"in t&&"string"===typeof t.iv&&"protected"in t&&"string"===typeof t.protected&&"tag"in t&&"string"===typeof t.tag}function Jo(t){if("string"===typeof t){const e=t.split(".");if(3===e.length)return function(t){const[e,n,r]=t;return{payload:n,signatures:[{protected:e,signature:r}],link:Pt.TO.decode(lr(n))}}(e);if(5===e.length)return function(t){const[e,n,r,o,i]=t,s={ciphertext:o,iv:r,protected:e,tag:i};return n&&(s.recipients=[{encrypted_key:n}]),s}(e);throw new Error("Not a valid JOSE string")}if(Zo(t)||Wo(t))return t;throw new Error("Not a valid unencoded JOSE object")}function Yo(t){let e;if("string"===typeof t&&(t=Jo(t)),Zo(t))e={payload:lr((n=t).payload),signatures:n.signatures.map(hr)};else{if(!Wo(t))throw new Error("Not a valid JOSE object");e=function(t){const e={ciphertext:lr(t.ciphertext),protected:lr(t.protected),iv:lr(t.iv),tag:lr(t.tag)};return t.aad&&(e.aad=lr(t.aad)),t.recipients&&(e.recipients=t.recipients.map(pr)),t.unprotected&&(e.unprotected=t.unprotected),e}(t)}var n;return new Uint8Array(Go(e))}function Xo(t){let e;try{e=$o(t)}catch(r){throw new Error("Not a valid DAG-JOSE object")}if("payload"in(n=e)&&n.payload instanceof Uint8Array&&"signatures"in n&&Array.isArray(n.signatures))return dr(e);if(function(t){return"ciphertext"in t&&t.ciphertext instanceof Uint8Array&&"iv"in t&&t.iv instanceof Uint8Array&&"protected"in t&&t.protected instanceof Uint8Array&&"tag"in t&&t.tag instanceof Uint8Array}(e))return function(t){const e={ciphertext:cr(t.ciphertext),protected:cr(t.protected),iv:cr(t.iv),tag:cr(t.tag)};return t.aad&&(e.aad=cr(t.aad)),t.recipients&&(e.recipients=t.recipients.map(yr)),t.unprotected&&(e.unprotected=t.unprotected),e}(e);throw new Error("Not a valid DAG-JOSE object");var n}var Qo=n(31046),ti=n(82970);function ei(t){return new u(t,0)}var ni=n(18354);function ri(t){const e=new globalThis.AbortController;function n(){e.abort();for(const e of t)null!=(null===e||void 0===e?void 0:e.removeEventListener)&&e.removeEventListener("abort",n)}for(const o of t){if(!0===(null===o||void 0===o?void 0:o.aborted)){n();break}null!=(null===o||void 0===o?void 0:o.addEventListener)&&o.addEventListener("abort",n)}const r=e.signal;return r.clear=function(){for(const e of t)null!=(null===e||void 0===e?void 0:e.removeEventListener)&&e.removeEventListener("abort",n)},r}var oi=n(4053),ii=n.n(oi);const si="object"===typeof window&&"object"===typeof document&&9===document.nodeType,ai=ii()(),ui=si&&!ai,ci=ai&&si,li="undefined"!==typeof globalThis.process&&"undefined"!==typeof globalThis.process.release&&"node"===globalThis.process.release.name&&!ai,hi="function"===typeof importScripts&&"undefined"!==typeof self&&"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope;"undefined"!==typeof globalThis.process&&"undefined"!==typeof globalThis.process.env&&globalThis.process.env.NODE_ENV,"undefined"!==typeof navigator&&navigator.product;function fi(t){var e={},n=!1;function r(e,r){return n=!0,r=new Promise((function(n){n(t[e](r))})),{done:!1,value:new u(r,1)}}return e["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},e.next=function(t){return n?(n=!1,t):r("next",t)},"function"==typeof t.throw&&(e.throw=function(t){if(n)throw n=!1,t;return r("throw",t)}),"function"==typeof t.return&&(e.return=function(t){return n?(n=!1,t):r("return",t)}),e}function di(t){return gi.apply(this,arguments)}function gi(){return gi=c((function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){const n=t.getReader();try{for(;;){const t=yield ei(n.read());if(t.done)return;yield t.value}}finally{!0!==e.preventCancel&&(yield ei(n.cancel())),n.releaseLock()}}()})),gi.apply(this,arguments)}var pi=n(54823),yi=n.n(pi);const wi=function(t){const[e,n]=null!=t[Symbol.asyncIterator]?[t[Symbol.asyncIterator](),Symbol.asyncIterator]:[t[Symbol.iterator](),Symbol.iterator],r=[];return{peek:()=>e.next(),push:t=>{r.push(t)},next:()=>r.length>0?{done:!1,value:r.shift()}:e.next(),[n](){return this}}};const mi=function(t,e){let n=0;if(null!=t[Symbol.asyncIterator])return c((function*(){var r,o=!1,i=!1;try{for(var s,a=(0,ni.A)(t);o=!(s=yield ei(a.next())).done;o=!1){const t=s.value;yield e(t,n++)}}catch(u){i=!0,r=u}finally{try{o&&null!=a.return&&(yield ei(a.return()))}finally{if(i)throw r}}}))();const r=wi(t),{value:o,done:i}=r.next();if(!0===i)return function*(){}();const s=e(o,n++);if("function"===typeof s.then)return c((function*(){yield yield ei(s);var t,o=!1,i=!1;try{for(var a,u=(0,ni.A)(r);o=!(a=yield ei(u.next())).done;o=!1){const t=a.value;yield e(t,n++)}}catch(c){i=!0,t=c}finally{try{o&&null!=u.return&&(yield ei(u.return()))}finally{if(i)throw t}}}))();const a=e;return function*(){yield s;for(const t of r)yield a(t,n++)}()};Error;Error;class vi extends Error{constructor(t){super(t.statusText),(0,f.A)(this,"response",void 0),this.name="HTTPError",this.response=t}}class bi extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Invalid mtime"),this.name="InvalidMtimeError"}}function Ai(t){return ArrayBuffer.isView(t)||t instanceof ArrayBuffer}function Ei(t){return null!=t.constructor&&("Blob"===t.constructor.name||"File"===t.constructor.name)&&"function"===typeof t.stream}function Di(t){return"object"===typeof t&&(null!=t.path||null!=t.content)}function Bi(t){return"function"===typeof(null===t||void 0===t?void 0:t.getReader)}function ki(t){if(null!=t)return"string"===typeof t&&(t=parseInt(t,8)),4095&t}function Ci(t){if(null!=t){var e;if(e=t,Object.prototype.hasOwnProperty.call(e,"secs")&&(t={secs:t.secs,nsecs:t.nsecs}),function(t){return Object.prototype.hasOwnProperty.call(t,"Seconds")}(t)&&(t={secs:BigInt(t.Seconds),nsecs:t.FractionalNanoseconds}),function(t){return Array.isArray(t)}(t)&&(t={secs:BigInt(t[0]),nsecs:t[1]}),t instanceof Date){const e=t.getTime(),n=Math.floor(e/1e3);t={secs:BigInt(n),nsecs:1e3*(e-1e3*n)}}if("bigint"===typeof t){const e=t/BigInt(1e9),n=t-e*BigInt(1e9);t={secs:e,nsecs:Number(n)}}if(Object.prototype.hasOwnProperty.call(t,"secs")){if(null!=t.nsecs&&(t.nsecs<0||t.nsecs>999999999))throw new bi("mtime-nsecs must be within the range [0,999999999]");return t}}}function xi(){return xi=c((function*(t,e){if("string"===typeof t||t instanceof String||Ai(t)||Ei(t)||null!=t._readableState)throw yi()(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(Bi(t)&&(t=di(t)),Symbol.iterator in t||Symbol.asyncIterator in t){const n=wi(t),{value:r,done:o}=yield ei(n.peek());if(!0===o)return void(yield*fi((0,ni.A)([])));if(n.push(r),Number.isInteger(r))throw yi()(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(null!=r._readableState)return void(yield*fi((0,ni.A)(mi(n,(async t=>Si({content:t},e))))));if(Ai(r))return void(yield Si({content:n},e));if(Di(r)||r[Symbol.iterator]||r[Symbol.asyncIterator]||Bi(r)||Ei(r))return void(yield*fi((0,ni.A)(mi(n,(async t=>Si(t,e))))))}if(Di(t))throw yi()(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");throw yi()(new Error("Unexpected input: "+typeof t),"ERR_UNEXPECTED_INPUT")})),xi.apply(this,arguments)}async function Si(t,e){const{path:n,mode:r,mtime:o,content:i}=t,s={path:null!==n&&void 0!==n?n:"",mode:ki(r),mtime:Ci(o)};return null!=i?s.content=await e(i):null==n&&(s.content=await e(t)),s}class Fi extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The operation was aborted"),this.name="AbortError"}}(0,f.A)(Fi,"name","AbortError");class Ii extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected Peer"),this.name="UnexpectedPeerError"}}(0,f.A)(Ii,"name","UnexpectedPeerError");class Ni extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Invalid crypto exchange"),this.name="InvalidCryptoExchangeError"}}(0,f.A)(Ni,"name","InvalidCryptoExchangeError");class Ti extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Invalid parameters"),this.name="InvalidParametersError"}}(0,f.A)(Ti,"name","InvalidParametersError");class Ui extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Invalid public key"),this.name="InvalidPublicKeyError"}}(0,f.A)(Ui,"name","InvalidPublicKeyError");class Oi extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Invalid private key"),this.name="InvalidPrivateKeyError"}}(0,f.A)(Oi,"name","InvalidPrivateKeyError");class Li extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unsupported operation"),this.name="UnsupportedOperationError"}}(0,f.A)(Li,"name","UnsupportedOperationError");class Ri extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The connection is closing"),this.name="ConnectionClosingError"}}(0,f.A)(Ri,"name","ConnectionClosingError");class _i extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The connection is closed"),this.name="ConnectionClosedError"}}(0,f.A)(_i,"name","ConnectionClosedError");class Pi extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Connection failed"),this.name="ConnectionFailedError"}}(0,f.A)(Pi,"name","ConnectionFailedError");class ji extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The muxer is closed"),this.name="MuxerClosedError"}}(0,f.A)(ji,"name","MuxerClosedError");class Hi extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The stream has been reset"),this.name="StreamResetError"}}(0,f.A)(Hi,"name","StreamResetError");class Vi extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The stream is in an invalid state"),this.name="StreamStateError"}}(0,f.A)(Vi,"name","StreamStateError");class Mi extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Not found"),this.name="NotFoundError"}}(0,f.A)(Mi,"name","NotFoundError");class zi extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Invalid PeerID"),this.name="InvalidPeerIdError"}}(0,f.A)(zi,"name","InvalidPeerIdError");class Gi extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Invalid multiaddr"),this.name="InvalidMultiaddrError"}}(0,f.A)(Gi,"name","InvalidMultiaddrError");class $i extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Invalid CID"),this.name="InvalidCIDError"}}(0,f.A)($i,"name","InvalidCIDError");class qi extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Invalid Multihash"),this.name="InvalidMultihashError"}}(0,f.A)(qi,"name","InvalidMultihashError");class Ki extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unsupported protocol error"),this.name="UnsupportedProtocolError"}}(0,f.A)(Ki,"name","UnsupportedProtocolError");class Zi extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Invalid message"),this.name="InvalidMessageError"}}(0,f.A)(Zi,"name","InvalidMessageError");class Wi extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Protocol error"),this.name="ProtocolError"}}(0,f.A)(Wi,"name","ProtocolError");class Ji extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Timed out"),this.name="TimeoutError"}}(0,f.A)(Ji,"name","TimeoutError");class Yi extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Not started"),this.name="NotStartedError"}}(0,f.A)(Yi,"name","NotStartedError");class Xi extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Already started"),this.name="AlreadyStartedError"}}(0,f.A)(Xi,"name","AlreadyStartedError");class Qi extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Dial error"),this.name="DialError"}}(0,f.A)(Qi,"name","DialError");class ts extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Listen error"),this.name="ListenError"}}(0,f.A)(ts,"name","ListenError");class es extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Limited connection"),this.name="LimitedConnectionError"}}(0,f.A)(es,"name","LimitedConnectionError");class ns extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Too many inbound protocol streams"),this.name="TooManyInboundProtocolStreamsError"}}(0,f.A)(ns,"name","TooManyInboundProtocolStreamsError");class rs extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Too many outbound protocol streams"),this.name="TooManyOutboundProtocolStreamsError"}}(0,f.A)(rs,"name","TooManyOutboundProtocolStreamsError");class os extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unsupported key type"),this.name="UnsupportedKeyTypeError"}}(0,f.A)(os,"name","UnsupportedKeyTypeError");class is extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Not implemented"),this.name="NotImplementedError"}}(0,f.A)(is,"name","NotImplementedError");const ss=function(t){if(null!=t[Symbol.asyncIterator])return(async()=>{const e=[];var n,r=!1,o=!1;try{for(var i,s=(0,ni.A)(t);r=!(i=await s.next()).done;r=!1){const t=i.value;e.push(t)}}catch(a){o=!0,n=a}finally{try{r&&null!=s.return&&await s.return()}finally{if(o)throw n}}return e})();const e=[];for(const n of t)e.push(n);return e};async function as(t){if(Ai(t))return new Blob([t]);if("string"===typeof t||t instanceof String)return new Blob([t.toString()]);if(Ei(t))return t;if(Bi(t)&&(t=di(t)),Symbol.iterator in t||Symbol.asyncIterator in t){const e=wi(t),{value:n,done:r}=await e.peek();if(!0===r)return us(e);if(e.push(n),Number.isInteger(n))return new Blob([Uint8Array.from(await ss(e))]);if(Ai(n)||"string"===typeof n||n instanceof String)return us(e)}throw new Ti("Unexpected input: ".concat(t))}async function us(t){const e=[];var n,r=!1,o=!1;try{for(var i,s=(0,ni.A)(t);r=!(i=await s.next()).done;r=!1){const t=i.value;e.push(t)}}catch(a){o=!0,n=a}finally{try{r&&null!=s.return&&await s.return()}finally{if(o)throw n}}return new Blob(e)}function cs(t){return function(t,e){return xi.apply(this,arguments)}(t,as,!0)}function ls(t){if(null!=t)return"string"===typeof t?t:t.toString(8).padStart(4,"0")}async function hs(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=[],o=new FormData;let i=0,s=0;var a,u=!1,c=!1;try{for(var l,h=(0,ni.A)(cs(t));u=!(l=await h.next()).done;u=!1){const{content:t,path:e,mode:n,mtime:a}=l.value;{let u="";const c=null!=t?"file":"dir";i>0&&(u="-".concat(i));let l=c+u;const h=[];if(null!==n&&void 0!==n&&h.push("mode=".concat(ls(n))),null!=a){const{secs:t,nsecs:e}=a;h.push("mtime=".concat(t)),null!=e&&h.push("mtime-nsecs=".concat(e))}if(h.length>0&&(l="".concat(l,"?").concat(h.join("&"))),null!=t){o.set(l,t,null!=e?encodeURIComponent(e):void 0);const n=s+t.size;r.push({name:e,start:s,end:n}),s=n}else{if(null==e)throw new Error("path or content or both must be set");o.set(l,new File([""],encodeURIComponent(e),{type:"application/x-directory"}))}i++}}}catch(f){c=!0,a=f}finally{try{u&&null!=h.return&&await h.return()}finally{if(c)throw a}}return{total:s,parts:r,headers:n,body:o}}async function fs(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"-----------------------------".concat(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21,e="",n=crypto.getRandomValues(new Uint8Array(t|=0));for(;t--;)e+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&n[t]];return e}()),o=hs;return ci&&(o=hs),o(t,e,n,r)}function ds(t){if(null==t)return t;const e=/^[A-Z]+$/;return Object.keys(t).reduce(((n,r)=>(e.test(r)?n[r.toLowerCase()]=t[r]:e.test(r[0])?n[r[0].toLowerCase()+r.slice(1)]=t[r]:n[r]=t[r],n)),{})}var gs=n(58160);const ps=["arg","searchParams","hashAlg","mtime","mode"];function ys(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{arg:e,searchParams:n,hashAlg:r,mtime:o,mode:i}=t,s=(0,gs.A)(t,ps);null!=n&&(s=(0,d.A)((0,d.A)({},s),n)),null!=r&&(s.hash=r),null!=o&&(o=Ci(o),s.mtime=o.secs,s.mtimeNsecs=o.nsecs),null!=i&&(s.mode=ls(i)),isNaN(s.timeout)||(s.timeout="".concat(s.timeout,"ms")),void 0===e||null===e?e=[]:Array.isArray(e)||(e=[e]);const a=new URLSearchParams(s);return e.forEach((t=>{a.append("arg",t)})),a}function ws(t){return function(){var e=c((function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){const r=new AbortController,o=ri([r.signal,n.signal]);try{const{headers:f,body:g,total:p,parts:y}=yield ei(fs(e,r,n.headers)),[w,m]="function"===typeof n.progress?ms(p,n.progress,y):[void 0,void 0],v=yield ei(t.post("add",{searchParams:ys((0,d.A)((0,d.A)({"stream-channels":!0},n),{},{progress:Boolean(w)})),onUploadProgress:m,signal:o,headers:f,body:g}));var i,s=!1,a=!1;try{for(var u,c=(0,ni.A)(v.ndjson());s=!(u=yield ei(c.next())).done;s=!1){let t=u.value;if(t=ds(t),void 0!==t.hash)yield bs(t);else if(null!=w){var l;w(null!==(l=t.bytes)&&void 0!==l?l:0,t.name)}}}catch(h){a=!0,i=h}finally{try{s&&null!=c.return&&(yield ei(c.return()))}finally{if(a)throw i}}}finally{o.clear()}}()}));return function(t){return e.apply(this,arguments)}}()}const ms=(t,e,n)=>null!=n?[void 0,vs(t,n,e)]:[e,void 0],vs=(t,e,n)=>{let r=0;const o=e.length;return i=>{let{loaded:s,total:a}=i;const u=Math.floor(s/a*t);for(;r<o;){const{start:t,end:o,name:i}=e[r];if(u<o){n(u-t,i);break}n(o-t,i),r+=1}}};function bs(t){let{name:e,hash:n,size:r,mode:o,mtime:i,mtimeNsecs:s}=t;const a={path:e,cid:Pt.TO.parse(n),size:parseInt(r)};return null!=o&&(a.mode=parseInt(o,8)),null!=i&&(a.mtime={secs:i,nsecs:null!==s&&void 0!==s?s:0}),a}const As=function(t){if(null!=t[Symbol.asyncIterator])return(async()=>{let e;var n,r=!1,o=!1;try{for(var i,s=(0,ni.A)(t);r=!(i=await s.next()).done;r=!1){e=i.value}}catch(a){o=!0,n=a}finally{try{r&&null!=s.return&&await s.return()}finally{if(o)throw n}}return e})();let e;for(const n of t)e=n;return e};function Es(){return Es=c((function*(t,e){if(null===t||void 0===t)throw yi()(new Error("Unexpected input: ".concat(t)),"ERR_UNEXPECTED_INPUT");if("string"===typeof t||t instanceof String)yield Ds(t.toString(),e);else if(Ai(t)||Ei(t))yield Ds(t,e);else{if(Bi(t)&&(t=di(t)),Symbol.iterator in t||Symbol.asyncIterator in t){const n=wi(t),{value:r,done:o}=yield ei(n.peek());if(!0===o)return void(yield{content:[]});if(n.push(r),Number.isInteger(r)||Ai(r)||"string"===typeof r||r instanceof String)return void(yield Ds(n,e));throw yi()(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(!Di(t))throw yi()(new Error('Unexpected input: cannot convert "'+typeof t+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT");yield Ds(t,e)}})),Es.apply(this,arguments)}async function Ds(t,e){const{path:n,mode:r,mtime:o,content:i}=t,s={path:null!==n&&void 0!==n?n:"",mode:ki(r),mtime:Ci(o)};return null!=i?s.content=await e(i):null==n&&(s.content=await e(t)),s}function Bs(t){return function(t,e){return Es.apply(this,arguments)}(t,as)}var ks=n(51454),Cs=n(55716);function xs(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.byteLength;n++)if(t[n]!==e[n])return!1;return!0}function Ss(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, not ".concat(t))}function Fs(t){if(!((e=t)instanceof Uint8Array||null!=e&&"object"===typeof e&&"Uint8Array"===e.constructor.name))throw new Error("Uint8Array expected");for(var e,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];if(r.length>0&&!r.includes(t.length))throw new Error("Uint8Array expected of length ".concat(r,", not of length=").concat(t.length))}function Is(t){if("function"!==typeof t||"function"!==typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");Ss(t.outputLen),Ss(t.blockLen)}function Ns(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Ts(t,e){Fs(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least ".concat(n))}const Us="object"===typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;const Os=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Ls=(t,e)=>t<<32-e|t>>>e;new Uint8Array(new Uint32Array([287454020]).buffer)[0];function Rs(t){return"string"===typeof t&&(t=function(t){if("string"!==typeof t)throw new Error("utf8ToBytes expected string, got ".concat(typeof t));return new Uint8Array((new TextEncoder).encode(t))}(t)),Fs(t),t}class _s{clone(){return this._cloneInto()}}function Ps(t){const e=e=>t().update(Rs(e)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function js(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(Us&&"function"===typeof Us.getRandomValues)return Us.getRandomValues(new Uint8Array(t));if(Us&&"function"===typeof Us.randomBytes)return Us.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const Hs=(t,e,n)=>t&e^t&n^e&n;class Vs extends _s{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Os(this.buffer)}update(t){Ns(this);const{view:e,buffer:n,blockLen:r}=this,o=(t=Rs(t)).length;for(let i=0;i<o;){const s=Math.min(r-this.pos,o-i);if(s!==r)n.set(t.subarray(i,i+s),this.pos),this.pos+=s,i+=s,this.pos===r&&(this.process(e,0),this.pos=0);else{const e=Os(t);for(;r<=o-i;i+=r)this.process(e,i)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){Ns(this),Ts(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:r,isLE:o}=this;let{pos:i}=this;e[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>r-i&&(this.process(n,0),i=0);for(let l=i;l<r;l++)e[l]=0;!function(t,e,n,r){if("function"===typeof t.setBigUint64)return t.setBigUint64(e,n,r);const o=BigInt(32),i=BigInt(4294967295),s=Number(n>>o&i),a=Number(n&i),u=r?4:0,c=r?0:4;t.setUint32(e+u,s,r),t.setUint32(e+c,a,r)}(n,r-8,BigInt(8*this.length),o),this.process(n,0);const s=Os(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=a/4,c=this.get();if(u>c.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)s.setUint32(4*l,c[l],o)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:o,destroyed:i,pos:s}=this;return t.length=r,t.pos=s,t.finished=o,t.destroyed=i,r%e&&t.buffer.set(n),t}}const Ms=BigInt(2**32-1),zs=BigInt(32);function Gs(t){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?{h:Number(t&Ms),l:Number(t>>zs&Ms)}:{h:0|Number(t>>zs&Ms),l:0|Number(t&Ms)}}const $s={fromBig:Gs,split:function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let o=0;o<t.length;o++){const{h:i,l:s}=Gs(t[o],e);[n[o],r[o]]=[i,s]}return[n,r]},toBig:(t,e)=>BigInt(t>>>0)<<zs|BigInt(e>>>0),shrSH:(t,e,n)=>t>>>n,shrSL:(t,e,n)=>t<<32-n|e>>>n,rotrSH:(t,e,n)=>t>>>n|e<<32-n,rotrSL:(t,e,n)=>t<<32-n|e>>>n,rotrBH:(t,e,n)=>t<<64-n|e>>>n-32,rotrBL:(t,e,n)=>t>>>n-32|e<<64-n,rotr32H:(t,e)=>e,rotr32L:(t,e)=>t,rotlSH:(t,e,n)=>t<<n|e>>>32-n,rotlSL:(t,e,n)=>e<<n|t>>>32-n,rotlBH:(t,e,n)=>e<<n-32|t>>>64-n,rotlBL:(t,e,n)=>t<<n-32|e>>>64-n,add:function(t,e,n,r){const o=(e>>>0)+(r>>>0);return{h:t+n+(o/2**32|0)|0,l:0|o}},add3L:(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),add3H:(t,e,n,r)=>e+n+r+(t/2**32|0)|0,add4L:(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),add4H:(t,e,n,r,o)=>e+n+r+o+(t/2**32|0)|0,add5H:(t,e,n,r,o,i)=>e+n+r+o+i+(t/2**32|0)|0,add5L:(t,e,n,r,o)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(o>>>0)},qs=$s,[Ks,Zs]=(()=>qs.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((t=>BigInt(t)))))(),Ws=new Uint32Array(80),Js=new Uint32Array(80);class Ys extends Vs{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:n,Bl:r,Ch:o,Cl:i,Dh:s,Dl:a,Eh:u,El:c,Fh:l,Fl:h,Gh:f,Gl:d,Hh:g,Hl:p}=this;return[t,e,n,r,o,i,s,a,u,c,l,h,f,d,g,p]}set(t,e,n,r,o,i,s,a,u,c,l,h,f,d,g,p){this.Ah=0|t,this.Al=0|e,this.Bh=0|n,this.Bl=0|r,this.Ch=0|o,this.Cl=0|i,this.Dh=0|s,this.Dl=0|a,this.Eh=0|u,this.El=0|c,this.Fh=0|l,this.Fl=0|h,this.Gh=0|f,this.Gl=0|d,this.Hh=0|g,this.Hl=0|p}process(t,e){for(let m=0;m<16;m++,e+=4)Ws[m]=t.getUint32(e),Js[m]=t.getUint32(e+=4);for(let m=16;m<80;m++){const t=0|Ws[m-15],e=0|Js[m-15],n=qs.rotrSH(t,e,1)^qs.rotrSH(t,e,8)^qs.shrSH(t,e,7),r=qs.rotrSL(t,e,1)^qs.rotrSL(t,e,8)^qs.shrSL(t,e,7),o=0|Ws[m-2],i=0|Js[m-2],s=qs.rotrSH(o,i,19)^qs.rotrBH(o,i,61)^qs.shrSH(o,i,6),a=qs.rotrSL(o,i,19)^qs.rotrBL(o,i,61)^qs.shrSL(o,i,6),u=qs.add4L(r,a,Js[m-7],Js[m-16]),c=qs.add4H(u,n,s,Ws[m-7],Ws[m-16]);Ws[m]=0|c,Js[m]=0|u}let{Ah:n,Al:r,Bh:o,Bl:i,Ch:s,Cl:a,Dh:u,Dl:c,Eh:l,El:h,Fh:f,Fl:d,Gh:g,Gl:p,Hh:y,Hl:w}=this;for(let m=0;m<80;m++){const t=qs.rotrSH(l,h,14)^qs.rotrSH(l,h,18)^qs.rotrBH(l,h,41),e=qs.rotrSL(l,h,14)^qs.rotrSL(l,h,18)^qs.rotrBL(l,h,41),v=l&f^~l&g,b=h&d^~h&p,A=qs.add5L(w,e,b,Zs[m],Js[m]),E=qs.add5H(A,y,t,v,Ks[m],Ws[m]),D=0|A,B=qs.rotrSH(n,r,28)^qs.rotrBH(n,r,34)^qs.rotrBH(n,r,39),k=qs.rotrSL(n,r,28)^qs.rotrBL(n,r,34)^qs.rotrBL(n,r,39),C=n&o^n&s^o&s,x=r&i^r&a^i&a;y=0|g,w=0|p,g=0|f,p=0|d,f=0|l,d=0|h,({h:l,l:h}=qs.add(0|u,0|c,0|E,0|D)),u=0|s,c=0|a,s=0|o,a=0|i,o=0|n,i=0|r;const S=qs.add3L(D,k,x);n=qs.add3H(S,E,B,C),r=0|S}({h:n,l:r}=qs.add(0|this.Ah,0|this.Al,0|n,0|r)),({h:o,l:i}=qs.add(0|this.Bh,0|this.Bl,0|o,0|i)),({h:s,l:a}=qs.add(0|this.Ch,0|this.Cl,0|s,0|a)),({h:u,l:c}=qs.add(0|this.Dh,0|this.Dl,0|u,0|c)),({h:l,l:h}=qs.add(0|this.Eh,0|this.El,0|l,0|h)),({h:f,l:d}=qs.add(0|this.Fh,0|this.Fl,0|f,0|d)),({h:g,l:p}=qs.add(0|this.Gh,0|this.Gl,0|g,0|p)),({h:y,l:w}=qs.add(0|this.Hh,0|this.Hl,0|y,0|w)),this.set(n,r,o,i,s,a,u,c,l,h,f,d,g,p,y,w)}roundClean(){Ws.fill(0),Js.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Xs=Ps((()=>new Ys)),Qs=BigInt(0),ta=BigInt(1),ea=BigInt(2);function na(t){return t instanceof Uint8Array||null!=t&&"object"===typeof t&&"Uint8Array"===t.constructor.name}function ra(t){if(!na(t))throw new Error("Uint8Array expected")}function oa(t,e){if("boolean"!==typeof e)throw new Error("".concat(t,' must be valid boolean, got "').concat(e,'".'))}const ia=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function sa(t){ra(t);let e="";for(let n=0;n<t.length;n++)e+=ia[t[n]];return e}function aa(t){const e=t.toString(16);return 1&e.length?"0".concat(e):e}function ua(t){if("string"!==typeof t)throw new Error("hex string expected, got "+typeof t);return BigInt(""===t?"0":"0x".concat(t))}const ca={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function la(t){return t>=ca._0&&t<=ca._9?t-ca._0:t>=ca._A&&t<=ca._F?t-(ca._A-10):t>=ca._a&&t<=ca._f?t-(ca._a-10):void 0}function ha(t){if("string"!==typeof t)throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let o=0,i=0;o<n;o++,i+=2){const e=la(t.charCodeAt(i)),n=la(t.charCodeAt(i+1));if(void 0===e||void 0===n){const e=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+e+'" at index '+i)}r[o]=16*e+n}return r}function fa(t){return ua(sa(t))}function da(t){return ra(t),ua(sa(Uint8Array.from(t).reverse()))}function ga(t,e){return ha(t.toString(16).padStart(2*e,"0"))}function pa(t,e){return ga(t,e).reverse()}function ya(t,e,n){let r;if("string"===typeof e)try{r=ha(e)}catch(i){throw new Error("".concat(t,' must be valid hex string, got "').concat(e,'". Cause: ').concat(i))}else{if(!na(e))throw new Error("".concat(t," must be hex string or Uint8Array"));r=Uint8Array.from(e)}const o=r.length;if("number"===typeof n&&o!==n)throw new Error("".concat(t," expected ").concat(n," bytes, got ").concat(o));return r}function wa(){let t=0;for(let n=0;n<arguments.length;n++){const e=n<0||arguments.length<=n?void 0:arguments[n];ra(e),t+=e.length}const e=new Uint8Array(t);for(let n=0,r=0;n<arguments.length;n++){const t=n<0||arguments.length<=n?void 0:arguments[n];e.set(t,r),r+=t.length}return e}const ma=t=>"bigint"===typeof t&&Qs<=t;function va(t,e,n){return ma(t)&&ma(e)&&ma(n)&&e<=t&&t<n}function ba(t,e,n,r){if(!va(e,n,r))throw new Error("expected valid ".concat(t,": ").concat(n," <= n < ").concat(r,", got ").concat(typeof e," ").concat(e))}function Aa(t){let e;for(e=0;t>Qs;t>>=ta,e+=1);return e}const Ea=t=>(ea<<BigInt(t-1))-ta,Da=t=>new Uint8Array(t),Ba=t=>Uint8Array.from(t);function ka(t,e,n){if("number"!==typeof t||t<2)throw new Error("hashLen must be a number");if("number"!==typeof e||e<2)throw new Error("qByteLen must be a number");if("function"!==typeof n)throw new Error("hmacFn must be a function");let r=Da(t),o=Da(t),i=0;const s=()=>{r.fill(1),o.fill(0),i=0},a=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return n(o,r,...e)},u=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Da();o=a(Ba([0]),t),r=a(),0!==t.length&&(o=a(Ba([1]),t),r=a())},c=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let t=0;const n=[];for(;t<e;){r=a();const e=r.slice();n.push(e),t+=r.length}return wa(...n)};return(t,e)=>{let n;for(s(),u(t);!(n=e(c()));)u();return s(),n}}const Ca={bigint:t=>"bigint"===typeof t,function:t=>"function"===typeof t,boolean:t=>"boolean"===typeof t,string:t=>"string"===typeof t,stringOrUint8Array:t=>"string"===typeof t||na(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>"function"===typeof t&&Number.isSafeInteger(t.outputLen)};function xa(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=(e,n,r)=>{const o=Ca[n];if("function"!==typeof o)throw new Error('Invalid validator "'.concat(n,'", expected function'));const i=t[e];if((!r||void 0!==i)&&!o(i,t))throw new Error("Invalid param ".concat(String(e),"=").concat(i," (").concat(typeof i,"), expected ").concat(n))};for(const[o,i]of Object.entries(e))r(o,i,!1);for(const[o,i]of Object.entries(n))r(o,i,!0);return t}function Sa(t){const e=new WeakMap;return function(n){const r=e.get(n);if(void 0!==r)return r;for(var o=arguments.length,i=new Array(o>1?o-1:0),s=1;s<o;s++)i[s-1]=arguments[s];const a=t(n,...i);return e.set(n,a),a}}const Fa=BigInt(0),Ia=BigInt(1),Na=BigInt(2),Ta=BigInt(3),Ua=BigInt(4),Oa=BigInt(5),La=BigInt(8);BigInt(9),BigInt(16);function Ra(t,e){const n=t%e;return n>=Fa?n:e+n}function _a(t,e,n){if(n<=Fa||e<Fa)throw new Error("Expected power/modulo > 0");if(n===Ia)return Fa;let r=Ia;for(;e>Fa;)e&Ia&&(r=r*t%n),t=t*t%n,e>>=Ia;return r}function Pa(t,e,n){let r=t;for(;e-- >Fa;)r*=r,r%=n;return r}function ja(t,e){if(t===Fa||e<=Fa)throw new Error("invert: expected positive integers, got n=".concat(t," mod=").concat(e));let n=Ra(t,e),r=e,o=Fa,i=Ia,s=Ia,a=Fa;for(;n!==Fa;){const t=r/n,e=r%n,u=o-s*t,c=i-a*t;r=n,n=e,o=s,i=a,s=u,a=c}if(r!==Ia)throw new Error("invert: does not exist");return Ra(o,e)}function Ha(t){if(t%Ua===Ta){const e=(t+Ia)/Ua;return function(t,n){const r=t.pow(n,e);if(!t.eql(t.sqr(r),n))throw new Error("Cannot find square root");return r}}if(t%La===Oa){const e=(t-Oa)/La;return function(t,n){const r=t.mul(n,Na),o=t.pow(r,e),i=t.mul(n,o),s=t.mul(t.mul(i,Na),o),a=t.mul(i,t.sub(s,t.ONE));if(!t.eql(t.sqr(a),n))throw new Error("Cannot find square root");return a}}return function(t){const e=(t-Ia)/Na;let n,r,o;for(n=t-Ia,r=0;n%Na===Fa;n/=Na,r++);for(o=Na;o<t&&_a(o,e,t)!==t-Ia;o++);if(1===r){const e=(t+Ia)/Ua;return function(t,n){const r=t.pow(n,e);if(!t.eql(t.sqr(r),n))throw new Error("Cannot find square root");return r}}const i=(n+Ia)/Na;return function(t,s){if(t.pow(s,e)===t.neg(t.ONE))throw new Error("Cannot find square root");let a=r,u=t.pow(t.mul(t.ONE,o),n),c=t.pow(s,i),l=t.pow(s,n);for(;!t.eql(l,t.ONE);){if(t.eql(l,t.ZERO))return t.ZERO;let e=1;for(let r=t.sqr(l);e<a&&!t.eql(r,t.ONE);e++)r=t.sqr(r);const n=t.pow(u,Ia<<BigInt(a-e-1));u=t.sqr(n),c=t.mul(c,n),l=t.mul(l,u),a=e}return c}}(t)}const Va=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Ma(t,e){const n=void 0!==e?e:t.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function za(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(t<=Fa)throw new Error("Expected Field ORDER > 0, got ".concat(t));const{nBitLength:o,nByteLength:i}=Ma(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=Ha(t),a=Object.freeze({ORDER:t,BITS:o,BYTES:i,MASK:Ea(o),ZERO:Fa,ONE:Ia,create:e=>Ra(e,t),isValid:e=>{if("bigint"!==typeof e)throw new Error("Invalid field element: expected bigint, got ".concat(typeof e));return Fa<=e&&e<t},is0:t=>t===Fa,isOdd:t=>(t&Ia)===Ia,neg:e=>Ra(-e,t),eql:(t,e)=>t===e,sqr:e=>Ra(e*e,t),add:(e,n)=>Ra(e+n,t),sub:(e,n)=>Ra(e-n,t),mul:(e,n)=>Ra(e*n,t),pow:(t,e)=>function(t,e,n){if(n<Fa)throw new Error("Expected power > 0");if(n===Fa)return t.ONE;if(n===Ia)return e;let r=t.ONE,o=e;for(;n>Fa;)n&Ia&&(r=t.mul(r,o)),o=t.sqr(o),n>>=Ia;return r}(a,t,e),div:(e,n)=>Ra(e*ja(n,t),t),sqrN:t=>t*t,addN:(t,e)=>t+e,subN:(t,e)=>t-e,mulN:(t,e)=>t*e,inv:e=>ja(e,t),sqrt:r.sqrt||(t=>s(a,t)),invertBatch:t=>function(t,e){const n=new Array(e.length),r=e.reduce(((e,r,o)=>t.is0(r)?e:(n[o]=e,t.mul(e,r))),t.ONE),o=t.inv(r);return e.reduceRight(((e,r,o)=>t.is0(r)?e:(n[o]=t.mul(e,n[o]),t.mul(e,r))),o),n}(a,t),cmov:(t,e,n)=>n?e:t,toBytes:t=>n?pa(t,i):ga(t,i),fromBytes:t=>{if(t.length!==i)throw new Error("Fp.fromBytes: expected ".concat(i,", got ").concat(t.length));return n?da(t):fa(t)}});return Object.freeze(a)}function Ga(t){if("bigint"!==typeof t)throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function $a(t){const e=Ga(t);return e+Math.ceil(e/2)}const qa=BigInt(0),Ka=BigInt(1),Za=new WeakMap,Wa=new WeakMap;function Ja(t,e){const n=(t,e)=>{const n=e.negate();return t?n:e},r=t=>{if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("Wrong window size=".concat(t,", should be [1..").concat(e,"]"))},o=t=>{r(t);return{windows:Math.ceil(e/t)+1,windowSize:2**(t-1)}};return{constTimeNegate:n,unsafeLadder(e,n){let r=t.ZERO,o=e;for(;n>qa;)n&Ka&&(r=r.add(o)),o=o.double(),n>>=Ka;return r},precomputeWindow(t,e){const{windows:n,windowSize:r}=o(e),i=[];let s=t,a=s;for(let o=0;o<n;o++){a=s,i.push(a);for(let t=1;t<r;t++)a=a.add(s),i.push(a);s=a.double()}return i},wNAF(e,r,i){const{windows:s,windowSize:a}=o(e);let u=t.ZERO,c=t.BASE;const l=BigInt(2**e-1),h=2**e,f=BigInt(e);for(let t=0;t<s;t++){const e=t*a;let o=Number(i&l);i>>=f,o>a&&(o-=h,i+=Ka);const s=e,d=e+Math.abs(o)-1,g=t%2!==0,p=o<0;0===o?c=c.add(n(g,r[s])):u=u.add(n(p,r[d]))}return{p:u,f:c}},wNAFCached(t,e,n){const r=Wa.get(t)||1;let o=Za.get(t);return o||(o=this.precomputeWindow(t,r),1!==r&&Za.set(t,n(o))),this.wNAF(r,o,e)},setWindowSize(t,e){r(e),Wa.set(t,e),Za.delete(t)}}}function Ya(t,e,n,r){if(!Array.isArray(n)||!Array.isArray(r)||r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");r.forEach(((t,n)=>{if(!e.isValid(t))throw new Error("wrong scalar at index ".concat(n))})),n.forEach(((e,n)=>{if(!(e instanceof t))throw new Error("wrong point at index ".concat(n))}));const o=Aa(BigInt(n.length)),i=o>12?o-3:o>4?o-2:o?2:1,s=(1<<i)-1,a=new Array(s+1).fill(t.ZERO),u=Math.floor((e.BITS-1)/i)*i;let c=t.ZERO;for(let l=u;l>=0;l-=i){a.fill(t.ZERO);for(let t=0;t<r.length;t++){const e=r[t],o=Number(e>>BigInt(l)&BigInt(s));a[o]=a[o].add(n[t])}let e=t.ZERO;for(let n=a.length-1,r=t.ZERO;n>0;n--)r=r.add(a[n]),e=e.add(r);if(c=c.add(e),0!==l)for(let t=0;t<i;t++)c=c.double()}return c}function Xa(t){return function(t){const e=Va.reduce(((t,e)=>(t[e]="function",t)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});xa(t,e)}(t.Fp),xa(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze((0,d.A)((0,d.A)((0,d.A)({},Ma(t.n,t.nBitLength)),t),{p:t.Fp.ORDER}))}const Qa=BigInt(0),tu=BigInt(1),eu=BigInt(2),nu=BigInt(8),ru={zip215:!0};function ou(t){const e=function(t){const e=Xa(t);return xa(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze((0,d.A)({},e))}(t),{Fp:n,n:r,prehash:o,hash:i,randomBytes:s,nByteLength:a,h:u}=e,c=eu<<BigInt(8*a)-tu,l=n.create,h=za(e.n,e.nBitLength),f=e.uvRatio||((t,e)=>{try{return{isValid:!0,value:n.sqrt(t*n.inv(e))}}catch(r){return{isValid:!1,value:Qa}}}),g=e.adjustScalarBytes||(t=>t),p=e.domain||((t,e,n)=>{if(oa("phflag",n),e.length||n)throw new Error("Contexts/pre-hash are not supported");return t});function y(t,e){ba("coordinate "+t,e,Qa,c)}function w(t){if(!(t instanceof b))throw new Error("ExtendedPoint expected")}const m=Sa(((t,e)=>{const{ex:r,ey:o,ez:i}=t,s=t.is0();null==e&&(e=s?nu:n.inv(i));const a=l(r*e),u=l(o*e),c=l(i*e);if(s)return{x:Qa,y:tu};if(c!==tu)throw new Error("invZ was invalid");return{x:a,y:u}})),v=Sa((t=>{const{a:n,d:r}=e;if(t.is0())throw new Error("bad point: ZERO");const{ex:o,ey:i,ez:s,et:a}=t,u=l(o*o),c=l(i*i),h=l(s*s),f=l(h*h),d=l(u*n);if(l(h*l(d+c))!==l(f+l(r*l(u*c))))throw new Error("bad point: equation left != right (1)");if(l(o*i)!==l(s*a))throw new Error("bad point: equation left != right (2)");return!0}));class b{constructor(t,e,n,r){this.ex=t,this.ey=e,this.ez=n,this.et=r,y("x",t),y("y",e),y("z",n),y("t",r),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(t){if(t instanceof b)throw new Error("extended point not allowed");const{x:e,y:n}=t||{};return y("x",e),y("y",n),new b(e,n,tu,l(e*n))}static normalizeZ(t){const e=n.invertBatch(t.map((t=>t.ez)));return t.map(((t,n)=>t.toAffine(e[n]))).map(b.fromAffine)}static msm(t,e){return Ya(b,h,t,e)}_setWindowSize(t){D.setWindowSize(this,t)}assertValidity(){v(this)}equals(t){w(t);const{ex:e,ey:n,ez:r}=this,{ex:o,ey:i,ez:s}=t,a=l(e*s),u=l(o*r),c=l(n*s),h=l(i*r);return a===u&&c===h}is0(){return this.equals(b.ZERO)}negate(){return new b(l(-this.ex),this.ey,this.ez,l(-this.et))}double(){const{a:t}=e,{ex:n,ey:r,ez:o}=this,i=l(n*n),s=l(r*r),a=l(eu*l(o*o)),u=l(t*i),c=n+r,h=l(l(c*c)-i-s),f=u+s,d=f-a,g=u-s,p=l(h*d),y=l(f*g),w=l(h*g),m=l(d*f);return new b(p,y,m,w)}add(t){w(t);const{a:n,d:r}=e,{ex:o,ey:i,ez:s,et:a}=this,{ex:u,ey:c,ez:h,et:f}=t;if(n===BigInt(-1)){const t=l((i-o)*(c+u)),e=l((i+o)*(c-u)),n=l(e-t);if(n===Qa)return this.double();const r=l(s*eu*f),d=l(a*eu*h),g=d+r,p=e+t,y=d-r,w=l(g*n),m=l(p*y),v=l(g*y),A=l(n*p);return new b(w,m,A,v)}const d=l(o*u),g=l(i*c),p=l(a*r*f),y=l(s*h),m=l((o+i)*(u+c)-d-g),v=y-p,A=y+p,E=l(g-n*d),D=l(m*v),B=l(A*E),k=l(m*E),C=l(v*A);return new b(D,B,C,k)}subtract(t){return this.add(t.negate())}wNAF(t){return D.wNAFCached(this,t,b.normalizeZ)}multiply(t){const e=t;ba("scalar",e,tu,r);const{p:n,f:o}=this.wNAF(e);return b.normalizeZ([n,o])[0]}multiplyUnsafe(t){const e=t;return ba("scalar",e,Qa,r),e===Qa?E:this.equals(E)||e===tu?this:this.equals(A)?this.wNAF(e).p:D.unsafeLadder(this,e)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return D.unsafeLadder(this,r).is0()}toAffine(t){return m(this,t)}clearCofactor(){const{h:t}=e;return t===tu?this:this.multiplyUnsafe(t)}static fromHex(t){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{d:o,a:i}=e,s=n.BYTES;t=ya("pointHex",t,s),oa("zip215",r);const a=t.slice(),u=t[s-1];a[s-1]=-129&u;const h=da(a),d=r?c:n.ORDER;ba("pointHex.y",h,Qa,d);const g=l(h*h),p=l(g-tu),y=l(o*g-i);let{isValid:w,value:m}=f(p,y);if(!w)throw new Error("Point.fromHex: invalid y coordinate");const v=(m&tu)===tu,A=0!==(128&u);if(!r&&m===Qa&&A)throw new Error("Point.fromHex: x=0 and x_0=1");return A!==v&&(m=l(-m)),b.fromAffine({x:m,y:h})}static fromPrivateKey(t){return C(t).point}toRawBytes(){const{x:t,y:e}=this.toAffine(),r=pa(e,n.BYTES);return r[r.length-1]|=t&tu?128:0,r}toHex(){return sa(this.toRawBytes())}}b.BASE=new b(e.Gx,e.Gy,tu,l(e.Gx*e.Gy)),b.ZERO=new b(Qa,tu,tu,Qa);const{BASE:A,ZERO:E}=b,D=Ja(b,8*a);function B(t){return Ra(t,r)}function k(t){return B(da(t))}function C(t){const e=a;t=ya("private key",t,e);const n=ya("hashed private key",i(t),2*e),r=g(n.slice(0,e)),o=n.slice(e,2*e),s=k(r),u=A.multiply(s),c=u.toRawBytes();return{head:r,prefix:o,scalar:s,point:u,pointBytes:c}}function x(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Uint8Array;for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];const s=wa(...n);return k(i(p(s,ya("context",t),!!o)))}const S=ru;A._setWindowSize(8);const F={getExtendedPublicKey:C,randomPrivateKey:()=>s(n.BYTES),precompute(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.BASE;return e._setWindowSize(t),e.multiply(BigInt(3)),e}};return{CURVE:e,getPublicKey:function(t){return C(t).pointBytes},sign:function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t=ya("message",t),o&&(t=o(t));const{prefix:s,scalar:u,pointBytes:c}=C(e),l=x(i.context,s,t),h=A.multiply(l).toRawBytes(),f=B(l+x(i.context,h,c,t)*u);return ba("signature.s",f,Qa,r),ya("result",wa(h,pa(f,n.BYTES)),2*a)},verify:function(t,e,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:S;const{context:s,zip215:a}=i,u=n.BYTES;t=ya("signature",t,2*u),e=ya("message",e),void 0!==a&&oa("zip215",a),o&&(e=o(e));const c=da(t.slice(u,2*u));let l,h,f;try{l=b.fromHex(r,a),h=b.fromHex(t.slice(0,u),a),f=A.multiplyUnsafe(c)}catch(g){return!1}if(!a&&l.isSmallOrder())return!1;const d=x(s,h.toRawBytes(),l.toRawBytes(),e);return h.add(l.multiplyUnsafe(d)).subtract(f).clearCofactor().equals(b.ZERO)},ExtendedPoint:b,utils:F}}const iu=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),su=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),au=(BigInt(0),BigInt(1)),uu=BigInt(2),cu=(BigInt(3),BigInt(5)),lu=BigInt(8);function hu(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),o=BigInt(80),i=iu,s=t*t%i*t%i,a=Pa(s,uu,i)*s%i,u=Pa(a,au,i)*t%i,c=Pa(u,cu,i)*u%i,l=Pa(c,e,i)*c%i,h=Pa(l,n,i)*l%i,f=Pa(h,r,i)*h%i,d=Pa(f,o,i)*f%i,g=Pa(d,o,i)*f%i,p=Pa(g,e,i)*c%i;return{pow_p_5_8:Pa(p,uu,i)*t%i,b2:s}}function fu(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function du(t,e){const n=iu,r=Ra(e*e*e,n),o=Ra(r*r*e,n);let i=Ra(t*r*hu(t*o).pow_p_5_8,n);const s=Ra(e*i*i,n),a=i,u=Ra(i*su,n),c=s===t,l=s===Ra(-t,n),h=s===Ra(-t*su,n);return c&&(i=a),(l||h)&&(i=u),((t,e)=>(Ra(t,e)&Ia)===Ia)(i,n)&&(i=Ra(-i,n)),{isValid:c||l,value:i}}const gu=(()=>za(iu,void 0,!0))(),pu=(()=>({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:gu,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:lu,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Xs,randomBytes:js,adjustScalarBytes:fu,uvRatio:du}))(),yu=(()=>ou(pu))();class wu{constructor(t){(0,f.A)(this,"type","Ed25519"),(0,f.A)(this,"raw",void 0),this.raw=vu(t,32)}toMultihash(){return ti.identity.digest(Af(this))}toCID(){return Pt.TO.createV1(114,this.toMultihash())}toString(){return ks.base58btc.encode(this.toMultihash().bytes).substring(1)}equals(t){return null!=t&&t.raw instanceof Uint8Array&&xs(this.raw,t.raw)}verify(t,e){return function(t,e,n){return yu.verify(e,n instanceof Uint8Array?n:n.subarray(),t)}(this.raw,e,t)}}function mu(t){return t=vu(t,32),new wu(t)}function vu(t,e){var n;if((t=Uint8Array.from(null!==(n=t)&&void 0!==n?n:[])).length!==e)throw new Ti("Key must be a Uint8Array of length ".concat(e,", got ").concat(t.length));return t}var bu=n(4023);const Au=new Float32Array([-0]),Eu=new Uint8Array(Au.buffer);function Du(t,e,n){Au[0]=t,e[n]=Eu[0],e[n+1]=Eu[1],e[n+2]=Eu[2],e[n+3]=Eu[3]}const Bu=new Float64Array([-0]),ku=new Uint8Array(Bu.buffer);function Cu(t,e,n){Bu[0]=t,e[n]=ku[0],e[n+1]=ku[1],e[n+2]=ku[2],e[n+3]=ku[3],e[n+4]=ku[4],e[n+5]=ku[5],e[n+6]=ku[6],e[n+7]=ku[7]}const xu=BigInt(Number.MAX_SAFE_INTEGER),Su=BigInt(Number.MIN_SAFE_INTEGER);class Fu{constructor(t,e){(0,f.A)(this,"lo",void 0),(0,f.A)(this,"hi",void 0),this.lo=0|t,this.hi=0|e}toNumber(){if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&this.hi>>>31>0){const t=1+~this.lo>>>0;let e=~this.hi>>>0;return 0===t&&(e=e+1>>>0),-(t+4294967296*e)}return this.lo+4294967296*this.hi}toBigInt(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31!==0){const t=1+~this.lo>>>0;let e=~this.hi>>>0;return 0===t&&(e=e+1>>>0),-(BigInt(t)+(BigInt(e)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toString(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.toBigInt(t).toString()}zzEncode(){const t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this}zzDecode(){const t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this}length(){const t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===e?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:n<128?9:10}static fromBigInt(t){if(0n===t)return Iu;if(t<xu&&t>Su)return this.fromNumber(Number(t));const e=t<0n;e&&(t=-t);let n=t>>32n,r=t-(n<<32n);return e&&(n=0n|~n,r=0n|~r,++r>Nu&&(r=0n,++n>Nu&&(n=0n))),new Fu(Number(r),Number(n))}static fromNumber(t){if(0===t)return Iu;const e=t<0;e&&(t=-t);let n=t>>>0,r=(t-n)/4294967296>>>0;return e&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new Fu(n,r)}static from(t){return"number"===typeof t?Fu.fromNumber(t):"bigint"===typeof t?Fu.fromBigInt(t):"string"===typeof t?Fu.fromBigInt(BigInt(t)):null!=t.low||null!=t.high?new Fu(t.low>>>0,t.high>>>0):Iu}}const Iu=new Fu(0,0);Iu.toBigInt=function(){return 0n},Iu.zzEncode=Iu.zzDecode=function(){return this},Iu.length=function(){return 1};const Nu=4294967296n;function Tu(t,e,n){const r=n;let o,i;for(let s=0;s<t.length;++s)o=t.charCodeAt(s),o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):55296===(64512&o)&&56320===(64512&(i=t.charCodeAt(s+1)))?(o=65536+((1023&o)<<10)+(1023&i),++s,e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128);return n-r}function Uu(t,e){return RangeError("index out of range: ".concat(t.pos," + ").concat(null!==e&&void 0!==e?e:1," > ").concat(t.len))}function Ou(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}class Lu{constructor(t){(0,f.A)(this,"buf",void 0),(0,f.A)(this,"pos",void 0),(0,f.A)(this,"len",void 0),(0,f.A)(this,"_slice",Uint8Array.prototype.subarray),this.buf=t,this.pos=0,this.len=t.length}uint32(){let t=4294967295;if(t=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return t;if((this.pos+=5)>this.len)throw this.pos=this.len,Uu(this,10);return t}int32(){return 0|this.uint32()}sint32(){const t=this.uint32();return t>>>1^-(1&t)}bool(){return 0!==this.uint32()}fixed32(){if(this.pos+4>this.len)throw Uu(this,4);return Ou(this.buf,this.pos+=4)}sfixed32(){if(this.pos+4>this.len)throw Uu(this,4);return 0|Ou(this.buf,this.pos+=4)}float(){if(this.pos+4>this.len)throw Uu(this,4);const t=function(t,e){return Eu[0]=t[e],Eu[1]=t[e+1],Eu[2]=t[e+2],Eu[3]=t[e+3],Au[0]}(this.buf,this.pos);return this.pos+=4,t}double(){if(this.pos+8>this.len)throw Uu(this,4);const t=function(t,e){return ku[0]=t[e],ku[1]=t[e+1],ku[2]=t[e+2],ku[3]=t[e+3],ku[4]=t[e+4],ku[5]=t[e+5],ku[6]=t[e+6],ku[7]=t[e+7],Bu[0]}(this.buf,this.pos);return this.pos+=8,t}bytes(){const t=this.uint32(),e=this.pos,n=this.pos+t;if(n>this.len)throw Uu(this,t);return this.pos+=t,e===n?new Uint8Array(0):this.buf.subarray(e,n)}string(){const t=this.bytes();return function(t,e,n){if(n-e<1)return"";let r;const o=[];let i,s=0;for(;e<n;){var a;i=t[e++],i<128?o[s++]=i:i>191&&i<224?o[s++]=(31&i)<<6|63&t[e++]:i>239&&i<365?(i=((7&i)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++])-65536,o[s++]=55296+(i>>10),o[s++]=56320+(1023&i)):o[s++]=(15&i)<<12|(63&t[e++])<<6|63&t[e++],s>8191&&((null!==(a=r)&&void 0!==a?a:r=[]).push(String.fromCharCode.apply(String,o)),s=0)}return null!=r?(s>0&&r.push(String.fromCharCode.apply(String,o.slice(0,s))),r.join("")):String.fromCharCode.apply(String,o.slice(0,s))}(t,0,t.length)}skip(t){if("number"===typeof t){if(this.pos+t>this.len)throw Uu(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw Uu(this)}while(0!==(128&this.buf[this.pos++]));return this}skipType(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!==(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type ".concat(t," at offset ").concat(this.pos))}return this}readLongVarint(){const t=new Fu(0,0);let e=0;if(!(this.len-this.pos>4)){for(;e<3;++e){if(this.pos>=this.len)throw Uu(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*e)>>>0,t}for(;e<4;++e)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(e=0,this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw Uu(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}readFixed64(){if(this.pos+8>this.len)throw Uu(this,8);const t=Ou(this.buf,this.pos+=4),e=Ou(this.buf,this.pos+=4);return new Fu(t,e)}int64(){return this.readLongVarint().toBigInt()}int64Number(){return this.readLongVarint().toNumber()}int64String(){return this.readLongVarint().toString()}uint64(){return this.readLongVarint().toBigInt(!0)}uint64Number(){const t=(0,bu.Sb)(this.buf,this.pos);return this.pos+=(0,bu.OY)(t),t}uint64String(){return this.readLongVarint().toString(!0)}sint64(){return this.readLongVarint().zzDecode().toBigInt()}sint64Number(){return this.readLongVarint().zzDecode().toNumber()}sint64String(){return this.readLongVarint().zzDecode().toString()}fixed64(){return this.readFixed64().toBigInt()}fixed64Number(){return this.readFixed64().toNumber()}fixed64String(){return this.readFixed64().toString()}sfixed64(){return this.readFixed64().toBigInt()}sfixed64Number(){return this.readFixed64().toNumber()}sfixed64String(){return this.readFixed64().toString()}}function Ru(t,e,n){const r=function(t){return new Lu(t instanceof Uint8Array?t:t.subarray())}(t);return e.decode(r,void 0,n)}function _u(t=0){return new Uint8Array(t)}function Pu(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const ju=Pu("utf8","u",(t=>"u"+new TextDecoder("utf8").decode(t)),(t=>(new TextEncoder).encode(t.substring(1)))),Hu=Pu("ascii","a",(t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e}),(t=>{const e=_u((t=t.substring(1)).length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e})),Vu={utf8:ju,"utf-8":ju,hex:Qo.Fo.base16,latin1:Hu,ascii:Hu,binary:Hu,...Qo.Fo};class Mu{constructor(t,e,n){(0,f.A)(this,"fn",void 0),(0,f.A)(this,"len",void 0),(0,f.A)(this,"next",void 0),(0,f.A)(this,"val",void 0),this.fn=t,this.len=e,this.next=void 0,this.val=n}}function zu(){}class Gu{constructor(t){(0,f.A)(this,"head",void 0),(0,f.A)(this,"tail",void 0),(0,f.A)(this,"len",void 0),(0,f.A)(this,"next",void 0),this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}}const $u=function(t){const e=null!==t&&void 0!==t?t:8192,n=e>>>1;let r,o=e;return function(t){if(t<1||t>n)return _u(t);o+t>e&&(r=_u(e),o=0);const i=r.subarray(o,o+=t);return 0!==(7&o)&&(o=1+(7|o)),i}}();class qu{constructor(){(0,f.A)(this,"len",void 0),(0,f.A)(this,"head",void 0),(0,f.A)(this,"tail",void 0),(0,f.A)(this,"states",void 0),this.len=0,this.head=new Mu(zu,0,0),this.tail=this.head,this.states=null}_push(t,e,n){return this.tail=this.tail.next=new Mu(t,e,n),this.len+=e,this}uint32(t){return this.len+=(this.tail=this.tail.next=new Wu((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this}int32(t){return t<0?this._push(Ju,10,Fu.fromNumber(t)):this.uint32(t)}sint32(t){return this.uint32((t<<1^t>>31)>>>0)}uint64(t){const e=Fu.fromBigInt(t);return this._push(Ju,e.length(),e)}uint64Number(t){return this._push(bu.mD,(0,bu.OY)(t),t)}uint64String(t){return this.uint64(BigInt(t))}int64(t){return this.uint64(t)}int64Number(t){return this.uint64Number(t)}int64String(t){return this.uint64String(t)}sint64(t){const e=Fu.fromBigInt(t).zzEncode();return this._push(Ju,e.length(),e)}sint64Number(t){const e=Fu.fromNumber(t).zzEncode();return this._push(Ju,e.length(),e)}sint64String(t){return this.sint64(BigInt(t))}bool(t){return this._push(Ku,1,t?1:0)}fixed32(t){return this._push(Yu,4,t>>>0)}sfixed32(t){return this.fixed32(t)}fixed64(t){const e=Fu.fromBigInt(t);return this._push(Yu,4,e.lo)._push(Yu,4,e.hi)}fixed64Number(t){const e=Fu.fromNumber(t);return this._push(Yu,4,e.lo)._push(Yu,4,e.hi)}fixed64String(t){return this.fixed64(BigInt(t))}sfixed64(t){return this.fixed64(t)}sfixed64Number(t){return this.fixed64Number(t)}sfixed64String(t){return this.fixed64String(t)}float(t){return this._push(Du,4,t)}double(t){return this._push(Cu,8,t)}bytes(t){const e=t.length>>>0;return 0===e?this._push(Ku,1,0):this.uint32(e)._push(Xu,e,t)}string(t){const e=function(t){let e=0,n=0;for(let r=0;r<t.length;++r)n=t.charCodeAt(r),n<128?e+=1:n<2048?e+=2:55296===(64512&n)&&56320===(64512&t.charCodeAt(r+1))?(++r,e+=4):e+=3;return e}(t);return 0!==e?this.uint32(e)._push(Tu,e,t):this._push(Ku,1,0)}fork(){return this.states=new Gu(this),this.head=this.tail=new Mu(zu,0,0),this.len=0,this}reset(){return null!=this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Mu(zu,0,0),this.len=0),this}ldelim(){const t=this.head,e=this.tail,n=this.len;return this.reset().uint32(n),0!==n&&(this.tail.next=t.next,this.tail=e,this.len+=n),this}finish(){let t=this.head.next;const e=(n=this.len,null!=globalThis.Buffer?_u(n):$u(n));var n;let r=0;for(;null!=t;)t.fn(t.val,e,r),r+=t.len,t=t.next;return e}}function Ku(t,e,n){e[n]=255&t}function Zu(t,e,n){for(;t>127;)e[n++]=127&t|128,t>>>=7;e[n]=t}class Wu extends Mu{constructor(t,e){super(Zu,t,e),(0,f.A)(this,"next",void 0),this.next=void 0}}function Ju(t,e,n){for(;0!==t.hi;)e[n++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[n++]=127&t.lo|128,t.lo=t.lo>>>7;e[n++]=t.lo}function Yu(t,e,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}function Xu(t,e,n){e.set(t,n)}function Qu(t,e,n){e.set(t,n)}function tc(t,e,n){t.length<40?Tu(t,e,n):null!=e.utf8Write?e.utf8Write(t,n):e.set(function(t,e="utf8"){const n=Vu[e];if(null==n)throw new Error(`Unsupported encoding "${e}"`);return n.decoder.decode(`${n.prefix}${t}`)}(t),n)}function ec(t,e){const n=new qu;return e.encode(t,n,{lengthDelimited:!1}),n.finish()}var nc,rc,oc,ic,sc;function ac(t,e,n,r){return{name:t,type:e,encode:n,decode:r}}function uc(t,e){return ac("message",nc.LENGTH_DELIMITED,t,e)}null!=globalThis.Buffer&&(qu.prototype.bytes=function(t){const e=t.length>>>0;return this.uint32(e),e>0&&this._push(Qu,e,t),this},qu.prototype.string=function(t){const e=globalThis.Buffer.byteLength(t);return this.uint32(e),e>0&&this._push(tc,e,t),this}),function(t){t[t.VARINT=0]="VARINT",t[t.BIT64=1]="BIT64",t[t.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",t[t.START_GROUP=3]="START_GROUP",t[t.END_GROUP=4]="END_GROUP",t[t.BIT32=5]="BIT32"}(nc||(nc={}));Error;Error;Error;Error;Error;!function(t){t.RSA="RSA",t.Ed25519="Ed25519",t.secp256k1="secp256k1"}(rc||(rc={})),function(t){t[t.RSA=0]="RSA",t[t.Ed25519=1]="Ed25519",t[t.secp256k1=2]="secp256k1"}(oc||(oc={})),function(t){t.codec=()=>function(t){function e(e){if(null==t[e.toString()])throw new Error("Invalid enum value");return t[e]}return ac("enum",nc.VARINT,(function(t,n){const r=e(t);n.int32(r)}),(function(t){return e(t.int32())}))}(oc)}(rc||(rc={})),function(t){let e;t.codec=()=>(null==e&&(e=uc((function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==n.lengthDelimited&&e.fork(),null!=t.Type&&(e.uint32(8),rc.codec().encode(t.Type,e)),null!=t.Data&&(e.uint32(18),e.bytes(t.Data)),!1!==n.lengthDelimited&&e.ldelim()}),(function(t,e){const n={},r=null==e?t.len:t.pos+e;for(;t.pos<r;){const e=t.uint32();switch(e>>>3){case 1:n.Type=rc.codec().decode(t);break;case 2:n.Data=t.bytes();break;default:t.skipType(7&e)}}return n}))),e),t.encode=e=>ec(e,t.codec()),t.decode=(e,n)=>Ru(e,t.codec(),n)}(ic||(ic={})),function(t){let e;t.codec=()=>(null==e&&(e=uc((function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==n.lengthDelimited&&e.fork(),null!=t.Type&&(e.uint32(8),rc.codec().encode(t.Type,e)),null!=t.Data&&(e.uint32(18),e.bytes(t.Data)),!1!==n.lengthDelimited&&e.ldelim()}),(function(t,e){const n={},r=null==e?t.len:t.pos+e;for(;t.pos<r;){const e=t.uint32();switch(e>>>3){case 1:n.Type=rc.codec().decode(t);break;case 2:n.Data=t.bytes();break;default:t.skipType(7&e)}}return n}))),e),t.encode=e=>ec(e,t.codec()),t.decode=(e,n)=>Ru(e,t.codec(),n)}(sc||(sc={}));const cc=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),lc=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),hc=new Uint32Array(64);class fc extends Vs{constructor(){super(64,32,8,!1),this.A=0|lc[0],this.B=0|lc[1],this.C=0|lc[2],this.D=0|lc[3],this.E=0|lc[4],this.F=0|lc[5],this.G=0|lc[6],this.H=0|lc[7]}get(){const{A:t,B:e,C:n,D:r,E:o,F:i,G:s,H:a}=this;return[t,e,n,r,o,i,s,a]}set(t,e,n,r,o,i,s,a){this.A=0|t,this.B=0|e,this.C=0|n,this.D=0|r,this.E=0|o,this.F=0|i,this.G=0|s,this.H=0|a}process(t,e){for(let h=0;h<16;h++,e+=4)hc[h]=t.getUint32(e,!1);for(let h=16;h<64;h++){const t=hc[h-15],e=hc[h-2],n=Ls(t,7)^Ls(t,18)^t>>>3,r=Ls(e,17)^Ls(e,19)^e>>>10;hc[h]=r+hc[h-7]+n+hc[h-16]|0}let{A:n,B:r,C:o,D:i,E:s,F:a,G:u,H:c}=this;for(let h=0;h<64;h++){const t=c+(Ls(s,6)^Ls(s,11)^Ls(s,25))+((l=s)&a^~l&u)+cc[h]+hc[h]|0,e=(Ls(n,2)^Ls(n,13)^Ls(n,22))+Hs(n,r,o)|0;c=u,u=a,a=s,s=i+t|0,i=o,o=r,r=n,n=t+e|0}var l;n=n+this.A|0,r=r+this.B|0,o=o+this.C|0,i=i+this.D|0,s=s+this.E|0,a=a+this.F|0,u=u+this.G|0,c=c+this.H|0,this.set(n,r,o,i,s,a,u,c)}roundClean(){hc.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const dc=Ps((()=>new fc));function gc(t){if(null==t)throw new TypeError("Cannot destructure "+t)}var pc=n(8275);function yc(t,e){let n=0;if(1===t.length)return t[0];for(let r=t.length-1;r>=0;r--)n+=t[t.length-1-r]*Math.pow(2,e*r);return n}function wc(t,e){const n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;let r=t,o=0,i=Math.pow(2,e);for(let s=1;s<8;s++){if(t<i){let t;if(n<0)t=new ArrayBuffer(s),o=s;else{if(n<s)return new ArrayBuffer(0);t=new ArrayBuffer(n),o=n}const i=new Uint8Array(t);for(let n=s-1;n>=0;n--){const t=Math.pow(2,n*e);i[o-n-1]=Math.floor(r/t),r-=i[o-n-1]*t}return t}i*=Math.pow(2,e)}return new ArrayBuffer(0)}function mc(){let t=0,e=0;for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];for(const a of r)t+=a.length;const i=new ArrayBuffer(t),s=new Uint8Array(i);for(const a of r)s.set(a,e),e+=a.length;return s}function vc(){const t=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){const e=255===t[0]&&128&t[1],n=0===t[0]&&0===(128&t[1]);(e||n)&&this.warnings.push("Needlessly long format")}const e=new ArrayBuffer(this.valueHex.byteLength),n=new Uint8Array(e);for(let s=0;s<this.valueHex.byteLength;s++)n[s]=0;n[0]=128&t[0];const r=yc(n,8),o=new ArrayBuffer(this.valueHex.byteLength),i=new Uint8Array(o);for(let s=0;s<this.valueHex.byteLength;s++)i[s]=t[s];i[0]&=127;return yc(i,8)-r}function bc(t,e){const n=t.toString(10);if(e<n.length)return"";const r=e-n.length,o=new Array(r);for(let i=0;i<r;i++)o[i]="0";return o.join("").concat(n)}Math.log(2);const Ac=["name","optional","primitiveSchema"],Ec=["value"],Dc=["isHexOnly"],Bc=["value","isIndefiniteForm"],kc=["value"],Cc=["isConstructed"],xc=["idBlock","lenBlock"],Sc=["unusedBits","isConstructed"],Fc=["idBlock","lenBlock"],Ic=["value"],Nc=["valueDec","isFirstSid"],Tc=["value"],Uc=["valueDec"],Oc=["value"],Lc=["value","valueDate"];function Rc(){if("undefined"===typeof BigInt)throw new Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function _c(t){let e=0,n=0;for(let o=0;o<t.length;o++){e+=t[o].byteLength}const r=new Uint8Array(e);for(let o=0;o<t.length;o++){const e=t[o];r.set(new Uint8Array(e),n),n+=e.byteLength}return r.buffer}function Pc(t,e,n,r){return e instanceof Uint8Array?e.byteLength?n<0?(t.error="Wrong parameter: inputOffset less than zero",!1):r<0?(t.error="Wrong parameter: inputLength less than zero",!1):!(e.byteLength-n-r<0)||(t.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1):(t.error="Wrong parameter: inputBuffer has zero length",!1):(t.error="Wrong parameter: inputBuffer must be 'Uint8Array'",!1)}class jc{constructor(){this.items=[]}write(t){this.items.push(t)}final(){return _c(this.items)}}const Hc=[new Uint8Array([1])],Vc="0123456789",Mc="",zc=new ArrayBuffer(0),Gc=new Uint8Array(0),$c="EndOfContent",qc="OCTET STRING",Kc="BIT STRING";function Zc(t){var e;return e=class extends t{constructor(){var t;super(...arguments);const e=(arguments.length<=0?void 0:arguments[0])||{};this.isHexOnly=null!==(t=e.isHexOnly)&&void 0!==t&&t,this.valueHexView=e.valueHex?pc._H.toUint8Array(e.valueHex):Gc}get valueHex(){return this.valueHexView.slice().buffer}set valueHex(t){this.valueHexView=new Uint8Array(t)}fromBER(t,e,n){const r=t instanceof ArrayBuffer?new Uint8Array(t):t;if(!Pc(this,r,e,n))return-1;const o=e+n;return this.valueHexView=r.subarray(e,o),this.valueHexView.length?(this.blockLength=n,o):(this.warnings.push("Zero buffer length"),e)}toBER(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.isHexOnly?t?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer:(this.error="Flag 'isHexOnly' is not set, abort",zc)}toJSON(){return(0,d.A)((0,d.A)({},super.toJSON()),{},{isHexOnly:this.isHexOnly,valueHex:pc.U$.ToHex(this.valueHexView)})}},e.NAME="hexBlock",e}class Wc{constructor(){let{blockLength:t=0,error:e=Mc,warnings:n=[],valueBeforeDecode:r=Gc}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.blockLength=t,this.error=e,this.warnings=n,this.valueBeforeDecodeView=pc._H.toUint8Array(r)}static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(t){this.valueBeforeDecodeView=new Uint8Array(t)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:pc.U$.ToHex(this.valueBeforeDecodeView)}}}Wc.NAME="baseBlock";class Jc extends Wc{fromBER(t,e,n){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(t,e){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}}Jc.NAME="valueBlock";class Yc extends(Zc(Wc)){constructor(){let{idBlock:t={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var e,n,r,o;super(),t?(this.isHexOnly=null!==(e=t.isHexOnly)&&void 0!==e&&e,this.valueHexView=t.valueHex?pc._H.toUint8Array(t.valueHex):Gc,this.tagClass=null!==(n=t.tagClass)&&void 0!==n?n:-1,this.tagNumber=null!==(r=t.tagNumber)&&void 0!==r?r:-1,this.isConstructed=null!==(o=t.isConstructed)&&void 0!==o&&o):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}toBER(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=0;switch(this.tagClass){case 1:e|=0;break;case 2:e|=64;break;case 3:e|=128;break;case 4:e|=192;break;default:return this.error="Unknown tag class",zc}if(this.isConstructed&&(e|=32),this.tagNumber<31&&!this.isHexOnly){const n=new Uint8Array(1);if(!t){let t=this.tagNumber;t&=31,e|=t,n[0]=e}return n.buffer}if(!this.isHexOnly){const n=wc(this.tagNumber,7),r=new Uint8Array(n),o=n.byteLength,i=new Uint8Array(o+1);if(i[0]=31|e,!t){for(let t=0;t<o-1;t++)i[t+1]=128|r[t];i[o]=r[o-1]}return i.buffer}const n=new Uint8Array(this.valueHexView.byteLength+1);if(n[0]=31|e,!t){const t=this.valueHexView;for(let e=0;e<t.length-1;e++)n[e+1]=128|t[e];n[this.valueHexView.byteLength]=t[t.length-1]}return n.buffer}fromBER(t,e,n){const r=pc._H.toUint8Array(t);if(!Pc(this,r,e,n))return-1;const o=r.subarray(e,e+n);if(0===o.length)return this.error="Zero buffer length",-1;switch(192&o[0]){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=32===(32&o[0]),this.isHexOnly=!1;const i=31&o[0];if(31!==i)this.tagNumber=i,this.blockLength=1;else{let t=1,e=this.valueHexView=new Uint8Array(255),n=255;for(;128&o[t];){if(e[t-1]=127&o[t],t++,t>=o.length)return this.error="End of input reached before message was fully decoded",-1;if(t===n){n+=255;const t=new Uint8Array(n);for(let n=0;n<e.length;n++)t[n]=e[n];e=this.valueHexView=new Uint8Array(n)}}this.blockLength=t+1,e[t-1]=127&o[t];const r=new Uint8Array(t);for(let o=0;o<t;o++)r[o]=e[o];e=this.valueHexView=new Uint8Array(t),e.set(r),this.blockLength<=9?this.tagNumber=yc(e,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(1===this.tagClass&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return e+this.blockLength}toJSON(){return(0,d.A)((0,d.A)({},super.toJSON()),{},{tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed})}}Yc.NAME="identificationBlock";class Xc extends Wc{constructor(){let{lenBlock:t={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var e,n,r;super(),this.isIndefiniteForm=null!==(e=t.isIndefiniteForm)&&void 0!==e&&e,this.longFormUsed=null!==(n=t.longFormUsed)&&void 0!==n&&n,this.length=null!==(r=t.length)&&void 0!==r?r:0}fromBER(t,e,n){const r=pc._H.toUint8Array(t);if(!Pc(this,r,e,n))return-1;const o=r.subarray(e,e+n);if(0===o.length)return this.error="Zero buffer length",-1;if(255===o[0])return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=128===o[0],this.isIndefiniteForm)return this.blockLength=1,e+this.blockLength;if(this.longFormUsed=!!(128&o[0]),!1===this.longFormUsed)return this.length=o[0],this.blockLength=1,e+this.blockLength;const i=127&o[0];if(i>8)return this.error="Too big integer",-1;if(i+1>o.length)return this.error="End of input reached before message was fully decoded",-1;const s=e+1,a=r.subarray(s,s+i);return 0===a[i-1]&&this.warnings.push("Needlessly long encoded length"),this.length=yc(a,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=i+1,e+this.blockLength}toBER(){let t,e,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return t=new ArrayBuffer(1),!1===n&&(e=new Uint8Array(t),e[0]=128),t;if(this.longFormUsed){const r=wc(this.length,8);if(r.byteLength>127)return this.error="Too big length",zc;if(t=new ArrayBuffer(r.byteLength+1),n)return t;const o=new Uint8Array(r);e=new Uint8Array(t),e[0]=128|r.byteLength;for(let t=0;t<r.byteLength;t++)e[t+1]=o[t];return t}return t=new ArrayBuffer(1),!1===n&&(e=new Uint8Array(t),e[0]=this.length),t}toJSON(){return(0,d.A)((0,d.A)({},super.toJSON()),{},{isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length})}}Xc.NAME="lengthBlock";const Qc={};class tl extends Wc{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{name:e=Mc,optional:n=!1,primitiveSchema:r}=t,o=(0,gs.A)(t,Ac),i=arguments.length>1?arguments[1]:void 0;super(o),this.name=e,this.optional=n,r&&(this.primitiveSchema=r),this.idBlock=new Yc(o),this.lenBlock=new Xc(o),this.valueBlock=i?new i(o):new Jc(o)}fromBER(t,e,n){const r=this.valueBlock.fromBER(t,e,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return-1===r?(this.error=this.valueBlock.error,r):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),r)}toBER(t,e){const n=e||new jc;e||el(this);const r=this.idBlock.toBER(t);if(n.write(r),this.lenBlock.isIndefiniteForm)n.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(t,n),n.write(new ArrayBuffer(2));else{const e=this.valueBlock.toBER(t);this.lenBlock.length=e.byteLength;const r=this.lenBlock.toBER(t);n.write(r),n.write(e)}return e?zc:n.final()}toJSON(){const t=(0,d.A)((0,d.A)({},super.toJSON()),{},{idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional});return this.primitiveSchema&&(t.primitiveSchema=this.primitiveSchema.toJSON()),t}toString(){return"ascii"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ascii")?this.onAsciiEncoding():pc.U$.ToHex(this.toBER())}onAsciiEncoding(){return"".concat(this.constructor.NAME," : ").concat(pc.U$.ToHex(this.valueBlock.valueBeforeDecodeView))}isEqual(t){if(this===t)return!0;if(!(t instanceof this.constructor))return!1;return function(t,e){if(t.byteLength!==e.byteLength)return!1;const n=new Uint8Array(t),r=new Uint8Array(e);for(let o=0;o<n.length;o++)if(n[o]!==r[o])return!1;return!0}(this.toBER(),t.toBER())}}function el(t){if(t instanceof Qc.Constructed)for(const e of t.valueBlock.value)el(e)&&(t.lenBlock.isIndefiniteForm=!0);return!!t.lenBlock.isIndefiniteForm}tl.NAME="BaseBlock";class nl extends tl{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{value:e=Mc}=t;super((0,gs.A)(t,Ec),arguments.length>1?arguments[1]:void 0),e&&this.fromString(e)}getValue(){return this.valueBlock.value}setValue(t){this.valueBlock.value=t}fromBER(t,e,n){const r=this.valueBlock.fromBER(t,e,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return-1===r?(this.error=this.valueBlock.error,r):(this.fromBuffer(this.valueBlock.valueHexView),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),r)}onAsciiEncoding(){return"".concat(this.constructor.NAME," : '").concat(this.valueBlock.value,"'")}}nl.NAME="BaseStringBlock";class rl extends(Zc(Jc)){constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{isHexOnly:e=!0}=t;super((0,gs.A)(t,Dc)),this.isHexOnly=e}}var ol,il,sl,al,ul,cl,ll,hl,fl,dl,gl,pl,yl,wl,ml,vl,bl,Al,El,Dl,Bl,kl,Cl,xl,Sl,Fl,Il,Nl,Tl,Ul,Ol,Ll,Rl;rl.NAME="PrimitiveValueBlock";class _l extends tl{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},rl),this.idBlock.isConstructed=!1}}function Pl(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length;const r=e;let o=new tl({},Jc);const i=new Wc;if(!Pc(i,t,e,n))return o.error=i.error,{offset:-1,result:o};if(!t.subarray(e,e+n).length)return o.error="Zero buffer length",{offset:-1,result:o};let s=o.idBlock.fromBER(t,e,n);if(o.idBlock.warnings.length&&o.warnings.concat(o.idBlock.warnings),-1===s)return o.error=o.idBlock.error,{offset:-1,result:o};if(e=s,n-=o.idBlock.blockLength,s=o.lenBlock.fromBER(t,e,n),o.lenBlock.warnings.length&&o.warnings.concat(o.lenBlock.warnings),-1===s)return o.error=o.lenBlock.error,{offset:-1,result:o};if(e=s,n-=o.lenBlock.blockLength,!o.idBlock.isConstructed&&o.lenBlock.isIndefiniteForm)return o.error="Indefinite length form used for primitive encoding form",{offset:-1,result:o};let a=tl;if(1===o.idBlock.tagClass){if(o.idBlock.tagNumber>=37&&!1===o.idBlock.isHexOnly)return o.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:o};switch(o.idBlock.tagNumber){case 0:if(o.idBlock.isConstructed&&o.lenBlock.length>0)return o.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:o};a=Qc.EndOfContent;break;case 1:a=Qc.Boolean;break;case 2:a=Qc.Integer;break;case 3:a=Qc.BitString;break;case 4:a=Qc.OctetString;break;case 5:a=Qc.Null;break;case 6:a=Qc.ObjectIdentifier;break;case 10:a=Qc.Enumerated;break;case 12:a=Qc.Utf8String;break;case 13:a=Qc.RelativeObjectIdentifier;break;case 14:a=Qc.TIME;break;case 15:return o.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:o};case 16:a=Qc.Sequence;break;case 17:a=Qc.Set;break;case 18:a=Qc.NumericString;break;case 19:a=Qc.PrintableString;break;case 20:a=Qc.TeletexString;break;case 21:a=Qc.VideotexString;break;case 22:a=Qc.IA5String;break;case 23:a=Qc.UTCTime;break;case 24:a=Qc.GeneralizedTime;break;case 25:a=Qc.GraphicString;break;case 26:a=Qc.VisibleString;break;case 27:a=Qc.GeneralString;break;case 28:a=Qc.UniversalString;break;case 29:a=Qc.CharacterString;break;case 30:a=Qc.BmpString;break;case 31:a=Qc.DATE;break;case 32:a=Qc.TimeOfDay;break;case 33:a=Qc.DateTime;break;case 34:a=Qc.Duration;break;default:{const t=o.idBlock.isConstructed?new Qc.Constructed:new Qc.Primitive;t.idBlock=o.idBlock,t.lenBlock=o.lenBlock,t.warnings=o.warnings,o=t}}}else a=o.idBlock.isConstructed?Qc.Constructed:Qc.Primitive;return o=function(t,e){if(t instanceof e)return t;const n=new e;return n.idBlock=t.idBlock,n.lenBlock=t.lenBlock,n.warnings=t.warnings,n.valueBeforeDecodeView=t.valueBeforeDecodeView,n}(o,a),s=o.fromBER(t,e,o.lenBlock.isIndefiniteForm?n:o.lenBlock.length),o.valueBeforeDecodeView=t.subarray(r,r+o.blockLength),{offset:s,result:o}}ol=_l,Qc.Primitive=ol,_l.NAME="PRIMITIVE";class jl extends Jc{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{value:e=[],isIndefiniteForm:n=!1}=t;super((0,gs.A)(t,Bc)),this.value=e,this.isIndefiniteForm=n}fromBER(t,e,n){const r=pc._H.toUint8Array(t);if(!Pc(this,r,e,n))return-1;if(this.valueBeforeDecodeView=r.subarray(e,e+n),0===this.valueBeforeDecodeView.length)return this.warnings.push("Zero buffer length"),e;let o=e;for(;i=this.isIndefiniteForm,s=n,(i?1:s)>0;){const t=Pl(r,o,n);if(-1===t.offset)return this.error=t.result.error,this.warnings.concat(t.result.warnings),-1;if(o=t.offset,this.blockLength+=t.result.blockLength,n-=t.result.blockLength,this.value.push(t.result),this.isIndefiniteForm&&t.result.constructor.NAME===$c)break}var i,s;return this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.NAME===$c?this.value.pop():this.warnings.push("No EndOfContent block encoded")),o}toBER(t,e){const n=e||new jc;for(let r=0;r<this.value.length;r++)this.value[r].toBER(t,n);return e?zc:n.final()}toJSON(){const t=(0,d.A)((0,d.A)({},super.toJSON()),{},{isIndefiniteForm:this.isIndefiniteForm,value:[]});for(const e of this.value)t.value.push(e.toJSON());return t}}jl.NAME="ConstructedValueBlock";class Hl extends tl{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},jl),this.idBlock.isConstructed=!0}fromBER(t,e,n){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;const r=this.valueBlock.fromBER(t,e,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return-1===r?(this.error=this.valueBlock.error,r):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),r)}onAsciiEncoding(){const t=[];for(const n of this.valueBlock.value)t.push(n.toString("ascii").split("\n").map((t=>"  ".concat(t))).join("\n"));const e=3===this.idBlock.tagClass?"[".concat(this.idBlock.tagNumber,"]"):this.constructor.NAME;return t.length?"".concat(e," :\n").concat(t.join("\n")):"".concat(e," :")}}il=Hl,Qc.Constructed=il,Hl.NAME="CONSTRUCTED";class Vl extends Jc{fromBER(t,e,n){return e}toBER(t){return zc}}Vl.override="EndOfContentValueBlock";class Ml extends tl{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},Vl),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}}sl=Ml,Qc.EndOfContent=sl,Ml.NAME=$c;class zl extends tl{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},Jc),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}fromBER(t,e,n){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=n,e+n>t.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):e+n}toBER(t,e){const n=new ArrayBuffer(2);if(!t){const t=new Uint8Array(n);t[0]=5,t[1]=0}return e&&e.write(n),n}onAsciiEncoding(){return"".concat(this.constructor.NAME)}}al=zl,Qc.Null=al,zl.NAME="NULL";class Gl extends(Zc(Jc)){constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{value:e}=t,n=(0,gs.A)(t,kc);super(n),n.valueHex?this.valueHexView=pc._H.toUint8Array(n.valueHex):this.valueHexView=new Uint8Array(1),e&&(this.value=e)}get value(){for(const t of this.valueHexView)if(t>0)return!0;return!1}set value(t){this.valueHexView[0]=t?255:0}fromBER(t,e,n){const r=pc._H.toUint8Array(t);return Pc(this,r,e,n)?(this.valueHexView=r.subarray(e,e+n),n>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,vc.call(this),this.blockLength=n,e+n):-1}toBER(){return this.valueHexView.slice()}toJSON(){return(0,d.A)((0,d.A)({},super.toJSON()),{},{value:this.value})}}Gl.NAME="BooleanValueBlock";class $l extends tl{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},Gl),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}getValue(){return this.valueBlock.value}setValue(t){this.valueBlock.value=t}onAsciiEncoding(){return"".concat(this.constructor.NAME," : ").concat(this.getValue)}}ul=$l,Qc.Boolean=ul,$l.NAME="BOOLEAN";class ql extends(Zc(jl)){constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{isConstructed:e=!1}=t;super((0,gs.A)(t,Cc)),this.isConstructed=e}fromBER(t,e,n){let r=0;if(this.isConstructed){if(this.isHexOnly=!1,r=jl.prototype.fromBER.call(this,t,e,n),-1===r)return r;for(let t=0;t<this.value.length;t++){const e=this.value[t].constructor.NAME;if(e===$c){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(e!==qc)return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,r=super.fromBER(t,e,n),this.blockLength=n;return r}toBER(t,e){return this.isConstructed?jl.prototype.toBER.call(this,t,e):t?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return(0,d.A)((0,d.A)({},super.toJSON()),{},{isConstructed:this.isConstructed})}}ql.NAME="OctetStringValueBlock";class Kl extends tl{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{idBlock:e={},lenBlock:n={}}=t,r=(0,gs.A)(t,xc);var o,i;null!==(o=r.isConstructed)&&void 0!==o||(r.isConstructed=!!(null===(i=r.value)||void 0===i?void 0:i.length)),super((0,d.A)({idBlock:(0,d.A)({isConstructed:r.isConstructed},e),lenBlock:(0,d.A)((0,d.A)({},n),{},{isIndefiniteForm:!!r.isIndefiniteForm})},r),ql),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(t,e,n){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,0===n)return 0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),e;if(!this.valueBlock.isConstructed){const o=(t instanceof ArrayBuffer?new Uint8Array(t):t).subarray(e,e+n);try{if(o.byteLength){const t=Pl(o,0,o.byteLength);-1!==t.offset&&t.offset===n&&(this.valueBlock.value=[t.result])}}catch(r){}}return super.fromBER(t,e,n)}onAsciiEncoding(){return this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length?Hl.prototype.onAsciiEncoding.call(this):"".concat(this.constructor.NAME," : ").concat(pc.U$.ToHex(this.valueBlock.valueHexView))}getValue(){if(!this.idBlock.isConstructed)return this.valueBlock.valueHexView.slice().buffer;const t=[];for(const e of this.valueBlock.value)e instanceof Kl&&t.push(e.valueBlock.valueHexView);return pc._H.concat(t)}}cl=Kl,Qc.OctetString=cl,Kl.NAME=qc;class Zl extends(Zc(jl)){constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{unusedBits:e=0,isConstructed:n=!1}=t;super((0,gs.A)(t,Sc)),this.unusedBits=e,this.isConstructed=n,this.blockLength=this.valueHexView.byteLength}fromBER(t,e,n){if(!n)return e;let r=-1;if(this.isConstructed){if(r=jl.prototype.fromBER.call(this,t,e,n),-1===r)return r;for(const t of this.value){const e=t.constructor.NAME;if(e===$c){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(e!==Kc)return this.error="BIT STRING may consists of BIT STRINGs only",-1;const n=t.valueBlock;if(this.unusedBits>0&&n.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;this.unusedBits=n.unusedBits}return r}const o=pc._H.toUint8Array(t);if(!Pc(this,o,e,n))return-1;const i=o.subarray(e,e+n);if(this.unusedBits=i[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){const t=i.subarray(1);try{if(t.byteLength){const e=Pl(t,0,t.byteLength);-1!==e.offset&&e.offset===n-1&&(this.value=[e.result])}}catch(s){}}return this.valueHexView=i.subarray(1),this.blockLength=i.length,e+n}toBER(t,e){if(this.isConstructed)return jl.prototype.toBER.call(this,t,e);if(t)return new ArrayBuffer(this.valueHexView.byteLength+1);if(!this.valueHexView.byteLength)return zc;const n=new Uint8Array(this.valueHexView.length+1);return n[0]=this.unusedBits,n.set(this.valueHexView,1),n.buffer}toJSON(){return(0,d.A)((0,d.A)({},super.toJSON()),{},{unusedBits:this.unusedBits,isConstructed:this.isConstructed})}}Zl.NAME="BitStringValueBlock";class Wl extends tl{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{idBlock:e={},lenBlock:n={}}=t,r=(0,gs.A)(t,Fc);var o,i;null!==(o=r.isConstructed)&&void 0!==o||(r.isConstructed=!!(null===(i=r.value)||void 0===i?void 0:i.length)),super((0,d.A)({idBlock:(0,d.A)({isConstructed:r.isConstructed},e),lenBlock:(0,d.A)((0,d.A)({},n),{},{isIndefiniteForm:!!r.isIndefiniteForm})},r),Zl),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}fromBER(t,e,n){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(t,e,n)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return Hl.prototype.onAsciiEncoding.call(this);{const t=[],e=this.valueBlock.valueHexView;for(const r of e)t.push(r.toString(2).padStart(8,"0"));const n=t.join("");return"".concat(this.constructor.NAME," : ").concat(n.substring(0,n.length-this.valueBlock.unusedBits))}}}function Jl(t,e){const n=new Uint8Array([0]),r=new Uint8Array(t),o=new Uint8Array(e);let i=r.slice(0);const s=i.length-1,a=o.slice(0),u=a.length-1;let c=0;let l=0;for(let h=u<s?s:u;h>=0;h--,l++){if(!0===l<a.length)c=i[s-l]+a[u-l]+n[0];else c=i[s-l]+n[0];if(n[0]=c/10,!0===l>=i.length)i=mc(new Uint8Array([c%10]),i);else i[s-l]=c%10}return n[0]>0&&(i=mc(n,i)),i}function Yl(t){if(t>=Hc.length)for(let e=Hc.length;e<=t;e++){const t=new Uint8Array([0]);let n=Hc[e-1].slice(0);for(let e=n.length-1;e>=0;e--){const r=new Uint8Array([(n[e]<<1)+t[0]]);t[0]=r[0]/10,n[e]=r[0]%10}t[0]>0&&(n=mc(t,n)),Hc.push(n)}return Hc[t]}function Xl(t,e){let n=0;const r=new Uint8Array(t),o=new Uint8Array(e),i=r.slice(0),s=i.length-1,a=o.slice(0),u=a.length-1;let c,l=0;for(let h=u;h>=0;h--,l++)if(c=i[s-l]-a[u-l]-n,!0===c<0)n=1,i[s-l]=c+10;else n=0,i[s-l]=c;if(n>0)for(let h=s-u+1;h>=0;h--,l++){if(c=i[s-l]-n,!(c<0)){n=0,i[s-l]=c;break}n=1,i[s-l]=c+10}return i.slice()}ll=Wl,Qc.BitString=ll,Wl.NAME=Kc;class Ql extends(Zc(Jc)){constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{value:e}=t,n=(0,gs.A)(t,Ic);super(n),this._valueDec=0,n.valueHex&&this.setValueHex(),void 0!==e&&(this.valueDec=e)}setValueHex(){this.valueHexView.length>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,this.valueHexView.length>0&&(this._valueDec=vc.call(this)))}set valueDec(t){this._valueDec=t,this.isHexOnly=!1,this.valueHexView=new Uint8Array(function(t){const e=t<0?-1*t:t;let n=128;for(let r=1;r<8;r++){if(e<=n){if(t<0){const t=wc(n-e,8,r);return new Uint8Array(t)[0]|=128,t}let o=wc(e,8,r),i=new Uint8Array(o);if(128&i[0]){const t=o.slice(0),e=new Uint8Array(t);o=new ArrayBuffer(o.byteLength+1),i=new Uint8Array(o);for(let n=0;n<t.byteLength;n++)i[n+1]=e[n];i[0]=0}return o}n*=Math.pow(2,8)}return new ArrayBuffer(0)}(t))}get valueDec(){return this._valueDec}fromDER(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const o=this.fromBER(t,e,n);if(-1===o)return o;const i=this.valueHexView;return 0===i[0]&&0!==(128&i[1])?this.valueHexView=i.subarray(1):0!==r&&i.length<r&&(r-i.length>1&&(r=i.length+1),this.valueHexView=i.subarray(r-i.length)),o}toDER(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const e=this.valueHexView;switch(!0){case 0!==(128&e[0]):{const t=new Uint8Array(this.valueHexView.length+1);t[0]=0,t.set(e,1),this.valueHexView=t}break;case 0===e[0]&&0===(128&e[1]):this.valueHexView=this.valueHexView.subarray(1)}return this.toBER(t)}fromBER(t,e,n){const r=super.fromBER(t,e,n);return-1===r||this.setValueHex(),r}toBER(t){return t?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return(0,d.A)((0,d.A)({},super.toJSON()),{},{valueDec:this.valueDec})}toString(){const t=8*this.valueHexView.length-1;let e,n=new Uint8Array(8*this.valueHexView.length/3),r=0;const o=this.valueHexView;let i="",s=!1;for(let a=o.byteLength-1;a>=0;a--){e=o[a];for(let o=0;o<8;o++){if(1===(1&e))if(r===t)n=Xl(Yl(r),n),i="-";else n=Jl(n,Yl(r));r++,e>>=1}}for(let a=0;a<n.length;a++)n[a]&&(s=!0),s&&(i+=Vc.charAt(n[a]));return!1===s&&(i+=Vc.charAt(0)),i}}hl=Ql,Ql.NAME="IntegerValueBlock",Object.defineProperty(hl.prototype,"valueHex",{set:function(t){this.valueHexView=new Uint8Array(t),this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}});class th extends tl{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},Ql),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}toBigInt(){return Rc(),BigInt(this.valueBlock.toString())}static fromBigInt(t){Rc();const e=BigInt(t),n=new jc,r=e.toString(16).replace(/^-/,""),o=new Uint8Array(pc.U$.FromHex(r));if(e<0){const t=new Uint8Array(o.length+(128&o[0]?1:0));t[0]|=128;const r=BigInt("0x".concat(pc.U$.ToHex(t)))+e,i=pc._H.toUint8Array(pc.U$.FromHex(r.toString(16)));i[0]|=128,n.write(i)}else 128&o[0]&&n.write(new Uint8Array([0])),n.write(o);return new th({valueHex:n.final()})}convertToDER(){const t=new th({valueHex:this.valueBlock.valueHexView});return t.valueBlock.toDER(),t}convertFromDER(){return new th({valueHex:0===this.valueBlock.valueHexView[0]?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return"".concat(this.constructor.NAME," : ").concat(this.valueBlock.toString())}}fl=th,Qc.Integer=fl,th.NAME="INTEGER";class eh extends th{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}}dl=eh,Qc.Enumerated=dl,eh.NAME="ENUMERATED";class nh extends(Zc(Jc)){constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{valueDec:e=-1,isFirstSid:n=!1}=t;super((0,gs.A)(t,Nc)),this.valueDec=e,this.isFirstSid=n}fromBER(t,e,n){if(!n)return e;const r=pc._H.toUint8Array(t);if(!Pc(this,r,e,n))return-1;const o=r.subarray(e,e+n);this.valueHexView=new Uint8Array(n);for(let s=0;s<n&&(this.valueHexView[s]=127&o[s],this.blockLength++,0!==(128&o[s]));s++);const i=new Uint8Array(this.blockLength);for(let s=0;s<this.blockLength;s++)i[s]=this.valueHexView[s];return this.valueHexView=i,0!==(128&o[this.blockLength-1])?(this.error="End of input reached before message was fully decoded",-1):(0===this.valueHexView[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=yc(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),e+this.blockLength)}set valueBigInt(t){Rc();let e=BigInt(t).toString(2);for(;e.length%7;)e="0"+e;const n=new Uint8Array(e.length/7);for(let r=0;r<n.length;r++)n[r]=parseInt(e.slice(7*r,7*r+7),2)+(r+1<n.length?128:0);this.fromBER(n.buffer,0,n.length)}toBER(t){if(this.isHexOnly){if(t)return new ArrayBuffer(this.valueHexView.byteLength);const e=this.valueHexView,n=new Uint8Array(this.blockLength);for(let t=0;t<this.blockLength-1;t++)n[t]=128|e[t];return n[this.blockLength-1]=e[this.blockLength-1],n.buffer}const e=wc(this.valueDec,7);if(0===e.byteLength)return this.error="Error during encoding SID value",zc;const n=new Uint8Array(e.byteLength);if(!t){const t=new Uint8Array(e),r=e.byteLength-1;for(let e=0;e<r;e++)n[e]=128|t[e];n[r]=t[r]}return n}toString(){let t="";if(this.isHexOnly)t=pc.U$.ToHex(this.valueHexView);else if(this.isFirstSid){let e=this.valueDec;this.valueDec<=39?t="0.":this.valueDec<=79?(t="1.",e-=40):(t="2.",e-=80),t+=e.toString()}else t=this.valueDec.toString();return t}toJSON(){return(0,d.A)((0,d.A)({},super.toJSON()),{},{valueDec:this.valueDec,isFirstSid:this.isFirstSid})}}nh.NAME="sidBlock";class rh extends Jc{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{value:e=Mc}=t;super((0,gs.A)(t,Tc)),this.value=[],e&&this.fromString(e)}fromBER(t,e,n){let r=e;for(;n>0;){const e=new nh;if(r=e.fromBER(t,r,n),-1===r)return this.blockLength=0,this.error=e.error,r;0===this.value.length&&(e.isFirstSid=!0),this.blockLength+=e.blockLength,n-=e.blockLength,this.value.push(e)}return r}toBER(t){const e=[];for(let n=0;n<this.value.length;n++){const r=this.value[n].toBER(t);if(0===r.byteLength)return this.error=this.value[n].error,zc;e.push(r)}return _c(e)}fromString(t){this.value=[];let e=0,n=0,r="",o=!1;do{if(n=t.indexOf(".",e),r=-1===n?t.substring(e):t.substring(e,n),e=n+1,o){const t=this.value[0];let e=0;switch(t.valueDec){case 0:break;case 1:e=40;break;case 2:e=80;break;default:return void(this.value=[])}const n=parseInt(r,10);if(isNaN(n))return;t.valueDec=n+e,o=!1}else{const t=new nh;if(r>Number.MAX_SAFE_INTEGER){Rc();const e=BigInt(r);t.valueBigInt=e}else if(t.valueDec=parseInt(r,10),isNaN(t.valueDec))return;this.value.length||(t.isFirstSid=!0,o=!0),this.value.push(t)}}while(-1!==n)}toString(){let t="",e=!1;for(let n=0;n<this.value.length;n++){e=this.value[n].isHexOnly;let r=this.value[n].toString();0!==n&&(t="".concat(t,".")),e?(r="{".concat(r,"}"),this.value[n].isFirstSid?t="2.{".concat(r," - 80}"):t+=r):t+=r}return t}toJSON(){const t=(0,d.A)((0,d.A)({},super.toJSON()),{},{value:this.toString(),sidArray:[]});for(let e=0;e<this.value.length;e++)t.sidArray.push(this.value[e].toJSON());return t}}rh.NAME="ObjectIdentifierValueBlock";class oh extends tl{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},rh),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}getValue(){return this.valueBlock.toString()}setValue(t){this.valueBlock.fromString(t)}onAsciiEncoding(){return"".concat(this.constructor.NAME," : ").concat(this.valueBlock.toString()||"empty")}toJSON(){return(0,d.A)((0,d.A)({},super.toJSON()),{},{value:this.getValue()})}}gl=oh,Qc.ObjectIdentifier=gl,oh.NAME="OBJECT IDENTIFIER";class ih extends(Zc(Wc)){constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{valueDec:e=0}=t;super((0,gs.A)(t,Uc)),this.valueDec=e}fromBER(t,e,n){if(0===n)return e;const r=pc._H.toUint8Array(t);if(!Pc(this,r,e,n))return-1;const o=r.subarray(e,e+n);this.valueHexView=new Uint8Array(n);for(let s=0;s<n&&(this.valueHexView[s]=127&o[s],this.blockLength++,0!==(128&o[s]));s++);const i=new Uint8Array(this.blockLength);for(let s=0;s<this.blockLength;s++)i[s]=this.valueHexView[s];return this.valueHexView=i,0!==(128&o[this.blockLength-1])?(this.error="End of input reached before message was fully decoded",-1):(0===this.valueHexView[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=yc(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),e+this.blockLength)}toBER(t){if(this.isHexOnly){if(t)return new ArrayBuffer(this.valueHexView.byteLength);const e=this.valueHexView,n=new Uint8Array(this.blockLength);for(let t=0;t<this.blockLength-1;t++)n[t]=128|e[t];return n[this.blockLength-1]=e[this.blockLength-1],n.buffer}const e=wc(this.valueDec,7);if(0===e.byteLength)return this.error="Error during encoding SID value",zc;const n=new Uint8Array(e.byteLength);if(!t){const t=new Uint8Array(e),r=e.byteLength-1;for(let e=0;e<r;e++)n[e]=128|t[e];n[r]=t[r]}return n.buffer}toString(){let t="";return t=this.isHexOnly?pc.U$.ToHex(this.valueHexView):this.valueDec.toString(),t}toJSON(){return(0,d.A)((0,d.A)({},super.toJSON()),{},{valueDec:this.valueDec})}}ih.NAME="relativeSidBlock";class sh extends Jc{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{value:e=Mc}=t;super((0,gs.A)(t,Oc)),this.value=[],e&&this.fromString(e)}fromBER(t,e,n){let r=e;for(;n>0;){const e=new ih;if(r=e.fromBER(t,r,n),-1===r)return this.blockLength=0,this.error=e.error,r;this.blockLength+=e.blockLength,n-=e.blockLength,this.value.push(e)}return r}toBER(t,e){const n=[];for(let r=0;r<this.value.length;r++){const e=this.value[r].toBER(t);if(0===e.byteLength)return this.error=this.value[r].error,zc;n.push(e)}return _c(n)}fromString(t){this.value=[];let e=0,n=0,r="";do{n=t.indexOf(".",e),r=-1===n?t.substring(e):t.substring(e,n),e=n+1;const o=new ih;if(o.valueDec=parseInt(r,10),isNaN(o.valueDec))return!0;this.value.push(o)}while(-1!==n);return!0}toString(){let t="",e=!1;for(let n=0;n<this.value.length;n++){e=this.value[n].isHexOnly;let r=this.value[n].toString();0!==n&&(t="".concat(t,".")),e?(r="{".concat(r,"}"),t+=r):t+=r}return t}toJSON(){const t=(0,d.A)((0,d.A)({},super.toJSON()),{},{value:this.toString(),sidArray:[]});for(let e=0;e<this.value.length;e++)t.sidArray.push(this.value[e].toJSON());return t}}sh.NAME="RelativeObjectIdentifierValueBlock";class ah extends tl{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},sh),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}getValue(){return this.valueBlock.toString()}setValue(t){this.valueBlock.fromString(t)}onAsciiEncoding(){return"".concat(this.constructor.NAME," : ").concat(this.valueBlock.toString()||"empty")}toJSON(){return(0,d.A)((0,d.A)({},super.toJSON()),{},{value:this.getValue()})}}pl=ah,Qc.RelativeObjectIdentifier=pl,ah.NAME="RelativeObjectIdentifier";class uh extends Hl{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}}yl=uh,Qc.Sequence=yl,uh.NAME="SEQUENCE";class ch extends Hl{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}}wl=ch,Qc.Set=wl,ch.NAME="SET";class lh extends(Zc(Jc)){constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(Object.assign({},(gc(t),t))),this.isHexOnly=!0,this.value=Mc}toJSON(){return(0,d.A)((0,d.A)({},super.toJSON()),{},{value:this.value})}}lh.NAME="StringValueBlock";class hh extends lh{}hh.NAME="SimpleStringValueBlock";class fh extends nl{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(Object.assign({},(gc(t),t)),hh)}fromBuffer(t){this.valueBlock.value=String.fromCharCode.apply(null,pc._H.toUint8Array(t))}fromString(t){const e=t.length,n=this.valueBlock.valueHexView=new Uint8Array(e);for(let r=0;r<e;r++)n[r]=t.charCodeAt(r);this.valueBlock.value=t}}fh.NAME="SIMPLE STRING";class dh extends fh{fromBuffer(t){this.valueBlock.valueHexView=pc._H.toUint8Array(t);try{this.valueBlock.value=pc.U$.ToUtf8String(t)}catch(e){this.warnings.push('Error during "decodeURIComponent": '.concat(e,", using raw string")),this.valueBlock.value=pc.U$.ToBinary(t)}}fromString(t){this.valueBlock.valueHexView=new Uint8Array(pc.U$.FromUtf8String(t)),this.valueBlock.value=t}}dh.NAME="Utf8StringValueBlock";class gh extends dh{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}}ml=gh,Qc.Utf8String=ml,gh.NAME="UTF8String";class ph extends fh{fromBuffer(t){this.valueBlock.value=pc.U$.ToUtf16String(t),this.valueBlock.valueHexView=pc._H.toUint8Array(t)}fromString(t){this.valueBlock.value=t,this.valueBlock.valueHexView=new Uint8Array(pc.U$.FromUtf16String(t))}}ph.NAME="BmpStringValueBlock";class yh extends ph{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(Object.assign({},(gc(t),t))),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}}vl=yh,Qc.BmpString=vl,yh.NAME="BMPString";class wh extends fh{fromBuffer(t){const e=ArrayBuffer.isView(t)?t.slice().buffer:t.slice(0),n=new Uint8Array(e);for(let r=0;r<n.length;r+=4)n[r]=n[r+3],n[r+1]=n[r+2],n[r+2]=0,n[r+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(e))}fromString(t){const e=t.length,n=this.valueBlock.valueHexView=new Uint8Array(4*e);for(let r=0;r<e;r++){const e=wc(t.charCodeAt(r),8),o=new Uint8Array(e);if(o.length>4)continue;const i=4-o.length;for(let t=o.length-1;t>=0;t--)n[4*r+t+i]=o[t]}this.valueBlock.value=t}}wh.NAME="UniversalStringValueBlock";class mh extends wh{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(Object.assign({},(gc(t),t))),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}}bl=mh,Qc.UniversalString=bl,mh.NAME="UniversalString";class vh extends fh{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}}Al=vh,Qc.NumericString=Al,vh.NAME="NumericString";class bh extends fh{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}}El=bh,Qc.PrintableString=El,bh.NAME="PrintableString";class Ah extends fh{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}}Dl=Ah,Qc.TeletexString=Dl,Ah.NAME="TeletexString";class Eh extends fh{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}}Bl=Eh,Qc.VideotexString=Bl,Eh.NAME="VideotexString";class Dh extends fh{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}}kl=Dh,Qc.IA5String=kl,Dh.NAME="IA5String";class Bh extends fh{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}}Cl=Bh,Qc.GraphicString=Cl,Bh.NAME="GraphicString";class kh extends fh{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}}xl=kh,Qc.VisibleString=xl,kh.NAME="VisibleString";class Ch extends fh{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}}Sl=Ch,Qc.GeneralString=Sl,Ch.NAME="GeneralString";class xh extends fh{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}}Fl=xh,Qc.CharacterString=Fl,xh.NAME="CharacterString";class Sh extends kh{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{value:e,valueDate:n}=t;if(super((0,gs.A)(t,Lc)),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,e){this.fromString(e),this.valueBlock.valueHexView=new Uint8Array(e.length);for(let t=0;t<e.length;t++)this.valueBlock.valueHexView[t]=e.charCodeAt(t)}n&&(this.fromDate(n),this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBuffer(t){this.fromString(String.fromCharCode.apply(null,pc._H.toUint8Array(t)))}toBuffer(){const t=this.toString(),e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return e}fromDate(t){this.year=t.getUTCFullYear(),this.month=t.getUTCMonth()+1,this.day=t.getUTCDate(),this.hour=t.getUTCHours(),this.minute=t.getUTCMinutes(),this.second=t.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(t){const e=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/gi.exec(t);if(null===e)return void(this.error="Wrong input string for conversion");const n=parseInt(e[1],10);this.year=n>=50?1900+n:2e3+n,this.month=parseInt(e[2],10),this.day=parseInt(e[3],10),this.hour=parseInt(e[4],10),this.minute=parseInt(e[5],10),this.second=parseInt(e[6],10)}toString(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"iso";if("iso"===t){const t=new Array(7);return t[0]=bc(this.year<2e3?this.year-1900:this.year-2e3,2),t[1]=bc(this.month,2),t[2]=bc(this.day,2),t[3]=bc(this.hour,2),t[4]=bc(this.minute,2),t[5]=bc(this.second,2),t[6]="Z",t.join("")}return super.toString(t)}onAsciiEncoding(){return"".concat(this.constructor.NAME," : ").concat(this.toDate().toISOString())}toJSON(){return(0,d.A)((0,d.A)({},super.toJSON()),{},{year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second})}}Il=Sh,Qc.UTCTime=Il,Sh.NAME="UTCTime";class Fh extends Sh{constructor(){var t;super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),null!==(t=this.millisecond)&&void 0!==t||(this.millisecond=0),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromDate(t){super.fromDate(t),this.millisecond=t.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(t){let e,n=!1,r="",o="",i=0,s=0,a=0;if("Z"===t[t.length-1])r=t.substring(0,t.length-1),n=!0;else{const e=new Number(t[t.length-1]);if(isNaN(e.valueOf()))throw new Error("Wrong input string for conversion");r=t}if(n){if(-1!==r.indexOf("+"))throw new Error("Wrong input string for conversion");if(-1!==r.indexOf("-"))throw new Error("Wrong input string for conversion")}else{let t=1,e=r.indexOf("+"),n="";if(-1===e&&(e=r.indexOf("-"),t=-1),-1!==e){if(n=r.substring(e+1),r=r.substring(0,e),2!==n.length&&4!==n.length)throw new Error("Wrong input string for conversion");let o=parseInt(n.substring(0,2),10);if(isNaN(o.valueOf()))throw new Error("Wrong input string for conversion");if(s=t*o,4===n.length){if(o=parseInt(n.substring(2,4),10),isNaN(o.valueOf()))throw new Error("Wrong input string for conversion");a=t*o}}}let u=r.indexOf(".");if(-1===u&&(u=r.indexOf(",")),-1!==u){const t=new Number("0".concat(r.substring(u)));if(isNaN(t.valueOf()))throw new Error("Wrong input string for conversion");i=t.valueOf(),o=r.substring(0,u)}else o=r;switch(!0){case 8===o.length:if(e=/(\d{4})(\d{2})(\d{2})/gi,-1!==u)throw new Error("Wrong input string for conversion");break;case 10===o.length:if(e=/(\d{4})(\d{2})(\d{2})(\d{2})/gi,-1!==u){let t=60*i;this.minute=Math.floor(t),t=60*(t-this.minute),this.second=Math.floor(t),t=1e3*(t-this.second),this.millisecond=Math.floor(t)}break;case 12===o.length:if(e=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==u){let t=60*i;this.second=Math.floor(t),t=1e3*(t-this.second),this.millisecond=Math.floor(t)}break;case 14===o.length:if(e=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==u){const t=1e3*i;this.millisecond=Math.floor(t)}break;default:throw new Error("Wrong input string for conversion")}const c=e.exec(o);if(null===c)throw new Error("Wrong input string for conversion");for(let l=1;l<c.length;l++)switch(l){case 1:this.year=parseInt(c[l],10);break;case 2:this.month=parseInt(c[l],10);break;case 3:this.day=parseInt(c[l],10);break;case 4:this.hour=parseInt(c[l],10)+s;break;case 5:this.minute=parseInt(c[l],10)+a;break;case 6:this.second=parseInt(c[l],10);break;default:throw new Error("Wrong input string for conversion")}if(!1===n){const t=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=t.getUTCFullYear(),this.month=t.getUTCMonth(),this.day=t.getUTCDay(),this.hour=t.getUTCHours(),this.minute=t.getUTCMinutes(),this.second=t.getUTCSeconds(),this.millisecond=t.getUTCMilliseconds()}}toString(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"iso";if("iso"===t){const t=[];return t.push(bc(this.year,4)),t.push(bc(this.month,2)),t.push(bc(this.day,2)),t.push(bc(this.hour,2)),t.push(bc(this.minute,2)),t.push(bc(this.second,2)),0!==this.millisecond&&(t.push("."),t.push(bc(this.millisecond,3))),t.push("Z"),t.join("")}return super.toString(t)}toJSON(){return(0,d.A)((0,d.A)({},super.toJSON()),{},{millisecond:this.millisecond})}}Nl=Fh,Qc.GeneralizedTime=Nl,Fh.NAME="GeneralizedTime";class Ih extends gh{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}}Tl=Ih,Qc.DATE=Tl,Ih.NAME="DATE";class Nh extends gh{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}}Ul=Nh,Qc.TimeOfDay=Ul,Nh.NAME="TimeOfDay";class Th extends gh{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}}Ol=Th,Qc.DateTime=Ol,Th.NAME="DateTime";class Uh extends gh{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}}Ll=Uh,Qc.Duration=Ll,Uh.NAME="Duration";class Oh extends gh{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}}Rl=Oh,Qc.TIME=Rl,Oh.NAME="TIME";function Lh(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const Rh=Lh("utf8","u",(t=>"u"+new TextDecoder("utf8").decode(t)),(t=>(new TextEncoder).encode(t.substring(1)))),_h=Lh("ascii","a",(t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e}),(t=>{const e=function(t=0){return new Uint8Array(t)}((t=t.substring(1)).length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e})),Ph={utf8:Rh,"utf-8":Rh,hex:Qo.Fo.base16,latin1:_h,ascii:_h,binary:_h,...Qo.Fo};function jh(t,e="utf8"){const n=Ph[e];if(null==n)throw new Error(`Unsupported encoding "${e}"`);return n.decoder.decode(`${n.prefix}${t}`)}Error;class Hh extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"An error occurred while verifying a message"),this.name="VerificationError"}}class Vh extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Missing Web Crypto API"),this.name="WebCryptoMissingError"}}const Mh={get(){const t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:globalThis).crypto;if(null==(null===t||void 0===t?void 0:t.subtle))throw new Vh("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p/blob/main/packages/crypto/README.md#web-crypto-api");return t}};class zh{constructor(t,e){(0,f.A)(this,"type","RSA"),(0,f.A)(this,"_key",void 0),(0,f.A)(this,"_raw",void 0),(0,f.A)(this,"_multihash",void 0),this._key=t,this._multihash=e}get raw(){return null==this._raw&&(this._raw=qh(this._key)),this._raw}toMultihash(){return this._multihash}toCID(){return Pt.TO.createV1(114,this._multihash)}toString(){return ks.base58btc.encode(this.toMultihash().bytes).substring(1)}equals(t){return null!=t&&t.raw instanceof Uint8Array&&xs(this.raw,t.raw)}verify(t,e){return async function(t,e,n){const r=await Mh.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return Mh.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},r,e,n instanceof Uint8Array?n:n.subarray())}(this._key,e,t)}}const Gh=8192;function $h(t){const{result:e}=function(t){if(!t.byteLength){const t=new tl({},Jc);return t.error="Input buffer has zero length",{offset:-1,result:t}}return Pl(pc._H.toUint8Array(t).slice(),0,t.byteLength)}(t),n=e.valueBlock.value[1].valueBlock.value[0].valueBlock.value;return{kty:"RSA",n:Kh(n[0]),e:Kh(n[1])}}function qh(t){if(null==t.n||null==t.e)throw new Ti("JWK was missing components");const e=new uh({value:[new uh({value:[new oh({value:"1.2.840.113549.1.1.1"}),new zl]}),new Wl({valueHex:new uh({value:[th.fromBigInt(Zh(jh(t.n,"base64url"))),th.fromBigInt(Zh(jh(t.e,"base64url")))]}).toBER()})]}).toBER();return new Uint8Array(e,0,e.byteLength)}function Kh(t){let e=t.valueBlock.valueHexView;for(;0===e[0];)e=e.subarray(1);return function(t,e="utf8"){const n=Ph[e];if(null==n)throw new Error(`Unsupported encoding "${e}"`);return n.encoder.encode(t).substring(1)}(e,"base64url")}function Zh(t){const e=[];return t.forEach((function(t){let n=t.toString(16);n.length%2>0&&(n="0".concat(n)),e.push(n)})),BigInt("0x"+e.join(""))}function Wh(t){const e=$h(t);if(function(t){if("RSA"!==t.kty)throw new Ti("invalid key type");if(null==t.n)throw new Ti("invalid key modulus");return 8*jh(t.n,"base64url").length}(e)>Gh)throw new Ui("Key size is too large");const n=dc(ic.encode({Type:rc.RSA,Data:t})),r=(0,Cs.vt)(18,n);return new zh(e,r)}class Jh extends _s{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,Is(t);const n=Rs(e);if(this.iHash=t.create(),"function"!==typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,o=new Uint8Array(r);o.set(n.length>r?t.create().update(n).digest():n);for(let i=0;i<o.length;i++)o[i]^=54;this.iHash.update(o),this.oHash=t.create();for(let i=0;i<o.length;i++)o[i]^=106;this.oHash.update(o),o.fill(0)}update(t){return Ns(this),this.iHash.update(t),this}digestInto(t){Ns(this),Fs(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:r,destroyed:o,blockLen:i,outputLen:s}=this;return t.finished=r,t.destroyed=o,t.blockLen=i,t.outputLen=s,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Yh=(t,e,n)=>new Jh(t,e).update(n).digest();function Xh(t){void 0!==t.lowS&&oa("lowS",t.lowS),void 0!==t.prehash&&oa("prehash",t.prehash)}Yh.create=(t,e)=>new Jh(t,e);const{Ph:Qh,aT:tf}=a,ef={Err:class extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}},_tlv:{encode:(t,e)=>{const{Err:n}=ef;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(1&e.length)throw new n("tlv.encode: unpadded data");const r=e.length/2,o=aa(r);if(o.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?aa(o.length/2|128):"";return"".concat(aa(t)).concat(i).concat(o).concat(e)},decode(t,e){const{Err:n}=ef;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const o=e[r++];let i=0;if(!!(128&o)){const t=127&o;if(!t)throw new n("tlv.decode(long): indefinite length not supported");if(t>4)throw new n("tlv.decode(long): byte length is too big");const s=e.subarray(r,r+t);if(s.length!==t)throw new n("tlv.decode: length bytes not complete");if(0===s[0])throw new n("tlv.decode(long): zero leftmost byte");for(const e of s)i=i<<8|e;if(r+=t,i<128)throw new n("tlv.decode(long): not minimal encoding")}else i=o;const s=e.subarray(r,r+i);if(s.length!==i)throw new n("tlv.decode: wrong value length");return{v:s,l:e.subarray(r+i)}}},_int:{encode(t){const{Err:e}=ef;if(t<nf)throw new e("integer: negative integers are not allowed");let n=aa(t);if(8&Number.parseInt(n[0],16)&&(n="00"+n),1&n.length)throw new e("unexpected assertion");return n},decode(t){const{Err:e}=ef;if(128&t[0])throw new e("Invalid signature integer: negative");if(0===t[0]&&!(128&t[1]))throw new e("Invalid signature integer: unnecessary leading zero");return Qh(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=ef,o="string"===typeof t?tf(t):t;ra(o);const{v:i,l:s}=r.decode(48,o);if(s.length)throw new e("Invalid signature: left bytes after parsing");const{v:a,l:u}=r.decode(2,i),{v:c,l:l}=r.decode(2,u);if(l.length)throw new e("Invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(c)}},hexFromSig(t){const{_tlv:e,_int:n}=ef,r="".concat(e.encode(2,n.encode(t.r))).concat(e.encode(2,n.encode(t.s)));return e.encode(48,r)}},nf=BigInt(0),rf=BigInt(1),of=(BigInt(2),BigInt(3));BigInt(4);function sf(t){const e=function(t){const e=Xa(t);xa(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:o}=e;if(n){if(!r.eql(o,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!==typeof n||"bigint"!==typeof n.beta||"function"!==typeof n.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze((0,d.A)({},e))}(t),{Fp:n}=e,r=za(e.n,e.nBitLength),o=e.toBytes||((t,e,r)=>{const o=e.toAffine();return wa(Uint8Array.from([4]),n.toBytes(o.x),n.toBytes(o.y))}),i=e.fromBytes||(t=>{const e=t.subarray(1);return{x:n.fromBytes(e.subarray(0,n.BYTES)),y:n.fromBytes(e.subarray(n.BYTES,2*n.BYTES))}});function s(t){const{a:r,b:o}=e,i=n.sqr(t),s=n.mul(i,t);return n.add(n.add(s,n.mul(t,r)),o)}if(!n.eql(n.sqr(e.Gy),s(e.Gx)))throw new Error("bad generator point: equation left != right");function a(t){const{allowedPrivateKeyLengths:n,nByteLength:r,wrapPrivateKey:o,n:i}=e;if(n&&"bigint"!==typeof t){if(na(t)&&(t=sa(t)),"string"!==typeof t||!n.includes(t.length))throw new Error("Invalid key");t=t.padStart(2*r,"0")}let s;try{s="bigint"===typeof t?t:fa(ya("private key",t,r))}catch(a){throw new Error("private key must be ".concat(r," bytes, hex or bigint, not ").concat(typeof t))}return o&&(s=Ra(s,i)),ba("private key",s,rf,i),s}function u(t){if(!(t instanceof h))throw new Error("ProjectivePoint expected")}const c=Sa(((t,e)=>{const{px:r,py:o,pz:i}=t;if(n.eql(i,n.ONE))return{x:r,y:o};const s=t.is0();null==e&&(e=s?n.ONE:n.inv(i));const a=n.mul(r,e),u=n.mul(o,e),c=n.mul(i,e);if(s)return{x:n.ZERO,y:n.ZERO};if(!n.eql(c,n.ONE))throw new Error("invZ was invalid");return{x:a,y:u}})),l=Sa((t=>{if(t.is0()){if(e.allowInfinityPoint&&!n.is0(t.py))return;throw new Error("bad point: ZERO")}const{x:r,y:o}=t.toAffine();if(!n.isValid(r)||!n.isValid(o))throw new Error("bad point: x or y not FE");const i=n.sqr(o),a=s(r);if(!n.eql(i,a))throw new Error("bad point: equation left != right");if(!t.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0}));class h{constructor(t,e,r){if(this.px=t,this.py=e,this.pz=r,null==t||!n.isValid(t))throw new Error("x required");if(null==e||!n.isValid(e))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required");Object.freeze(this)}static fromAffine(t){const{x:e,y:r}=t||{};if(!t||!n.isValid(e)||!n.isValid(r))throw new Error("invalid affine point");if(t instanceof h)throw new Error("projective point not allowed");const o=t=>n.eql(t,n.ZERO);return o(e)&&o(r)?h.ZERO:new h(e,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(t){const e=n.invertBatch(t.map((t=>t.pz)));return t.map(((t,n)=>t.toAffine(e[n]))).map(h.fromAffine)}static fromHex(t){const e=h.fromAffine(i(ya("pointHex",t)));return e.assertValidity(),e}static fromPrivateKey(t){return h.BASE.multiply(a(t))}static msm(t,e){return Ya(h,r,t,e)}_setWindowSize(t){g.setWindowSize(this,t)}assertValidity(){l(this)}hasEvenY(){const{y:t}=this.toAffine();if(n.isOdd)return!n.isOdd(t);throw new Error("Field doesn't support isOdd")}equals(t){u(t);const{px:e,py:r,pz:o}=this,{px:i,py:s,pz:a}=t,c=n.eql(n.mul(e,a),n.mul(i,o)),l=n.eql(n.mul(r,a),n.mul(s,o));return c&&l}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:t,b:r}=e,o=n.mul(r,of),{px:i,py:s,pz:a}=this;let u=n.ZERO,c=n.ZERO,l=n.ZERO,f=n.mul(i,i),d=n.mul(s,s),g=n.mul(a,a),p=n.mul(i,s);return p=n.add(p,p),l=n.mul(i,a),l=n.add(l,l),u=n.mul(t,l),c=n.mul(o,g),c=n.add(u,c),u=n.sub(d,c),c=n.add(d,c),c=n.mul(u,c),u=n.mul(p,u),l=n.mul(o,l),g=n.mul(t,g),p=n.sub(f,g),p=n.mul(t,p),p=n.add(p,l),l=n.add(f,f),f=n.add(l,f),f=n.add(f,g),f=n.mul(f,p),c=n.add(c,f),g=n.mul(s,a),g=n.add(g,g),f=n.mul(g,p),u=n.sub(u,f),l=n.mul(g,d),l=n.add(l,l),l=n.add(l,l),new h(u,c,l)}add(t){u(t);const{px:r,py:o,pz:i}=this,{px:s,py:a,pz:c}=t;let l=n.ZERO,f=n.ZERO,d=n.ZERO;const g=e.a,p=n.mul(e.b,of);let y=n.mul(r,s),w=n.mul(o,a),m=n.mul(i,c),v=n.add(r,o),b=n.add(s,a);v=n.mul(v,b),b=n.add(y,w),v=n.sub(v,b),b=n.add(r,i);let A=n.add(s,c);return b=n.mul(b,A),A=n.add(y,m),b=n.sub(b,A),A=n.add(o,i),l=n.add(a,c),A=n.mul(A,l),l=n.add(w,m),A=n.sub(A,l),d=n.mul(g,b),l=n.mul(p,m),d=n.add(l,d),l=n.sub(w,d),d=n.add(w,d),f=n.mul(l,d),w=n.add(y,y),w=n.add(w,y),m=n.mul(g,m),b=n.mul(p,b),w=n.add(w,m),m=n.sub(y,m),m=n.mul(g,m),b=n.add(b,m),y=n.mul(w,b),f=n.add(f,y),y=n.mul(A,b),l=n.mul(v,l),l=n.sub(l,y),y=n.mul(v,w),d=n.mul(A,d),d=n.add(d,y),new h(l,f,d)}subtract(t){return this.add(t.negate())}is0(){return this.equals(h.ZERO)}wNAF(t){return g.wNAFCached(this,t,h.normalizeZ)}multiplyUnsafe(t){ba("scalar",t,nf,e.n);const r=h.ZERO;if(t===nf)return r;if(t===rf)return this;const{endo:o}=e;if(!o)return g.unsafeLadder(this,t);let{k1neg:i,k1:s,k2neg:a,k2:u}=o.splitScalar(t),c=r,l=r,f=this;for(;s>nf||u>nf;)s&rf&&(c=c.add(f)),u&rf&&(l=l.add(f)),f=f.double(),s>>=rf,u>>=rf;return i&&(c=c.negate()),a&&(l=l.negate()),l=new h(n.mul(l.px,o.beta),l.py,l.pz),c.add(l)}multiply(t){const{endo:r,n:o}=e;let i,s;if(ba("scalar",t,rf,o),r){const{k1neg:e,k1:o,k2neg:a,k2:u}=r.splitScalar(t);let{p:c,f:l}=this.wNAF(o),{p:f,f:d}=this.wNAF(u);c=g.constTimeNegate(e,c),f=g.constTimeNegate(a,f),f=new h(n.mul(f.px,r.beta),f.py,f.pz),i=c.add(f),s=l.add(d)}else{const{p:e,f:n}=this.wNAF(t);i=e,s=n}return h.normalizeZ([i,s])[0]}multiplyAndAddUnsafe(t,e,n){const r=h.BASE,o=(t,e)=>e!==nf&&e!==rf&&t.equals(r)?t.multiply(e):t.multiplyUnsafe(e),i=o(this,e).add(o(t,n));return i.is0()?void 0:i}toAffine(t){return c(this,t)}isTorsionFree(){const{h:t,isTorsionFree:n}=e;if(t===rf)return!0;if(n)return n(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:t,clearCofactor:n}=e;return t===rf?this:n?n(h,this):this.multiplyUnsafe(e.h)}toRawBytes(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return oa("isCompressed",t),this.assertValidity(),o(h,this,t)}toHex(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return oa("isCompressed",t),sa(this.toRawBytes(t))}}h.BASE=new h(e.Gx,e.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,g=Ja(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:a,weierstrassEquation:s,isWithinCurveOrder:function(t){return va(t,rf,e.n)}}}function af(t){const e=function(t){const e=Xa(t);return xa(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze((0,d.A)({lowS:!0},e))}(t),{Fp:n,n:r}=e,o=n.BYTES+1,i=2*n.BYTES+1;function s(t){return Ra(t,r)}function a(t){return ja(t,r)}const{ProjectivePoint:u,normPrivateKeyToScalar:c,weierstrassEquation:l,isWithinCurveOrder:h}=sf((0,d.A)((0,d.A)({},e),{},{toBytes(t,e,r){const o=e.toAffine(),i=n.toBytes(o.x),s=wa;return oa("isCompressed",r),r?s(Uint8Array.from([e.hasEvenY()?2:3]),i):s(Uint8Array.from([4]),i,n.toBytes(o.y))},fromBytes(t){const e=t.length,r=t[0],s=t.subarray(1);if(e!==o||2!==r&&3!==r){if(e===i&&4===r){return{x:n.fromBytes(s.subarray(0,n.BYTES)),y:n.fromBytes(s.subarray(n.BYTES,2*n.BYTES))}}throw new Error("Point of length ".concat(e," was invalid. Expected ").concat(o," compressed bytes or ").concat(i," uncompressed bytes"))}{const t=fa(s);if(!va(t,rf,n.ORDER))throw new Error("Point is not on curve");const e=l(t);let o;try{o=n.sqrt(e)}catch(a){const t=a instanceof Error?": "+a.message:"";throw new Error("Point is not on curve"+t)}return 1===(1&r)!==((o&rf)===rf)&&(o=n.neg(o)),{x:t,y:o}}}})),f=t=>sa(ga(t,e.nByteLength));function g(t){return t>r>>rf}const p=(t,e,n)=>fa(t.slice(e,n));class y{constructor(t,e,n){this.r=t,this.s=e,this.recovery=n,this.assertValidity()}static fromCompact(t){const n=e.nByteLength;return t=ya("compactSignature",t,2*n),new y(p(t,0,n),p(t,n,2*n))}static fromDER(t){const{r:e,s:n}=ef.toSig(ya("DER",t));return new y(e,n)}assertValidity(){ba("r",this.r,rf,r),ba("s",this.s,rf,r)}addRecoveryBit(t){return new y(this.r,this.s,t)}recoverPublicKey(t){const{r:r,s:o,recovery:i}=this,c=b(ya("msgHash",t));if(null==i||![0,1,2,3].includes(i))throw new Error("recovery id invalid");const l=2===i||3===i?r+e.n:r;if(l>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const h=0===(1&i)?"02":"03",d=u.fromHex(h+f(l)),g=a(l),p=s(-c*g),y=s(o*g),w=u.BASE.multiplyAndAddUnsafe(d,p,y);if(!w)throw new Error("point at infinify");return w.assertValidity(),w}hasHighS(){return g(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return ha(this.toDERHex())}toDERHex(){return ef.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return ha(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const w={isValidPrivateKey(t){try{return c(t),!0}catch(e){return!1}},normPrivateKeyToScalar:c,randomPrivateKey:()=>{const t=$a(e.n);return function(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=t.length,o=Ga(e),i=$a(e);if(r<16||r<i||r>1024)throw new Error("expected ".concat(i,"-1024 bytes of input, got ").concat(r));const s=Ra(n?fa(t):da(t),e-Ia)+Ia;return n?pa(s,o):ga(s,o)}(e.randomBytes(t),e.n)},precompute(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.BASE;return e._setWindowSize(t),e.multiply(BigInt(3)),e}};function m(t){const e=na(t),n="string"===typeof t,r=(e||n)&&t.length;return e?r===o||r===i:n?r===2*o||r===2*i:t instanceof u}const v=e.bits2int||function(t){const n=fa(t),r=8*t.length-e.nBitLength;return r>0?n>>BigInt(r):n},b=e.bits2int_modN||function(t){return s(v(t))},A=Ea(e.nBitLength);function E(t){return ba("num < 2^".concat(e.nBitLength),t,nf,A),ga(t,e.nByteLength)}function D(t,r){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:B;if(["recovered","canonical"].some((t=>t in o)))throw new Error("sign() legacy options not supported");const{hash:i,randomBytes:l}=e;let{lowS:f,prehash:d,extraEntropy:p}=o;null==f&&(f=!0),t=ya("msgHash",t),Xh(o),d&&(t=ya("prehashed msgHash",i(t)));const w=b(t),m=c(r),A=[E(m),E(w)];if(null!=p&&!1!==p){const t=!0===p?l(n.BYTES):p;A.push(ya("extraEntropy",t))}const D=wa(...A),k=w;return{seed:D,k2sig:function(t){const e=v(t);if(!h(e))return;const n=a(e),r=u.BASE.multiply(e).toAffine(),o=s(r.x);if(o===nf)return;const i=s(n*s(k+o*m));if(i===nf)return;let c=(r.x===o?0:2)|Number(r.y&rf),l=i;return f&&g(i)&&(l=function(t){return g(t)?s(-t):t}(i),c^=1),new y(o,l,c)}}}const B={lowS:e.lowS,prehash:!1},k={lowS:e.lowS,prehash:!1};return u.BASE._setWindowSize(8),{CURVE:e,getPublicKey:function(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return u.fromPrivateKey(t).toRawBytes(e)},getSharedSecret:function(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(m(t))throw new Error("first arg must be private key");if(!m(e))throw new Error("second arg must be public key");return u.fromHex(e).multiply(c(t)).toRawBytes(n)},sign:function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:B;const{seed:o,k2sig:i}=D(t,n,r),s=e;return ka(s.hash.outputLen,s.nByteLength,s.hmac)(o,i)},verify:function(t,n,r){var o;let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:k;const c=t;if(n=ya("msgHash",n),r=ya("publicKey",r),"strict"in i)throw new Error("options.strict was renamed to lowS");Xh(i);const{lowS:l,prehash:h}=i;let f,d;try{if("string"===typeof c||na(c))try{f=y.fromDER(c)}catch(D){if(!(D instanceof ef.Err))throw D;f=y.fromCompact(c)}else{if("object"!==typeof c||"bigint"!==typeof c.r||"bigint"!==typeof c.s)throw new Error("PARSE");{const{r:t,s:e}=c;f=new y(t,e)}}d=u.fromHex(r)}catch(B){if("PARSE"===B.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(l&&f.hasHighS())return!1;h&&(n=e.hash(n));const{r:g,s:p}=f,w=b(n),m=a(p),v=s(w*m),A=s(g*m),E=null===(o=u.BASE.multiplyAndAddUnsafe(d,v,A))||void 0===o?void 0:o.toAffine();return!!E&&s(E.x)===g},ProjectivePoint:u,Signature:y,utils:w}}function uf(t){return{hash:t,hmac:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return Yh(t,e,function(){let t=0;for(let n=0;n<arguments.length;n++){const e=n<0||arguments.length<=n?void 0:arguments[n];Fs(e),t+=e.length}const e=new Uint8Array(t);for(let n=0,r=0;n<arguments.length;n++){const t=n<0||arguments.length<=n?void 0:arguments[n];e.set(t,r),r+=t.length}return e}(...r))},randomBytes:js}}const cf=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),lf=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),hf=BigInt(1),ff=BigInt(2),df=(t,e)=>(t+e/ff)/e;function gf(t){const e=cf,n=BigInt(3),r=BigInt(6),o=BigInt(11),i=BigInt(22),s=BigInt(23),a=BigInt(44),u=BigInt(88),c=t*t*t%e,l=c*c*t%e,h=Pa(l,n,e)*l%e,f=Pa(h,n,e)*l%e,d=Pa(f,ff,e)*c%e,g=Pa(d,o,e)*d%e,p=Pa(g,i,e)*g%e,y=Pa(p,a,e)*p%e,w=Pa(y,u,e)*y%e,m=Pa(w,a,e)*p%e,v=Pa(m,n,e)*l%e,b=Pa(v,s,e)*g%e,A=Pa(b,r,e)*c%e,E=Pa(A,ff,e);if(!pf.eql(pf.sqr(E),t))throw new Error("Cannot find square root");return E}const pf=za(cf,void 0,void 0,{sqrt:gf}),yf=function(t,e){const n=e=>af((0,d.A)((0,d.A)({},t),uf(e)));return Object.freeze((0,d.A)((0,d.A)({},n(e)),{},{create:n}))}({a:BigInt(0),b:BigInt(7),Fp:pf,n:lf,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=lf,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-hf*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,s=BigInt("0x100000000000000000000000000000000"),a=df(i*t,e),u=df(-r*t,e);let c=Ra(t-a*n-u*o,e),l=Ra(-a*r-u*i,e);const h=c>s,f=l>s;if(h&&(c=e-c),f&&(l=e-l),c>s||l>s)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:h,k1:c,k2neg:f,k2:l}}}},dc);BigInt(0);yf.ProjectivePoint;var wf=n(51517);class mf{constructor(t){(0,f.A)(this,"type","secp256k1"),(0,f.A)(this,"raw",void 0),(0,f.A)(this,"_key",void 0),this._key=function(t){try{return yf.ProjectivePoint.fromHex(t),t}catch(e){throw new Ui(String(e))}}(t),this.raw=function(t){const e=yf.ProjectivePoint.fromHex(t).toRawBytes(!0);return e}(this._key)}toMultihash(){return ti.identity.digest(Af(this))}toCID(){return Pt.TO.createV1(114,this.toMultihash())}toString(){return ks.base58btc.encode(this.toMultihash().bytes).substring(1)}equals(t){return null!=t&&t.raw instanceof Uint8Array&&xs(this.raw,t.raw)}verify(t,e){return function(t,e,n){const r=wf.sha256.digest(n instanceof Uint8Array?n:n.subarray());if(null!=(o=r)&&"function"===typeof o.then&&"function"===typeof o.catch&&"function"===typeof o.finally)return r.then((n=>{let{digest:r}=n;return yf.verify(e,r,t)})).catch((t=>{throw new Hh(String(t))}));var o;try{return yf.verify(e,r.digest,t)}catch(i){throw new Hh(String(i))}}(this._key,e,t)}}function vf(t){return new mf(t)}function bf(t){const{Type:e,Data:n}=ic.decode(t),r=null!==n&&void 0!==n?n:new Uint8Array;switch(e){case rc.RSA:return Wh(r);case rc.Ed25519:return mu(r);case rc.secp256k1:return vf(r);default:throw new os}}function Af(t){return ic.encode({Type:rc[t.type],Data:t.raw})}function Ef(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const Df=Ef("utf8","u",(t=>"u"+new TextDecoder("utf8").decode(t)),(t=>(new TextEncoder).encode(t.substring(1)))),Bf=Ef("ascii","a",(t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e}),(t=>{const e=function(t=0){return new Uint8Array(t)}((t=t.substring(1)).length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e})),kf={utf8:Df,"utf-8":Df,hex:Qo.Fo.base16,latin1:Bf,ascii:Bf,binary:Bf,...Qo.Fo};function Cf(t,e="utf8"){const n=kf[e];if(null==n)throw new Error(`Unsupported encoding "${e}"`);return n.encoder.encode(t).substring(1)}const xf=Symbol.for("@libp2p/peer-id");function Sf(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.byteLength;n++)if(t[n]!==e[n])return!1;return!0}const Ff=Symbol.for("nodejs.util.inspect.custom");class If{constructor(t){(0,f.A)(this,"type",void 0),(0,f.A)(this,"multihash",void 0),(0,f.A)(this,"publicKey",void 0),(0,f.A)(this,"string",void 0),(0,f.A)(this,xf,!0),this.type=t.type,this.multihash=t.multihash,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return"PeerId(".concat(this.toString(),")")}toString(){return null==this.string&&(this.string=ks.base58btc.encode(this.multihash.bytes).slice(1)),this.string}toMultihash(){return this.multihash}toCID(){return Pt.TO.createV1(114,this.multihash)}toJSON(){return this.toString()}equals(t){var e;if(null==t)return!1;if(t instanceof Uint8Array)return Sf(this.multihash.bytes,t);if("string"===typeof t)return this.toString()===t;if(null!=(null===t||void 0===t||null===(e=t.toMultihash())||void 0===e?void 0:e.bytes))return Sf(this.multihash.bytes,t.toMultihash().bytes);throw new Error("not valid Id")}[Ff](){return"PeerId(".concat(this.toString(),")")}}class Nf extends If{constructor(t){super((0,d.A)((0,d.A)({},t),{},{type:"RSA"})),(0,f.A)(this,"type","RSA"),(0,f.A)(this,"publicKey",void 0),this.publicKey=t.publicKey}}class Tf extends If{constructor(t){super((0,d.A)((0,d.A)({},t),{},{type:"Ed25519"})),(0,f.A)(this,"type","Ed25519"),(0,f.A)(this,"publicKey",void 0),this.publicKey=t.publicKey}}class Uf extends If{constructor(t){super((0,d.A)((0,d.A)({},t),{},{type:"secp256k1"})),(0,f.A)(this,"type","secp256k1"),(0,f.A)(this,"publicKey",void 0),this.publicKey=t.publicKey}}class Of{constructor(t){(0,f.A)(this,"type","url"),(0,f.A)(this,"multihash",void 0),(0,f.A)(this,"publicKey",void 0),(0,f.A)(this,"url",void 0),(0,f.A)(this,xf,!0),this.url=t.toString(),this.multihash=ti.identity.digest(function(t,e="utf8"){const n=kf[e];if(null==n)throw new Error(`Unsupported encoding "${e}"`);return n.decoder.decode(`${n.prefix}${t}`)}(this.url))}[Ff](){return"PeerId(".concat(this.url,")")}toString(){return this.toCID().toString()}toMultihash(){return this.multihash}toCID(){return Pt.TO.createV1(2336,this.toMultihash())}toJSON(){return this.toString()}equals(t){return null!=t&&(t instanceof Uint8Array&&(t=Cf(t)),t.toString()===this.toString())}}function Lf(t,e){let n;if("1"===t.charAt(0)||"Q"===t.charAt(0))n=Cs.D4(ks.base58btc.decode("z".concat(t)));else{if(null==e)throw new Ti('Please pass a multibase decoder for strings that do not start with "1" or "Q"');n=Cs.D4(e.decode(t))}return Rf(n)}function Rf(t){if(function(t){return t.code===wf.sha256.code}(t))return new Nf({multihash:t});if(function(t){return t.code===ti.identity.code}(t))try{const e=function(t){const{Type:e,Data:n}=ic.decode(t.digest),r=null!==n&&void 0!==n?n:new Uint8Array;switch(e){case rc.Ed25519:return mu(r);case rc.secp256k1:return vf(r);default:throw new os}}(t);if("Ed25519"===e.type)return new Tf({multihash:t,publicKey:e});if("secp256k1"===e.type)return new Uf({multihash:t,publicKey:e})}catch(e){const n=Cf(t.digest);return new Of(new URL(n))}throw new qi("Supplied PeerID Multihash is invalid")}function _f(t){return async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await t.post("bitswap/stat",{searchParams:ys(e),signal:e.signal,headers:e.headers});return function(t){var e,n;return{provideBufLen:t.ProvideBufLen,wantlist:(null!==(e=t.Wantlist)&&void 0!==e?e:[]).map((t=>Pt.TO.parse(t["/"]))),peers:(null!==(n=t.Peers)&&void 0!==n?n:[]).map((t=>Lf(t))),blocksReceived:BigInt(t.BlocksReceived),dataReceived:BigInt(t.DataReceived),blocksSent:BigInt(t.BlocksSent),dataSent:BigInt(t.DataSent),dupBlksReceived:BigInt(t.DupBlksReceived),dupDataReceived:BigInt(t.DupDataReceived)}}(await n.json())}}function Pf(t){return async function(e){var n;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(null!==(n=(await(await t.post("bitswap/wantlist",{signal:r.signal,searchParams:ys((0,d.A)((0,d.A)({},r),{},{peer:e.toString()})),headers:r.headers})).json()).Keys)&&void 0!==n?n:[]).map((t=>Pt.TO.parse(t["/"])))}}function jf(t){return async function(){var e;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(null!==(e=(await(await t.post("bitswap/wantlist",{signal:n.signal,searchParams:ys(n),headers:n.headers})).json()).Keys)&&void 0!==e?e:[]).map((t=>Pt.TO.parse(t["/"])))}}function Hf(t){return async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await t.post("block/get",{signal:n.signal,searchParams:ys((0,d.A)({arg:e.toString()},n)),headers:n.headers});return new Uint8Array(await r.arrayBuffer())}}function Vf(t){return async function e(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=new AbortController,i=ri([o.signal,r.signal]);let s;try{const e=await t.post("block/put",(0,d.A)({signal:i,searchParams:ys(r)},await fs([n],o,r.headers)));s=await e.json()}catch(a){if("dag-pb"===r.format)return await e(n,(0,d.A)((0,d.A)({},r),{},{format:"protobuf"}));if("dag-cbor"===r.format)return await e(n,(0,d.A)((0,d.A)({},r),{},{format:"cbor"}));throw a}finally{i.clear()}return Pt.TO.parse(s.Key)}}function Mf(t){return function(){var e=c((function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){Array.isArray(e)||(e=[e]);const r=yield ei(t.post("block/rm",{signal:n.signal,searchParams:ys((0,d.A)({arg:e.map((t=>t.toString())),"stream-channels":!0},n)),headers:n.headers}));var o,i=!1,s=!1;try{for(var a,u=(0,ni.A)(r.ndjson());i=!(a=yield ei(u.next())).done;i=!1){const t=a.value;yield zf(t)}}catch(c){s=!0,o=c}finally{try{i&&null!=u.return&&(yield ei(u.return()))}finally{if(s)throw o}}}()}));return function(t){return e.apply(this,arguments)}}()}function zf(t){const e={cid:Pt.TO.parse(t.Hash)};return null!=t.Error&&(e.error=new Error(t.Error)),e}function Gf(t){return async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await t.post("block/stat",{signal:n.signal,searchParams:ys((0,d.A)({arg:e.toString()},n)),headers:n.headers}),o=await r.json();return{cid:Pt.TO.parse(o.Key),size:o.Size}}}function $f(t){return async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await t.post("bootstrap/add",{signal:n.signal,searchParams:ys((0,d.A)({arg:e},n)),headers:n.headers}),{Peers:o}=await r.json();return{Peers:o.map((t=>(0,h.HZ)(t)))}}}function qf(t){return async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await t.post("bootstrap/list",{signal:e.signal,searchParams:ys(e),headers:e.headers}),{Peers:r}=await n.json();return{Peers:r.map((t=>(0,h.HZ)(t)))}}}function Kf(t){return async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await t.post("bootstrap/rm",{signal:n.signal,searchParams:ys((0,d.A)({arg:e},n)),headers:n.headers}),{Peers:o}=await r.json();return{Peers:o.map((t=>(0,h.HZ)(t)))}}}function Zf(t){return async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await t.post("config/show",{signal:e.signal,searchParams:ys((0,d.A)({},e)),headers:e.headers});return await n.json()}}function Wf(t){return async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e)throw new Error("key argument is required");const r=await t.post("config",{signal:n.signal,searchParams:ys((0,d.A)({arg:e},n)),headers:n.headers});return(await r.json()).Value}}function Jf(t){return async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await t.post("config/profile/apply",{signal:n.signal,searchParams:ys((0,d.A)({arg:e},n)),headers:n.headers}),o=await r.json();return{original:o.OldCfg,updated:o.NewCfg}}}function Yf(t){return{apply:Jf(t)}}function Xf(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const Qf=Xf("utf8","u",(t=>"u"+new TextDecoder("utf8").decode(t)),(t=>(new TextEncoder).encode(t.substring(1)))),td=Xf("ascii","a",(t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e}),(t=>{const e=function(t=0){return new Uint8Array(t)}((t=t.substring(1)).length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e})),ed={utf8:Qf,"utf-8":Qf,hex:Qo.Fo.base16,latin1:td,ascii:td,binary:td,...Qo.Fo};function nd(t,e="utf8"){const n=ed[e];if(null==n)throw new Error(`Unsupported encoding "${e}"`);return n.decoder.decode(`${n.prefix}${t}`)}function rd(t){return async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=new AbortController,o=ri([r.signal,n.signal]);try{const i=await t.post("config/replace",(0,d.A)({signal:o,searchParams:ys(n)},await fs([nd(JSON.stringify(e))],r,n.headers)));await i.text()}finally{o.clear()}}}function od(t){return async function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"!==typeof e)throw new Error("Invalid key type");const o=(0,d.A)((0,d.A)({},r),function(t,e){switch(typeof e){case"boolean":return{arg:[t,e.toString()],bool:!0};case"string":return{arg:[t,e]};default:return{arg:[t,JSON.stringify(e)],json:!0}}}(e,n)),i=await t.post("config",{signal:r.signal,searchParams:ys(o),headers:r.headers});await i.text()}}function id(t){return function(){var e=c((function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){const r=yield ei(t.post("dag/export",{signal:n.signal,searchParams:ys({arg:e.toString()}),headers:n.headers}));yield*fi((0,ni.A)(r.iterator()))}()}));return function(t){return e.apply(this,arguments)}}()}const sd=function(t){if(null!=t[Symbol.asyncIterator])return(async()=>{var e,n=!1,r=!1;try{for(var o,i=(0,ni.A)(t);n=!(o=await i.next()).done;n=!1){return o.value}}catch(s){r=!0,e=s}finally{try{n&&null!=i.return&&await i.return()}finally{if(r)throw e}}})();for(const e of t)return e};function ad(t,e,n,r,o){return ud.apply(this,arguments)}function ud(){return ud=c((function*(t,e,n,r,o){const i=async t=>{const e=await n.getCodec(t.code),i=await r(t,o);return e.decode(i)},s=e.split("/").filter(Boolean);let a=yield ei(i(t)),u=t;for(;s.length>0;){const t=s.shift();if(null==t)throw yi()(new Error('Could not resolve path "'.concat(e,'"')),"ERR_INVALID_PATH");if(!Object.prototype.hasOwnProperty.call(a,t))throw yi()(new Error('no link named "'.concat(t,'" under ').concat(u)),"ERR_NO_LINK");a=a[t],yield{value:a,remainderPath:s.join("/")};const n=Pt.TO.asCID(a);null!=n&&(u=n,a=yield ei(i(a)))}yield{value:a,remainderPath:""}})),ud.apply(this,arguments)}function cd(t,e){const n=Hf(t);return async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null!=r.path){const o=!0===r.localResolve?await sd(ad(t,r.path,e,n,r)):await As(ad(t,r.path,e,n,r));if(null==o)throw yi()(new Error("Not found"),"ERR_NOT_FOUND");return o}const o=await e.getCodec(t.code),i=await n(t,r);return{value:o.decode(i),remainderPath:""}}}function ld(t){return function(){var e=c((function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){const r=new AbortController,o=ri([r.signal,n.signal]);try{const{headers:h,body:f}=yield ei(fs(e,r,n.headers)),d=yield ei(t.post("dag/import",{signal:o,headers:h,body:f,searchParams:ys({"pin-roots":n.pinRoots})}));var i,s=!1,a=!1;try{for(var u,c=(0,ni.A)(d.ndjson());s=!(u=yield ei(c.next())).done;s=!1){const{Root:t}=u.value;if(void 0!==t){const{Cid:{"/":e},PinErrorMsg:n}=t;yield{root:{cid:Pt.TO.parse(e),pinErrorMsg:n}}}}}catch(l){a=!0,i=l}finally{try{s&&null!=c.return&&(yield ei(c.return()))}finally{if(a)throw i}}}finally{o.clear()}}()}));return function(t){return e.apply(this,arguments)}}()}function hd(t,e){return async function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=(0,d.A)({storeCodec:"dag-cbor",hashAlg:"sha2-256"},r);let i;if(null!=o.inputCodec){if(!(n instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");i=n}else{var s;i=(await e.getCodec(null!==(s=o.storeCodec)&&void 0!==s?s:"dag-cbor")).encode(n),o.inputCodec=o.storeCodec}const a=new AbortController,u=ri([a.signal,o.signal]);try{const e=await t.post("dag/put",(0,d.A)({timeout:o.timeout,signal:u,searchParams:ys(o)},await fs([i],a,o.headers))),n=await e.json();return Pt.TO.parse(n.Cid["/"])}finally{u.clear()}}}function fd(t){return async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await t.post("dag/resolve",{signal:n.signal,searchParams:ys((0,d.A)({arg:"".concat(e).concat(null!=n.path?"/".concat(n.path).replace(/\/[/]+/g,"/"):"")},n)),headers:n.headers}),o=await r.json();return{cid:Pt.TO.parse(o.Cid["/"]),remainderPath:o.RemPath}}}function dd(t){if(0===t.Type)return{name:"SENDING_QUERY",type:t.Type};var e,n;if(1===t.Type)return{from:Lf(t.ID),name:"PEER_RESPONSE",type:t.Type,messageType:0,messageName:"PUT_VALUE",closer:(null!==(e=t.Responses)&&void 0!==e?e:[]).map((t=>{let{ID:e,Addrs:n}=t;return{id:Lf(e),multiaddrs:n.map((t=>(0,h.HZ)(t))),protocols:[]}})),providers:(null!==(n=t.Responses)&&void 0!==n?n:[]).map((t=>{let{ID:e,Addrs:n}=t;return{id:Lf(e),multiaddrs:n.map((t=>(0,h.HZ)(t))),protocols:[]}}))};if(2===t.Type){var r,o;let e={id:null!==(r=t.ID)&&void 0!==r?r:Lf(t.ID),multiaddrs:[],protocols:[]};return(null===(o=t.Responses)||void 0===o?void 0:o.length)>0&&(e={id:Lf(t.Responses[0].ID),multiaddrs:t.Responses[0].Addrs.map((t=>(0,h.HZ)(t))),protocols:[]}),{name:"FINAL_PEER",type:t.Type,peer:e}}if(3===t.Type)return{name:"QUERY_ERROR",type:t.Type,error:new Error(t.Extra)};if(4===t.Type)return{name:"PROVIDER",type:t.Type,providers:t.Responses.map((t=>{let{ID:e,Addrs:n}=t;return{id:Lf(e),multiaddrs:n.map((t=>(0,h.HZ)(t))),protocols:[]}}))};if(5===t.Type)return{name:"VALUE",type:t.Type,value:nd(t.Extra,"base64pad")};if(6===t.Type){const e=t.Responses.map((t=>{let{ID:e}=t;return Lf(e)}));if(0===e.length)throw new Error("No peer found");return{name:"ADDING_PEER",type:t.Type,peer:e[0]}}if(7===t.Type)return{name:"DIALING_PEER",type:t.Type,peer:Lf(t.ID)};throw new Error("Unknown DHT event type")}function gd(t){return function(){var e=c((function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){const r=yield ei(t.post("dht/query",{signal:n.signal,searchParams:ys((0,d.A)({arg:e.toString()},n)),headers:n.headers}));var o,i=!1,s=!1;try{for(var a,u=(0,ni.A)(r.ndjson());i=!(a=yield ei(u.next())).done;i=!1){const t=a.value;yield dd(t)}}catch(c){s=!0,o=c}finally{try{i&&null!=u.return&&(yield ei(u.return()))}finally{if(s)throw o}}}()}));return function(t){return e.apply(this,arguments)}}()}var pd,yd;function wd(t){return async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await t.post("diag/cmds",{signal:e.signal,searchParams:ys(e),headers:e.headers})).json()}}function md(t){return async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await t.post("diag/net",{signal:e.signal,searchParams:ys(e),headers:e.headers})).json()}}function vd(t){return async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await t.post("diag/sys",{signal:e.signal,searchParams:ys(e),headers:e.headers})).json()}}function bd(t){return async function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=Array.isArray(e)?e:[e],i=await t.post("files/cp",{signal:r.signal,searchParams:ys((0,d.A)({arg:o.concat(n).map((t=>null!=Pt.TO.asCID(t)?"/ipfs/".concat(t):t))},r)),headers:r.headers});await i.text()}}function Ad(t){return async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"!==typeof e)throw new Error("ipfs.files.flush requires a path");const r=await t.post("files/flush",{signal:n.signal,searchParams:ys((0,d.A)({arg:e},n)),headers:n.headers}),o=await r.json();return Pt.TO.parse(o.Cid)}}function Ed(t){const e=ds(t);var n;(Object.prototype.hasOwnProperty.call(e,"mode")&&(e.mode=parseInt(e.mode,8)),Object.prototype.hasOwnProperty.call(e,"mtime"))&&(e.mtime={secs:e.mtime,nsecs:null!==(n=e.mtimeNsecs)&&void 0!==n?n:0},delete e.mtimeNsecs);return e}function Dd(t){return function(){var e=c((function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){if(null==e)throw new Error("ipfs.files.ls requires a path");const r=yield ei(t.post("files/ls",{signal:n.signal,searchParams:ys((0,d.A)((0,d.A)({arg:null!=Pt.TO.asCID(e)?"/ipfs/".concat(e):e,long:!0},n),{},{stream:!0})),headers:n.headers}));var o,i=!1,s=!1;try{for(var a,u=(0,ni.A)(r.ndjson());i=!(a=yield ei(u.next())).done;i=!1){const t=a.value;if("Entries"in t)for(const e of null!==(c=t.Entries)&&void 0!==c?c:[]){var c;yield Bd(Ed(e))}else yield Bd(Ed(t))}}catch(l){s=!0,o=l}finally{try{i&&null!=u.return&&(yield ei(u.return()))}finally{if(s)throw o}}}()}));return function(t){return e.apply(this,arguments)}}()}function Bd(t){return null!=t.hash&&(t.cid=Pt.TO.parse(t.hash)),delete t.hash,t.type=1===t.type?"directory":"file",t}function kd(t){return async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await t.post("files/mkdir",{signal:n.signal,searchParams:ys((0,d.A)({arg:e},n)),headers:n.headers});await r.text()}}function Cd(t){return async function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Array.isArray(e)||(e=[e]);const o=await t.post("files/mv",{signal:r.signal,searchParams:ys((0,d.A)({arg:e.concat(n)},r)),headers:r.headers});await o.text()}}function xd(t){if("function"===typeof(null===(e=t)||void 0===e?void 0:e.getReader))return c((function*(){const e=t.getReader();try{for(;;){const{done:t,value:n}=yield ei(e.read());if(t)return;yield n}}finally{e.releaseLock()}}))();var e;if(function(t){return null!=t[Symbol.asyncIterator]}(t))return t;throw new Error("unknown stream")}function Sd(t){return function(){var e=c((function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){const r=yield ei(t.post("files/read",{signal:n.signal,searchParams:ys((0,d.A)({arg:e,count:n.length},n)),headers:n.headers}));if(null==r.body)throw new Error("Invalid response body");yield*fi((0,ni.A)(xd(r.body)))}()}));return function(t){return e.apply(this,arguments)}}()}function Fd(t){return async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await t.post("files/rm",{signal:n.signal,searchParams:ys((0,d.A)({arg:e},n)),headers:n.headers}),o=await r.text();if(""!==o){const t=new vi(r);throw t.message=o,t}}}function Id(t){return async function(e){var n;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=await t.post("files/stat",{signal:r.signal,searchParams:ys((0,d.A)({arg:e},r)),headers:r.headers}),i=await o.json();return i.WithLocality=null!==(n=i.WithLocality)&&void 0!==n&&n,(s=Ed(i)).cid=Pt.TO.parse(s.hash),delete s.hash,s;var s}}function Nd(t){return async function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=new AbortController,i=ri([o.signal,r.signal]);try{const s=await t.post("files/write",(0,d.A)({signal:i,searchParams:ys((0,d.A)({arg:e,streamChannels:!0,count:r.length},r))},await fs([{content:n,path:"arg",mode:ls(r.mode),mtime:Ci(r.mtime)}],o,r.headers)));await s.text()}finally{i.clear()}}}function Td(t){return async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=await t.post("id",{signal:e.signal,searchParams:ys((0,d.A)({arg:null!=e.peerId?e.peerId.toString():void 0},e)),headers:e.headers}),r=await n.json(),o=(0,d.A)({},ds(r));return o.id=Lf(o.id),null!=o.addresses&&(o.addresses=o.addresses.map((t=>(0,h.HZ)(t)))),o}}!function(t){t[t.SENDING_QUERY=0]="SENDING_QUERY",t[t.PEER_RESPONSE=1]="PEER_RESPONSE",t[t.FINAL_PEER=2]="FINAL_PEER",t[t.QUERY_ERROR=3]="QUERY_ERROR",t[t.PROVIDER=4]="PROVIDER",t[t.VALUE=5]="VALUE",t[t.ADDING_PEER=6]="ADDING_PEER",t[t.DIALING_PEER=7]="DIALING_PEER"}(pd||(pd={})),function(t){t[t.PUT_VALUE=0]="PUT_VALUE",t[t.GET_VALUE=1]="GET_VALUE",t[t.ADD_PROVIDER=2]="ADD_PROVIDER",t[t.GET_PROVIDERS=3]="GET_PROVIDERS",t[t.FIND_NODE=4]="FIND_NODE",t[t.PING=5]="PING"}(yd||(yd={}));const Ud={type:"ed25519"};function Od(t){return async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ud;const r=await t.post("key/gen",{signal:n.signal,searchParams:ys((0,d.A)({arg:e},n)),headers:n.headers});return ds(await r.json())}}function Ld(t){return async function(e,n,r){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=await t.post("key/import",{signal:o.signal,searchParams:ys((0,d.A)({arg:e,pem:n,password:r},o)),headers:o.headers});return ds(await i.json())}}function Rd(t){return async function(){var e;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=await t.post("key/list",{signal:n.signal,searchParams:ys(n),headers:n.headers});return(null!==(e=(await r.json()).Keys)&&void 0!==e?e:[]).map((t=>ds(t)))}}function _d(t){return async function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=await t.post("key/rename",{signal:r.signal,searchParams:ys((0,d.A)({arg:[e,n]},r)),headers:r.headers});return ds(await o.json())}}function Pd(t){return async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await t.post("key/rm",{signal:n.signal,searchParams:ys((0,d.A)({arg:e},n)),headers:n.headers});return ds((await r.json()).Keys[0])}}var jd=n(51610);const Hd=1e3,Vd=60*Hd,Md=60*Vd,zd=24*Md,Gd=7*zd,$d=365.25*zd;const qd=function(t,e){try{if("string"===typeof t&&t.length>0)return function(t){if((t=String(t)).length>100)throw new Error("Value exceeds the maximum length of 100 characters.");const e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return NaN;const n=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*$d;case"weeks":case"week":case"w":return n*Gd;case"days":case"day":case"d":return n*zd;case"hours":case"hour":case"hrs":case"hr":case"h":return n*Md;case"minutes":case"minute":case"mins":case"min":case"m":return n*Vd;case"seconds":case"second":case"secs":case"sec":case"s":return n*Hd;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:throw new Error("The unit ".concat(r," was matched, but no matching case exists."))}}(t);if("number"===typeof t&&isFinite(t))return null!==e&&void 0!==e&&e.long?function(t){const e=Math.abs(t);if(e>=zd)return Kd(t,e,zd,"day");if(e>=Md)return Kd(t,e,Md,"hour");if(e>=Vd)return Kd(t,e,Vd,"minute");if(e>=Hd)return Kd(t,e,Hd,"second");return"".concat(t," ms")}(t):function(t){const e=Math.abs(t);if(e>=zd)return"".concat(Math.round(t/zd),"d");if(e>=Md)return"".concat(Math.round(t/Md),"h");if(e>=Vd)return"".concat(Math.round(t/Vd),"m");if(e>=Hd)return"".concat(Math.round(t/Hd),"s");return"".concat(t,"ms")}(t);throw new Error("Value is not a string or number.")}catch(n){const e=function(t){return"object"===typeof t&&null!==t&&"message"in t}(n)?"".concat(n.message,". value=").concat(JSON.stringify(t)):"An unknown error has occured.";throw new Error(e)}};function Kd(t,e,n,r){const o=e>=1.5*n;return"".concat(Math.round(t/n)," ").concat(r).concat(o?"s":"")}var Zd,Wd;const Jd=function(){try{return localStorage}catch(t){}}();const Yd=null!==(Zd=null!==(Wd=console.debug)&&void 0!==Wd?Wd:console.log)&&void 0!==Zd?Zd:()=>{};const Xd=function(t){function e(t){let r,o,i,s=null;function a(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];if(!a.enabled)return;const i=a,s=Number(new Date),u=s-(r||s);i.diff=u,i.prev=r,i.curr=s,r=s,n[0]=e.coerce(n[0]),"string"!==typeof n[0]&&n.unshift("%O");let c=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,((t,r)=>{if("%%"===t)return"%";c++;const o=e.formatters[r];if("function"===typeof o){const e=n[c];t=o.call(i,e),n.splice(c,1),c--}return t})),e.formatArgs.call(i,n);(i.log||e.log).apply(i,n)}return a.namespace=t,a.useColors=e.useColors(),a.color=e.selectColor(t),a.extend=n,a.destroy=e.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(o!==e.namespaces&&(o=e.namespaces,i=e.enabled(t)),i),set:t=>{s=t}}),"function"===typeof e.init&&e.init(a),a}function n(t,n){const r=e(this.namespace+("undefined"===typeof n?":":n)+t);return r.log=this.log,r}function r(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){var e;return t instanceof Error?null!==(e=t.stack)&&void 0!==e?e:t.message:t},e.disable=function(){const t=[...e.names.map(r),...e.skips.map(r).map((t=>"-"+t))].join(",");return e.enable(""),t},e.enable=function(t){let n;e.save(t),e.namespaces=t,e.names=[],e.skips=[];const r=("string"===typeof t?t:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)r[n]&&("-"===(t=r[n].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;let n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=qd,e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach((n=>{e[n]=t[n]})),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){let n=0;for(let e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return e.colors[Math.abs(n)%e.colors.length]},e.setupFormatters(e.formatters),e.enable(e.load()),e}({formatArgs:function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+qd(this.diff),!this.useColors)return;const e="color: "+this.color;t.splice(1,0,e,"color: inherit");let n=0,r=0;t[0].replace(/%[a-zA-Z%]/g,(t=>{"%%"!==t&&(n++,"%c"===t&&(r=n))})),t.splice(r,0,e)},save:function(t){try{t?null===Jd||void 0===Jd||Jd.setItem("debug",t):null===Jd||void 0===Jd||Jd.removeItem("debug")}catch(e){}},load:function(){let t;try{t=null===Jd||void 0===Jd?void 0:Jd.getItem("debug")}catch(e){}return!t&&"undefined"!==typeof globalThis.process&&"env"in globalThis.process&&(t=globalThis.process.env.DEBUG),t},useColors:function(){var t,e,n,r;return!("undefined"===typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"===typeof navigator||null==(null===(t=navigator.userAgent)||void 0===t?void 0:t.toLowerCase().match(/(edge|trident)\/(\d+)/)))&&("undefined"!==typeof document&&(null===(e=document.documentElement)||void 0===e||null===(e=e.style)||void 0===e?void 0:e.WebkitAppearance)||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&null!=(null===(n=navigator.userAgent)||void 0===n?void 0:n.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&(null===(r=navigator.userAgent)||void 0===r?void 0:r.toLowerCase().match(/applewebkit\/(\d+)/)))},setupFormatters:function(t){t.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},colors:["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],storage:Jd,log:Yd}),Qd=Xd;function tg(t){let e=function(t){const e=()=>{};return e.enabled=!1,e.color="",e.diff=0,e.log=()=>{},e.namespace=t,e.destroy=()=>!0,e.extend=()=>e,e}("".concat(t,":trace"));return Qd.enabled("".concat(t,":trace"))&&null!=Qd.names.map((t=>t.toString())).find((t=>t.includes(":trace")))&&(e=Qd("".concat(t,":trace"))),Object.assign(Qd(t),{error:Qd("".concat(t,":error")),trace:e})}function eg(t){if(null!=t&&0!==(t=t.trim()).length)return t}Qd.formatters.b=t=>null==t?"undefined":ks.base58btc.baseEncode(t),Qd.formatters.t=t=>null==t?"undefined":jd.base32.baseEncode(t),Qd.formatters.m=t=>null==t?"undefined":An.base64.baseEncode(t),Qd.formatters.p=t=>null==t?"undefined":t.toString(),Qd.formatters.c=t=>null==t?"undefined":t.toString(),Qd.formatters.k=t=>null==t?"undefined":t.toString(),Qd.formatters.a=t=>null==t?"undefined":t.toString(),Qd.formatters.e=t=>{var e,n;return null==t?"undefined":null!==(e=null!==(n=eg(t.stack))&&void 0!==n?n:eg(t.message))&&void 0!==e?e:t.toString()};var ng=n(8355);const rg=n.n(ng)(),og=Object.create(null),ig=36e5,sg=24*ig,ag=315576e5;og.year=og.yr=og.y=ag,og.month=og.mo=og.mth=ag/12,og.week=og.wk=og.w=7*sg,og.day=og.d=sg,og.hour=og.hr=og.h=ig,og.minute=og.min=og.m=6e4,og.second=og.sec=og.s=1e3,og.millisecond=og.millisec=og.ms=1,og.microsecond=og.microsec=og.us=og.\u00b5s=.001,og.nanosecond=og.nanosec=og.ns=1e-6,og.group=",",og.decimal=".",og.placeholder=" _";const ug=og,cg=/((?:[0-9]{1,16}(?:\.[0-9]{1,16})?|\.[0-9]{1,16})(?:[Ee][\+\x2D]?[0-9]{1,4})?)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]?((?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0