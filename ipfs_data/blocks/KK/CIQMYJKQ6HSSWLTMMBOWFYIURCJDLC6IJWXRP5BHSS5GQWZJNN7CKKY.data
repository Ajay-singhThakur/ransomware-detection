"use strict";(self.webpackChunkipfs_webui=self.webpackChunkipfs_webui||[]).push([[415],{22917:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(65043),l=n(13026),r=n(39412);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i.apply(null,arguments)}function o(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const s=e=>{class t extends a.Component{constructor(){super(...arguments),o(this,"handleJoyrideCallback",(e=>{const{doDisableTours:t}=this.props,{action:n,status:a}=e;"close"!==n&&a!==r.XQ.FINISHED||t()}))}render(){return a.createElement(e,i({handleJoyrideCallback:this.handleJoyrideCallback},this.props))}}return(0,l.N)("doDisableTours",t)}},35687:(e,t,n)=>{n.d(t,{A:()=>h});var a=n(65043),l=n(13026),r=n(82516),i=n(90342),o=n(30446),s=n(48900),c=n(93031),m=n(66149),d=n(32333);const u=["command","t","onLeave","className","downloadConfig"];function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},p.apply(null,arguments)}const f=e=>{let{command:t,t:n,onLeave:l,className:s,downloadConfig:f}=e,h=function(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}(e,u);return a.createElement(r.aF,p({},h,{className:s,onCancel:l,style:{maxWidth:"40em"}}),a.createElement(r.cw,{Icon:i.A},a.createElement("p",{className:"charcoal w-80 center",style:{lineHeight:"1.3"}},n("app:cliModal.description")),a.createElement("p",{className:"charcoal-muted w-90 center"},t&&t===d.Kd[d.p5.UPDATE_IPFS_CONFIG]()?n("settings:cliModal.extraNotesJsonConfig"):"",t&&t.startsWith(d.fc.PIN_OBJECT)?n("files:cliModal.extraNotesPinning"):""),a.createElement("div",null,a.createElement(c.A,{className:"tl",title:"Shell"},a.createElement("code",{className:"db"},a.createElement("b",{className:"no-select"},"$ "),t)))),a.createElement(r.NS,null,a.createElement("div",null,a.createElement(o.A,{className:"ma2 tc",bg:"bg-gray",onClick:l},n("app:actions.close"))),a.createElement("div",{className:"flex items-center"},t&&t===d.Kd[d.p5.UPDATE_IPFS_CONFIG]()?a.createElement(m.A,{onClick:f,className:"dib fill-link pointer",style:{height:38}}):a.createElement("div",null),a.createElement(o.A,{className:"ma2 tc",onClick:()=>{return e=t,void navigator.clipboard.writeText(e).then((()=>{l()}));var e}},n("app:actions.copy")))))};f.defaultProps={className:""};const h=(0,l.N)("doOpenCliTutorModal","selectIsCliTutorModalOpen","selectIsCliTutorModeEnabled",(e=>{let{t:t,filesPage:n,isCliTutorModeEnabled:l,onLeave:r,isCliTutorModalOpen:o,command:c,config:m,showIcon:d,doOpenCliTutorModal:u}=e;return l?n?a.createElement(f,{className:"outline-0",onLeave:r,t:t,command:c}):a.createElement(a.Fragment,null,d?a.createElement(i.A,{onClick:()=>u(!0),className:"dib fill-link pointer mh2",style:{height:44}}):a.createElement("div",null),a.createElement(s.A,{show:o,onLeave:()=>u(!1)},a.createElement(f,{className:"outline-0",onLeave:()=>u(!1),t:t,command:c,downloadConfig:()=>(e=>{const t=window.URL.createObjectURL(new Blob([e])),n=document.createElement("a");n.style.display="none",n.href=t,n.download="settings.json",document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(t)})(m)}))):null}))},60138:()=>{},66415:(e,t,n)=>{n.r(t),n.d(t,{default:()=>va});var a=n(65043),l=n(97950),r=n(70930),i=n(13026),o=n(16470),s=n(39412),c=n(66064),m=n(55982),d=n(61476),u=n(29491),p=n(90342);const f=["children","onClick","className","isCliTutorModeEnabled","onCliTutorMode"],h=["children","arrowMarginRight","width","translateX","translateY"];function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},b.apply(null,arguments)}function g(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}const v=e=>{let{children:t,onClick:n,className:l="",isCliTutorModeEnabled:r,onCliTutorMode:i}=e,o=g(e,f);return r?a.createElement("div",{className:"flex items-center justify-between"},a.createElement("button",b({role:"menuitem",className:"bg-animate hover-bg-near-white pa2 pointer flex items-center flex-grow-1 ".concat(l),onClick:n},o),t),a.createElement("button",b({},o,{className:"bg-animate hover-bg-near-white pa2 pointer flex items-center  ".concat(l)}),a.createElement(p.A,b({},o,{onClick:()=>i(!0),className:"dib fill-link pointer",style:{height:38}})))):a.createElement("button",b({role:"menuitem",className:"bg-animate hover-bg-near-white pa2 pointer flex items-center ".concat(l),onClick:n},o),t)},y=(0,a.forwardRef)(((e,t)=>{const{children:n,arrowMarginRight:l,width:r=200,translateX:i=0,translateY:o=0}=e,s=g(e,h);return a.createElement(u.r,b({className:"sans-serif br2 charcoal",boxShadow:"rgba(105, 196, 205, 0.5) 0px 1px 10px 0px",width:r,arrowAlign:"right",arrowMarginRight:l||"13px",left:"calc(100% - ".concat(r,"px)"),translateX:i,translateY:o},s),a.createElement("div",{className:"flex flex-column",ref:t,role:"menu"},n))})),x=u.m;var w=n(95126),E=n(22988),N=n(70154),C=n(23886),P=n(23986),O=n(17052),k=n(20535),S=n(66149),j=n(76013),A=n(22300),F=n(32333);function I(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class M extends a.Component{constructor(e){super(e),I(this,"state",{dropdown:!1}),I(this,"wrap",((e,t)=>()=>{"onCliTutorMode"===e&&t&&this.props.doSetCliOptions(t),this.props.handleClick(),this.props[e]()})),this.dropdownMenuRef=a.createRef()}componentDidUpdate(){if(this.props.autofocus&&this.props.isOpen){if(!this.dropdownMenuRef.current)return;const e=this.dropdownMenuRef.current.querySelector("button");if(!e)return;e.focus()}}render(){const{t:e,onRename:t,onRemove:n,onDownload:l,onInspect:r,onCheckRetrieval:i,onShare:o,onDownloadCar:s,onPublish:c,onCopyCid:m,translateX:u,translateY:p,className:f,isMfs:h,isUnknown:b,isCliTutorModeEnabled:g}=this.props;return a.createElement(x,{className:f},a.createElement(y,{ref:this.dropdownMenuRef,top:-8,arrowMarginRight:"11px",left:"calc(100% - 200px)",translateX:-u,translateY:-p,open:this.props.isOpen,onDismiss:this.props.handleClick},o&&a.createElement(v,{onClick:this.wrap("onShare")},a.createElement(E.A,{className:"w2 mr2 fill-aqua"}),e("actions.share")),a.createElement(d.CopyToClipboard,{text:String(this.props.cid),onCopy:()=>{this.props.handleClick(),m&&m(this.props.cid)}},a.createElement(v,null,a.createElement(w.A,{className:"w2 mr2 fill-aqua"}),e("actions.copyHash"))),r&&a.createElement(v,{onClick:this.wrap("onInspect")},a.createElement(P.A,{className:"w2 mr2 fill-aqua"}),e("app:actions.inspect")),a.createElement(v,{onClick:this.wrap("onPinning"),isCliTutorModeEnabled:g,onCliTutorMode:this.wrap("onCliTutorMode",F.p5.PIN_OBJECT)},a.createElement(A.A,{className:"w2 mr2 fill-aqua"}),e("app:actions.setPinning")),!b&&l&&a.createElement(v,{onClick:this.wrap("onDownload"),isCliTutorModeEnabled:g,onCliTutorMode:this.wrap("onCliTutorMode",F.p5.DOWNLOAD_OBJECT_COMMAND)},a.createElement(S.A,{className:"w2 mr2 fill-aqua"}),e("app:actions.download")),!b&&s&&a.createElement(v,{onClick:this.wrap("onDownloadCar"),isCliTutorModeEnabled:g,onCliTutorMode:this.wrap("onCliTutorMode",F.p5.DOWNLOAD_CAR_COMMAND)},a.createElement(j.A,{className:"w2 mr2 fill-aqua"}),e("app:actions.downloadCar")),!b&&h&&t&&a.createElement(v,{onClick:this.wrap("onRename"),isCliTutorModeEnabled:g,onCliTutorMode:this.wrap("onCliTutorMode",F.p5.RENAME_IPFS_OBJECT)},a.createElement(C.A,{className:"w2 mr2 fill-aqua"}),e("app:actions.rename")),!b&&h&&n&&a.createElement(v,{onClick:this.wrap("onRemove"),isCliTutorModeEnabled:g,onCliTutorMode:this.wrap("onCliTutorMode",F.p5.REMOVE_FILE_FROM_IPFS)},a.createElement(k.A,{className:"w2 mr2 fill-aqua"}),e("app:actions.remove")),c&&a.createElement(v,{onClick:this.wrap("onPublish"),isCliTutorModeEnabled:g,onCliTutorMode:this.wrap("onCliTutorMode",F.p5.PUBLISH_WITH_IPNS)},a.createElement(N.A,{className:"w2 mr2 fill-aqua"}),e("actions.publishWithIpns")),i&&a.createElement(v,{onClick:this.wrap("onCheckRetrieval")},a.createElement(O.A,{className:"w2 mr2 fill-aqua"}),e("app:actions.checkRetrieval"))))}}M.defaultProps={isMfs:!1,isOpen:!1,isUnknown:!1,top:0,left:0,right:"auto",translateX:0,translateY:0,className:""};const R=(0,o.CI)("files",{withRef:!0})(M);var D=n(22917),T=n(10091);const B=(0,o.CI)("files")((e=>{let{t:t}=e;return a.createElement("div",{className:"mv4 tc navy f5"},a.createElement(T.A,{style:{background:"rgba(105, 196, 205, 0.1)"}},a.createElement(o.x6,{i18nKey:"companionInfo",t:t},a.createElement("p",{className:"ma0"},"As you are using ",a.createElement("strong",null,"IPFS Companion"),", the files view is limited to files added while using the extension."))))})),L=(0,o.CI)("files")((e=>{let{t:t}=e;return a.createElement("div",{className:"mv4 tc navy f5"},a.createElement(T.A,{style:{background:"rgba(105, 196, 205, 0.1)"}},a.createElement(o.x6,{i18nKey:"addFilesInfo",t:t},a.createElement("p",{className:"ma0 noselect"},"No files here yet! Add files to your local IPFS node by clicking the ",a.createElement("strong",null,"Import")," button above."))))})),_=e=>{let{isRoot:t,isCompanion:n,isFetching:l,filesExist:r}=e;return a.createElement("div",null,t&&n&&a.createElement(B,null),t&&!r&&!n&&!l&&a.createElement(L,null))};var q=n(66916),z=n(50310),U=n.n(z);const W={wav:"audio",bwf:"audio",aiff:"audio",flac:"audio",m4a:"audio",pac:"audio",tta:"audio",wv:"audio",aac:"audio",mp2:"audio",mp3:"audio",amr:"audio",s3m:"audio","3gp":"audio",au:"audio",dct:"audio",dss:"audio",gsm:"audio",m4p:"audio",mmf:"audio",mpc:"audio",ogg:"audio",oga:"audio",opus:"audio",ra:"audio",sln:"audio",vox:"audio","3g2":"video",aaf:"video",asf:"video",avchd:"video",avi:"video",drc:"video",flv:"video",m2v:"video",m4v:"video",mkv:"video",mng:"video",mov:"video",mp4:"video",mpe:"video",mpeg:"video",mpg:"video",mpv:"video",mxf:"video",nsv:"video",ogv:"video",qt:"video",rm:"video",rmvb:"video",roq:"video",svi:"video",vob:"video",webm:"video",wmv:"video",yuv:"video",art:"image",bmp:"image",blp:"image",cd5:"image",cit:"image",cpt:"image",cr2:"image",cut:"image",dds:"image",dib:"image",djvu:"image",egt:"image",exif:"image",gif:"image",gpl:"image",grf:"image",icns:"image",ico:"image",iff:"image",jng:"image",jpeg:"image",jpg:"image",jfif:"image",jp2:"image",jps:"image",lbm:"image",max:"image",miff:"image",msp:"image",nitf:"image",ota:"image",pbm:"image",pc1:"image",pc2:"image",pc3:"image",pcf:"image",pcx:"image",pdn:"image",pgm:"image",PI1:"image",PI2:"image",PI3:"image",pict:"image",pct:"image",pnm:"image",pns:"image",ppm:"image",psb:"image",psd:"image",pdd:"image",psp:"image",px:"image",pxm:"image",pxr:"image",qfx:"image",rle:"image",sct:"image",sgi:"image",rgb:"image",int:"image",bw:"image",tga:"image",tiff:"image",tif:"image",vtf:"image",xbm:"image",xcf:"image",xpm:"image","3dv":"image",amf:"image",ai:"image",awg:"image",cgm:"image",cdr:"image",cmx:"image",dxf:"image",e2d:"image",eps:"image",fs:"image",gbr:"image",odg:"image",svg:"image",stl:"image",vrml:"image",x3d:"image",sxd:"image",v2d:"image",vnd:"image",wmf:"image",emf:"image",png:"image",webp:"image",jxr:"image",hdp:"image",wdp:"image",cur:"image",ecw:"image",liff:"image",nrrd:"image",pam:"image",pgf:"image",rgba:"image",inta:"image",sid:"image",ras:"image",sun:"image",123:"calc","12m":"calc",_xls:"calc",_xlsx:"calc",aws:"calc",bks:"calc",cell:"calc",def:"calc",dex:"calc",dfg:"calc",dis:"calc",edx:"calc",edxz:"calc",ess:"calc",fcs:"calc",fm:"calc",fods:"calc",fp:"calc",gnm:"calc",gnumeric:"calc",gsheet:"calc",hcdt:"calc",imp:"calc",mar:"calc",nb:"calc",ncss:"calc",nmbtemplate:"calc",numbers:"calc","numbers-tef":"calc",ods:"calc",ogw:"calc",ogwu:"calc",ots:"calc",pmd:"calc",pmdx:"calc",pmv:"calc",pmvx:"calc",qpw:"calc",rdf:"calc",sdc:"calc",stc:"calc",sxc:"calc",tmv:"calc",tmvt:"calc",uos:"calc",wki:"calc",wkq:"calc",wks:"calc",wku:"calc",wq1:"calc",wq2:"calc",xl:"calc",xlr:"calc",xls:"calc",xlsb:"calc",xlshtml:"calc",xlsm:"calc",xlsmhtml:"calc",xlsx:"calc",xlthtml:"calc",xltm:"calc",xltx:"calc","1st":"text",_doc:"text",_docx:"text",abw:"text",adoc:"text",aim:"text",ans:"text",apkg:"text",apt:"text",asc:"text",ascii:"text",aty:"text",awp:"text",awt:"text",aww:"text",bad:"text",bbs:"text",bdp:"text",bdr:"text",bean:"text",bib:"text",bibtex:"text",bml:"text",bna:"text",boc:"text",brx:"text",btd:"text",bzabw:"text",calca:"text",charset:"text",chart:"text",chord:"text",cnm:"text",cod:"text",crwl:"text",cws:"text",cyi:"text",dca:"text",dfti:"text",dgs:"text",diz:"text",dne:"text",doc:"text",docm:"text",docx:"text",docxml:"text",docz:"text",dox:"text",dropbox:"text",dsc:"text",dvi:"text",dwd:"text",dx:"text",dxb:"text",dxp:"text",eio:"text",eit:"text",eml:"text",emlx:"text",emulecollection:"text",epp:"text",err:"text",etf:"text",etx:"text",euc:"text","fadein.template":"text",faq:"text",fbl:"text",fcf:"text",fdf:"text",fdr:"text",fds:"text",fdt:"text",fdx:"text",fdxt:"text",fft:"text",fgs:"text",flr:"text",fodt:"text",fountain:"text",fpt:"text",frt:"text",fwd:"text",fwdn:"text",gmd:"text",gpd:"text",gpn:"text",gsd:"text",gthr:"text",gv:"text",hbk:"text",hht:"text",hs:"text",hwp:"text",hz:"text",idx:"text",iil:"text",ipf:"text",ipspot:"text",jarvis:"text",jis:"text",jnp:"text",joe:"text",jp1:"text",jrtf:"text",jtd:"text",kes:"text",klg:"text",knt:"text",kon:"text",kwd:"text",latex:"text",lbt:"text",lis:"text",lnt:"text",log:"text",lp2:"text",lst:"text",ltr:"text",ltx:"text",lue:"text",luf:"text",lwp:"text",lxfml:"text",lyt:"text",lyx:"text",man:"text",mbox:"text",mcw:"text","md5.txt":"text",me:"text",mell:"text",mellel:"text",min:"text",mnt:"text",msg:"text",mw:"text",mwd:"text",mwp:"text",ndoc:"text",nfo:"text",ngloss:"text",njx:"text",note:"text",notes:"text",now:"text",nwctxt:"text",nwm:"text",nwp:"text",ocr:"text",odif:"text",odm:"text",odo:"text",odt:"text",ofl:"text",opeico:"text",openbsd:"text",ort:"text",ott:"text",p7s:"text",pages:"text","pages-tef":"text",pdpcmd:"text",pfx:"text",pjt:"text",plain:"text",plantuml:"text",pmo:"text",prt:"text",psw:"text",pu:"text",pvj:"text",pvm:"text",pwd:"text",pwdp:"text",pwdpl:"text",pwi:"text",pwr:"text",qdl:"text",qpf:"text",rad:"text",readme:"text",rft:"text",ris:"text",rpt:"text",rst:"text",rtd:"text",rtf:"text",rtfd:"text",rtx:"text",run:"text",rvf:"text",rzk:"text",rzn:"text",saf:"text",safetext:"text",sam:"text",save:"text",scc:"text",scm:"text",scriv:"text",scrivx:"text",scw:"text",sdm:"text",sdoc:"text",sdw:"text",se:"text",session:"text",sgm:"text",sig:"text",skcard:"text",sla:"text","sla.gz":"text",smf:"text",sms:"text",ssa:"text",story:"text",strings:"text",stw:"text",sty:"text","sublime-project":"text","sublime-workspace":"text",sxg:"text",sxw:"text",tab:"text",tdf:"text",template:"text",tex:"text",text:"text",textclipping:"text",thp:"text",tlb:"text",tm:"text",tmd:"text",tmdx:"text",tmvx:"text",tpc:"text",trelby:"text",tvj:"text",txt:"text",u3i:"text",unauth:"text",unx:"text",uof:"text",uot:"text",upd:"text",utf8:"text",utxt:"text",vct:"text",vnt:"text",vw:"text",wbk:"text",webdoc:"text",wn:"text",wp:"text",wp4:"text",wp5:"text",wp6:"text",wp7:"text",wpa:"text",wpd:"text",wpl:"text",wps:"text",wpt:"text",wpw:"text",wri:"text",wsd:"text",wtt:"text",wtx:"text",xbdoc:"text",xbplate:"text",xdl:"text",xwp:"text",xy:"text",xy3:"text",xyp:"text",xyw:"text",zabw:"text",zrtf:"text",zw:"text"};const G=function(e){const t=U()(e);return W[t]||t};var K=n(36506),Y=(n(46053),n(18858)),V=n(56424),H=n(30446),X=n(89001);const J=e=>{let{name:t,size:n,cid:l,path:r,children:i}=e;const[,o]=(0,Y.i)({item:{name:t,size:n,cid:l,path:r,type:"FILE"}});return a.createElement("div",{ref:o},i)},Q=(0,i.N)("selectAvailableGatewayUrl","selectPublicGateway",(0,o.CI)("files")((e=>{const{t:t,name:n,cid:l,size:r,availableGatewayUrl:i,publicGateway:s,read:c,onDownload:m,onClose:d}=e,[u,p]=(0,a.useState)(null),[f,h]=(0,a.useState)(!1),[b,g]=(0,a.useState)(null),v=G(n),y=(0,a.useCallback)((async()=>{if(["audio","video","pdf","image"].includes(v))return;const e=b||await c(0,10240);b||g(e);const{value:t,done:n}=await e.next(),a=(u||"")+(0,V.dI)(t);p(a);const l=!n&&(new TextEncoder).encode(a).length<r;h(l)}),[b,u,c,r,v]);(0,a.useEffect)((()=>{y()}),[]);const x="".concat(i,"/ipfs/").concat(l,"?filename=").concat(encodeURIComponent(n)),w="mw-100 mt3 bg-snow-muted pa2 br2 border-box",E=null!=d&&a.createElement("div",{className:"flex items-center justify-between mb3 pb2 bb b--light-gray"},a.createElement("div",{className:"flex items-center flex-auto mr2"},a.createElement("h2",{className:"ma0 f4 charcoal",title:n,style:{wordBreak:"break-all",maxWidth:"100%"}},function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40;if(e.length<=t)return e;const n=e.lastIndexOf("."),a=-1!==n,l=a?e.slice(n):"",r=a?e.slice(0,n):e,i=l.length+3;if(t<=i+2)return e.slice(0,t);const o=t-i,s=Math.ceil(o/2),c=Math.floor(o/2),m=r.slice(0,s),d=r.slice(-c);return"".concat(m,"...").concat(d).concat(l)}(n,40))),a.createElement(X.A,{onClick:d,style:{width:"44px",height:"44px",fill:"#244c5a",cursor:"pointer",flexShrink:0}}));switch(v){case"audio":return a.createElement("div",null,E,a.createElement(J,e,a.createElement("audio",{width:"100%",controls:!0},a.createElement("source",{src:Z(x)}))));case"pdf":return a.createElement("div",null,E,a.createElement(J,e,a.createElement("object",{className:"FilePreviewPDF w-100",data:Z(x),type:"application/pdf"},t("noPDFSupport"),a.createElement("a",{href:x,download:!0,target:"_blank",rel:"noopener noreferrer",className:"underline-hover navy-muted"},t("downloadPDF")))));case"video":return a.createElement("div",null,E,a.createElement(J,e,a.createElement("video",{controls:!0,className:w},a.createElement("source",{src:Z(x)}))));case"image":return a.createElement("div",null,E,a.createElement(J,e,a.createElement("img",{className:w,alt:n,src:Z(x)})));default:{const e="".concat(s,"/ipfs/").concat(l,"?filename=").concat(encodeURIComponent(n)),r=a.createElement("div",{className:"mt4"},a.createElement("p",{className:"b"},t("cantBePreviewed")," ",a.createElement("span",{role:"img","aria-label":"sad"},"\ud83d\ude22")),a.createElement("p",null,i===s?a.createElement(o.x6,{i18nKey:"openWithPublicGateway",t:t},"Try opening it instead with your ",a.createElement("a",{href:x,download:!0,target:"_blank",rel:"noopener noreferrer",className:"link blue"},"public gateway"),"."):a.createElement(o.x6,{i18nKey:"openWithLocalAndPublicGateway",t:t},"Try opening it instead with your ",a.createElement("a",{href:x,download:!0,target:"_blank",rel:"noopener noreferrer",className:"link blue"},"local gateway")," or ",a.createElement("a",{href:e,download:!0,target:"_blank",rel:"noopener noreferrer",className:"link blue"},"public gateway"),".")));return null===u?a.createElement("div",null,E,a.createElement(K.A,null)):u.length>10240||(0,q.Go)(n,u)?a.createElement("div",null,E,r):a.createElement("div",null,E,a.createElement("pre",{className:"".concat(w," overflow-auto monospace")},u),f&&a.createElement("div",{className:"w-100 flex items-center justify-center"},a.createElement("p",null,a.createElement(o.x6,{i18nKey:"previewLimitReached",t:t},"This preview is limited to 10 KiB. Click the download button to access the full file.")),a.createElement("p",null,a.createElement(H.A,{className:"mh2 lh-copy bn justify-center flex ",onClick:m},t("app:actions.download")))))}}})));function Z(e){return e.startsWith("http://localhost:")?e.replace("http://localhost:","http://127.0.0.1:"):e}var $=n(64600),ee=n.n($),te=n(48212),ne=n(91184),ae=n(41684),le=n(95565),re=n(45493),ie=n(15982),oe=n(47199),se=n(62439),ce=n(37566),me=n(58160),de=n(70579);const ue=["children","text"],pe=e=>{let{children:t,text:n}=e,l=(0,me.A)(e,ue);const[r,i]=(0,a.useState)(!1),[o,s]=(0,a.useState)(!0),c=(0,a.useRef)(null),m=(0,a.useCallback)((()=>{c.current&&o!==c.current.offsetWidth<c.current.scrollWidth&&s(!o)}),[o]);(0,a.useEffect)((()=>(window.addEventListener("resize",m),m(),()=>{window.removeEventListener("resize",m)})),[m]);const d=()=>{i(!0)},u=()=>{i(!1)},p=(0,a.useMemo)((()=>r&&o?"db":"dn"),[r,o]);return(0,de.jsxs)("div",(0,ce.A)((0,ce.A)({className:"relative"},l),{},{children:[(0,de.jsx)("div",{onMouseOver:d,onMouseLeave:u,onFocus:d,onBlur:u,className:"overflow-hidden",children:a.Children.map(t,(e=>a.cloneElement(e,{ref:e=>{c.current=e}})))}),(0,de.jsxs)("div",{style:{bottom:"-10px",left:"50%",transform:"translate(-50%, 100%)",wordWrap:"break-word",width:"100%"},className:"white z-max bg-navy-muted br2 pa1 f6 absolute ".concat(p),children:[(0,de.jsx)("span",{style:{width:"17px",height:"17px",transform:"translate(-50%, -50%) rotate(45deg)",borderRadius:"2px 0px 0px",left:"50%",zIndex:-1},className:"db bg-navy-muted absolute"}),n]})]}))};var fe=n(62591),he=n(55538),be=n(25205),ge=n(7446),ve=n(52372),ye=n(55183),xe=n(89852),we=n(39566);function Ee(e){let{name:t,type:n,style:l={width:36},cls:r=""}=e;if("directory"===n)return a.createElement(fe.A,{className:"fill-aqua ".concat(r),style:l});if("unknown"===n)return a.createElement(we.A,{className:"fill-aqua ".concat(r),style:l});switch(G(t)){case"audio":return a.createElement(ve.A,{className:"fill-aqua ".concat(r),style:l});case"calc":return a.createElement(ge.A,{className:"fill-aqua ".concat(r),style:l});case"video":return a.createElement(be.A,{className:"fill-aqua ".concat(r),style:l});case"text":return a.createElement(xe.A,{className:"fill-aqua ".concat(r),style:l});case"image":return a.createElement(ye.A,{className:"fill-aqua ".concat(r),style:l});default:return a.createElement(he.A,{className:"fill-aqua ".concat(r),style:l})}}var Ne=n(27858),Ce=n(89335);n(60138);const Pe=(0,o.CI)("files")((e=>{let{t:t,isFailedPin:n,isPendingPin:l,isRemotePin:r,pinned:i}=e;return n?a.createElement("div",{className:"br-100 o-70",title:t("pinningFailedClickToDismiss"),style:{width:"2rem",height:"2rem"}},a.createElement(Ce.A,{className:"fill-red"})):l?a.createElement("div",{className:"br-100 PendingAnimation",title:t("pinningRemotely"),style:{width:"2rem",height:"2rem"}},a.createElement(Ce.A,{className:"fill-aqua"})):r?a.createElement("div",{className:"br-100 o-70",title:t("pinnedRemotely"),style:{width:"2rem",height:"2rem"}},a.createElement(Ce.A,{className:"fill-aqua"})):i?a.createElement("div",{className:"br-100 o-70",title:t("pinned"),style:{width:"2rem",height:"2rem"}},a.createElement(Ne.A,{className:"fill-aqua"})):a.createElement("div",{className:"br-100 hide-child",title:t("app:actions.setPinning"),style:{width:"2rem",height:"2rem"}},a.createElement(Ne.A,{className:"fill-gray-muted child"}))})),Oe=e=>{let{name:t,type:n,size:l,cid:r,path:i,pinned:o,t:s,selected:c,focused:m,translucent:d,coloured:u,cantSelect:p,cantDrag:f,isMfs:h,isRemotePin:b,isPendingPin:g,isFailedPin:v,onAddFiles:y,onMove:x,onSelect:w,onNavigate:E,onSetPinning:N,onDismissFailedPin:C,handleContextMenuClick:P}=e;const O=(0,a.useRef)(),[,k,S]=(0,Y.i)({item:{name:t,size:l,cid:r,path:i,pinned:o,type:"FILE"},canDrag:!f&&h}),j=e=>{if(!h)return!1;const a=e.getItem();return!!a&&(a.name?"directory"===n&&t!==a.name&&!c:"directory"===n)},[{isOver:A,canDrop:F},I]=(0,ie.H)({accept:[re.FILE,"FILE"],drop:(e,t)=>{const n=t.getItem();if(n.files)(async()=>{const e=await n.filesPromise;y((0,ae.Vl)(e),i)})();else{const e=n.path,t=(0,te.join)(i,(0,te.basename)(n.path));x(e,t)}},canDrop:(e,t)=>j(t),collect:e=>({canDrop:j(e),isOver:e.isOver()})});let M="File b--light-gray relative flex items-center bt";c&&(M+=" selected");const R={height:55,overflow:"visible"};m||c&&!d||u||A&&F?R.backgroundColor="#F0F6FA":d&&(M+=" o-70"),m?R.border="1px dashed #9ad4db":(R.border="1px solid transparent",R.borderTop="1px solid #eee"),l=(0,ae.Xe)(l,{round:0});const D=r.toString()||s("hashUnavailable"),T=ee()({"o-70 glow":!p,"o-1":c||m},["pl2 w2"]);return a.createElement("div",{ref:I},a.createElement("div",{className:M,style:R,onContextMenu:e=>{P(e,"RIGHT",{name:t,size:l,type:n,cid:r,path:i,pinned:o})},ref:k},a.createElement("div",{className:T},a.createElement(oe.A,{disabled:p,checked:c,onChange:e=>w(t,e),"aria-label":s("checkboxLabel",{name:t})})),a.createElement("button",{ref:S,onClick:E,className:"relative pointer flex items-center flex-grow-1 ph2 pv1 w-40","aria-label":".."===t?s("previousFolder"):s("fileLabel",{name:t,type:n,size:l})},a.createElement("div",{className:"dib flex-shrink-0 mr2"},a.createElement(Ee,{name:t,type:n})),a.createElement("div",{style:{width:"calc(100% - 3.25rem)"}},a.createElement(pe,{text:t},a.createElement("div",{className:"f6 truncate charcoal"},t)),a.createElement(pe,{text:D},a.createElement("div",{className:"f7 mt1 gray truncate monospace"},D)))),a.createElement("div",{className:"ph2 pv1 flex-none hide-child dn db-l tr mw3 w-20 transition-all"},a.createElement("button",{className:"ph2 db button-inside-focus",style:{width:"2.5rem",height:"2rem"},onClick:v?C:()=>N([{cid:r,pinned:o}])},a.createElement(Pe,{isFailedPin:v,isPendingPin:g,isRemotePin:b,pinned:o}))),a.createElement("div",{className:"size pl2 pr4 pv1 flex-none f6 dn db-l tr charcoal-muted w-10 mw4"},l),a.createElement("button",{ref:O,className:"ph2 db button-inside-focus file-context-menu",style:{width:"2.5rem"},onClick:e=>{const a=O.current.getBoundingClientRect();P(e,"LEFT",{name:t,size:l,type:n,cid:r,path:i,pinned:o},a)},"aria-label":s("checkboxLabel",{name:t})},a.createElement(se.A,{className:"fill-gray-muted pointer hover-fill-gray transition-all"}))))};Oe.defaultProps={coloured:!1,translucent:!1};const ke=(0,o.CI)("files")(Oe),Se=e=>{let{t:t}=e;return a.createElement("header",{className:"gray pv2 flex items-center flex-none"},a.createElement("div",{className:"pa2 w2"},a.createElement(oe.A,{disabled:!0})),a.createElement("div",{className:"ph2 f6 flex-auto"},t("app:terms.name")),a.createElement("div",{className:"pl2 pr4 tr f6 flex-none dn db-l"},t("app:terms.size")),a.createElement("div",{className:"pa2",style:{width:"2.5rem"}}))},je=e=>{let{nameWidth:t}=e;return a.createElement("div",{className:"b--light-gray relative flex items-center bt",style:{height:55}},a.createElement("div",{className:"pa2 w2"},a.createElement(oe.A,{disabled:!0})),a.createElement("div",{className:"relative pointer flex items-center flex-grow-1 ph2 pv1 w-40"},a.createElement("div",{className:"dib flex-shrink-0 mr2"},a.createElement(Ee,{cls:"fill-charcoal"})),a.createElement("div",{className:"w-100"},a.createElement("div",{className:"w-".concat(t," br1 bg-charcoal-muted f7")},"\xa0"),a.createElement("div",{className:"w-80 br1 mt1 bg-gray f7 o-70"},"\xa0"))),a.createElement("div",{className:"size mr4 pl2 pr4 flex-none dn db-l br1 tr f7 bg-gray"},"\xa0"),a.createElement("div",{className:"ph2",style:{width:"2.5rem"}},a.createElement(se.A,{className:"fill-gray-muted pointer"})))},Ae=(0,o.CI)("files")((e=>{let{t:t}=e;return a.createElement("div",{className:"LoadingAnimation"},a.createElement("div",{className:"LoadingAnimationSwipe"},a.createElement(Se,{t:t}),a.createElement(je,{nameWidth:50}),a.createElement(je,{nameWidth:40}),a.createElement(je,{nameWidth:60}),a.createElement(je,{nameWidth:30}),a.createElement(je,{nameWidth:50}),a.createElement(je,{nameWidth:60}),a.createElement(je,{nameWidth:70}),a.createElement(je,{nameWidth:40}),a.createElement(je,{nameWidth:30}),a.createElement(je,{nameWidth:50})))}));function Fe(){return Fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Fe.apply(null,arguments)}function Ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(n),!0).forEach((function(t){Re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Re(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const De=function(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];const a=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).map((e=>e.split(":").at(-1))),l=t.map((e=>e.split(":").at(-1))),r=n.map((e=>e.split(":").at(-1)));return e.map((e=>{var t,i;const o=r.reduce(((t,a,l)=>{var r;return a===(null===(r=e.cid)||void 0===r?void 0:r.toString())&&t.push(n[l]),t}),[]),s=a.includes(null===(t=e.cid)||void 0===t?void 0:t.toString()),c=l.includes(null===(i=e.cid)||void 0===i?void 0:i.toString()),m=o.length>0;return Me(Me({},e),{},{isRemotePin:s,isPendingPin:c,isFailedPin:m,failedPins:o})}))},Te=(0,i.N)("selectPins","selectPinningServices","doFetchRemotePins","selectFilesIsFetching","selectFilesSorting","selectFilesPathInfo","selectShowLoadingAnimation","doDismissFailedPin",(0,o.CI)("files")((e=>{var t;let{className:n="",files:r,pins:i,pinningServices:s,remotePins:c=[],pendingPins:m=[],failedPins:d=[],filesSorting:u,updateSorting:p,filesIsFetching:f,filesPathInfo:h,showLoadingAnimation:b,onShare:g,onSetPinning:v,selected:y,onSelect:x,onInspect:w,onDownload:E,onRemove:N,onRename:C,onNavigate:P,onRemotePinClick:O,onAddFiles:k,onMove:S,doFetchRemotePins:j,doDismissFailedPin:A,handleContextMenuClick:F,t:I}=e;const[M,R]=(0,a.useState)(null),[D,T]=(0,a.useState)(null),[B,L]=(0,a.useState)(De(r,c,m,d)),_=(0,a.useRef)(),q=(0,a.useRef)([]);h=null!==(t=h)&&void 0!==t?t:{};const[{canDrop:z,isOver:U,isDragging:W},G]=(0,ie.H)({accept:re.FILE,drop:(e,t)=>{if(t.didDrop())return;const{filesPromise:n}=t.getItem();(async(e,t)=>{const n=await e;t((0,ae.Vl)(n))})(n,k)},collect:e=>({isOver:e.isOver({shallow:!0}),isDragging:e.isDragging}),canDrop:e=>h.isMfs}),K=(0,a.useMemo)((()=>y.map((e=>B.find((t=>t.name===e)))).filter((e=>e)).map((e=>Me(Me({},e),{},{pinned:i.map((e=>e.toString())).includes(e.cid.toString())})))),[B,i,y]),Y=(0,a.useCallback)(((e,t)=>{x(e,t)}),[x]),V=(0,a.useCallback)((e=>{const t=r.find((e=>e.name===M));if(!f){var n,a;if("Escape"===e.key)return x([],!1),R(null),null===(n=_.current)||void 0===n||null===(a=n.forceUpdateGrid)||void 0===a?void 0:a.call(n);if("F2"===e.key&&null!==M)return C([t]);if("Delete"===e.key&&y.length>0)return N(K);if(" "===e.key&&null!==M)return e.preventDefault(),Y(M,!0);if(("Enter"===e.key||"ArrowRight"===e.key&&e.metaKey)&&null!==M)return P({path:t.path,cid:t.cid});if("ArrowDown"===e.key||"ArrowUp"===e.key){e.preventDefault();let t=0;if(null!==M){const n=r.findIndex((e=>e.name===M));t="ArrowDown"===e.key?n+1:n-1}if(-1===t||t>=r.length)return;let n=r[t].name;q.current[n]||(n=r[D].name),R(n)}}}),[r,M,D,f,P,N,C,x,y.length,K,Y,_]);(0,a.useEffect)((()=>(document.addEventListener("keydown",V),()=>{document.removeEventListener("keydown",V)})),[V]),(0,a.useEffect)((()=>{L(De(r,c,m,d))}),[r,c,u,m,d]);const H=e=>{e?x(B.map((e=>e.name)),!0):x([],!1)},X=(e,t)=>{if(K.length>0){const n=t.split("/");n.pop();let a=n.join("/");""===a&&(a="/");const l=K.map((e=>{let{name:t,path:n}=e;return[n,(0,te.join)(a,t)]}));l.find((t=>t[0]===e))||l.push([e,t]),H(!1),l.forEach((e=>S(...e)))}else S(e,t)},J=e=>u.by===ne.k0.BY_ORIGINAL?null:u.by===e?u.asc?"\u2191":"\u2193":null,Q=e=>()=>{var t,n;e===u.by?u.asc?p(e,!1):p(ne.k0.BY_ORIGINAL,!0):(u.by,ne.k0.BY_ORIGINAL,p(e,!0)),null===(t=_.current)||void 0===t||null===(n=t.forceUpdateGrid)||void 0===n||n.call(t)},Z=()=>h.isRoot?null:a.createElement(o.x6,{i18nKey:"filesList.noFiles",t:I},a.createElement("div",{className:"pv3 b--light-gray bt tc charcoal-muted f6 noselect"},"There are no available files. Add some!")),$=e=>{let{index:t,key:n,style:l}=e;const r=i.map((e=>e.toString())),o=B[t];return a.createElement("div",{key:n,style:l,ref:e=>{q.current[B[t].name]=e}},a.createElement(ke,Fe({},o,{pinned:r.includes(o.cid.toString()),isMfs:h.isMfs,name:o.name,onSelect:Y,onNavigate:()=>"unknown"===o.type?w(o.cid):P({path:o.path,cid:o.cid}),onAddFiles:k,onSetPinning:v,onDismissFailedPin:()=>{A(...o.failedPins)},onMove:X,focused:M===o.name,selected:-1!==y.indexOf(o.name),handleContextMenuClick:F,translucent:W||U&&z})))},se=e=>{let{startIndex:t}=e;return T(t)},ce=0!==y.length&&y.length===B.length,me=B.length,de=ee()({"o-1":ce,"o-70":!ce},["pl2 w2 glow"]),ue=q.current[M];return(0,a.useEffect)((()=>{if(M){var e,t;const n=ue&&(0,l.findDOMNode)(ue);if(n){n.scrollIntoView({behavior:"smooth",block:"center"});const e=n.querySelector('input[type="checkbox"]');e&&e.focus()}null===(e=_.current)||void 0===e||null===(t=e.forceUpdateGrid)||void 0===t||t.call(e)}}),[ue,M,_]),a.createElement("section",{ref:G,className:ee()("FilesList no-select sans-serif border-box w-100 flex flex-column",n)},b?a.createElement(Ae,null):a.createElement(a.Fragment,null,a.createElement("header",{className:"gray pv3 flex items-center flex-none",style:{paddingRight:"1px",paddingLeft:"1px"}},a.createElement("div",{className:de},a.createElement(oe.A,{checked:ce,onChange:H,"aria-label":I("selectAllEntries")})),a.createElement("div",{className:"ph2 f6 flex-auto"},a.createElement("button",{className:"charcoal-muted","aria-label":I("sortBy",{name:I("app:terms.name")}),onClick:Q(ne.k0.BY_NAME)},I("app:terms.name")," ",J(ne.k0.BY_NAME))),a.createElement("div",{className:"pl2 pr1 tr f6 flex-none dn db-l mw4"},a.createElement("button",{className:"charcoal-muted","aria-label":I("sortBy",{name:I("app:terms.pinStatus")}),onClick:()=>{Q(ne.k0.BY_PINNED)(),s&&s.length&&j(r,true)}},I("app:terms.pinStatus")," ",J(ne.k0.BY_PINNED))),a.createElement("div",{className:"pl2 pr4 tr f6 flex-none dn db-l mw4 w-10"},a.createElement("button",{className:"charcoal-muted","aria-label":I("sortBy",{name:I("size")}),onClick:Q(ne.k0.BY_SIZE)},I("app:terms.size")," ",J(ne.k0.BY_SIZE))),a.createElement("div",{className:"pa2",style:{width:"2.5rem"}})),a.createElement(le.PG,null,(e=>{let{height:t,isScrolling:n,onChildScroll:l,scrollTop:r}=e;return a.createElement("div",{className:"flex-auto"},a.createElement(le.t$,{disableHeight:!0},(e=>{let{width:i}=e;return a.createElement(le.B8,{ref:_,autoHeight:!0,width:i,height:t,className:"outline-0","aria-label":I("filesListLabel"),rowCount:me,rowHeight:55,rowRenderer:$,noRowsRenderer:Z,onRowsRendered:se,isScrolling:n,onScroll:l,scrollTop:r})})))}))))})));var Be=n(18354);const Le=(0,i.N)("selectAvailableGatewayUrl",(e=>{let{name:t,cid:n,availableGatewayUrl:l,textPreview:r,onLoad:i}=e;const[o,s]=(0,a.useState)(!1),[c,m]=(0,a.useState)(!1),d=G(t),u=(0,a.useCallback)((()=>{s(!0),m(!1)}),[]),p=(0,a.useCallback)((()=>{m(!0),null===i||void 0===i||i()}),[i]);if((0,a.useEffect)((()=>{m(!1),s(!1)}),[n,t]),o||!r&&!d.startsWith("image"))return null;if("image"===d){const e="".concat(l,"/ipfs/").concat(n,"?filename=").concat(encodeURIComponent(t));return(0,de.jsxs)("div",{className:"file-thumbnail ".concat(c?"":"is-loading"),children:[(0,de.jsx)("div",{className:"file-thumbnail-loading"}),(0,de.jsx)("img",{className:"w-100 h-100 object-contain br2",alt:t,src:e,onError:u,onLoad:p,loading:"lazy",decoding:"async"})]})}return r?(0,de.jsxs)("div",{className:"file-thumbnail file-thumbnail-text ".concat(0===r.length?"is-loading":""),children:[(0,de.jsx)("div",{className:"file-thumbnail-loading"}),(0,de.jsx)("pre",{className:"file-thumbnail-content",children:r})]}):null}));var _e=n(26382).Buffer;const qe=(0,i.N)("doRead",(0,o.CI)("files")((e=>{let{name:t,type:n,size:l,cid:r,path:i,pinned:o,t:s,selected:c,focused:m,isRemotePin:d,isPendingPin:u,isFailedPin:p,isMfs:f,refSetter:h,onNavigate:b,onSetPinning:g,doRead:v,onDismissFailedPin:y,handleContextMenuClick:x,onSelect:w,onMove:E,onAddFiles:N}=e;const C=(0,a.useRef)(null),P=(0,a.useRef)(null),[,O,k]=(0,Y.i)({item:{name:t,size:l,cid:r,path:i,pinned:o,type:"FILE"},canDrag:f,collect:e=>({isDragging:e.isDragging()})}),S=e=>{if(!f)return!1;if("directory"!==n)return!1;const a=e.getItem();return!!a&&(!a.name||t!==a.name&&!c)},[{isOver:j,canDrop:A},F]=(0,ie.H)({accept:[re.FILE,"FILE"],drop:(e,t)=>{const n=t.getItem();if(n.files)(async()=>{const e=await n.filesPromise;N((0,ae.Vl)(e),i)})();else{const e=n.path,t=(0,te.join)(i,(0,te.basename)(n.path));E(e,t)}},canDrop:(e,t)=>S(t),collect:e=>({canDrop:S(e),isOver:e.isOver()})}),[I,M]=(0,a.useState)(!1),[R,D]=(0,a.useState)(null);(0,a.useEffect)((()=>{M(!1),D(null);null!=v&&(async()=>{if((n.startsWith("text/")||"txt"===n||/\.(txt|md|js|jsx|ts|tsx|json|css|html|xml|yaml|yml|ini|conf|sh|py|rb|java|c|cpp|h|hpp)$/i.test(t))&&r)try{const n=[];let c=0;const m=await v(r,0,400);if(!m)return;var e,a=!1,l=!1;try{for(var i,o=(0,Be.A)(m);a=!(i=await o.next()).done;a=!1){const e=i.value;if(n.push(e),c+=e.length,c>=400)break}}catch(s){l=!0,e=s}finally{try{a&&null!=o.return&&await o.return()}finally{if(l)throw e}}const d=_e.concat(n),u=(new TextDecoder).decode(d);(0,q.Go)(t,d)||D(u)}catch(s){console.error("Failed to load text preview:",s)}})()}),[v,n,r,t]);const T=(0,ae.Xe)(l,{round:0}),B=r.toString()||s("hashUnavailable"),L="grid-file ".concat(c?"selected":""," ").concat(m?"focused":""," ").concat(j&&A?"drop-target":"");return(0,de.jsxs)("div",{className:L,onContextMenu:e=>{e.preventDefault(),x(e,"RIGHT",{name:t,size:l,type:n,cid:r,path:i,pinned:o})},role:"button",ref:h,"data-type":n,tabIndex:0,title:"".concat(t),"aria-label":s("fileLabel",{name:t,type:n,size:T}),children:[(0,de.jsx)("div",{className:"grid-file-checkbox",children:(0,de.jsx)(oe.A,{disabled:!1,checked:c,onChange:()=>{w(t,!c)},"aria-label":s("checkboxLabel",{name:t})})}),(0,de.jsxs)("div",{ref:e=>{P.current=e,O(e),"directory"===n&&F(e),k(e)},className:"grid-file-content",onClick:()=>b({path:i,cid:r}),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),b({path:i,cid:r}))},role:"button",tabIndex:0,"aria-label":s("fileLabel",{name:t,type:n,size:T}),children:[(0,de.jsxs)("div",{className:"grid-file-preview",children:[j&&A&&(0,de.jsx)("div",{className:"drop-indicator",children:(0,de.jsx)("span",{children:s("dropHere",{defaultValue:"Drop here"})})}),(0,de.jsx)(Le,{name:t,cid:r,textPreview:R,onLoad:()=>M(!0)}),!I&&(0,de.jsx)("div",{className:"grid-file-icon-fallback",children:(0,de.jsx)(Ee,{style:{width:80},name:t,type:n})}),(0,de.jsx)("button",{ref:C,className:"grid-file-dots",onClick:e=>{var a;e.stopPropagation();const s=null===(a=C.current)||void 0===a?void 0:a.getBoundingClientRect();x(e,"TOP",{name:t,size:l,type:n,cid:r,path:i,pinned:o},s)},"aria-label":s("checkboxLabel",{name:t}),type:"button",children:(0,de.jsx)(se.A,{})})]}),(0,de.jsxs)("div",{className:"grid-file-info",children:[(0,de.jsx)("div",{className:"grid-file-name",title:t,children:t}),(0,de.jsxs)("div",{className:"grid-file-details",children:[(0,de.jsx)("span",{className:"grid-file-size",children:T}),(0,de.jsx)("button",{className:"grid-file-pin",onClick:e=>{e.stopPropagation(),p?y():g([{cid:r,pinned:o}])},type:"button","aria-label":s(p?"dismissFailedPin":o?"unpin":"pin"),children:(0,de.jsx)(Pe,{isFailedPin:p,isPendingPin:u,isRemotePin:d,pinned:o})})]}),(0,de.jsxs)("div",{className:"grid-file-hash",title:B,children:[B.slice(0,10),"...",B.slice(-10)]})]})]})]})}))),ze=(0,i.N)("selectPins","selectPinningServices","doFetchRemotePins","selectFilesIsFetching","selectFilesSorting","selectFilesPathInfo","selectShowLoadingAnimation","doDismissFailedPin",(0,o.CI)("files")((e=>{let{files:t,pins:n=[],remotePins:l=[],pendingPins:r=[],failedPins:i=[],filesPathInfo:s,t:c,onRemove:m,onRename:d,onNavigate:u,onAddFiles:p,onMove:f,handleContextMenuClick:h,filesIsFetching:b,onSetPinning:g,onDismissFailedPin:v,selected:y=[],onSelect:x,modalOpen:w=!1}=e;const[E,N]=(0,a.useState)(null),C=(0,a.useRef)({}),P=(0,a.useRef)(null),[{isOver:O,canDrop:k},S]=(0,ie.H)({accept:re.FILE,drop:(e,t)=>{if(t.didDrop())return;const{filesPromise:n}=t.getItem();j(n,p)},collect:e=>({isOver:e.isOver({shallow:!0}),canDrop:null===s||void 0===s?void 0:s.isMfs})}),j=async(e,t)=>{const n=await e;t((0,ae.Vl)(n))},A=(0,a.useCallback)(((e,t)=>{x(e,t)}),[x]),F=(0,a.useCallback)((e=>{var n,a;if(w)return;const l=null==E?null:t.find((e=>e.name===E));if(null===(n=P.current)||void 0===n||null===(a=n.focus)||void 0===a||a.call(n),"Escape"===e.key)return x([],!1),void N(null);if("F2"===e.key&&null!=l)return d([l]);if(("Delete"===e.key||"Backspace"===e.key)&&y.length>0){const e=t.filter((e=>y.includes(e.name)));return m(e)}if(" "===e.key&&null!=l)return e.preventDefault(),void A(l.name,!y.includes(l.name));if(null!=l&&("Enter"===e.key||"ArrowRight"===e.key&&e.metaKey||"NumpadEnter"===e.key))return u({path:l.path,cid:l.cid});if(["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(e.key)){var r;e.preventDefault();const n=Math.floor(((null===(r=P.current)||void 0===r?void 0:r.clientWidth)||window.innerWidth)/220),a=t.findIndex((e=>e.name===(null===l||void 0===l?void 0:l.name)));let i=a;switch(e.key){case"ArrowDown":i=-1===a?t.length-1:a+n;break;case"ArrowUp":i=-1===a?0:a-n;break;case"ArrowRight":i=-1===a||a===t.length-1?0:a+1;break;case"ArrowLeft":i=-1===a||0===a?t.length-1:a-1}if(i>=0&&i<t.length){const e=t[i].name;N(e);const n=C.current[e];if(n&&n.scrollIntoView){n.scrollIntoView({behavior:"smooth",block:"nearest"});const e=n.querySelector('input[type="checkbox"]');null!=e&&e.focus()}}}}),[t,E,y,x,d,m,u,A,w]);(0,a.useEffect)((()=>{if(!b)return document.addEventListener("keydown",F),()=>{document.removeEventListener("keydown",F)}}),[F,b]);const I="files-grid".concat(O&&k?" files-grid--drop-target":"");return(0,de.jsxs)("div",{ref:e=>{S(e),P.current=e},className:I,tabIndex:0,role:"grid","aria-label":c("filesGridLabel"),children:[t.map((e=>{var t,a,o;return(0,de.jsx)(qe,(0,ce.A)((0,ce.A)({},e),{},{refSetter:t=>{C.current[e.name]=t},selected:y.includes(e.name),focused:E===e.name,pinned:null===n||void 0===n?void 0:n.includes(null===(t=e.cid)||void 0===t?void 0:t.toString()),isRemotePin:null===l||void 0===l?void 0:l.includes(null===(a=e.cid)||void 0===a?void 0:a.toString()),isPendingPin:null===r||void 0===r?void 0:r.includes(null===(o=e.cid)||void 0===o?void 0:o.toString()),isFailedPin:null===i||void 0===i?void 0:i.some((t=>{var n;return null===t||void 0===t?void 0:t.includes(null===(n=e.cid)||void 0===n?void 0:n.toString())})),isMfs:null===s||void 0===s?void 0:s.isMfs,onNavigate:()=>u({path:e.path,cid:e.cid}),onAddFiles:p,onMove:f,onSetPinning:g,onDismissFailedPin:v,handleContextMenuClick:h,onSelect:A}),e.name)})),0===t.length&&!(null!==s&&void 0!==s&&s.isRoot)&&(0,de.jsx)(o.x6,{i18nKey:"filesList.noFiles",t:c,children:(0,de.jsx)("div",{className:"pv3 b--light-gray files-grid-empty bt tc charcoal-muted f6 noselect",children:"There are no available files. Add some!"})})]})})));var Ue=n(69884),We=n(28253);const Ge=e=>{let{path:t}=e;const{t:n}=(0,o.Bd)("files");return(0,de.jsxs)("div",{className:"mb3 pa4-l pa2 mw9 center",style:{background:"rgba(251, 251, 251)"},children:[(0,de.jsxs)("div",{className:"flex flex-row items-center mb3",children:[(0,de.jsx)(We.A,{style:{height:76},className:"fill-red mr",role:"presentation"}),(0,de.jsx)("div",{className:"red fw6 truncate",children:n("previewNotFound.title")})]}),(0,de.jsx)("div",{className:"mb3 charcoal fw6 truncate",children:t}),(0,de.jsx)("div",{className:"mb3",children:n("previewNotFound.helpTitle")}),(0,de.jsxs)("ul",{children:[(0,de.jsx)("li",{children:n("previewNotFound.helpListItemPathTypo")}),(0,de.jsx)("li",{children:n("previewNotFound.helpListItemFileMoved")}),(0,de.jsxs)("li",{children:[n("previewNotFound.helpListItemBookmarkMigrated")," ",(0,de.jsx)("a",{href:"#/peers",children:n("previewNotFound.helpListItemBookmarkMigratedLink")}),"."]})]}),(0,de.jsx)("a",{href:"#/files",children:(0,de.jsx)(H.A,{className:"ma2 tc",bg:"bg-teal",children:n("previewNotFound.backButton")})})]})};var Ke=n(65156);const Ye=(0,o.CI)("files")((e=>{let{currentSort:t,onSortChange:n,t:l}=e;const[r,i]=(0,a.useState)(!1),o=(0,a.useRef)(),s=(0,a.useRef)(),c=[{value:ne.k0.BY_NAME,asc:!0,label:l("sortByNameAsc")},{value:ne.k0.BY_NAME,asc:!1,label:l("sortByNameDesc")},{value:ne.k0.BY_SIZE,asc:!0,label:l("sortBySizeAsc")},{value:ne.k0.BY_SIZE,asc:!1,label:l("sortBySizeDesc")},{value:ne.k0.BY_PINNED,asc:!0,label:l("sortByPinnedFirst")},{value:ne.k0.BY_PINNED,asc:!1,label:l("sortByUnpinnedFirst")},{value:ne.k0.BY_ORIGINAL,asc:!0,label:l("sortByOriginal")}];return(0,a.useEffect)((()=>{const e=e=>{s.current&&!s.current.contains(e.target)&&o.current&&!o.current.contains(e.target)&&i(!1)};if(r)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[r]),a.createElement("div",{className:"relative",ref:s},a.createElement("button",{ref:o,className:"flex items-center justify-between pa2 bg-white ba b--light-gray br2 pointer hover-bg-near-white",style:{minWidth:"140px"},"aria-label":l("sortFiles"),onClick:()=>i(!r)},a.createElement("span",{className:"f6 charcoal truncate"},(()=>{const e=c.find((e=>e.value===t.by&&(e.value===ne.k0.BY_ORIGINAL||e.asc===t.asc)));return(null===e||void 0===e?void 0:e.label)||l("sortByNameAsc")})()),a.createElement("span",{className:"ml2 f6 gray"},r?"\u25b2":"\u25bc")),r&&a.createElement(u.r,{open:r,className:"sans-serif br2 charcoal",boxShadow:"rgba(105, 196, 205, 0.5) 0px 1px 10px 0px",width:200,arrowAlign:"left",arrowMarginRight:"20px",left:"0",translateX:"0",translateY:"5px",onDismiss:()=>i(!1)},a.createElement("div",{className:"flex flex-column",role:"menu"},c.map(((e,l)=>a.createElement("button",{key:"".concat(e.value,"-").concat(e.asc),role:"menuitem",className:"bg-animate hover-bg-near-white pa3 pointer flex items-center ".concat(t.by!==e.value||e.value!==ne.k0.BY_ORIGINAL&&t.asc!==e.asc?"":"bg-near-white fw5"),onClick:()=>{return t=e.value,a=e.asc,n(t,a),void i(!1);var t,a}},a.createElement("span",{className:"f6 charcoal"},e.label)))))))}));var Ve=n(48900),He=n(71005),Xe=n(86533);const Je=["t","tReady","onCancel","onSubmit","className"];function Qe(){return Qe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Qe.apply(null,arguments)}const Ze=(0,o.CI)("files")((function(e){let{t:t,tReady:n,onCancel:l,onSubmit:r,className:i}=e,o=function(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}(e,Je);return a.createElement(Xe.A,Qe({onSubmit:e=>r(e.trim()),onChange:e=>e.trimStart(),onCancel:l,className:i,title:t("newFolderModal.title"),description:t("newFolderModal.description"),Icon:He.A,submitText:t("app:actions.create")},o))}));var $e=n(93245),et=n(82516);const tt=["t","tReady","onLeave","link","className"];function nt(){return nt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},nt.apply(null,arguments)}const at=e=>{let{t:t,tReady:n,onLeave:l,link:r,className:i}=e,o=function(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}(e,tt);return a.createElement(et.aF,nt({},o,{className:i,onCancel:l}),a.createElement(et.cw,{title:t("shareModal.title")},a.createElement("p",{className:"charcoal w-90 center"},t("shareModal.description")),a.createElement("div",{className:"flex justify-center pb3"},a.createElement($e.Ay,{size:180,value:r})),a.createElement("div",{className:"flex center w-90 pb2"},a.createElement("input",{value:r,readOnly:!0,className:"input-reset flex-grow-1 charcoal-muted ba b--black-20 br1 pa2 mr2 focus-outline",type:"text"}))),a.createElement(et.NS,null,a.createElement(H.A,{className:"ma2 tc",bg:"bg-gray",onClick:l},t("app:actions.close")),a.createElement(d.CopyToClipboard,{text:r,onCopy:l},a.createElement(H.A,{className:"ma2 tc"},t("app:actions.copy")))))};at.defaultProps={className:""};const lt=(0,o.CI)("files")(at),rt=["t","tReady","onCancel","onSubmit","filename","folder","className"];function it(){return it=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},it.apply(null,arguments)}function ot(e){let{t:t,tReady:n,onCancel:l,onSubmit:r,filename:i,folder:o,className:s}=e,c=function(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}(e,rt);const m=o?"Folder":"File";return a.createElement(Xe.A,it({onCancel:l,onSubmit:r,mustBeDifferent:!0,className:s,defaultValue:i,title:t("renameModal.title".concat(m)),description:t("renameModal.description".concat(m)),Icon:C.A,submitText:t("app:actions.save")},c))}ot.defaultProps={className:"",folder:!1};const st=(0,o.CI)("files")(ot);var ct=n(65021),mt=n(809);const dt=["t","tReady","onCancel","onPinningSet","file","pinningServices","remotePins","notRemotePins","pendingPins","doGetFileSizeThroughCid","doSelectRemotePinsForFile","doFetchPinningServices","doFetchRemotePins","className"];function ut(){return ut=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ut.apply(null,arguments)}const pt=e=>{let{icon:t,index:n}=e;if(t)return a.createElement("img",{className:"mr1",src:t,alt:"",width:32,height:32,style:{objectFit:"contain"}});const l=["aqua","link","yellow","teal","red","green","navy","gray","charcoal"],r="mr1 fill-".concat(l[n%l.length]," flex-shrink-0");return a.createElement(Ne.A,{width:32,height:32,className:r})},ft=e=>{let{t:t,tReady:n,onCancel:l,onPinningSet:r,file:i,pinningServices:o,remotePins:s,notRemotePins:c,pendingPins:m,doGetFileSizeThroughCid:d,doSelectRemotePinsForFile:u,doFetchPinningServices:p,doFetchRemotePins:f,className:h}=e,b=function(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}(e,dt);const g=(0,a.useMemo)((()=>u(i,s,c,m)),[u,i,s,c,m]),[v,y]=(0,a.useState)([...g,i.pinned&&"local"]),[x,w]=(0,a.useState)(null);(0,a.useEffect)((()=>{p();(async()=>{w(await d(i.cid))})(),f([{cid:i.cid}])}),[i]),(0,a.useEffect)((()=>{y([...g,i.pinned&&"local"])}),[i,g]);const E=e=>-1===v.indexOf(e)?y([...v,e]):y(v.filter((t=>t!==e)));return a.createElement(et.aF,ut({},b,{className:h,onCancel:l}),a.createElement(et.cw,{title:t("pinningModal.title"),Icon:ct.A},a.createElement("div",{className:"pinningModalContainer"},a.createElement("button",{className:"flex items-center pa1 hoverable-button",key:t("pinningModal.localNode"),onClick:()=>E("local")},a.createElement(oe.A,{className:"pv3 pl3 pr1 flex-none",checked:v.includes("local"),style:{pointerEvents:"none"}}),a.createElement(Ne.A,{fill:"currentColor",width:32,height:32,className:"mr1 aqua flex-shrink-0"}),a.createElement("p",{className:"f5 w-100"},t("pinningModal.localNode"))),o.map(((e,t)=>{let{icon:n,name:l}=e;return a.createElement("button",{className:"flex items-center pa1 hoverable-button",key:l,onClick:()=>E(l)},a.createElement(oe.A,{className:"pv3 pl3 pr1 flex-none",checked:v.includes(l),style:{pointerEvents:"none"}}),a.createElement(pt,{index:t,icon:n}),a.createElement("p",{className:"f5"},l))}))),a.createElement("a",{className:"mb1 tl f7 charcoal-muted no-underline underline-hover",target:"_blank",rel:"noreferrer",href:mt.L},t("pinningModal.complianceLabel")),a.createElement("p",{className:"f6 charcoal"},t("pinningModal.totalSize",{size:(0,ae.Xe)(x)}))),a.createElement(et.NS,null,a.createElement(H.A,{className:"ma2 tc",bg:"bg-gray",onClick:l},t("app:actions.cancel")),a.createElement(H.A,{className:"ma2 tc",bg:"bg-teal",onClick:()=>r(i,v,i.pinned,g)},t("app:actions.apply"))))};ft.defaultProps={className:""};const ht=(0,i.N)("selectPinningServices","selectRemotePins","selectPendingPins","selectNotRemotePins","doSelectRemotePinsForFile","doGetFileSizeThroughCid","doFetchPinningServices","doFetchRemotePins",(0,o.CI)("files")(ft)),bt=["t","tReady","onCancel","onRemove","files","foldersCount","filesCount","remotePins","pinningServices","className"];function gt(){return gt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},gt.apply(null,arguments)}const vt=e=>{let{t:t,tReady:n,onCancel:l,onRemove:r,files:i,foldersCount:o,filesCount:s,remotePins:c,pinningServices:m,className:d}=e,u=function(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}(e,bt),p="File";const f=s+o;o>0&&(p=s>0?"Item":"Folder");const h=i.some((e=>e.pinned)),[b,g]=(0,a.useState)(!1),[v,y]=(0,a.useState)(h),[x,w]=(0,a.useState)(!1);(0,a.useEffect)((()=>{(async()=>{const e=i.some((e=>c.find((t=>t.endsWith(e.cid.toString())))));g(e)})()}));const E={count:f,name:i[0].name},N=t("removeModal.title".concat(p),E),C=t("removeModal.description".concat(p),E);return a.createElement(et.aF,gt({},u,{className:d,onCancel:l}),a.createElement(et.cw,{title:N,Icon:k.A},a.createElement("div",{className:"charcoal w-100 center tl"},a.createElement("p",null,C),h&&a.createElement("div",null,a.createElement(oe.A,{className:"mr1",checked:v,onChange:()=>y(!v),label:t("removeModal.checkboxRemoveLocalPin")})),b&&a.createElement("div",{className:"mt1"},a.createElement(oe.A,{className:"mr1",checked:x,onChange:()=>w(!x),label:t("removeModal.checkboxUnpinFromServices")})))),a.createElement(et.NS,null,a.createElement(H.A,{className:"ma2 tc",bg:"bg-gray",onClick:l},t("app:actions.cancel")),a.createElement(H.A,{className:"ma2 tc",bg:"bg-red",onClick:()=>r({removeLocally:v,removeRemotely:x,remoteServices:m.map((e=>e.name))})},t("app:actions.remove"))))};vt.defaultProps={className:"",filesCount:0,foldersCount:0};const yt=(0,i.N)("selectRemotePins","selectPinningServices",(0,o.CI)("files")(vt));var xt=n(65173),wt=n.n(xt),Et=n(21969),Nt=n(48069);const Ct=["t","tReady","onCancel","onSubmit","className"];function Pt(){return Pt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Pt.apply(null,arguments)}function Ot(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class kt extends a.Component{constructor(){super(...arguments),Ot(this,"state",{path:"",name:""}),Ot(this,"validatePath",(e=>(e.startsWith("/ipfs/")||(e="/ipfs/".concat(e)),Et.qy(e)))),Ot(this,"onChange",(e=>{const t=e.target,n=t.value,a=t.name;this.setState({[a]:n})})),Ot(this,"onSubmit",(()=>{let{path:e,name:t}=this.state;this.validatePath(e)&&(t=t.replaceAll("/","_").trim(),this.props.onSubmit(e,t))})),Ot(this,"onKeyPress",(e=>{"Enter"===e.key&&this.onSubmit()}))}get inputClass(){return""===this.state.path?"":this.validatePath(this.state.path)?"b--green-muted focus-outline-green":"b--red-muted focus-outline-red"}get isDisabled(){return""===this.state.path||!this.validatePath(this.state.path)}render(){const e=this.props,{t:t,tReady:n,onCancel:l,onSubmit:r,className:i}=e,o=function(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}(e,Ct),s="w-90 mb1 pa1 tl bg-snow f7 charcoal-muted truncate";return a.createElement(et.aF,Pt({},o,{className:i,onCancel:l}),a.createElement(et.cw,{title:t("addByPathModal.title"),Icon:Nt.A},a.createElement("div",{className:"mb3 flex flex-column items-center"},a.createElement("p",{className:"mt0 charcoal tl w-90"},t("addByPathModal.description")+" "+t("addByPathModal.examples")),a.createElement("code",{className:s},"/ipfs/QmZTR5bcpQD7cFgTorqxZDYaew1Wqgfbd2ud9QqGPAkK2V"),a.createElement("code",{className:s},"QmPZ9gcCEpqKTo6aq61g2nXGUhM4iCL3ewB6LDXZCtioEB")),a.createElement("input",{onChange:this.onChange,onKeyPress:this.onKeyPress,value:this.state.value,name:"path",required:!0,placeholder:t("addByPathModal.importPathPlaceholder"),className:"input-reset charcoal ba b--black-20 br1 pa2 mb2 db w-90 center focus-outline ".concat(this.inputClass),type:"text"}),a.createElement("input",{onChange:this.onChange,onKeyPress:this.onKeyPress,value:this.state.name,placeholder:t("addByPathModal.namePlaceholder"),name:"name",className:"input-reset charcoal ba b--black-20 br1 pa2 mb2 db w-90 center focus-outline",type:"text"}),a.createElement("div",{className:"mt3 mb3 flex flex-column items-center"},a.createElement("p",{className:"mt0 charcoal tl w-90"},t("addByPathModal.preloadNote")))),a.createElement(et.NS,null,a.createElement(H.A,{className:"ma2 tc",bg:"bg-gray",onClick:l},t("actions.cancel")),a.createElement(H.A,{className:"ma2 tc",bg:"bg-teal",disabled:this.isDisabled,onClick:this.onSubmit},t("app:actions.import"))))}}Ot(kt,"propTypes",{onCancel:wt().func.isRequired,onSubmit:wt().func.isRequired,className:wt().string}),Ot(kt,"defaultProps",{className:""});const St=(0,o.CI)("files")(kt);var jt=n(55334);const At=["onCancel","className","onBulkCidImport"],Ft=e=>{let{onCancel:t,className:n="",onBulkCidImport:l}=e,r=(0,me.A)(e,At);const[i,s]=(0,a.useState)(null),[c,m]=(0,a.useState)(void 0),d=(0,a.useRef)(null),{t:u}=(0,o.Bd)("files"),p=!i;return(0,de.jsxs)(et.aF,(0,ce.A)((0,ce.A)({},r),{},{className:n,onCancel:t,children:[(0,de.jsxs)(et.cw,{title:u("bulkImportModal.title"),Icon:jt.A,children:[(0,de.jsxs)("div",{className:"mb3 flex flex-column items-center",children:[(0,de.jsx)("p",{className:"mt0 charcoal tl w-100",children:u("bulkImportModal.description")}),(0,de.jsxs)("code",{className:"w-100 mb1 pa1 tl bg-snow f7 charcoal-muted truncate",children:["bafkreibm6jg3ux5qumhcn2b3flc3tyu6dmlb4xa7u5bf44yegnrjhc4yeq",(0,de.jsx)("br",{}),"QmawceGscqN4o8Y8Fv26UUmB454kn2bnkXV5tEQYc4jBd6 barrel.png",(0,de.jsx)("br",{}),"QmbvrHYWXAU1BuxMPNRtfeF4DS2oPmo5hat7ocqAkNPr74 pi equals.png"]})]}),(0,de.jsx)("input",{id:"bulk-import",type:"file",className:"dn",multiple:!0,accept:".txt",ref:d,onChange:async e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!n)return;const a=await(async e=>{try{const t=(await e.text()).split("\n").filter((e=>e.trim()));for(const e of t){const[t]=e.trim().split(" ");if(!Et.J3(t))return{isValid:!1,error:u("bulkImportModal.invalidCids")}}return{isValid:!0}}catch(t){return{isValid:!1,error:u("bulkImportModal.failedToReadFile")}}})(n);s(a.isValid?n:null),m(a.error)}}),(0,de.jsx)(H.A,{onClick:()=>{d.current&&d.current.click()},className:"ma2 tc",bg:"bg-teal",children:u("bulkImportModal.select")}),i&&(0,de.jsx)("p",{className:"mt2 charcoal",children:"".concat(u("bulkImportModal.selectedFile"),": ").concat(i.name)}),c&&(0,de.jsx)("p",{className:"mt2 red",children:c})]}),(0,de.jsxs)(et.NS,{children:[(0,de.jsx)(H.A,{className:"ma2 tc",bg:"bg-gray",onClick:t,children:u("actions.cancel")}),(0,de.jsx)(H.A,{className:"ma2 tc",bg:"bg-teal",disabled:p,onClick:async()=>{if(i){const e=(0,ae.Vl)([i]);await l(e)}},children:u("app:actions.import")})]})]}))},It=["className","label","disabled","checked","onChange"],Mt=e=>{let{className:t="",label:n="",disabled:a=!1,checked:l=!1,onChange:r=()=>{}}=e,i=(0,me.A)(e,It);t="Radio dib sans-serif ".concat(t),a||(t+=" pointer");return(0,de.jsxs)("label",(0,ce.A)((0,ce.A)({className:t},i),{},{children:[(0,de.jsx)("input",{className:"absolute",type:"checkbox",checked:l,disabled:a,onChange:e=>{r(e.target.checked)}}),(0,de.jsx)("span",{className:"dib v-mid br-100 w1 h1 pa1 border-box pointer",children:(0,de.jsx)("span",{className:"db br-100 w-100 h-100 o-0 bg-aqua"})}),(0,de.jsx)("span",{className:"v-mid pl2",children:n})]}))},Rt=["bg","br","className","style","width","height","progress","time"];function Dt(){return Dt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Dt.apply(null,arguments)}function Tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tt(Object(n),!0).forEach((function(t){Lt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Lt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const _t=e=>{let{bg:t,br:n,className:l,style:r,width:i,height:o,progress:s,time:c}=e,m=function(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}(e,Rt);return a.createElement("div",Dt({className:"ProgressBar sans-serif overflow-hidden ".concat(n," dib ").concat(l," ").concat(i," ").concat(o),style:Bt({background:"#DDE6EB"},r)},m),c?a.createElement("div",{className:"".concat(n," h-100 ").concat(t),style:{animation:"progressBar ".concat(c,"s ease-in-out")}}):a.createElement("div",{className:"".concat(n," h-100 ").concat(t),style:{width:"".concat(s,"%")}}))};_t.defaultProps={className:"",width:"w-100",height:"h1",bg:"bg-aqua",br:"br-pill"};const qt=_t;var zt=n(90844),Ut=n(25820);const Wt=["t","tReady","onLeave","onSubmit","file","ipnsKeys","publicGateway","className","doFetchIpnsKeys","doUpdateExpectedPublishTime","expectedPublishTime"];function Gt(){return Gt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Gt.apply(null,arguments)}const Kt=e=>{let{t:t,tReady:n,onLeave:l,onSubmit:r,file:i,ipnsKeys:o,publicGateway:s,className:c,doFetchIpnsKeys:m,doUpdateExpectedPublishTime:u,expectedPublishTime:p}=e,f=function(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}(e,Wt);const[h,b]=(0,a.useState)(!0),[g,v]=(0,a.useState)(null),[y,x]=(0,a.useState)({name:"",id:""}),[w,E]=(0,a.useState)(""),[C,P]=(0,a.useState)(null),[O,k]=(0,a.useState)(!1);(0,a.useEffect)((()=>{b(""===y.name||null!==C)}),[y,C]),(0,a.useEffect)((()=>{m()}),[m]),(0,a.useEffect)((()=>{if(O){const e=setTimeout((()=>k(!1)),2e3);return()=>clearTimeout(e)}}),[O]);return a.createElement(et.aF,Gt({},f,{className:c,onCancel:l}),a.createElement(et.cw,{Icon:N.A,title:t("publishModal.title")},a.createElement("div",{className:"tl pv3"},t("publishModal.cidToPublish"),a.createElement("div",{className:"f6 mt1 charcoal-muted monospace"},i.cid.toString())),w?a.createElement("div",null,a.createElement("div",{className:"tl pv3"},t("publishModal.publishedUnderKey"),a.createElement("div",{className:"f6 mv2 charcoal-muted monospace"},a.createElement("a",{target:"_blank",rel:"noopener noreferrer",className:"link",href:w},y.name)),a.createElement("div",{className:"f6 charcoal-muted monospace truncate"},a.createElement("a",{target:"_blank",rel:"noopener noreferrer",className:"link",href:w},y.id))),a.createElement("p",{className:"charcoal tl center"},t("publishModal.sharingPrompt")),a.createElement("div",{className:"flex center mb2 relative"},a.createElement("input",{value:w,readOnly:!0,className:"input-reset flex-grow-1 charcoal-muted ba b--black-20 br1 pa2 focus-outline",style:{color:"rgba(128, 133, 145, ".concat(O?.6:1,")")},type:"text"}),a.createElement("div",{className:"absolute h2 pl2 flex items-center",style:{right:"4px",top:"50%",transform:"translateY(-50%)",background:"linear-gradient(90deg, rgba(255, 255, 255, 0.35), #ffffff 10%, #ffffff 100%)"}},O?a.createElement(a.Fragment,null,a.createElement("span",{className:"charcoal-muted strong f5"},t("publishModal.linkCopied")),a.createElement(Ut.A,{className:"fill-aqua w2"})):a.createElement(d.CopyToClipboard,{text:w,onCopy:()=>k(!0)},a.createElement(zt.A,{className:"fill-charcoal-muted w2 h2 pointer"}))))):C?a.createElement("div",null,a.createElement("p",{className:"charcoal tl center"},t("publishModal.pleaseWait")),a.createElement(qt,{bg:"bg-teal",style:{height:"8px"},time:p})):a.createElement("div",null,a.createElement("div",{className:"tl pv3"},t("publishModal.publishUnderKey")),a.createElement("div",{className:"publishModalKeys"},o.map((e=>a.createElement("button",{className:"flex items-center pa1 hoverable-button",key:e.name,onClick:()=>(e=>{E(""),v(null),x(e)})(e)},a.createElement(Mt,{className:"pv3 pl3 pr1 flex-none",checked:e.name===y.name,label:e.name,style:{pointerEvents:"none"}}))))),a.createElement("span",{className:"mb1 tl f7 charcoal-muted"},t("publishModal.help")),g&&a.createElement("p",{className:"ma0 lh-copy red f5 mw7"},g.toString()))),a.createElement(et.NS,null,w?a.createElement(H.A,{className:"ma2 tc ml-auto",onClick:l},t("app:actions.done")):a.createElement(a.Fragment,null,a.createElement(H.A,{className:"ma2 tc",bg:"bg-gray",onClick:l},t("app:actions.cancel")),a.createElement(H.A,{className:"ma2 tc",bg:"bg-teal",disabled:h,onClick:async()=>{try{const e=(new Date).getTime();P(e),await r(y.name),E("".concat(s,"/ipns/").concat(y.id));const t=(new Date).getTime();u((t-e)/1e3)}catch(e){v(e)}}},t("app:actions.publish")))))};Kt.defaultProps={className:""};const Yt=(0,i.N)("selectIpnsKeys","selectExpectedPublishTime","selectPublicGateway","doFetchIpnsKeys","doUpdateExpectedPublishTime",(0,o.CI)("files")(Kt));var Vt=n(27256);const Ht=["onLeave","className"];function Xt(){return Xt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Xt.apply(null,arguments)}const Jt={ArrowUp:"\u2191",ArrowDown:"\u2193",ArrowLeft:"\u2190",ArrowRight:"\u2192",Enter:"\u21b5",Space:"\u2423",Escape:"Esc",Delete:"Del",Backspace:"\u232b",mac:{Meta:"\u2318",Alt:"\u2325",Shift:"\u21e7",Control:"\u2303",Ctrl:"\u2303"},other:{Meta:"Win",Alt:"Alt",Shift:"Shift",Control:"Ctrl",Ctrl:"Ctrl"}},Qt=e=>{let{children:t,platform:n}=e;return a.createElement("kbd",{className:"dib v-mid lh-solid br2 charcoal ba b--gray br2 f7 fw6 ",style:{minWidth:"fit-content",padding:"6px",height:"fit-content",textAlign:"center"}},Jt[l=t]?Jt[l]:"mac"===n&&Jt.mac[l]?Jt.mac[l]:"mac"!==n&&Jt.other[l]?Jt.other[l]:l);var l},Zt=e=>{let{shortcut:t,description:n,platform:l}=e;return a.createElement("div",{className:"flex items-center justify-between pa2 bb b--black-10"},a.createElement("div",{className:"w-60 black f7"},n),a.createElement("div",{className:"w-40 tr"},Array.isArray(t)?t.map(((e,n)=>a.createElement(a.Fragment,{key:n},a.createElement(Qt,{platform:l},e),n<t.length-1&&a.createElement("span",{className:"mr1 gray"},"+")))):a.createElement(Qt,{platform:l},t)))},$t=e=>{let{title:t,shortcuts:n,platform:l}=e;return a.createElement("div",{className:"mb2 ba b--black-20"},a.createElement("h3",{className:"f7 fw6 bb b--black-20 black pa2 ma0"},t),a.createElement("div",{className:"br1"},n.map(((e,t)=>a.createElement(Zt,{key:t,shortcut:e.shortcut,description:e.description,platform:l})))))},en=e=>{let{onLeave:t,className:n}=e,l=function(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}(e,Ht);const[r,i]=(0,a.useState)("other"),{t:s}=(0,o.Bd)("files");(0,a.useEffect)((()=>{const e=navigator.platform.toUpperCase().indexOf("MAC")>=0||navigator.userAgent.includes("Mac")&&!navigator.userAgent.includes("Mobile");i(e?"mac":"other")}),[]);const c=[{shortcut:"ArrowDown",description:s("shortcutModal.moveDown")},{shortcut:"ArrowUp",description:s("shortcutModal.moveUp")},{shortcut:"ArrowLeft",description:s("shortcutModal.moveLeft")},{shortcut:"ArrowRight",description:s("shortcutModal.moveRight")},{shortcut:"Enter",description:s("shortcutModal.navigate")}],m=[{shortcut:"Space",description:s("shortcutModal.toggleSelection")},{shortcut:"Escape",description:s("shortcutModal.deselectAll")}],d=[{shortcut:"F2",description:s("shortcutModal.rename")},{shortcut:"Delete",description:s("shortcutModal.delete")}],u=[{shortcut:["Shift","?"],description:s("shortcutModal.showShortcuts")}];return a.createElement(et.aF,Xt({},l,{className:"".concat(n," bg-near-black white")}),a.createElement("div",{className:"flex items-center justify-between pa2 bb b--black-20"},a.createElement("h2",{className:"ma0 f5 fw6 black"},s("shortcutModal.title")),a.createElement("button",{onClick:t,className:"button-reset bn bg-transparent pa0 pointer white","aria-label":"Close"},a.createElement(Vt.A,{className:"pointer w2 h2 top-0 right-0 fill-gray",onClick:t}))),a.createElement("div",{className:"pa2 overflow-auto",style:{maxHeight:"70vh"}},a.createElement("div",{className:"flex flex-wrap"},a.createElement("div",{className:"w-100 w-50-l pa1"},a.createElement($t,{title:s("shortcutModal.navigation"),shortcuts:c,platform:r}),a.createElement($t,{title:s("shortcutModal.selection"),shortcuts:m,platform:r})),a.createElement("div",{className:"w-100 w-50-l pa1"},a.createElement($t,{title:s("shortcutModal.actions"),shortcuts:d,platform:r}),a.createElement($t,{title:s("shortcutModal.other"),shortcuts:u,platform:r})))))};en.defaultProps={className:""};const tn=en;var nn=n(35687),an=n(86832);const ln=["t","className","onCancel","onSubmit"];const rn=(0,o.CI)("files")((e=>{let{t:t,className:n,onCancel:l,onSubmit:r}=e;!function(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}}(e,ln);const i=(0,a.useRef)(null),[o,s]=(0,a.useState)(),[c,m]=(0,a.useState)(""),d=(0,a.useMemo)((()=>c),[c]),u=(0,a.useMemo)((()=>!o||!d),[o,d]),p=(0,a.useMemo)((()=>{if(o)return d?"b--green-muted focus-outline-green":"b--red-muted focus-outline-red"}),[d,o]);return a.createElement(et.Ay,{className:n,onCancel:l},a.createElement(et.cw,{title:t("addByCarModal.title"),Icon:j.A},a.createElement("div",{className:"mb3 flex flex-row items-center"},a.createElement("p",{className:"mt0 center charcoal tl w-90"},t("addByCarModal.description"))),a.createElement("label",{htmlFor:"import-car-file-name",className:"mt0 f7 center charcoal-muted tl w-90"},t("addByCarModal.renameImportPath")),a.createElement("input",{id:"import-car-file-name",onChange:e=>{e.preventDefault(),m(e.target.value)},value:c,name:"name",placeholder:t("addByCarModal.namePlaceholder"),className:"input-reset charcoal ba b--black-20 br1 pa2 db w-90 center focus-outline ".concat(p),type:"text"}),a.createElement("input",{className:"dn",ref:i,id:"car-file-input",type:"file",placeholder:"File",accept:".car",onChange:e=>{const t=(0,ae.Vl)(e.target.files);if(t[0]){const e=t[0],n=t[0].path.replaceAll(".car","");s(e),0===c.length&&m(n)}}}),a.createElement(H.A,{className:"ma2 tc",bg:"bg-teal",onClick:()=>{i&&i.current.click()}},t("addByCarModal.selectCARButtonText")),null!=o?a.createElement("div",{className:"mt1 f7 center charcoal-muted tl w-90"},o.path):null),a.createElement(et.NS,null,a.createElement(H.A,{className:"ma2 tc",bg:"bg-gray",onClick:l},t("actions.cancel")),a.createElement(H.A,{className:"ma2 tc",bg:"bg-teal",disabled:u,onClick:()=>{r(o,c)}},t("app:actions.import"))))}));function on(){return on=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},on.apply(null,arguments)}function sn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function cn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const mn="new_folder",dn="share",un="rename",pn="delete",fn="add_by_path",hn="add_by_car",bn="bulk_cid_import",gn="cli_tutor_mode",vn="pinning",yn="publish",xn="shortcuts";class wn extends a.Component{constructor(){var e;super(...arguments),e=this,cn(this,"state",{readyToShow:!1,rename:{folder:!1,path:"",filename:""},pinning:{file:null},publish:{file:null},delete:{filesCount:0,folderCount:0,files:[]},link:"",command:"ipfs --help"}),cn(this,"onAddByPath",((e,t)=>{this.props.onAddByPath(e,t),this.leave()})),cn(this,"onAddByCar",((e,t)=>{this.props.onAddByCar(e,t),this.leave()})),cn(this,"onBulkCidImport",((e,t)=>{this.props.onBulkCidImport(e,t),this.leave()})),cn(this,"makeDir",(e=>{this.props.onMakeDir((0,te.join)(this.props.root,e)),this.leave()})),cn(this,"rename",(e=>{const{filename:t,path:n}=this.state.rename,{onMove:a}=this.props;""!==e&&e!==t&&a(n,n.replace(t,e)),this.leave()})),cn(this,"delete",(e=>{const{files:t}=this.state.delete;this.props.onRemove(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sn(Object(n),!0).forEach((function(t){cn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({files:t},e)),this.leave()})),cn(this,"leave",(()=>{this.setState({readyToShow:!1}),this.props.done()})),cn(this,"onPinningSet",(function(){e.props.onPinningSet(...arguments),e.leave()})),cn(this,"publish",(async e=>{const t=this.state.publish.file.cid.toString();await this.props.onPublish(t,e)})),cn(this,"cliCommand",((e,t,n)=>{let a="",l="",r="",i="";switch(t&&(a=t[0].cid,l=t[0].name,r=t[0].pinned,i=(0,an.c)(t[0].path)),e){case F.p5.ADD_FILE:case F.p5.ADD_DIRECTORY:case F.p5.CREATE_NEW_DIRECTORY:case F.p5.FROM_IPFS:case F.p5.FROM_CAR:return F.Kd[e](n.substring(6));case F.p5.DELETE_FILE_FROM_IPFS:case F.p5.REMOVE_FILE_FROM_IPFS:return F.Kd[e](i);case F.p5.DOWNLOAD_OBJECT_COMMAND:return F.Kd[e](a);case F.p5.RENAME_IPFS_OBJECT:return F.Kd[e](i,l);case F.p5.PIN_OBJECT:return F.Kd[e](a,r?"rm":"add");default:return F.Kd[e]()}}))}componentDidUpdate(e){const{show:t,files:n,t:a,onShareLink:l,cliOptions:r,root:i}=this.props;if(t!==e.show)switch(t){case dn:this.setState({link:a("generating"),readyToShow:!0}),l(n).then((e=>this.setState({link:e})));break;case un:{const e=n[0];this.setState({readyToShow:!0,rename:{folder:"directory"===e.type,path:e.path,filename:e.path.split("/").pop()}});break}case pn:{let e=0,t=0;n.forEach((n=>"file"===n.type?e++:t++)),this.setState({readyToShow:!0,delete:{files:n,filesCount:e,foldersCount:t}});break}case mn:case fn:case hn:case bn:this.setState({readyToShow:!0});break;case gn:this.setState({command:this.cliCommand(r,n,i)},(()=>{this.setState({readyToShow:!0})}));break;case vn:{const e=n[0];return this.setState({readyToShow:!0,pinning:{file:e}})}case yn:{const e=n[0];return this.setState({readyToShow:!0,publish:{file:e}})}case xn:this.setState({readyToShow:!0})}}render(){const{show:e,t:t}=this.props,{readyToShow:n,link:l,rename:r,command:i}=this.state;return a.createElement("div",null,a.createElement(Ve.A,{show:e===mn&&n,onLeave:this.leave},a.createElement(Ze,{className:"outline-0",onCancel:this.leave,onSubmit:this.makeDir})),a.createElement(Ve.A,{show:e===dn&&n,onLeave:this.leave},a.createElement(lt,{className:"outline-0",link:l,onLeave:this.leave})),a.createElement(Ve.A,{show:e===un&&n,onLeave:this.leave},a.createElement(st,on({className:"outline-0"},r,{onCancel:this.leave,onSubmit:this.rename}))),a.createElement(Ve.A,{show:e===pn&&n,onLeave:this.leave},a.createElement(yt,on({className:"outline-0"},this.state.delete,{onCancel:this.leave,onRemove:this.delete}))),a.createElement(Ve.A,{show:e===fn&&n,onLeave:this.leave},a.createElement(St,{className:"outline-0",onSubmit:this.onAddByPath,onCancel:this.leave})),a.createElement(Ve.A,{show:e===hn&&n,onLeave:this.leave},a.createElement(rn,{className:"outline-0",onSubmit:this.onAddByCar,onCancel:this.leave})),a.createElement(Ve.A,{show:e===bn&&n,onLeave:this.leave},a.createElement(Ft,{className:"outline-0",onBulkCidImport:this.onBulkCidImport,onCancel:this.leave})),a.createElement(Ve.A,{show:e===gn&&n,onLeave:this.leave},a.createElement(nn.A,{onLeave:this.leave,filesPage:!0,command:i,t:t})),a.createElement(Ve.A,{show:e===vn&&n,onLeave:this.leave},a.createElement(ht,{file:this.state.pinning.file,className:"outline-0",onCancel:this.leave,onPinningSet:this.onPinningSet})),a.createElement(Ve.A,{show:e===yn&&n,onLeave:this.leave},a.createElement(Yt,{file:this.state.publish.file,className:"outline-0",onLeave:this.leave,onSubmit:this.publish})),a.createElement(Ve.A,{show:e===xn&&n,onLeave:this.leave},a.createElement(tn,{className:"outline-0",onLeave:this.leave})))}}const En=(0,o.CI)("files")(wn),Nn=["t","tReady","path","onClick","className","onContextMenuHandle","onAddFiles","onMove","doGetPathInfo","doCheckIfPinned"];function Cn(){return Cn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Cn.apply(null,arguments)}function Pn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function On(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pn(Object(n),!0).forEach((function(t){kn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Sn=e=>{let{index:t,link:n,immutable:l,onAddFiles:r,onMove:i,onClick:o,onContextMenuHandle:s,getPathInfo:c,checkIfPinned:m}=e;const[{isOver:d},u]=(0,ie.H)({accept:[re.FILE,"FILE"],drop:async e=>{let{files:t,filesPromise:a,path:l}=e;if(t)(async()=>{const e=await a;r(await(0,ae.Vl)(e),n.path)})();else{const e=l,t=(0,te.join)(n.path,(0,te.basename)(l));try{await i(e,t)}catch(o){console.error(o)}}},collect:e=>({isOver:e.isOver()})}),p=(0,a.useRef)();return a.createElement("span",{className:"dib pv1 pr1",ref:u},a.createElement("button",{ref:p,title:n.realName,className:ee()("BreadcrumbsButton relative",0!==t&&"navy",0===t&&"f7 pa1 br2 mr2",0===t&&(l?"bg-charcoal-muted white":"bg-navy white"),l&&(n.last||0===t)&&"no-events",n.last&&"b",d&&"dragging"),onClick:()=>o({path:n.path}),onContextMenu:e=>0!==t&&(async e=>{e.preventDefault();const{path:t}=n,a=t.substring(t.indexOf("/",1),t.length),{cid:l,type:r}=await c(a),i=await m(l);s(void 0,p.current,On(On({},n),{},{type:r,cid:l,pinned:i}))})(e)},n.name))};const jn=(0,i.N)("doGetPathInfo","doCheckIfPinned",(0,o.CI)("files")((e=>{let{t:t,tReady:n,path:l,onClick:r,className:i,onContextMenuHandle:o,onAddFiles:s,onMove:c,doGetPathInfo:m,doCheckIfPinned:d}=e,u=function(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}(e,Nn);const[p,f]=(0,a.useState)(!1),[h,b]=(0,a.useState)(!1),g=(0,a.useRef)();(0,a.useEffect)((()=>{const e=g.current,t=!!e&&(e.offsetHeight<e.scrollHeight||e.offsetWidth<e.scrollWidth);t!==p&&f(t)}),[p]);const v=(0,a.useMemo)((()=>function(e,t,n,a){e.endsWith("/")&&(e=e.substring(0,e.length-1));const l=e.split("/").map((e=>({name:e,path:e})));for(let r=1;r<l.length;r++){const e=l[r].name;l[r]={name:e,path:l[r-1].path+"/"+l[r].path},e.length>=30&&(l[r].realName=e,l[r].name="".concat(e.substring(0,4),"...").concat(e.substring(e.length-4,e.length)))}l.shift(),("ipfs"===l[0].name||"ipns"===l[0].name)&&!n&&a(!0);return l[0].name=t(l[0].name),l[l.length-1].last=!0,l}(l,t,h,b)),[h,l,t]);return a.createElement("nav",Cn({"aria-label":t("breadcrumbs"),className:ee()("Breadcrumbs flex items-center sans-serif overflow-hidden sticky top-0",i)},u),a.createElement("div",{className:"nowrap overflow-hidden relative flex flex-wrap",ref:g},a.createElement("div",{className:"absolute left-0 top-0 h-100 w1 ".concat(p?"":"dn"),style:{background:"linear-gradient(to right, #ffffff 0%, transparent 100%)"}}),v.map(((e,t)=>a.createElement("div",{key:"".concat(t,"link")},a.createElement(Sn,{index:t,link:e,immutable:h,onAddFiles:s,onMove:c,onClick:r,onContextMenuHandle:o,getPathInfo:m,checkIfPinned:d}),t!==v.length-1&&a.createElement("span",{className:"dib pr1 pv1 mid-gray v-top"},"/"))))))})));var An=n(13711);function Fn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const In=(0,o.CI)("app")((e=>{let{t:t,onClick:n}=e;return a.createElement(H.A,{id:"import-button",bg:"bg-navy",color:"white",className:"f6 flex justify-center items-center",minWidth:"100px",onClick:n},a.createElement("span",null,a.createElement("span",{className:"aqua"},"+")," ",t("actions.import")))}));class Mn extends a.Component{constructor(){super(...arguments),Fn(this,"state",{dropdown:!1}),Fn(this,"toggleDropdown",(()=>{this.setState((e=>({dropdown:!e.dropdown})))})),Fn(this,"onAddFolder",(()=>(this.toggleDropdown(),this.folderInput.click()))),Fn(this,"onAddFile",(async()=>(this.toggleDropdown(),this.filesInput.click()))),Fn(this,"onInputChange",(e=>async()=>{this.props.onAddFiles((0,ae.Vl)(e.files)),e.value=null})),Fn(this,"onAddByPath",(()=>{this.props.onAddByPath(),this.toggleDropdown()})),Fn(this,"onAddByCar",(()=>{this.props.onAddByCar(),this.toggleDropdown()})),Fn(this,"onBulkCidImport",(()=>{this.props.onBulkCidImport(),this.toggleDropdown()})),Fn(this,"onNewFolder",(()=>{this.props.onNewFolder(),this.toggleDropdown()})),Fn(this,"onCliTutorMode",(async e=>{await this.props.doSetCliOptions(e),this.props.onCliTutorMode(),this.toggleDropdown()}))}render(){const{t:e,isCliTutorModeEnabled:t}=this.props;return a.createElement("div",{className:this.props.className},a.createElement(x,null,a.createElement(In,{onClick:this.toggleDropdown}),a.createElement(y,{top:3,open:this.state.dropdown,onDismiss:this.toggleDropdown},a.createElement(v,{onClick:this.onAddFile,id:"add-file",onCliTutorMode:()=>this.onCliTutorMode(F.p5.ADD_FILE),isCliTutorModeEnabled:t},a.createElement(jt.A,{className:"fill-aqua w2 mr1"}),e("app:terms.file")),a.createElement(v,{onClick:this.onAddFolder,id:"add-folder",onCliTutorMode:()=>this.onCliTutorMode(F.p5.ADD_DIRECTORY),isCliTutorModeEnabled:t},a.createElement(He.A,{className:"fill-aqua w2 mr1"}),e("app:terms.folder")),a.createElement(v,{onClick:this.onNewFolder,id:"add-new-folder",onCliTutorMode:()=>this.onCliTutorMode(F.p5.CREATE_NEW_DIRECTORY),isCliTutorModeEnabled:t},a.createElement(An.A,{className:"fill-aqua w2 h2 mr1"}),e("newFolder")),a.createElement(v,{onClick:this.onAddByPath,id:"add-by-path",onCliTutorMode:()=>this.onCliTutorMode(F.p5.FROM_IPFS),isCliTutorModeEnabled:t},a.createElement(Nt.A,{className:"fill-aqua w2 mr1"}),e("addByPath")),a.createElement(v,{onClick:this.onAddByCar,id:"add-by-car",onCliTutorMode:()=>this.onCliTutorMode(F.p5.FROM_CAR),isCliTutorModeEnabled:t},a.createElement(j.A,{className:"fill-aqua w2 mr1"}),e("addByCar")),a.createElement(v,{onClick:this.onBulkCidImport,id:"bulk-cid-import"},a.createElement(jt.A,{className:"fill-aqua w2 mr1"}),e("bulkImport")))),a.createElement("input",{id:"file-input",type:"file",className:"dn",multiple:!0,ref:e=>{this.filesInput=e},onChange:this.onInputChange(this.filesInput)}),a.createElement("input",{id:"directory-input",type:"file",className:"dn",multiple:!0,webkitdirectory:"true",ref:e=>{this.folderInput=e},onChange:this.onInputChange(this.folderInput)}))}}const Rn=(0,i.N)("selectIsCliTutorModeEnabled","doOpenCliTutorModal","doSetCliOptions",(0,o.CI)("files")(Mn)),Dn=["children","text","isLink","className"];function Tn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Bn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tn(Object(n),!0).forEach((function(t){Ln(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ln(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _n(){return _n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_n.apply(null,arguments)}const qn=e=>{let{children:t,text:n,isLink:l=!1,className:r=""}=e,i=function(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}(e,Dn);return a.createElement("div",_n({className:ee()(r,"tc pa3",i.onClick&&"pointer")},i),a.createElement("span",{className:"nowrap db f4 charcoal"},t),a.createElement("span",{className:"nowrap db ttu f6 montserrat fw4 ".concat(l?"link":"charcoal-muted")},n))},zn=e=>(0,ae.Xe)(e,{round:e>=1073741824?1:0,spacer:""});class Un extends a.Component{constructor(){super(...arguments),Ln(this,"handleContextMenu",(e=>{const t=this.dotsWrapper.getBoundingClientRect();this.props.handleContextMenu(e,"TOP",Bn(Bn({},this.props.files),{},{pinned:this.props.pins.includes(this.props.files.cid.toString())}),t)})),Ln(this,"handleBreadCrumbsContextMenu",((e,t,n)=>{const a=t.getBoundingClientRect();this.props.handleContextMenu(e,"TOP",n,a)}))}render(){var e=this;const{currentDirectorySize:t,hasUpperDirectory:n,files:l,filesPathInfo:r,filesSize:i,onNavigate:o,repoSize:s,pendingPins:c,failedPins:m,completedPins:d,t:u,children:p}=this.props,f=c.length+m.length+d.length;return a.createElement("div",{className:"db flex-l justify-between items-center mb3"},a.createElement("div",{className:"flex items-center w-100 justify-between mr3"},a.createElement("div",{className:"breadheader overflow-hidden mr1"},a.createElement(jn,{className:"joyride-files-breadcrumbs",path:l?l.path:"/404",onClick:o,onContextMenuHandle:function(){return e.handleBreadCrumbsContextMenu(...arguments)},onAddFiles:this.props.onAddFiles,onMove:this.props.onMove})),p),a.createElement("div",{className:"flex justify-between items-center bg-snow-muted joyride-files-add"},f>0&&a.createElement("a",{href:"#/pins",alt:u("pinningQueue"),title:u("pinningQueue"),className:"ml3"},a.createElement(Ce.A,{style:{width:"3rem"},className:"fill-teal PendingAnimation"})),a.createElement(qn,{title:u("currentLocationDescription"),text:u(n?"currentLocation":"currentLocationRoot")},n?a.createElement("span",null,zn(t),a.createElement("span",{className:"f5 gray"},"/",zn(i))):zn(i)),a.createElement(qn,{title:u("localDatastoreDescription"),text:u("localDatastore")},zn(s)),a.createElement("div",{className:"pa3"},a.createElement("div",{className:"ml-auto flex items-center"},l&&"directory"===l.type&&r.isMfs?a.createElement(Rn,{onNewFolder:this.props.onNewFolder,onAddFiles:this.props.onAddFiles,onAddByPath:this.props.onAddByPath,onAddByCar:this.props.onAddByCar,onBulkCidImport:this.props.onBulkCidImport,onCliTutorMode:this.props.onCliTutorMode}):a.createElement("div",{ref:e=>{this.dotsWrapper=e}},a.createElement(H.A,{bg:"bg-navy",color:"white",fill:"fill-aqua",className:"f6 relative flex justify-center items-center tc",minWidth:"100px",disabled:!l||r.isRoot||"unknown"===l.type,onClick:this.handleContextMenu},a.createElement(se.A,{className:"w1 mr2"}),u("app:actions.more")))))))}}const Wn=(0,i.N)("selectPins","selectHasUpperDirectory","selectFilesSize","selectRepoSize","selectRepoNumObjects","selectFilesPathInfo","selectCurrentDirectorySize","selectPendingPins","selectFailedPins","selectCompletedPins",(0,o.CI)("files")(Un));var Gn=n(73487);function Kn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Yn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kn(Object(n),!0).forEach((function(t){Vn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Hn=(e,t)=>{var n;return[...Qn((null===e||void 0===e||null===(n=e.message)||void 0===n?void 0:n.entries)||new Map).values()].map((n=>a.createElement("li",{className:"flex w-100 bb b--light-gray items-center f6 charcoal",key:n.path},Xn(n),a.createElement("span",{className:"fileImportStatusName truncate"},n.path),a.createElement("span",{className:"gray mh2"}," |",n.entries&&a.createElement("span",null," ",t("filesImportStatus.count",{count:n.entries.length})," | "),a.createElement("span",{className:"ml2"},(0,ae.Xe)(n.size))),Jn(e,n.progress))))},Xn=e=>"directory"===e.type?a.createElement(fe.A,{className:"fileImportStatusIcon fill-aqua pa1"}):a.createElement(he.A,{className:"fileImportStatusIcon fill-aqua pa1"}),Jn=(e,t)=>{switch(e.status){case"Pending":return a.createElement($n,{complete:100===t});case"Failed":return a.createElement(X.A,{className:"dark-red w2 ph1",fill:"currentColor"});default:return a.createElement($n,{complete:!0})}},Qn=e=>{const t=new Map;for(const n of e){const e=Zn(n);if(null==e)t.set(n.path,Yn({type:"file"},n));else{const a=t.get("".concat(e,"/"));a?(a.entries.push(n),a.size+=n.size):t.set("".concat(e,"/"),{type:"directory",size:n.size,path:e,entries:[n]})}}return t},Zn=e=>{let{path:t}=e;const n=t.indexOf("/");return n<0?null:t.slice(0,n)},$n=e=>{let{complete:t}=e;return t?a.createElement(Ut.A,{className:"green w2 ph1",fill:"currentColor"}):a.createElement("span",{className:"w2 ph1"})},ea=e=>{let{filesFinished:t,filesPending:n,filesErrors:l,doFilesClear:r,initialExpanded:i,t:o}=e;const s=(0,a.useMemo)((()=>t.sort(((e,t)=>t.start-e.start))),[t]),[c,m]=(0,a.useState)(i),d=(0,a.useCallback)((e=>{r(),e.stopPropagation()}),[r]);if(!t.length&&!n.length&&!l.length)return null;const u=t.length?t.reduce(((e,t)=>e+t.message.entries.length),0):0,p=n.reduce(((e,t)=>e+Qn(t.message.entries).size),0),f=Math.floor(n.reduce(((e,t)=>{let{message:{progress:n}}=t;return e+n}),0)/n.length);return a.createElement("div",{className:"fileImportStatus fixed bottom-1 w-100 flex justify-center",style:{zIndex:14,pointerEvents:"none"}},a.createElement("div",{className:"relative br1 dark-gray w-40 center ba b--light-gray bg-white",style:{pointerEvents:"auto"}},a.createElement("div",{tabIndex:"0",onClick:()=>m(!c),onKeyPress:e=>{var t;const n="BUTTON"===e.nativeEvent.target.tagName;"Space"!==(null===(t=e.nativeEvent)||void 0===t?void 0:t.code)||n||m(!c)},role:"button",className:"fileImportStatusButton pv2 ph3 relative flex items-center no-select pointer charcoal w-100 justify-between","aria-expanded":c,style:{background:"#F0F6FA"}},a.createElement("span",null,n.length?"".concat(o("filesImportStatus.importing",{count:p})," (").concat(f,"%)"):o("filesImportStatus.imported",{count:u})),a.createElement("div",{className:"flex items-center"},a.createElement("button",{className:"fileImportStatusArrow ph0 flex",onClick:()=>m(!c),"aria-expanded":c,"aria-label":o("filesImportStatus.toggleDropdown")},a.createElement(Gn.A,{viewBox:"10 10 80 80",fill:"currentColor",opacity:"0.7","aria-hidden":"true"})),a.createElement("button",{className:"fileImportStatusCancel ph0 flex",onClick:d,"aria-label":o("filesImportStatus.closeDropdown")},a.createElement(Vt.A,{fill:"currentColor",opacity:"0.7"})))),a.createElement("ul",{className:"fileImportStatusRow pa0 ma0","aria-hidden":!c},n.map((e=>Hn(e,o))),s.map((e=>Hn(e,o))),l.map((e=>Hn(e,o)))),n.length?a.createElement(qt,{progress:f,bg:"bg-teal",br:"br0",className:"absolute bottom-0",style:{height:"4px"}}):null))};ea.defaultProps={filesFinished:[],filesPending:[],filesErrors:[],initialExpanded:!0};const ta=(0,i.N)("selectFilesFinished","selectFilesPending","selectFilesErrors","doFilesClear",(0,o.CI)("files")(ea));var na=n(45447);const aa=["t","tReady","animateOnStart","count","size","unselect","remove","share","setPinning","download","rename","inspect","className","style","isMfs"];function la(){return la=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},la.apply(null,arguments)}function ra(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ia(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ra(Object(n),!0).forEach((function(t){oa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ra(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oa(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const sa={bar:{background:"#F0F6FA",borderColor:"#CFE0E2",color:"#59595A"},count:{backgroundColor:"#69C4CD",color:"#F9FAFB",width:"38px",height:"38px"},countNumber:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"},size:{color:"#A4BFCC"}},ca=e=>e?"w3 pointer hover-fill-navy-muted":"w3",ma=e=>e?"pointer":"disabled o-50";class da extends a.Component{constructor(e){super(e),oa(this,"state",{force100:!1}),this.containerRef=a.createRef()}componentDidMount(){this.containerRef.current&&this.containerRef.current.focus()}render(){const e=this.props,{t:t,tReady:n,animateOnStart:l,count:r,size:i,unselect:o,remove:s,share:c,setPinning:m,download:d,rename:u,inspect:p,className:f,style:h,isMfs:b}=e,g=function(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}(e,aa),v=1===r;let y={title:t("individualFilesOnly")};return 1===r&&(y={}),a.createElement("div",la({className:ee()("sans-serif bt w-100 pa3 ph4-l selectedActions",f,l&&"selectedActionsAnimated"),style:ia(ia({},sa.bar),h)},g),a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",{className:"w5-l"},a.createElement("div",{className:"flex items-center"},a.createElement("div",{className:"mr3 relative f3 fw6 flex-shrink-0 dib br-100",style:sa.count},a.createElement("span",{className:"absolute",style:sa.countNumber},r)),a.createElement("div",{className:"dn db-l f6"},a.createElement("p",{className:"ma0"},t("filesSelected",{count:r})),a.createElement("p",{className:"ma0 mt1",style:sa.size},t("totalSize",{size:(0,ae.Xe)(i)}))))),a.createElement("div",{className:"flex",role:"menu","aria-label":t("menuOptions"),ref:this.containerRef},a.createElement("button",{role:"menuitem",className:"tc mh2",onClick:c},a.createElement(E.A,{className:"w3 hover-fill-navy-muted",fill:"#A4BFCC","aria-hidden":"true"}),a.createElement("p",{className:"ma0 f6"},t("actions.share"))),a.createElement("button",{role:"menuitem",className:"tc mh2",onClick:d},a.createElement(S.A,{className:"w3 hover-fill-navy-muted",fill:"#A4BFCC","aria-hidden":"true"}),a.createElement("p",{className:"ma0 f6"},t("app:actions.download"))),a.createElement("button",{role:"menuitem",className:ee()("tc mh2",ma(b)),onClick:b?s:null},a.createElement(k.A,{className:ca(b),fill:"#A4BFCC","aria-hidden":"true"}),a.createElement("p",{className:"ma0 f6"},t("app:actions.remove"))),a.createElement("button",{role:"menuitem",className:ee()("tc mh2",ma(v)),onClick:v?m:null},a.createElement(A.A,{className:ca(v),fill:"#A4BFCC","aria-hidden":"true"}),a.createElement("p",{className:"ma0 f6"},t("app:actions.setPinning"))),a.createElement("button",la({role:"menuitem",className:ee()("tc mh2",ma(v)),onClick:v?p:null},y),a.createElement(P.A,{className:ca(v),fill:"#A4BFCC","aria-hidden":"true"}),a.createElement("p",{className:"ma0 f6"},t("app:actions.inspect"))),a.createElement("button",la({role:"menuitem",className:ee()("tc mh2",ma(v&&b)),onClick:v&&b?u:null},y),a.createElement(C.A,{className:ca(v&&b),fill:"#A4BFCC","aria-hidden":"true"}),a.createElement("p",{className:"ma0 f6"},t("app:actions.rename")))),a.createElement("div",null,a.createElement("button",{onClick:o,className:"flex items-center justify-end f6 charcoal"},a.createElement("span",{className:"mr2 dn db-l"},t("app:actions.unselectAll")),a.createElement("span",{className:"mr2 dn db-m"},t("app:actions.clear")),a.createElement(Vt.A,{onClick:o,className:"fill-charcoal w1 o-70",viewBox:"37 40 27 27"})))))}}oa(da,"propTypes",{count:wt().number.isRequired,size:wt().number.isRequired,unselect:wt().func.isRequired,remove:wt().func.isRequired,setPinning:wt().func.isRequired,share:wt().func.isRequired,download:wt().func.isRequired,rename:wt().func.isRequired,inspect:wt().func.isRequired,t:wt().func.isRequired,tReady:wt().bool.isRequired,isMfs:wt().bool.isRequired,animateOnStart:wt().bool}),oa(da,"defaultProps",{className:""});const ua=(0,o.CI)("files")(da);function pa(){return pa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},pa.apply(null,arguments)}function fa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ha(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fa(Object(n),!0).forEach((function(t){ba(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ba(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ga=e=>{let{files:t,onDownload:n,onClose:l}=e;return t&&"file"===t.type?a.createElement(Q,pa({},t,{onDownload:n,onClose:l})):null},va=(0,i.N)("selectIpfsProvider","selectIpfsConnected","selectFiles","selectFilesIsFetching","selectRemotePins","selectPendingPins","selectFailedPins","selectFilesPathInfo","doUpdateHash","doPinsFetch","doFetchPinningServices","selectPinningServices","doFetchRemotePins","doFilesFetch","doFilesMove","doFilesMakeDir","doFilesShareLink","doFilesCidProvide","doFilesDelete","doFilesAddPath","doAddCarFile","doFilesNavigateTo","doFilesUpdateSorting","selectFilesSorting","selectToursEnabled","doFilesWrite","doFilesBulkCidImport","doFilesDownloadLink","doFilesDownloadCarLink","doFilesSizeGet","selectIsCliTutorModeEnabled","selectIsCliTutorModalOpen","doOpenCliTutorModal","doSetCliOptions","selectCliOptions","doSetPinning","doPublishIpnsKey",(0,D.A)((0,o.CI)("files")((e=>{var t,n;let{doFetchPinningServices:i,doFilesFetch:d,doPinsFetch:u,doFilesSizeGet:p,doFilesDownloadLink:f,doFilesDownloadCarLink:h,doFilesWrite:b,doAddCarFile:g,doFilesBulkCidImport:v,doFilesAddPath:y,doUpdateHash:x,doFilesUpdateSorting:w,doFilesNavigateTo:E,doFilesMove:N,doSetCliOptions:C,doFetchRemotePins:P,remotePins:O,pendingPins:k,failedPins:S,ipfsProvider:j,ipfsConnected:A,doFilesMakeDir:F,doFilesShareLink:I,doFilesCidProvide:M,doFilesDelete:D,doSetPinning:T,onRemotePinClick:B,doPublishIpnsKey:L,files:q,filesPathInfo:z,filesIsFetching:U,pinningServices:W,toursEnabled:G,handleJoyrideCallback:K,isCliTutorModeEnabled:Y,cliOptions:V,filesSorting:H,t:X}=e;const{doExploreUserProvidedPath:J}=(0,na.Nh)(),Q=(0,a.useRef)(),[Z,$]=(0,a.useState)({show:null,files:null}),[ee,te]=(0,a.useState)({isOpen:!1,translateX:0,translateY:0,file:null}),[ne,ae]=(0,a.useState)((()=>(0,m.L)("files.viewMode")||"list")),[le,re]=(0,a.useState)([]);(0,a.useEffect)((()=>{i(),d(),u(),p()}),[i,d,u,p]),(0,a.useEffect)((()=>{(A||z.path)&&d()}),[A,z,d]),(0,a.useEffect)((()=>{const e=e=>{"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&"?"===e.key&&e.shiftKey&&(e.preventDefault(),de(xn))};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)}),[]),(0,a.useEffect)((()=>{(0,m.c)("files.viewMode",ne)}),[ne]);const ie=async e=>{const t=await f(e);window.location.href=t},se=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";""===t&&(t=q.path),b(e,t)},ce=(0,a.useCallback)((()=>{null!=(null===q||void 0===q?void 0:q.parentPath)&&"/"!==(null===q||void 0===q?void 0:q.parentPath)&&x(null===q||void 0===q?void 0:q.parentPath)}),[null===q||void 0===q?void 0:q.parentPath,x]),me=e=>x("/explore/".concat(e)),de=function(e){return $({show:e,files:arguments.length>1&&void 0!==arguments[1]?arguments[1]:null})},ue=(e,t,n,a)=>{void 0!==e&&"string"!==typeof e&&(e.preventDefault(),e.persist());const r=(0,l.findDOMNode)(Q.current),i=r.getBoundingClientRect();let o=0,s=0;switch(t){case"RIGHT":{const t=window.innerWidth-r.parentNode.getBoundingClientRect().right;o=window.innerWidth-e.clientX-t-20,s=i.y+i.height/2-e.clientY-10;break}case"TOP":{const e=r.parentNode.getBoundingClientRect();o=e.right-a.right,s=-(a.bottom-e.top+11);break}default:o=1,s=i.y+i.height/2-(a&&a.y)-30}te({isOpen:!ee.isOpen,translateX:o,translateY:s,file:n})},pe=e=>{let{t:t,files:n,remotePins:l,pendingPins:r,failedPins:i,doExploreUserProvidedPath:s}=e;const c=(0,a.useMemo)((()=>le.map((e=>{var t;return null===n||void 0===n||null===(t=n.content)||void 0===t?void 0:t.find((t=>t.name===e))})).filter((e=>e)).map((e=>{var t;return ha(ha({},e),{},{pinned:null===n||void 0===n||null===(t=n.pins)||void 0===t||null===(t=t.map((e=>e.toString())))||void 0===t?void 0:t.includes(e.cid.toString())})}))),[null===n||void 0===n?void 0:n.content,null===n||void 0===n?void 0:n.pins,le]);if(!n||"file"===n.type)return null;if(n.path&&z.path&&n.path!==z.path)return null;if("unknown"===n.type){const e=n.path;return a.createElement("div",null,a.createElement(o.x6,{i18nKey:"cidNotFileNorDir",t:t},"The current link isn't a file, nor a directory. Try to ",a.createElement("button",{className:"link blue pointer",onClick:()=>s(e)},"inspect")," it instead."))}if("not-found"===n.type)return a.createElement(Ge,{path:n.path});const m={updateSorting:w,files:n.content||[],pins:n.pins||[],remotePins:l||[],pendingPins:r||[],failedPins:i||[],filesPathInfo:z,selected:le,modalOpen:null!==Z.show,onSelect:(e,t)=>{Array.isArray(e)?re(t?e:[]):re(t?t=>[...t,e]:t=>t.filter((t=>t!==e)))},onShare:e=>de(dn,e),onRename:e=>de(un,e),onRemove:e=>de(pn,e),onSetPinning:e=>de(vn,e),onInspect:me,onRemotePinClick:B,onDownload:ie,onAddFiles:se,onNavigate:E,onMove:N,handleContextMenuClick:ue,onDismissFailedPin:()=>{}};return a.createElement(a.Fragment,null,"list"===ne?a.createElement(Te,m):a.createElement(ze,m),0!==c.length&&a.createElement(ua,{className:"fixed bottom-0 right-0",style:{zIndex:20},animateOnStart:1===c.length,unselect:()=>re([]),remove:()=>de(pn,c),rename:()=>de(un,c),share:()=>de(dn,c),setPinning:()=>de(vn,c),download:()=>ie(c),inspect:()=>me(c[0].cid),count:c.length,isMfs:z.isMfs,size:c.reduce(((e,t)=>e+(t.size||0)),0)}))};return a.createElement("div",{"data-id":"FilesPage",className:"mw9 center"},a.createElement(r.mg,null,a.createElement("title",null,((e,t)=>{const n=[];return e&&n.push(e.realPath),e.isMfs&&n.push(t("app:terms.files")),n.push("IPFS"),n.join(" | ")})(z,X))),a.createElement(R,{autofocus:!0,ref:Q,isOpen:ee.isOpen,translateX:ee.translateX,translateY:ee.translateY,handleClick:ue,isMfs:!!z&&z.isMfs,isUnknown:!(!ee.file||"unknown"!==ee.file.type),pinned:ee.file&&ee.file.pinned,cid:ee.file&&ee.file.cid,onShare:()=>de(dn,[ee.file]),onRemove:()=>de(pn,[ee.file]),onRename:()=>de(un,[ee.file]),onInspect:()=>me(ee.file.cid),onCheckRetrieval:()=>(e=>{M(e),x("/diagnostics/retrieval-check/".concat(e))})(ee.file.cid),onDownload:()=>ie([ee.file]),onDownloadCar:()=>(async e=>{const t=await h(e);window.location.href=t})([ee.file]),onPinning:()=>de(vn,[ee.file]),onPublish:()=>de(yn,[ee.file]),onCopyCid:e=>M(e),isCliTutorModeEnabled:Y,onCliTutorMode:()=>de(gn,[ee.file]),doSetCliOptions:C}),a.createElement(Wn,{files:q,onNavigate:E,onAddFiles:se,onMove:N,onAddByPath:e=>de(fn,e),onAddByCar:e=>de(hn,e),onBulkCidImport:e=>de(bn,e),onNewFolder:e=>de(mn,e),onCliTutorMode:()=>de(gn),handleContextMenu:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ue(...t,!0)}},a.createElement("div",{className:"flex items-center justify-end"},a.createElement("div",{className:"mr3"},a.createElement(Ye,{currentSort:H||{by:"name",asc:!0},onSortChange:w,t:X})),a.createElement("button",{className:"pointer selected-item",onClick:()=>{ae("list"===ne?"grid":"list")},title:X("list"===ne?"switchToGridView":"switchToListView"),"aria-label":X("list"===ne?"switchToGridView":"switchToListView"),style:{height:"24px"}},"list"===ne?a.createElement(Ue.G,{width:"24",height:"24"}):a.createElement(Ue.c,{width:"24",height:"24"})))),q&&"file"!==q.type&&a.createElement("div",{className:"flex items-center justify-between"},a.createElement("div",null,"grid"===ne&&(null===q||void 0===q||null===(t=q.content)||void 0===t?void 0:t.length)>0?a.createElement(oe.A,{className:"pv3 pl3 pr1 bg-white flex-none",onChange:e=>{re(e?q.content.map((e=>e.name)):[])},checked:(null===q||void 0===q||null===(n=q.content)||void 0===n?void 0:n.length)>0&&le.length===q.content.length,label:a.createElement("span",{className:"fw5 f6"},X("selectAllEntries"))}):null)),a.createElement(pe,{t:X,files:q,remotePins:O,pendingPins:k,failedPins:S,doExploreUserProvidedPath:J}),a.createElement(ga,{files:q,onDownload:()=>ie([q]),onClose:ce}),a.createElement(_,{isRoot:z.isMfs&&z.isRoot,isCompanion:!1,isFetching:U,filesExist:!!(q&&q.content&&q.content.length)}),a.createElement(En,pa({done:()=>$({}),root:q?q.path:null,onMove:N,onMakeDir:F,onShareLink:I,onRemove:D,onAddByPath:(e,t)=>y(q.path,e,t),onAddByCar:(e,t)=>{g(q.path,e,t)},onBulkCidImport:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";""===t&&(t=q.path),v(e,t)},onPinningSet:T,onPublish:L,cliOptions:V},Z)),a.createElement(ta,null),a.createElement(s.Ay,{run:G,steps:c.sw.getSteps({t:X,Trans:o.x6}),styles:c.sw.styles,callback:K,continuous:!0,scrollToFirstStep:!0,locale:(0,Ke.Y)(X),showProgress:!0}))}))))},86533:(e,t,n)=>{n.d(t,{A:()=>f});var a=n(65043),l=n(65173),r=n.n(l),i=n(30446),o=n(82516),s=n(36506),c=n(16470);const m=["t","tReady","onCancel","onChange","onInputChange","mustBeDifferent","onSubmit","className","Icon","submitText","validate","defaultValue","description","title","error","loading"];function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},d.apply(null,arguments)}function u(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class p extends a.Component{constructor(e){super(e),u(this,"onChange",(e=>{let t=e.target.value;this.props.onChange&&(t=this.props.onChange(t)),this.props.onInputChange&&this.props.onInputChange(t),this.setState({value:t})})),u(this,"onSubmit",(()=>{(!this.props.validate||this.props.validate&&this.props.validate(this.state.value))&&this.props.onSubmit(this.state.value)})),u(this,"onKeyPress",(e=>{"Enter"===e.key&&this.onSubmit()})),this.state={value:e.defaultValue}}get inputClass(){return!this.props.validate||""===this.state.value||this.props.mustBeDifferent&&this.state.value===this.props.defaultValue?"":this.props.error?"b--red-muted focus-outline-red":this.props.validate(this.state.value)?"b--green-muted focus-outline-green":"b--red-muted focus-outline-red"}get isDisabled(){return!!(""===this.state.value||this.props.mustBeDifferent&&this.state.value===this.props.defaultValue)||!!this.props.validate&&!this.props.validate(this.state.value)}render(){const e=this.props,{t:t,tReady:n,onCancel:l,onChange:r,onInputChange:c,mustBeDifferent:u,onSubmit:p,className:f,Icon:h,submitText:b,validate:g,defaultValue:v,description:y,title:x,error:w,loading:E}=e,N=function(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}(e,m);return a.createElement(o.aF,d({},N,{className:f,onCancel:l}),a.createElement(o.cw,{title:x,Icon:h},y&&"object"===typeof y&&y,y&&"string"===typeof y&&a.createElement("p",{className:"charcoal w-90 tl center"},y),a.createElement("input",{onChange:this.onChange,onKeyPress:this.onKeyPress,value:this.state.value,required:!0,className:"input-reset charcoal ba b--black-20 br1 pa2 mb2 db w-90 center focus-outline modal-input ".concat(this.inputClass),type:"text"})),a.createElement(o.NS,null,a.createElement(i.A,{className:"ma2 tc",bg:"bg-gray",onClick:l},t("actions.cancel")),a.createElement(i.A,{className:"ma2 tc",bg:"bg-teal",disabled:this.isDisabled,onClick:this.onSubmit},b)),E&&a.createElement("div",{className:"flex items-center justify-center absolute top-0 left-0 right-0 bottom-0"},a.createElement("div",{className:"absolute top-0 left-0 right-0 bottom-0 bg-light-gray o-80"}),a.createElement(s.A,{style:{width:"50%",margin:"auto"}})))}}u(p,"propTypes",{onCancel:r().func.isRequired,onSubmit:r().func.isRequired,onChange:r().func,onInputChange:r().func,title:r().string.isRequired,Icon:r().func.isRequired,description:r().node,submitText:r().string,validate:r().func,defaultValue:r().string,mustBeDifferent:r().bool,loading:r().bool}),u(p,"defaultProps",{className:"",defaultValue:"",submitText:"Save",mustBeDifferent:!1});const f=(0,c.CI)("app")(p)}}]);
//# sourceMappingURL=415.90f5b251.chunk.js.map